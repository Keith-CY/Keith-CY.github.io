<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8">
<title>EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>


    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="EzCook" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-21T18:27:49.000Z">2016-08-22</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 388 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/22/configuring-eslint/">Configuring ESLint</a>
            
        </h1>
        <div class="content">
            <ol>
<li>Configuration Comments - use JS comments to embed configuration information directly into a file.<p></p></li>
<li>Configuration Files - use a JS, JSON, or YAML file to specify configuration information for an entire directory and all of its subdirectories. This can be in the form of an <code>.eslintrc</code> file or an <code>eslintConfig</code> field in a <code>package.json</code> file, both of which ESLint will look for and reed automatically, or you can specify a configuration file on the command line.</li>
</ol>
<h3 id="Specifying-Parser-Options"><a href="#Specifying-Parser-Options" class="headerlink" title="Specifying Parser Options"></a>Specifying Parser Options</h3><p></p><p>ESLint allows you to specify the JS language options you want to support. By Default, ESLint support only ES5 syntax. You can override that setting to enable support for ES6 and 7 as well as JSX by using parser options.</p>
<p>Parser options are set in your <code>.eslintrc</code> file by using the <code>parserOptions</code> property. The available options are:</p>
<ul>
<li><code>ecmaVersion</code> - set to 3, 5(default), 6 or 7 to specify the version of ECMAScript you want to use.</li>
<li><code>sourceType</code> - set to <code>&quot;script&quot;</code> (default) or <code>&quot;module&quot;</code> if your code is in ECMAScript modules.</li>
<li><p><code>emcaFeatures</code> - an object indicating which additional language features you’d like to use:</p>
<pre><code>*   `globalReturn` - allow `return` statements in the global scope.
</code></pre><ul>
<li><code>impliedStrict</code> - enable global <code>strict mode</code> (if <code>ecmaVersion</code> is 5 or greater)</li>
<li><code>jsx</code>: enable <code>JSX</code></li>
<li><code>experimentalObjectRestSpread</code> - enable support for the experimental <code>object rest/spread properties</code></li>
</ul>
</li>
</ul>
<p>An example:</p>
<pre><code>{
  &quot;parserOptions&quot;:{
    &quot;emcaVersion&quot;: 6,
    &quot;sourceType&quot;: &quot;module&quot;,
    &quot;ecmaFeatures&quot;: {
      &quot;jsx&quot;: true
    }
  },
  &quot;rules&quot;:{
    &quot;semi&quot;: 2
  }
}
`&lt;/pre&gt;

### Specifying Parser

By Default, ESLint uses `Espree` as its parser. You can optionally specify that a different parser should be used in your configuration file so long as the parser meets the following requirements:
</code></pre><ul>
<li>It must be an npm module installled locally;</li>
<li>It must have an Esprima-compatible interface</li>
<li><p>It must produce Esprima-compatible AST and token objects.</p>
<h3 id="Specifying-ENV"><a href="#Specifying-ENV" class="headerlink" title="Specifying ENV"></a>Specifying ENV</h3></li>
<li><p>browser</p>
</li>
<li>node</li>
<li>commonjs</li>
<li>es6</li>
<li><p>mocha</p>
<pre>`{
  "env":{
    "browser": true,
    "node": true
  }
}

### Configuring Rules

ESLint comes with a large number of rules, you can modify which rules your project use either using configuration comments or configuration files. To change a rules setting, you must set the rule ID equal to one of these values: 

- `"off"` or `0` to turn rule off.
- `"warn"` or `1` to turn the rule as a warning(doesn't affect exit code)
- `"error"` or `2` to turn the rule on as an error(exit code is 1 when triggered)

### Demo

`</pre>

<p>npm install -g eslint</p>
<p><pre>`</pre></p>
</li>
</ul>
<p>eslint –init<br><code>``
生成</code>.eslintrc.js`</p>
<p>但是这个文件最好手动生成</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-20T23:12:50.000Z">2016-08-21</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 559 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/21/js-e5-bc-80-e5-8f-91-e5-b7-a5-e5-85-b7/">JS 开发工具</a>
            
        </h1>
        <div class="content">
            <p>开发工具是让开发人员工作更轻松的一些软件, 传统上包括集成开发环境, 代码检查工具, 编译器, 调试工具和性能测试工具</p>
<p>但是 JS 是一种动态语言, 伴随他动态本质而来的是对更多运行时开发者工具的需求.</p>
<h4 id="Quick-List"><a href="#Quick-List" class="headerlink" title="Quick List"></a>Quick List</h4><ul>
<li>Atom &amp; Atom-ternjs</li>
<li>Chrome DevTools</li>
<li>PageSpeed Insights</li>
<li>BrowserSycn</li>
<li>TraceGL</li>
<li>ironNode</li>
<li>ESLint</li>
<li>Babel</li>
<li>React</li>
<li>Webpack + Hot Module Replacement</li>
<li>Redux + Redux DevTools</li>
</ul>
<p>关于工具, 主要是编辑器和运行时环境(比如浏览器)</p>
<p>主要用 Atom, 需要 atom-ternjs 来开启 JavaScript 智能识别</p>
<p>很多很棒的 <a href="https://medium.com/@satya164/supercharged-javascript-development-in-atom-ea034e22eabc#.a2b8sthbw" target="_blank" rel="noopener">Atom 插件</a></p>
<p>调试器: Chrome DevTools, 注意其 flame charts 和 dominators view 功能</p>
<p>性能审查: <a href="https://www.youtube.com/watch?list=PLOU2XLYxmsILKwwASNS0xgfcmakbK_8JZ&amp;v=bDUDuQy3R7Y" target="_blank" rel="noopener">PageSpeed Insights</a></p>
<p>BrowserSync是一款测试响应式布局非常好用的工具, 可以一次模拟多种浏览器(电脑, 平板, 手机)<br>可以监视文件, 并在文件修改的时候自动重载同步刷新浏览器, 像滚动, 点击, 表单交互等动作也会跨设别同步.</p>
<p><a href="https://www.youtube.com/watch?v=heNWfzc7ufQ" target="_blank" rel="noopener">视频链接</a></p>
<p>TraceGL 是一种运行时调试工具, 可以让你在软件中的方法实时调用时观察他们, 而不是手动逐步跟踪代码</p>
<p><a href="https://www.youtube.com/watch?v=heNWfzc7ufQ" target="_blank" rel="noopener">视频链接</a></p>
<p>代码检查: ESLint 可配置性特别强, 每一个选项都可以设置开启或禁用, 甚至给他们添加参数. 可以创建自己的规则, 支持插件</p>
<p>Babel 是一种编译器, 可以让现在的 JS 代码使用 ES6+ 尚未支持的特性, JSX 等, 工作原理是讲代码转换为等价的 ES5.</p>
<p><a href="https://medium.com/javascript-scene/how-to-use-es6-for-isomorphic-javascript-apps-2a9c3abe5ea2" target="_blank" rel="noopener">文章链接</a></p>
<p>Webpack 会将模块和以来打包成针对浏览器的静态资源, 他支持大量有趣的特性, 比如模块热拔插, 可以让当前浏览器中的代码在你修改文件的时候自动更新, 而不用刷新页面. 模块热拔插</p>
<p><a href="https://github.com/cloverfield-tools/universal-react-boilerplate" target="_blank" rel="noopener">参考资料</a></p>
<p>React: 不算开发者工具</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-20T08:27:34.000Z">2016-08-20</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 759 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/20/e9-83-a8-e7-bd-b2react-redux-e7-9a-84-web-e5-bc-80-e5-8f-91-e7-8e-af-e5-a2-83/">部署React + Redux 的 Web 开发环境</a>
            
        </h1>
        <div class="content">
            <p>好的部署需要做到两点:<br>1. 性能优化: 包括代码执行速度, 页面载入速度<br>2. 自动化: 减少重复工作</p>
<p>使用 React+Redux 的时候往往会用到其调试工具 Redux DevTools, 在手动配置 DevTools 时需要针对 Store 和 Component 进行一些配置, 然而这些都是为了方便调试的, 生产环境下我们不希望加入这些东西, 所以建议从代码上隔离 development 和 production 环境:</p>
<pre><code>containers/
  Root.js
  Root.dev.js
  Root.prod.js
  ...

store/
  index.js
  store.dev.js
  store.prod.js
`&lt;/pre&gt;

同时采用单独的入口文件, 比如上面的 containers/Root.js, 按需要加载不同环境的代码

&lt;pre&gt;`if (process.env.NODE_ENV === &apos;production&apos;){
  module.exports = require(&apos;./Root.prod&apos;);
} else {
  module.exports = require(&apos;./Root.dev&apos;);
}
`&lt;/pre&gt;

有一个细节需要注意: ES6 语法不支持在 if 中书写 import 语句, 所以这里采用了 CommonJS 的模块引入方法 require.

另一个需要注意的地方是按需要 import, 否则可能在打包的时候引入不必要的代码

使用 webpack 进行打包工作

&lt;pre&gt;`webpack --config webpack.config.prod.js --progress
`&lt;/pre&gt;

注意要为不同的环境准备不同的 webpack 配置文件. 比如 `webpack.config.dev.js` 和 `webpack.config.prod.js` . 看一下比较关键的配置选项

### devtools

启用 source-map, 这样 webpack 会生成两个包
- bundle.js
- bundle.js.map
把用于定位源码的 source map 分离出去, 减少 bundle.js 的体积

source-map 只会在浏览器 devtools 激活时加载, 并不会影响正常页面的饿加载速度.

### plugins

&lt;pre&gt;`plugins:[
  new webpack.optimize.UglifyJsPlugin({
    compress:{
      warning: false
    }
  }),
  new webpack.optimize.DedupePlugin(),
  new webpack.optimize.OccurenceOrderPlugin()
]
`&lt;/pre&gt;

### 不要忽视 NODE_ENV

NODE_ENV 其实就是一个环境变量, 在 Node 中 可以通过`process.env.NODE_ENV`获取, 目前大家汪汪用这个变量区分当前是 development 还是 production.

通过 webpack 的 DefinePlugin 设置环境变量:

&lt;pre&gt;`plugins:[
  ...
  new webpack.DefinePlugin({
    &apos;process.env.NODE_ENV&apos;: JSON.stingify(&apos;production&apos;)
  })
]

### 添加 hash
前端公认的 Best Practice 就是给资源打上 hash 标签, 这对缓存静态资源很有用

1\. 给 bundle.js 添加 hash 标签
`&lt;/pre&gt;

output{
  path: ...
  filename: &apos;bundle.[hash].js&apos;
}

&lt;pre&gt;`使用 html-webpack-plugin 这个插件自动生成带有
`&lt;/pre&gt;

&amp;lt;script src=&apos;bundle.[hash].js&gt;&amp;lt;/script&gt;&apos;的 html 文件

&lt;pre&gt;`配置如下:
`&lt;/pre&gt;

plugins:[
  ...
  new HtmlWebpackPlugin({
    title:&apos;html title&apos;,
    template:&apos;./template.html&apos;,
    favicon: &apos;./static/images/logo.ico&apos;
  })
]

&lt;pre&gt;`配置 template.html
`&lt;/pre&gt;

&lt;!DOCTYPE html&gt;
&amp;lt;html&gt;
&amp;lt;head&gt;
  &lt;meta charset=&quot;utf-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1.0&quot;&gt;
&amp;lt;/head&gt;
&amp;lt;body&gt;

&lt;div id=&quot;react-container&quot;&gt;&lt;/div&gt;

&amp;lt;/body&gt;
&amp;lt;/html&gt;

&lt;pre&gt;`
如果需要在 React Component 中添加图片, 建议采用
`&lt;/pre&gt;

import LOGO.png from &apos;./static/images/logo.png&apos;
&amp;lt;img src={LOGO.png} alt=&quot;&quot; /&gt;

&lt;pre&gt;`使用 import 或 require 可以让 webpack 对图片进行打包

使用 file-loader 可以对图片添加 hash 标签然后返回相应的 URL
</code></pre><p>module:{<br>  loaders:[<br>    {<br>      test: /&#46;(png|jpg),<br>      loader:”file?name=[hash].[ext]”<br>    }<br>  ]<br>}<br>```</p>
<h3 id="引入-CSS"><a href="#引入-CSS" class="headerlink" title="引入 CSS"></a>引入 CSS</h3><p>可以直接在 js 文件中 <code>require(&#39;./foo.css&#39;)</code>, 然后使用 style-loader 和 css-loader 进行处理, 最终效果是将 css 嵌入到 HTML 的 style 标签中, 这样就不需要使用 hash</p>
<p>CSS 较大的话, 可以考虑使用 extract-text-webpack-plugin 插件将 CSS 合并后独立为一个文件, 并自定在页面加载的时候添加 link 标签</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-19T05:58:43.000Z">2016-08-19</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 60 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/19/webpack-e5-b8-b8-e7-94-a8-plugin-e5-92-8c-loader/">Webpack 常用 Plugin 和 Loader</a>
            
        </h1>
        <div class="content">
            <h3 id="常用Loader"><a href="#常用Loader" class="headerlink" title="常用Loader"></a>常用Loader</h3><p>html 相关</p>
<pre><code>html-loader
`&lt;/pre&gt;

css 相关

&lt;pre&gt;`style-loader
css-loader
autoprefixer-loader
sass-loader
`&lt;/pre&gt;

js 相关

&lt;pre&gt;`babel-loader
babel-core
babel-preset-es2015
babel-preset-react
babel-preset-stage3
eslint-loader
`&lt;/pre&gt;

### 常用插件Plugin

#### config 类

&lt;pre&gt;`NormalModuleReplacementPlugin
ContextReplacementPlugin
IgnorePlugin
PrefetchPlugin
`&lt;/pre&gt;

#### Optimize

&lt;pre&gt;`DedupePlugin
LimitChunkCountPlugin
OccurenceOrderPlugin
UglifyJsPlugin
CommonsChunkPlugin
`&lt;/pre&gt;

#### 其他

&lt;pre&gt;`HotModuleReplacementPlugin
NoErrorPlugin
ProgressPlugin
HtmlWebpackPlugin
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-18T21:29:36.000Z">2016-08-19</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 minutes read (About 1442 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/19/immutablejs-introduction/">ImmutableJS Introduction</a>
            
        </h1>
        <div class="content">
            <p>Immutable data cannot be changed once created, leading to much simpler application development, no defensive copying, and enabling advanced memoization and change detection techniques with simple logic. Persistent data presetns a mutative API which does not update the data in-place, but instead always yields new updated data.</p>
<p>Immutable.js provides many Persistent Immutable data structures including: <code>List</code>, <code>Stack</code>, <code>Map</code>, <code>OrderedMap</code>, <code>Set</code>, <code>OrderedSet</code> and <code>Record</code>.</p>
<p>These data structures are highly efficient on modern JavaScript VMs by using structural sharing via ‘hash maps tries’ and ‘vector tries’ as popularized by Clojure and Scala, minimizing the need to copy or cache data.</p>
<p>Immutable also provides a lazy <code>Seq</code>, allowing efficient chaining of collection methods like <code>map</code> and <code>filter</code> without creating intermediate representations. Create some <code>Seq</code> with <code>Range</code> and <code>Repeat</code>.</p>
<h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><p><code>npm install Immutable</code></p>
<p><code>var Immutable = require(&#39;immutable&#39;);
  var map1 = Immutable.Map({a:1,b:2,c:3});
  var map2 = map1.set(&#39;b&#39;,50);
  map1.get(&#39;b&#39;); //2
  map2.get(&#39;b&#39;); //50</code></p>
<h3 id="The-case-for-Immutability"><a href="#The-case-for-Immutability" class="headerlink" title="The case for Immutability"></a>The case for Immutability</h3><p>Much of what makes application development difficult is tracking mutation and maintaining state. Development with immutable data encourages you to think differently about how data flows through your application.</p>
<p>Subscribing to data event throughout your application.</p>
<p>Immutable data never change.</p>
<p>Immutable collections should be treated as <em>value</em> rather than <em>object</em>. While objects represents some thing which could change over time, a value represents the state of that thing at a particular instance of time. This principle is most important to understanding the appropriate use of immutable data. In order to treat Immutable.js collections as values, it’s important to use the <strong>Immutable.is()</strong> function or <strong>.equals()</strong> method to determine value equality instead of <code>===</code> operator which determines object reference identity.</p>
<p><code>var map1 = Immutable.Map({a:1,b:2,c:3});
  var map2 = map1.set(&#39;b&#39;,2);
  assert(map1.equals(map2) === true);
  var map3 = map1.set(&#39;b&#39;,50);
  assert(map1.equals(map3) === false);</code></p>
<p><strong>Note</strong>: As a performance optimization <strong>Immutable</strong> attempts to return the existing collection when an operation would result in an identical collection, allowing for using <code>===</code> reference equality to determine if something definitely has not changed. This can be extremely useful when used within memoization function which would prefer to re-run the function if a deeper equality check could potentially be more costly. The <code>===</code> equality check is also used internally by <strong>Immutable.js</strong> and <code>equals()</code> as a performance as a performance optimization.</p>
<p>If an object is immutable, it can <strong>be ‘copied’ simply by marking another reference</strong> to it instead of copying the entire object. Because a reference is much smaller than the object itself, this results in memory savings and a potential boost in execution speed for programs which rely on copies(such as an undo-stack).</p>
<p><code>var map1 = Immutable.Map({&#39;a&#39;:1,&#39;b&#39;:2,&#39;c&#39;:3});
  var clone = map1;</code></p>
<h3 id="JavaScript-first-API"><a href="#JavaScript-first-API" class="headerlink" title="JavaScript-first API"></a>JavaScript-first API</h3><p>While <code>immutable</code> is inspired by Clojure, Scala, Haskell and other functional programming environments, it’s designed to bring these powerful concepts to JavaScript, and therefore has an Object-Oriented API that closely mirrors that of <strong>ES6 Array, Map, and Set</strong>.</p>
<p>The difference for the immutable collections is that methods which would mutate the collection, like <code>push</code>, <code>set</code>, <code>unshift</code>, or <code>splice</code> instead of return a new immutable collection. Methods which return new array like <code>slice</code> or <code>concat</code> instead return new immutable collections.</p>
<p><code>var list1 = Immutable.List.of(1,2);
  var list2 = list1.push(3,4,5);
  var list3 = list2.unshift(0);
  var list4 = list1.concat(list2,list3);
  assert(list1.size === 2);
  assert(list2.size === 5);
  assert(list3.size === 6);
  assert(list4.size === 13);
  assert(list4.get(0) === 1);</code></p>
<p>Almost all of the methods on <strong>Array</strong> will be found in similar form on <strong>Immutable.List</strong>, those of <strong>Map</strong> found on <strong>Immutable.Map</strong> and those of <strong>Set</strong> found on<strong>Immutable.Set</strong>, including collection operation like <strong>forEach()</strong>, and <strong>map()</strong>.</p>
<p><code>var alpha = Immutable.Map({a:1,b:2,c:3,d:4});
  alpha.map((v,k) =&amp;gt; k.toUpperCase()).join();
  // &#39;A,B,C,D&#39;</code></p>
<h3 id="Accepts-raw-JavaScript-objects"><a href="#Accepts-raw-JavaScript-objects" class="headerlink" title="Accepts raw JavaScript objects"></a>Accepts raw JavaScript objects</h3><p>  ‘immutable’ accepts plain JavaScript Arrays and Objects anywhere a mehtod expects an <strong>Iterable</strong> with no performance penalty.</p>
<p><code>var map1 = Immutable.Map({a:1,b:2,c:3,d:4});
  var map2 = Immutable.Map({c:10,a:20,t:30});
  var obj = {d:100,o:200,g:300};
  var map3 = map1.merge(map2,obj);
  // Map {a:20,b2,c:10,d:100,t:30,o:200,g:300}</code></p>
<p><strong>Immutable</strong> can treat any JavaScript Array or Object as an Iterable. You can take advantage of this in order to get sophisticated collection methods on JavaScript Objects, which otherwise have a very sparse native API.</p>
<p><code>var myObject = {a:1,b:2,c:3};
  Immutable.Seq(myObject).map(x=&amp;gt;x*x).toObject();
  // {a:1,b:4,c:9};</code></p>
<p>Keep in Mind, when using JS objects to construct Immutable Maps, that JS Object properties are always <strong>strings</strong>, even if written in a quote-less shorthand, while Immutable Map accept keys of any type.</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  var obj = &#123;1: &amp;#039;one&amp;#039;&#125;;</div><div class="line">  Object.keys(obj); // [&amp;#039;1&amp;#039;]</div><div class="line">  obj[1]; // &amp;#039;one&amp;#039;</div><div class="line">  obj[&amp;#039;1&amp;#039;]; // &amp;#039;one&amp;#039;</div><div class="line"></div><div class="line">var map = Immutable.fromJS(obj);</div><div class="line">  map.get(&amp;#039;1&amp;#039;); // &amp;#039;one&amp;#039;</div><div class="line">  map.get(1); // undefined</div></pre></td></tr></table></figure>
<p>Property access for JS Object first converts the key to a string, but since Immutable Map keys can be of any type the argument to <code>get()</code> is not altered.<br>  Namely Immutable Map will treat ‘1’ and 1 differently.</p>
<h3 id="Converts-Back-to-Raw-JS-Obejcts"><a href="#Converts-Back-to-Raw-JS-Obejcts" class="headerlink" title="Converts Back to Raw JS Obejcts"></a>Converts Back to Raw JS Obejcts</h3><p>  All <strong>Immutable</strong> Iterable can be converted to plain JS Arrays and Objects shallowly with <code>toArray()</code> and <code>toObject()</code> or deeply with <code>toJS()</code>. All Immutable Iterables also implement <code>toJSON()</code> allowing them to be passed to <code>JSON.stringify()</code> directly.</p>
<p><code>var deep = Immutable.Map({a:1,b:2,c:Immutable.List.of(3,4,5)});
  deep.toObject() // {a:1,b:2,c:List [3,4,5]}
  deep.toArray() // [1,2,List [3,4,5]]
  deep.toJS() // {a:1,b:2,c:[3,4,5]}
  JSON.stringify(deep) // &#39;{&quot;a&quot;:1,&quot;b&quot;,&quot;c&quot;:[3,4,5]}&#39;</code></p>
<h3 id="Embraces-ES6"><a href="#Embraces-ES6" class="headerlink" title="Embraces ES6"></a>Embraces ES6</h3><p>  <code>Immutable</code> takes advantage of features added to JS ES6, the latest standard version of ECMAScript, including <code>Interators</code>,<code>Arrow Function</code>, <code>Classes</code>, and <code>Modules</code>.</p>
<h3 id="Nested-Structures"><a href="#Nested-Structures" class="headerlink" title="Nested Structures"></a>Nested Structures</h3><p>The collections in <code>immutable</code> are intended to be nested, allowing for deep trees of data, similar to JSON</p>
<p><code>var nested = Immutable.fromJS({a:{b:{c:[3,4,5]}}})
  // Map{ a: Map { b: Map { c: List [3,4,5]}}}</code><br>  A few power-tool allow for reading and operating on nested data. The most useful are <code>mergeDeep</code>, <code>getIn</code>, <code>setIn</code> and <code>updateIn</code> found on <code>List</code>, <code>Map</code> and <code>OrderedMap</code></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">  var nested2 = nested.mergeDeep(&#123;a:&#123;b:&#123;d:6&#125;&#125;&#125;)</div><div class="line">  // Map &#123;a: Map &#123; b: &#123; c: List [3,4,5], d: 6&#125;&#125;&#125;</div><div class="line"></div><div class="line">nested2.getIn([&amp;#039;a&amp;#039;,&amp;#039;b&amp;#039;,&amp;#039;d&amp;#039;]); //6</div><div class="line"></div><div class="line">var nested3 = nested2.updateIn([&amp;#039;a&amp;#039;,&amp;#039;b&amp;#039;,&amp;#039;d&amp;#039;], value =&amp;gt; value + 1); d =&amp;gt; 7</div><div class="line"></div><div class="line">var nest4 = nested3.updateIn([&amp;#039;a&amp;#039;,&amp;#039;b&amp;#039;,&amp;#039;c&amp;#039;], list =&amp;gt; list.push(6)); c =&amp;gt; List [3,4,5,6]</div></pre></td></tr></table></figure>
<h3 id="Lazy-Seq"><a href="#Lazy-Seq" class="headerlink" title="Lazy Seq"></a>Lazy Seq</h3><p>  <strong>Seq</strong> describes a lazy operation, allowing them to efficiently chain use all the Iterable methods.(such as map and filter)</p>
<p><strong>Seq is immutable</strong> – Once a Seq is created it cannot be changed, appended to, rerranged or otherwise modified. Instead, any mutative method called on a Seq will return a new Seq.</p>
<p><strong>Seq is lazy</strong> – Seq does as little work as necessary to respond to any method call.</p>
<p>Once the Seq is used, it performs only the work necessary.</p>
<p>Any collection can be converted to a lazy Seq with <code>toSeq()</code>.</p>
<p><code>var seq = Immutable.Map({a:1,b:2,c:3}).toSeq();</code></p>
<p>Seq allow for the efficient chaining of sequence operations, especially when converting to a different concrete type(such as to a JS Object)</p>
<p><code>seq.flip().map(k =&amp;gt; k.toUpperCase()).flip().toObject();
  // Map {A: 1, B:2, C:3}</code></p>
<h3 id="Equality-treats-Collection-as-Data"><a href="#Equality-treats-Collection-as-Data" class="headerlink" title="Equality treats Collection as Data"></a>Equality treats Collection as Data</h3><p><strong>Immutable</strong> provides equality which treats immutable data structures as pure data, performing a deep equality check if necessary.</p>
<p><code>var map1 = Immutable.Map({a:1,b:1,c:1});
  var map2 = Immutable.Map({a:1,b:1,c:1});
  assert(map1 !== map2) // two different instance, not same address
  assert(Immutable.is(map1,map2)); // have equivalent values
  assert(map1.equals(map2)); // alternatively use the equals methods.</code></p>
<p><strong>Immutable.is()</strong> uses the same measure of equality as <strong>Object.is</strong> including if both are immutable and all keys and values are equal using the same measure of equality.</p>
<h3 id="Batching-Mutations"><a href="#Batching-Mutations" class="headerlink" title="Batching Mutations"></a>Batching Mutations</h3><p>  Applying a mutation to create a new immutable object results in some overhead, which can add up to a minor performance penalty. If you need to apply a series of mutations locally before returning, <strong>Immutable</strong> gives you the ability to create a temporary mutable(transient) copy of a collection and apply a batch of mutations in a performance manner by using <code>withMutations</code>. In fact, this is exactly how <code>Immutable</code> applies complex mutations itself.</p>
<p>As an example, building <code>list2</code> results in the creation of 1 , not 3, new immutable Lists<br>  <code>var list1 = Immutable.List.of(1,2,3);
  var list2 = list1.withMutations(function(list){
    list.push(4).push(5).push(6)
  });
  assert(list1.size === 3);
  assert(list2.size === 6);</code></p>
<p><strong>Note</strong>: <strong>Immutable</strong> also provides <code>asMutable</code> and <code>asImmutable</code>, but only encourages their use when <code>withMutations</code> will not suffice. Use caution to not return a mutable copy could result in undesired behavior.</p>
<p><strong>important</strong>: Only a select few method can be used in <code>withMutations</code> including <code>set</code>, <code>push</code>, <code>pop</code>. These methods can be applied directly against a persistent data-structure where other methods like <code>map</code>,<code>filter</code>,<code>sort</code>and <code>splice</code> will always return new immutable data-structure and never mutate a mutable collection.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-16T07:08:29.000Z">2016-08-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 76 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/16/redux-e6-90-ad-e9-85-8d-react/">Redux 搭配 React</a>
            
        </h1>
        <div class="content">
            <p>第一步是初始化 react 组件</p>
<pre><code>getInitialState(){
  return{
    item: store.getState()
  }
}
`&lt;/pre&gt;

第二步是在组件 render 后调用 subscribe 函数, 每次 redux 发生 dispatch 的时候都要调用 react 的 setState

&lt;pre&gt;`componentDidMount(){
  var unsubscribe = store.subscribe(this.onChange)
}
onChange(){
  this.setState({
    item: store.getState()
  })
}
</code></pre><p>React 会根据 State 的变化重新 render 组件<br>this.state.item.todos.map()</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-15T23:32:03.000Z">2016-08-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 294 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/16/commonchunks-e6-8f-92-e4-bb-b6/">CommonChunks 插件</a>
            
        </h1>
        <div class="content">
            <p>作用就是提取代码中的公共模块, 然后将公共模块打包到一个独立的文件中, 以便在其他的入口和模块中使用.</p>
<pre><code>// in main.js
var a = require(&apos;./a&apos;);
a.sayHello();

var b = require(&apos;./b&apos;);
b.sayHello();

var c = require(&apos;./c&apos;);
c.sayHello()
`&lt;/pre&gt;

&lt;pre&gt;`// in main2.js
var a = require(&apos;./a&apos;);
a.sayHello();

var b = require(&apos;./b&apos;);
b.sayHello();
`&lt;/pre&gt;

a, b, c 和之前一样, 只有一个 sayHello 方法.

打包后看到`bundle.main.js` 和`bundle.main2.js` 中分别包含了 a, b, c 三个模块, 其中 a, b 是要使用`CommonChunksLoader` 提取出来的公共模块.

### 配置 CommonChunksLoader

&lt;pre&gt;`var webpack = require(&apos;webpack&apos;);
module.exports = {
  entry:{
    main1: &apos;./main&apos;,
    main2: &apos;./main2&apos;
  },
  output:{
    filename: &apos;bundle.[name].js&apos;
  },
  plugins:[
    new webpack.optimize.CommonsChunkPlugin(&apos;common.js&apos;,[&apos;main1&apos;,&apos;main2&apos;])
  ]
} ;
`&lt;/pre&gt;

第一行中, 添加 webpack 引用, 然后添加`plugins` 选项, 引用`webpack.optimize.CommonsChunkPlugin` 来提取公共模块, 参数`common.js` 表示公共模块的文件名, 后面的数组表示依赖这个模块的入口文件.

重新打包后, 生成三个文件

&lt;pre&gt;`bundle.main1.js,
bundle.main2.js
common.js
</code></pre><p>其中 <code>bundle.main1.js</code> 只包含了<code>c</code>模块, <code>bundle.main2.js</code>则没包含任何模块.</p>
<p>当然, 生成了<code>common.js</code> 还需要在 html 中进行引用, 而且要先于 main1, main2</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-15T21:00:34.000Z">2016-08-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 188 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/16/webpack-e5-8f-91-e5-b8-83-e9-85-8d-e7-bd-ae/">Webpack 发布配置</a>
            
        </h1>
        <div class="content">
            <h3 id="单文件模式"><a href="#单文件模式" class="headerlink" title="单文件模式"></a>单文件模式</h3><pre><code>// 新建 webpack.production.config.js
// in package.json
&quot;deploy&quot;:&quot;NODE_EVN=production webpack -p -config webpack.production.config.js&quot;
// in web.production.config.js
// 和开发环境不同之处在于入口和出口. 相应的在 HTML 和 JS 源也要进行修改

var path = require(&apos;path&apos;)
var node_modules_dir = path.resolve(__dirname, &apos;node_modules&apos;)

module.exports = {
  entry:[
    &apos;babel-polyfill&apos;,
    path.resolve(__dirname, &apos;app/main.js&apos;)
  ],
  output:{
    path: path.resolve(__dirname, &apos;build&apos;),
    filename: &apos;app.js&apos;
  },
  module:{
    loaders:[
      {
        ...
      }
    ]
  }
}
`&lt;/pre&gt;

### 多文件模式

库最好不要打包, 因为一般库都不会改动, 所以 load 一次就够了.

对库进行分离

&lt;pre&gt;`// in webpack.production.config.js
var path = require(&apos;path&apos;)
var webpack = require(&apos;webpack&apos;)
var node_modules_dir = path.resolve(__dirname, &apos;node_modules&apos;)

module.exports = {
  entry:{
    app: [path.resolve(__dirname, &apos;app/main.js&apos;)],
    react: [&apos;babel-polyfill&apos;,&apos;react&apos;,&apos;react-dom&apos;]
  },
  output:{
    path: path.resolve(__dirname, &apos;build&apos;),
    filename: &apos;app.js&apos;
  },
  module:{
    loaders:[
      ...
    ]
  },
  plugins:[
    new webpack.optimize.CommonsChunkPlugin(&apos;react&apos;,&apos;react.js&apos;)
  ]
}
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-15T20:02:12.000Z">2016-08-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 95 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/16/webpack-e9-85-8d-e7-bd-ae-reactbabel/">Webpack 配置 React/babel</a>
            
        </h1>
        <div class="content">
            <h3 id="安装-react"><a href="#安装-react" class="headerlink" title="安装 react"></a>安装 react</h3><pre><code>npm install --save react react-dom
`&lt;/pre&gt;

### 安装 babel-loader

&lt;pre&gt;`npm install --save-dev babel-loader babel-core babel-preset-es2015 babel-preset-react babel-preset-stage-2 
// 支持 ES2015, JSX, ES7
`&lt;/pre&gt;

&lt;pre&gt;`npm install --save polyfill
`&lt;/pre&gt;

&lt;pre&gt;`npm install --save babel-runtime
npm install --save-dev babel-plugin-transform-runtime
// 减少打包时候的重复代码
`&lt;/pre&gt;

### 配置 babel

&lt;pre&gt;`// 在入口添加 polyfill
entry:[
  &apos;babel-polyfill&apos;,
  &apos;webpack/hot/dev-server&apos;,
  &apos;webpack-dev-server/client?http://localhost:8080&apos;
]
`&lt;/pre&gt;

添加`.babalrc`

&lt;pre&gt;`{
  &quot;presets&quot;:[
    &quot;es2015&quot;,
    &quot;react&quot;,
    &quot;stage-2&quot;
  ],
  &quot;plugins&quot;:[
    &quot;transform-runtime&quot;
  ]
}
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-14T21:33:05.000Z">2016-08-15</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 289 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/15/webpack-dev-server/">Webpack Dev Server</a>
            
        </h1>
        <div class="content">
            <p>The webpack-dev-server is a little node.js Express server, which uses the <code>webpack-dev-middleware</code> to serve a webpack bundle. It also has a little runtime which is connected to the server via <code>Socket.IO</code>.</p>
<p>Let’s say you have the following config file(<code>webpack.config.js</code>)</p>
<pre><code>var path = require(&apos;path&apos;);
module.exports = {
  entry:{
    app:[&apos;./app/main.js&apos;]
  },
  output:{
    path: path.resolve(__dirname, &apos;build&apos;),
    publicPath:&apos;/assets/&apos;,
    filename: &apos;bundle.js&apos;
  },
}
`&lt;/pre&gt;

You have an `app` folder with your initial entry point that webpack will bundle into a `bundle.js` file in the `build` folder.

### Content Base

The webpack-dev-server will serve the files in the **current directory**, unless you configure a specific content base.

&lt;pre&gt;`webpack-dev-server --content-base build/
`&lt;/pre&gt;

it will serve you `build` folder.

This modified bundle is served from memory at the relative path specified in `publicPath`. Namely your bundle will be available as `localhost:8080/assets/bundle.js`

### Automatic Refresh

The webpack-dev-server supports multiple modes to automatic refresh pages:
</code></pre><ul>
<li>Iframe mode(page is embedded in an iframe and reload on change)</li>
<li><p>Inline mode(as a small webpack-dev-server client entry is added to the bundle which refresh the page on change)</p>
<h4 id="Inline-Mode"><a href="#Inline-Mode" class="headerlink" title="Inline Mode"></a>Inline Mode</h4><p>To use the inline mode, specify <code>--inline</code> on the command line(you cannot specify it in configuration).</p>
<h3 id="配置-webpack-dev-server-自动刷新"><a href="#配置-webpack-dev-server-自动刷新" class="headerlink" title="配置 webpack-dev-server 自动刷新"></a>配置 webpack-dev-server 自动刷新</h3><pre>`// webpack.config.js
entry: [
    'webpack/hot/dev-server',
    'webpack-dev-server/client?http://localhost:8080',
    path.resolve(__dirname, 'app/main.js')
  ],
  devServer:{
    historyApiFallback: true,
    hot:true,
    inline:true,
    progress: true
  }
`</pre>

<p><pre>`//package.json</pre></p>
</li>
</ul>
<p>“dev”: “webpack-dev-server –progress –colors –inline –hot –content-base build/“,<br>    “build”: “webpack”<br>```</p>
<p>此时访问 localhost:8080 相当于访问 build/, 所以可以省略 index.html</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-02T01:04:45.000Z">2016-08-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 117 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/02/react-ajax/">React Ajax</a>
            
        </h1>
        <div class="content">
            <p>组件的数据来源, 通常是通过 AJAX 请求从服务器获取, 可以使用 <code>componentDidMount</code> 方法设置 AJAX 请求, 等到请求成功, 再用<code>this.setState()</code>方法重新渲染 UI.</p>
<pre><code>var UserGist = React.createClass({
  getInitialState(){
    return {
      userName: &apos;&apos;,
      lastGistUrl: &apos;&apos;
    }
  },

  componentDidMounted(){
    $.get(this.props.source, function(result){
      var lastGist = result[0];
      if(this.isMouted()){
        this.setState({
          userName: lastGist.owner.login,
          lastGistUrl: lastGist.html_url
        });
      }
    }.bind(this));
  },

  render(){
    return (
      &amp;lt;div&amp;gt;
        {this.state.userName}&apos;s last Gist is 
        &amp;lt;a href={this.state.lastGistUrl}&amp;gt;here&amp;lt;/a&amp;gt;
      &amp;lt;/div&amp;gt;
    );
  }
});

React.render(
  &amp;lt;UserGist source= &apos;....&apos; /&amp;gt;, document.body
)
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-02T00:58:50.000Z">2016-08-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 82 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/02/react-e8-a1-a8-e5-8d-95/">React 表单</a>
            
        </h1>
        <div class="content">
            <p>用户在表单输入的内容, 属于用户与组件的互动, 要用<code>this.setState()</code>修改</p>
<pre><code>var Input = React.cr而奥特Class({
  getInitialState(){
    return {
      value: &apos;Hello&apos;
    };
  },

  handleChange(event){
    this.setState({
      value: event.target.value;
    })
  },

  render(){
    return(
      &amp;lt;div&amp;gt;&amp;lt;input type=&apos;text&apos; onChange={this.handleChange} value = {this.state.value} /&amp;gt;&amp;lt;p&amp;gt;{this.state.value}&amp;lt;/p&amp;gt;&amp;lt;/div&amp;gt;
    );
  }
});

ReactDOM.render(
  &amp;lt;Input /&amp;gt;, document.body
);
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-02T00:17:55.000Z">2016-08-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 210 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/02/proptypes-e4-b8-8e-getdefaultprops/">PropTypes 与 getDefaultProps</a>
            
        </h1>
        <div class="content">
            <p>组件的属性可以接受任意值. 有时候我们需要一种机制, 验证别人使用组件时, 提供的参数是否符合要求.</p>
<p>组件类的 PropTypes 属性, 就是用来验证组件实例的属性是否符合要求的.</p>
<pre><code>var MyTitle = React.createClass({
  propTypes: {
    title: React.PropTypes.string.isRequried,
  },

  render() {
    return &amp;lt;h1&amp;gt; {this.props.title} &amp;lt;/h1&amp;gt;;
  }
});
`&lt;/pre&gt;

上面的 `MyTitle` 组件有一个 `title` 属性, `PropTypes` 告诉 React, 这个 `title` 属性是必须的, 而且数据类型是字符串.

如果在实例化的时候设置 `title=123`, 控制台会显示一行错误信息

&lt;pre&gt;`Warning: Failed propType: Invalid prop `title` of type `number` supplied to `MyTitle`, expected `string`.
`&lt;/pre&gt;

此外, `getDefaultProps` 可以用来设置组件属性的默认值

&lt;pre&gt;`var MyTitle = React.createClass({
  getDefaultProps() {
    return {
      title: &apos;Hello World&apos;
    };
  },

  render(){
    return &amp;lt;h1&amp;gt;{this.props.title}&amp;lt;/h1&amp;gt;;
  }
})

ReactDOM.render(&amp;lt;MyTitle /&amp;gt;, document.body); // &apos;Hello World&apos;
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-01T21:00:04.000Z">2016-08-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 minutes read (About 2005 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/02/e8-b7-a8-e5-9f-9f-e8-b5-84-e6-ba-90-e5-85-b1-e4-ba-ab-cors/">跨域资源共享 CORS</a>
            
        </h1>
        <div class="content">
            <p>CORS 是一个 W3C 标准, 全称是”跨域资源共享”(cross-origin resource sharing)</p>
<p>他允许浏览器向跨域服务器发出 <code>XMLHttpRequest</code>, 从而克服了 AJAX 只能同源使用的限制</p>
<h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>CORS 需要浏览器和服务器同时支持. 目前所有浏览器都支持该功能, IE 浏览器不能低于 IE10.</p>
<p>整个 CORS 通信过程, 都是浏览器自动完成, 不需要用户参与, 对于开发者而言, CORS 通信与同源的 AJAX 通信没有差别, 代码完全一样. 浏览器一旦发现 AJAX 跨域请求, 就会自动添加一些附加的头信息. 有时还会多出一次附加的请求, 但是用户不会有感觉.</p>
<p>因此, 实现 CORS 的关键是服务器, 只要服务器实现了 CORS 接口, 就可以跨域通信</p>
<h3 id="两种请求"><a href="#两种请求" class="headerlink" title="两种请求"></a>两种请求</h3><p>CORS 请求分两类: 简单请求(simple request)和非简单请求(not-so-simple request)</p>
<p>只要同时满足以下两大条件, 就属于简单请求:</p>
<ol>
<li>请求方法是: HEAD, GET 或者 POST</li>
<li>HTTP 头信息不超出以下几种字段: Accept, Accept-Language, Content-Language, Last-Event-ID, Content-Type(只限于三个值: application/x-www-form-urlencoded, multipart/form-data, text/plain)</li>
</ol>
<p>凡是不能同时满足上面两个条件的, 就属于非简单请求.</p>
<h3 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h3><h4 id="基本流程"><a href="#基本流程" class="headerlink" title="基本流程"></a>基本流程</h4><p>对于简单请求, 浏览器直接发出 CORS 请求, 具体来说, 就是在头信息中增加一个<code>Origin</code>字段</p>
<pre><code>GET /cors HTTP/1.1
Origin: http://api.bob.com
Host: api.alice.com
Accept-Language: en-US
Connection: keep-alive
User-Agent: Mozilla/5.0...
`&lt;/pre&gt;

上面的头信息中, `Origin`字段用来说明, 本次请求来此哪个源(协议+域名+端口), 服务器根据这个值, 决定是否同意此次请求.

如果`Origin`指定的源, 不在许可范围内, 服务器会返回一个正常的 HTTP 响应. **浏览器**发现这个回应的头信息中没有包含`Access-Control-Allow-Origin`字段, 就知道出错了, 从而抛出一个错误, 被`XMLHttpRequest`的`onerror`回调函数捕获. 注意, 这种错误无法通过状态码识别, 因为 HTTP 回应的状态码可能是200.

如果`Origin`指定的域名在许可范围内, 服务器返回的相应, 会多出几个头信息字段

&lt;pre&gt;`Access-Control-Allow-Origin: http://api.bob.com
Access-Control-Allow-Credentials: true
Access-Control-Expose-Headers: FooBar
Content-Type: text/html; charset=utf-8
`&lt;/pre&gt;

上面的头信息中, 有三个与 CORS 请求相关的字段, 都以 `Access-Control-` 开头

##### Access-Control-Allow-Origin

这个字段是必须的, 他的值要么是请求时 `Origin` 的值, 要么是一个 `*`, 表示接收任意域名的请求

##### Access-Control-Allow-Credentials

该字段是可选的, 是一个布尔值, 表示是否允许发送 Cookie. 默认情况下, Cookie 不包括在 CORS 请求之中.

设为 `true` 表示服务器明确许可, Cookie 可以包括在请求之中, 一起发给服务器

这个值也只能设为`true`, 如果服务器不需要浏览器发送 Cookie, 删除字段即可

##### Access-Control-Expose-Headers

该字段可选, CORS 请求时, `XMLHttpRequest` 对象的 `getResponseHeader()` 方法只能拿到6个基本字段
- Cache-Control
- Content-Language
- Content-Type
- Expires
- Last-Modified
-Pragma

如果想要拿到其他字段, 必须在 `Access-Control-Expose-Headers` 里面指定

上面的例子中, `getResponseHeader(&apos;FooBar&apos;)` 可以返回 `FooBar` 字段的值

#### withCredentials 属性

CORS 请求默认不发送 Cookie 和 HTTP 认证信息, 如果要把 Cookie 发送给服务器, 一方面要服务器同意, 指定 `Access-Control-Allow-Credentials` 字段

&lt;pre&gt;`Access-Control-Allow-Credientials: true
`&lt;/pre&gt;

另一方面, 开发者需要在 AJAX 请求中打开`withCredientials`属性

&lt;pre&gt;`var xhr = new XMLHttpRequest();
xhr.withCredientials = true;
`&lt;/pre&gt;

否则即使服务器同意发送 Cookie, 浏览器也不会发送

要注意, 如果要发送 Cookie, `Access-Control-Allow-Origin` 不能设置为 `*`, 必须指定明确的, 与请求网页一致的域名. 同时 Cookie 依然遵循同源政策, 只有用服务器域名设置的 Cookie 才会上传, 其他域名的 Cookie 不会上传.

### 非简单请求

#### 预检请求

非简单请求是那种对服务器有特殊要求的请求, 比如请求方法是 `PUT`, 或 `DELETE`, 或者 `Content-Type` 字段类型是 `application/json`

非简单请求的 CORS 请求, 会在正是通信钱, 增加一次 HTTP 查询请求, 称为 &quot;预检请求&quot; (preflight)

浏览器先询问服务器, 当前网页所在的域名是否在服务器的许可名单中, 以及可以使用哪些 HTTP 动词和头信息字段, 只有得到肯定的答复, 浏览器才会发出正式的 `XMLHttpRequest` 请求, 否则就报错

下面是一段浏览器的 JavaScript 脚本

&lt;pre&gt;`var url = &apos;http://api.alice.com/cors&apos;
var xhr = new XMLHttpRequest();
xhr.open(&apos;PUT&apos;, url, true);
xhr.setRequestHeader(&apos;X-Custom-Header&apos;, &apos;value&apos;);
xhr.send()
`&lt;/pre&gt;

上面代码中, HTTP 请求的方法是 `PUT`, 并且发送一个自定义头信息 `X-Custom-Header`

浏览器发现这是一个非简单请求, 就自动发出一个 &quot;预检&quot; 请求, 要求服务器确认可以这样请求. 下面是这个 &quot;预检&quot; 请求的 HTTP 头信息

&lt;pre&gt;`OPTIONS /cors HTTP/1.1
Origin: http://api.bob.com
Access-Control-Request-Method: PUT
Access-Control-Request-Headers: X-Custom-Header
Host: api.alice.com
Connection: keep-alive
User-Agent: Molliza/5.0...
`&lt;/pre&gt;

&quot;预检&quot; 请求用的请求方法是 `OPTIONS`, 表示这个请求是用来询问的, 头信息里面, 关键字段是 `Origin`, &quot;预检&quot; 秦秋的头信息包括两个特殊字段
- Access-Control-Request-Method
  这个字段是必须的, 用来列出请求方法
</code></pre><ul>
<li><p>Access-Control-Request-Headers<br>该字段是一个逗号分隔的字符串, 永安里指定浏览器 CORS 请求会格外发送的头信息字段</p>
<h5 id="预检请求的响应"><a href="#预检请求的响应" class="headerlink" title="预检请求的响应"></a>预检请求的响应</h5><p>服务器取得”预检”请求后, 检查<code>Origin</code>, <code>Access-Control-Request-Method</code> 和 <code>Access-Control-Request-Header</code> 子弹后, 确认允许跨源请求, 就可以做出回应</p>
<pre>`HTTP/1.1 200 OK
Date: Mon, 01 Dec 2008 01:15:39 GMT
Server: Apache/2.0.61 (Unix)
Access-Control-Allow-Origin: http://api.bob.com
Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: X-Custom-Header
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Content-Length: 0
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Content-Type: text/plain
`</pre>

<p>上面 HTTP 响应中, 关键的是 <code>Access-Control-Allow-Origin</code> 字段, 表示 <code>http://api.bob.com</code> 可以请求数据, 该字段也可以设置为<code>*</code>, 表示同意跨源请求.</p>
<p>如果浏览器否定了”预检”请求, 返回一个正常的 HTTP 响应, 但是没有任何 CORS 相关的头信息字段, 这时候浏览器会认为服务器不同意预检请求, 从而触发一个错误, 被 <code>XMLHttpRequest</code> 对象的 <code>onerror</code> 回调函数捕获, 控制台会打印如下报错信息</p>
<pre>`XMLHttpRequest cannot load http://api.alice.com.
Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin.
`</pre>

<p>服务器回应其他 CORES 相关字段如下:</p>
<pre>`Access-Control-Allow-Methods: GET, POST, PUT
Access-Control-Allow-Headers: X-Custom-Header
Access-Control-Allow-Credentials: true
Access-Control-Max-Age: 1728000
`</pre>

<h5 id="Access-Control-Allow-Method"><a href="#Access-Control-Allow-Method" class="headerlink" title="Access-Control-Allow-Method"></a>Access-Control-Allow-Method</h5><p>该字段是必须的, 他的值是逗号分隔的一个字符串, 表明服务器支持的跨域请求方式</p>
<h5 id="Access-Control-Allow-Headers"><a href="#Access-Control-Allow-Headers" class="headerlink" title="Access-Control-Allow-Headers"></a>Access-Control-Allow-Headers</h5><p>如果浏览器包含<code>Access-Control-Request-Headers</code>, 则 <code>Access-Control-Allow-Headers</code> 也是必须的, 其值也是一个逗号分隔的字符串</p>
<h5 id="Access-Control-Allow-Credentials"><a href="#Access-Control-Allow-Credentials" class="headerlink" title="Access-Control-Allow-Credentials"></a>Access-Control-Allow-Credentials</h5><p>该字段与简单请求时的含义相同</p>
<h5 id="Access-Control-Max-Age"><a href="#Access-Control-Max-Age" class="headerlink" title="Access-Control-Max-Age"></a>Access-Control-Max-Age</h5><p>该字段可选, 永安里指定本次预检请求的有效期(s), 有效期内发起跨域请求不需要预检请求.</p>
<h4 id="浏览器的正常请求与回应"><a href="#浏览器的正常请求与回应" class="headerlink" title="浏览器的正常请求与回应"></a>浏览器的正常请求与回应</h4><p>一旦服务器通过”预检”请求, 以后每次浏览器正常的 CORS 请求, 都会和简单请求一样, 有一个<code>Origin</code> 头信息字段, 服务器的回应也会有一个<code>Access-Control-Allow-Origin</code>头信息字段</p>
<p>“预检”请求之后, 浏览器的正常 CORS 请求</p>
<pre>`PUT /cors HTTP/1.1
Origin: http://api.bob.com
Host: api.alice.com
X-Custom-Header: value
Access-Language: en-US
Connection: keep-alive
User-Agent: Mozilla/5.0...
`</pre>

<p>其中<code>Origin</code>字段是浏览器自动添加的</p>
<p>服务器的正常回应</p>
<p><pre>`Access-Control-Allow-Origin: <a href="http://api.bob.com" target="_blank" rel="noopener">http://api.bob.com</a><br>Content-Type: text/html; charset=utf-8</pre></p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-01T19:30:48.000Z">2016-08-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    13 minutes read (About 1956 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/02/e6-b5-8f-e8-a7-88-e5-99-a8-e5-90-8c-e6-ba-90-e6-94-bf-e7-ad-96-e5-8f-8a-e5-85-b6-e8-a7-84-e9-81-bf-e6-96-b9-e6-b3-95/">浏览器同源政策及其规避方法</a>
            
        </h1>
        <div class="content">
            <p>浏览器安全的基石是”同源政策”(same-origin policy).</p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>所谓”同源”, 是指三个”相同”.</p>
<ul>
<li>协议相同: <code>http:\\</code></li>
<li>域名相同: <code>www.example.com</code> 与 <code>example.com</code> 不同</li>
<li>端口相同</li>
</ul>
<h3 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h3><p>同源政策的目的是为了保证用户信息安全, 防止恶意的网络窃取数据</p>
<h3 id="限制范围"><a href="#限制范围" class="headerlink" title="限制范围"></a>限制范围</h3><p>如果非同源, 共有三种行为受到限制</p>
<ul>
<li>Cookie, LocalStorage 和 IndexDB 无法读取</li>
<li>DOM 无法获得</li>
<li>AJAX 请求无法发送</li>
</ul>
<h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookie 是服务器写入浏览器的一小段信息, 只有同源的网站才能共享. 但是两个网页一级域名相同, 只有二级域名不同, 浏览器允许通过设置 <code>document.domain</code> 共享 Cookie.</p>
<p>举例来说, A 网页是 <code>http://w1.example.com/a.html</code>, B 网页是 <code>http://w2.example.com/b.html</code>, 那么只要设置相同的 <code>document.domain</code>, 这两个网页可以共享 Cookie.</p>
<pre><code>document.domain = &apos;example.com&apos;;
`&lt;/pre&gt;

现在 A 网页通过脚本设置一个 Cookie

&lt;pre&gt;`document.cookie = &apos;test1=hello&apos;;
`&lt;/pre&gt;

B 网页就可以读取这个 Cookie

&lt;pre&gt;`var allCookie = document.cookie;
`&lt;/pre&gt;

注意, 这种方法只适用于 Cookie 和 iframe 窗口, LocalStorage 和 IndexDB 无法通过这种方法, 规避同源政策.

另外, 服务器也可以在设置 Cookie 的时候指定 Cookie 所属域名为一级域名, 比如 `.example.com`

&lt;pre&gt;`Set-Cookie: key=value; domain=.example.com; path=/
`&lt;/pre&gt;

这样的话, 二级域名和三级域名不用做任何设置就可以读取这个 Cookie

### iframe

如果两个网页不同源, 就无法拿到对方的 DOM, 典型的例子就是`iframe`窗口和`window.open` 方法打开的窗口, 他们与父窗口无法通信.

如果两个窗口一级域名相同, 只是二级域名不同, 那么设置`document.domain`也可以规避同源政策, 实现 DOM 获取.

### 完全不同源的网站

#### 片段识别符(fragment identifier)

片段识别符值得是 URL 中`#` 后的部分, 也就是 hash.

如果只是改变片段识别符, 页面不会重新刷新

父窗口可以把信息写入子窗口的片段识别符

&lt;pre&gt;`var src = originURL + &apos;#&apos; + data;
document.getElementById(&apos;myFrame&apos;).src = src;
`&lt;/pre&gt;

子窗口通过监听 `hashchange` 事件得到通知

&lt;pre&gt;`window.onhashchange = checkMessage;

function checkMessage(){
  var message = window.location.hash;
  // ...
}
`&lt;/pre&gt;

同样子窗口也可以改变父窗口的片段识别符

&lt;pre&gt;`parent.location.href = target + &quot;#&quot; + hash;
`&lt;/pre&gt;

#### window.name

浏览器窗口有 `window.name` 属性, 这个属性的最大特点是, 无论是否同源, 只要在同一个窗口里, 前一个网页设置这个属性后, 后一个网页可以读取他

父窗口先打开一个子窗口, 载入一个不同源的网站, 该网页将写入 `widnow.name` 属性

&lt;pre&gt;`window.name = data;
`&lt;/pre&gt;

接着, 子窗口跳回一个与主窗口同域的网址

&lt;pre&gt;`location = &apos;http:parent.url.com/xxx.html&apos;
`&lt;/pre&gt;

然后主窗口就可以读取子窗口的 `window.name` 属性了

&lt;pre&gt;`var data = document.getElementById(&apos;myFrame&apos;).contentWindow.name;
`&lt;/pre&gt;

这种方法的优点是 `window.name` 容量大, 缺点是必须监听子窗口的 `window.name` 属性的变化, 影响性能.

#### window.postMessage

以上信息都属于破解, HTML5 为了解决这个问题, 引入一个全新的 API: 跨文档通信 API(Cross-document messaging)

这个 API 为 `window` 对象新增一个 `window.postMessage` 方法, 允许跨窗口通信, 不论两个窗口是否同源.

举例来说, 父窗口 `http://aaa.com` 向子窗口 `http://bbb.com` 发消息, 调用 `postMessage` 方法就可以了

&lt;pre&gt;`var popup = window.open(&apos;http://bbb.com&apos;, &apos;title&apos;);
popup.postMessage(&apos;Hello World&apos;, &apos;http://bbb.com&apos;);
`&lt;/pre&gt;

`postMessage` 方法的第一个参数是要传递的 Message, 第二个参数是接受信息的窗口的源(origin), 即`协议+域名+端口`, 也可以设置为`*`, 表示不限制域名, 向所有窗口发送.

子窗口向父窗口发送消息的写法类似

&lt;pre&gt;`window.opener.postMessage(&apos;Hello World&apos;, &apos;http://aaa.com&apos;);
`&lt;/pre&gt;

通过`message`事件监听对象消息

&lt;pre&gt;`window.addEventListener(&apos;message&apos;, function(e){
console.log(e.data);
}, false);
`&lt;/pre&gt;

`message` 事件的事件对象 `event` , 提供一下三个属性
</code></pre><ul>
<li><code>event.source</code>: 发送信息的窗口, 子窗口通过 <code>event.source</code> 引用父窗口然后发送消息<pre>`window.addEventListener('message', receiveMessage);
function receiveMessage(event){
event.source.postMessage('Hello Opener', '*');
}
`</pre></li>
<li>‘event.origin’: 发送信息的网址(‘<a href="http://aaa.com" target="_blank" rel="noopener">http://aaa.com</a>‘), 可以过滤不是指定来源的信息<pre>`window.addEventListener('message', receiveMessage);
function receiveMessage(event){
if (event.origin != 'http://aaa.com') return;
if (event.data === 'Hello World') {
  event.source.postMessage('Hello', event.origin);
} else {
  console.log(event.data);
}
}
`</pre></li>
<li><p>‘event.data’: 信息内容</p><p></p>
<h4 id="LocalStorage"><a href="#LocalStorage" class="headerlink" title="LocalStorage"></a>LocalStorage</h4><p></p><p>通过 <code>window.postMessage</code> 读写其他窗口的 <code>LocalStorage</code> 也是可能的</p>
<p>例: 主窗口写入 <code>iframe</code> 子窗口的 <code>localStorage</code></p>
<pre>`window.onmessage = function(event){
  if(event.origin !== 'http://bbb.com') return;
  var payload = JSON.parse(event.data);
  localStorage.setItem(payload.key, JSON.stringify(payload.data));
};
`</pre>

<p>上面代码中, 子窗口将父窗口发送的消息写入自己的 <code>localStorage</code></p>
<p>父窗口发送消息的代码如下:</p>
<pre>`var win = document.getElementByTagName('iframe')[0].contentWindow;
var obj = { name: 'Jack' };
win.postMessage(JSON.stringify({key: 'storage', data: obj}), 'http://bbb.com');
`</pre>

<p>加强版子窗口接收消息的代码</p>
<pre>`window.onmessage = function(e) {
  if (e.origin !== 'http://bbb.com') return;
  var payload = JSON.parse(e.data);
  switch(payload.method) {
    case 'set': localStorage.setItem(payload.key, JSON.stringify(parload.data));
                break;
    case 'get': var parent = window.parent;
                var data = localStorage.getItem(payload.key);
                parent.postMessage(data, 'http://aaa.com');
                break;
    case 'remove': localStorage.removeItem(payload.key);
                   break;
  }
};
`</pre>

<p>加强版的父窗口消息发送代码</p>
<pre>`var win = document.getElementByTagName('iframe')[0].contentWindow;
var obj = { name: 'Jack' };
// 存入对象
win.postMessage(JSON.stringify(key: 'storage', method: 'set', data: obj), 'http://bbb.com');
// 读取对象
win.postMessage(JSON.stringify(key: 'storage', method: 'get',), '*');
window.onmessage = function(e){
  if(e.origin !== 'http://bbb.com') return;
  // 'Jack'
  console.log(JSON.parse(e.data).name);
};
`</pre>

<h3 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h3><p>同源政策规定, AJAX 请求只能发给同源的网址, 否则会报错</p>
<p>除了假设服务器代理, 有三中方法规避这个限制</p>
<h4 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h4><p>JSONP 是服务器与客户端跨源通信的常用方法, 最大特点是简单实用, 老式浏览器全部支持, 服务器改造非常小.</p>
<p>基本思想是, 网页通过添加一个<code>&amp;lt;script&amp;gt;</code>元素, 向服务器请求 JSON 数据,在何种做法不受同源政策限制. 服务器接收请求后, 将数据放在一个指定名字的回调函数里传回来.</p>
<p>首先, 网页动态插入<code>&amp;lt;script&amp;gt;</code>元素, 由它向跨源网址发出请求.</p>
<pre>`function addScriptTag(src) {
  var script = document.createElement('script');
  script.setAttribute('type', 'text/javascript');
  script.src = src;
  document.body.appendChild(script);
}
window.onload = function(){
  addScritpTag('http://example.com/ip?callback=foo');
}

function foo(data){
  console.log("Your public IP address is: " + data.ip);
};
`</pre>

<p>上面的代码通过动态添加<code>&amp;lt;script&amp;gt;</code>元素, 向服务器<code>example.com</code>发出请求. 注意, 该请求的查询字符串有一个<code>callback</code> 参数, 用来指定回调函数的名字, 这对 JSONP 是必须的.</p>
<p>服务器接收到这个请求后, 会将数据放在回调函数的参数位置返回.</p>
<pre>`foo({
  'ip': '8.8.8.8'
});
`</pre>

<p>由于<code>&amp;lt;script&amp;gt;</code>元素请求的脚本, 直接作为代码运行, 这时只要浏览器定义了<code>foo</code>函数, 该函数就会立即调用. 作为参数的 JSON 数据会被视为 JavaScript 对象, 而不是字符串, 因此避免了使用<code>JSON.parse</code>的步骤</p>
<h4 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h4><p>WebSocket 是一种通信协议, 使用<code>ws://</code>(非加密)和<code>wss://</code>(加密)作为协议前缀.</p>
<p>该协议不实行同源政策, 只要服务器支持, 就可以与他进行夸源通信.</p>
<p>下面是一个例子, 浏览器发出的 WebSocket 请求的头信息:</p>
<p><pre>`GET /chat HTTP/1.1<br>Host: server.example.com<br>Upgrade: websocket<br>Connection: Upgrade<br>Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==<br>Sec-WebSocket-Protocol: chat, superchat<br>Sec-WebSocket-Version: 13<br>Origin: <a href="http://example.com" target="_blank" rel="noopener">http://example.com</a></pre></p>
</li>
</ul>
<p>上面代码中, 有一个字段是<code>Origin</code>, 表示该请求的请求源(origin)</p>
<p>正式因为有了<code>Origin</code>这个字段, 所以 WebSocket 才没有实行同源政策, 因为服务器可以根据这个字段判断是否许可此次通信</p>
<h4 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h4><p>CORS 是跨源资源分享(Corss-Origin Resource Sharing) 的缩写, 是 W3C 标准, 是跨源 AJAX 请求的根本解决办法. 相比 JSONP 只能发<code>GET</code>请求, CORS 允许任何类型的请求.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-07-31T22:03:32.000Z">2016-08-01</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 652 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/01/node-js-url-e6-a8-a1-e5-9d-97-e7-9a-84-e4-bd-bf-e7-94-a8/">Node.js URL 模块的使用</a>
            
        </h1>
        <div class="content">
            <p>Node.js 中的 URL 模块, 用于将 URL 字符串解析为对象或将对象格式化为 URL 字符串, 该模块比较简单, 共包括3个方法:</p>
<h3 id="URL-各部分说明"><a href="#URL-各部分说明" class="headerlink" title="URL 各部分说明"></a>URL 各部分说明</h3><p>对于一个 URL 字符串, 其组成部分会有所不同. 其中有些部分只有在 URL 字符串中存在时, 对应字段还才会出现在解析后的对象中. 以下是一个 URL 例子</p>
<pre><code>http://user:pass@host.com:8080/path/to/file?query=string#hash
`&lt;/pre&gt;

解析后的字段如下:
- `href`: 解析前的完整原始 URL, 协议名和主机名已经转为小写
- `protocol`: 请求协议, 小写, 例如`http:`
- `slashes`: 协议的`:`后面是否有`\`, 返回`true`或`false`
- `host`: URL 主机名, 包括端口信息, 小写, 例如`host.com:8080`
- `auth`: URL 中的认证信息, 例如`user:pass`
- `hostname`: 主机名, 小写, 例如`host.com`
- `port`: 主机的端口号, 例如`8080`
- `pathname`: URL 中的路径, 例如`/path/to/file`
- `search`: 查询对象, 即: `queryString`, 包括之前的`?`, 例如`?query=string`; 如果 `parseQueryString = true`, 则返回`{&apos;query&apos;:&apos;string&apos;}`
- `query`: 例如`query=string`
- `hash`: 锚点部分, 即`#`之后的部分, 例如`#hash`

### 将 URL 字符串转换为对象: url.parse(urlStr[, parseQueryString[, slashesDenoteHost]])

`url.parse()`方法用于解析 URL 对象, 解析后范湖第一个 JSON 对象. 例如:

&lt;pre&gt;`&amp;gt; var url = &apos;http://user:pass@host.com:8080/path/to/file?query=string#hash&apos;
undefined
&amp;gt; url
&apos;http://user:pass@host.com:8080/path/to/file?query=string#hash&apos;
&amp;gt; var urlModule = require(&apos;url&apos;);
undefined
&amp;gt; urlModule.parse(url)
Url {
  protocol: &apos;http:&apos;,
  slashes: true,
  auth: &apos;user:pass&apos;,
  host: &apos;host.com:8080&apos;,
  port: &apos;8080&apos;,
  hostname: &apos;host.com&apos;,
  hash: &apos;#hash&apos;,
  search: &apos;?query=string&apos;,
  query: &apos;query=string&apos;,
  pathname: &apos;/path/to/file&apos;,
  path: &apos;/path/to/file?query=string&apos;,
  href: &apos;http://user:pass@host.com:8080/path/to/file?query=string#hash&apos; }
`&lt;/pre&gt;

第二个可选参数设置为`true`的时候, 会使用`queryString`模块来解析 URL 中的`query` 部分, 默认为`false`.

第三个参数为`true`的时候, 会把诸如`//foo/bar`这样的 URL 解析为 `{host: &apos;foo&apos;, pathname: &apos;/bar&apos;}`, 而不是 `{pathname: &apos;//foo/bar&apos;}`. 默认为`false`

### 将对象格式化为 URL 字符串: url.format(urlObj)

`url.resolve()`用于格式化URL对象, 输入一个 URL 对象, 返回格式化后的 URL 字符串, 例如:

&lt;pre&gt;`&amp;gt; var url = require(&apos;url&apos;);
undefined
&amp;gt; var urlObj = {
... protocol: &apos;http:&apos;,
... slashes: true,
... hostname: &apos;host.com&apos;,
... port: 8080,
... hash: &apos;#hash&apos;,
... search: &apos;?query=string&apos;,
... pathname: &apos;/path/to/file&apos;
... }
undefined
&amp;gt; var result = url.format(urlObj)
undefined
&amp;gt; result
&apos;http://host.com:8080/path/to/file?query=string#hash&apos;
`&lt;/pre&gt;

### URL 路径处理

`url.resolve()`方法用于处理 URL 路径, 也可以用于处理锚点. 例如

&lt;pre&gt;`url.resolve(&apos;/one/two/three&apos;, &apos;four&apos;)         // &apos;/one/two/four&apos;
url.resolve(&apos;http://example.com/&apos;, &apos;/one&apos;)    // &apos;http://example.com/one&apos;
url.resolve(&apos;http://example.com/one&apos;, &apos;/two&apos;) // &apos;http://example.com/two&apos;
</code></pre><p>参数拼接, 如果之间没有<code>/</code>, 则参数二替换参数一末尾的文件名.</p>
<p>注意区分路径和文件名.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-07-30T23:00:29.000Z">2016-07-31</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 739 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/07/31/promise-in-es6/">Promise in ES6</a>
            
        </h1>
        <div class="content">
            <p>在 JavaScript 世界中, 所有代码都是单线程执行的</p>
<p>异步执行可以可以用回调函数实现</p>
<pre><code>function callback() {
  console.log(&apos;Done&apos;);
}
console.log(&apos;before setTimeout()&apos;);
setTimeout(callback, 1000);
console.log(&apos;after setTimeout()&apos;);
`&lt;/pre&gt;

先看一个简单的 Promise 例子: 生成0-2之间的随机数, 如果小于1, 则等待一段时间后返回成功, 否则返回失败

&lt;pre&gt;`function test(resolve, reject){
  var timeOut = Math.random() * 2;
  log(&apos;set timeout to: &apos; + timeOut + &apos; seconds.&apos;);
  setTimeout(function(){
    if(timeOut &amp;lt; 1) {
      log(&apos;call resolve()...&apos;);
      resolve(&apos;200 ok&apos;);
    } else {
      log(&apos;call reject()...&apos;);
      reject(&apos;timeout in &apos; + timeOut + &apos; seconds&apos;);
    }
  }, timeOut * 1000)
}
`&lt;/pre&gt;

这个`test()`函数有两个参数, 这两个参数都是函数, 如果执行成功, 我们将调用`resolve(&apos;200 ok)&apos;`, 如果执行失败, 我们将调用`reject(&apos;timeout in &apos; + timeOut + &apos; seconds.&apos;)`. 可以看出, `test()`函数只关心自己的逻辑, 并不关心具体的`resolve` 和`reject` 将如何处理.

有了执行函数, 我们就可以用一个 Promise 对象来执行他, 并在将来某个时刻获得成功或失败的结果

&lt;pre&gt;`var p1 = new Promsie(test);
var p2 = p1.then(function(result){
  console.log(&apos;成功: &apos; + result);
});
var p3 = p2.catch(function(err){
  console.log(&apos;失败: &apos; + err);
});
`&lt;/pre&gt;

变量`p1`是一个 Promise 对象, 他负责执行执行`test`函数, 由于`test`函数在内部是异步执行的, 当`test`函数执行到`resolve(&apos;ok 200&apos;)`时, 告诉 Promsie 对象执行

&lt;pre&gt;`.then(function(result){ // result 是通过 test 传递给 resolve 的参数
  console.log(&apos;成功: &apos; + result);
});
`&lt;/pre&gt;

当`test`执行到`reject`的时候, 告诉 Promise 对象执行

&lt;pre&gt;`.catch(function(err){ // err 是 test 传递给 reject 的参数
  console.log(&apos;失败: &apos;+ err);
});
`&lt;/pre&gt;

Promise 对象可以串联起来(因为都返回一个 Promise 对象)

&lt;pre&gt;`new Promise(test).then(function(result){console.log(result)}).catch(function(err){console.log(err)});
`&lt;/pre&gt;

可见, Promise 最大的好处, 是在异步执行的流程中, 把执行代码和处理结果代码清晰地分离了.

Promise 还可以做更多的事情, 比如有若干个异步任务, 需要先做任务1, 如果成功后再做任务2, 任何任务失败则不再继续并执行错误处理函数

要串行执行这样的异步任务, 只需要链式调用

&lt;pre&gt;`job1.then(job2).then(job3).catch(handleError);
`&lt;/pre&gt;

其中 job1, job2, job3 都是(或返回) Promise 对象

&lt;pre&gt;`function job2(input){
  return new Promise(function(resolve, reject){
      ....
    })
}
`&lt;/pre&gt;

### 并行执行异步任务

试想一个页面聊天任务, 我们需要从两个不同的 URL 分别获取用户的个人信息和好友列表, 这两个任务是可以并行执行的, 用`Promise.all()`实现如下:

&lt;pre&gt;`var p1 = new Promise(function(resolve, reject){
  setTimeout(resolve, 500, &apos;P1&apos;);
});

var p2 = new Promise(function(resolve, reject) {
  setTimeout(resolve, 600, &apos;P2&apos;);
});

// 同时执行p1 和 p2, 并在他们都执行完毕后执行 then
Promise.all([p1,p2]).then(function(results){
  console.log(results); // 获得一个 Array: [&apos;P1&apos;, &apos;P2&apos;]
});
`&lt;/pre&gt;

有时多个异步任务是为了容错, 比如同时向两个 URL 读取, 只需要获得先返回的结果, 这种情况下用`Promise.race()`实现:

&lt;pre&gt;`var p1 = new Promise(function(resolve, reject){
  setTimeout(resolve, 500, &apos;P1&apos;);
});
var p2 = new Promise(function(resolve, reject){
  setTimeout(resolve, 600, &apos;P2&apos;);
});

Promise.race([p1,p2]).then(function(result){
  console.log(result); // &apos;P1&apos;
});
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-07-30T22:13:33.000Z">2016-07-31</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 258 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/07/31/co-module/">CO Module</a>
            
        </h1>
        <div class="content">
            <h3 id="Co-v4"><a href="#Co-v4" class="headerlink" title="Co v4"></a>Co v4</h3><p><code>co@4.0.0</code> has been released, which now relies on promises. It is a stepping stone towards the <a href="https://github.com/lukehoban/ecmascript-asyncawait" target="_blank" rel="noopener">aysnc/await proposal</a>. The primary API change is how <code>co()</code> is invoked. Before, <code>co</code> returned a “thunk”, which you then called with a callback and optional arguments. Now, <code>co()</code> return s a promise.</p>
<pre><code>co(function* (){
  var result = yield Promise.resolve(true);
  return result;
}).then(function (value) {
  console.log(value);
}, function(err) {
  console.error(err.stack);
});
`&lt;/pre&gt;

If you want to convert a `co`-generator-function into a regular function that returns a promise, you now use `co.wrap(fn*)`.

&lt;pre&gt;`var fn = co.wrap(function*(val) {
  return yield Promise.resolve(val);
});

fn(true).then(function(val){
})
`&lt;/pre&gt;

### Platform Compatibility

`co@4+` requires a `Promise` implementation. For version of node `&amp;lt; 0.11` and for many older browsers, you should/must include your own `Promise` polyfill.

Node v4+ is supported out of the box, you can use `co` without flags or polyfills.

### Installation

&lt;pre&gt;`$ npm install co
`&lt;/pre&gt;

### Examples

&lt;pre&gt;`var co = require(&apos;co&apos;);

co(function*(){
  // yield any promise
  var result = yield Promise.resolve(true);
}).catch(onerror);

co(function*(){
  // resolve multiple promises in parallel
  var a = Promise.resolve(1);
  var b = Promise.resolve(2);
  var c = Promise.resolve(3);
  var res = yield[a, b, c];
  console.log(res);
  // =&amp;gt; [1,2,3]
}).catch(onerror);

// errors can be try/catched
co(function*() {
  try{
    yield Promise.reject(new Error(&apos;boom&apos;));
  } catch (err) {
    console.error(err.message); // &apos;boom&apos;
  }
});

function onerror(err){
  // log any uncaught errors
  // co will not throw any errors you do not handle
  // HANDLE ALL YOUR ERRORS
  console.error(err.stack);
}
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-07-30T21:36:49.000Z">2016-07-31</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 540 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/07/31/javascript-generator/">JavaScript Generator</a>
            
        </h1>
        <div class="content">
            <p>作用迭代器</p>
<pre><code>function* argumentsGenerator() {
  for (let i = 0; i &amp;lt; arguments.length; i++) {
    yield arguments[i];
  }
}
`&lt;/pre&gt;

我们希望迭代传入的每个实参

&lt;pre&gt;`var argumentsIterator = argumentsGenerator(&apos;a&apos;,&apos;b&apos;,&apos;c&apos;,&apos;d&apos;);

// Prints &quot;a,b,c,d&quot;
console.log(
  argumentsIterator.next().value,
  argumentsIterator.next().value,
  argumentsIterator.next().value,
  argumentsIterator.next().value
)
`&lt;/pre&gt;

我们可以简单的理解
- Generator 其实是生成 Iterator 的方法, argumentsGenerator 被称为 GeneratorFunction, 也有一些人把 GeneratorFunction 的返回值称为一个 Generator
- yield 可以中断 GeneratorFunction 的运行, 而在 next() 时恢复运行
- 返回的 Iterator 上, 有 next 成员方法, 能够返回迭代值. 其中 value 属性包含了实际返回值, done 属性为布尔值, 标记迭代器是否完成迭代, 要注意的是, 在 done: true 后继续运行 next 方法会产生异常.

完整的 ES 实现中, for-of 循环正式为了快速迭代一个 Iterator

&lt;pre&gt;`for (let value of argumetnsIterator) {
  console.log(value);
}
`&lt;/pre&gt;

可以利用 yield* 语法, 将 yield 操作代理到另一个 Generator

&lt;pre&gt;`let delegatedIterator = (function*() {
  yield &apos;Hello!&apos;;
  yield &apos;Bye!&apos;;
})();

let delegatingIterator = (function*() {
  yield &apos;Greetings!&apos;;
  yield* delegatedIterator;
  yield &apos;Ok, bye!&apos;;
})();

// Prints &quot;Greetings!&quot;, &quot;Hello&quot;, &quot;Bye!&quot;, &quot;Ok, bye!&quot;
for (let value of delegatingIterator) {
  console.log(value);
}
</code></pre><h3 id="用作流程控制"><a href="#用作流程控制" class="headerlink" title="用作流程控制"></a>用作流程控制</h3><p>co 已经将此特性封装的非常完美</p>
<p>Generator 之所以可以用来控制代码流程, 就是通过 yield 来将两个或多个 Generator 的执行路径相互切换, 这种切换是语句级别的, 而不是函数级调用. 其本质是 CPS 变换.</p>
<p>这里补充 yield 的若干行为:</p>
<ul>
<li>next 方法接收一个参数, 传入的参数是 yield 表达式的返回值: 即 yield 既可以产生数值,  也可以接收数值</li>
<li>throw 方法会抛出一个异常, 并终止迭代</li>
<li>GeneratorFunction 的 return 语句相当于一个 yield</li>
</ul>
<h4 id="将异步”变为”同步"><a href="#将异步”变为”同步" class="headerlink" title="将异步”变为”同步"></a>将异步”变为”同步</h4><p>假设我们希望有如下语法:</p>
<ul>
<li>suspend 传入一个 GeneratorFunction</li>
<li>suspend 返回一个简单函数, 接收一个 node 风格的回调函数</li>
<li>所有的异步调用都通过 yield, 看起来像同步调用</li>
<li>给定一个特殊的回调, 让保证异步调用的返回值作为 yield 的返回值, 并让脚本继续</li>
<li>GeneratorFunction 的返回值和执行过程的错误都会传入全局的回调函数</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-07-30T08:53:58.000Z">2016-07-30</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 336 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/07/30/generator-101/">Generator 101</a>
            
        </h1>
        <div class="content">
            <pre><code>function * HelloGen(){
  yield 100;
  yield 400;
}

var gen = HelloGen();

console.log(gen.next()); // {value: 100, done: false}
console.log(gen.next()); // {value: 400, done: false}
console.log(gen.next()); // {value: undefined, done: true}
`&lt;/pre&gt;

&lt;pre&gt;`function * HelloGen2() {
  var a = yield 100;
  var b = yield a + 100;

  console.log(b);
}

var gen2 = HelloGen2();

console.log(gen2.next()); // {value: 100, done: false}
console.log(gen2.nect(500)); // {value: 600, done: false}
console.log(gen2.next(1000)); // {value: undefined, done: done}
// prints 1000
`&lt;/pre&gt;

### Preventing Callback Hell

So, how can generators be used to avoid callback hell? First, you need to understand a simple technique that we will be using heavily with generators to write code without callbacks.

#### Understanding Thunks

A thunk is a partially evaluated function which accepts a single callback as the argument. Within generators, we&apos;ll be yielding thunks to write without callbacks. A simple thunk is shown below.

&lt;pre&gt;`function(callback) {
  fs.readFile(&apos;myfile.md&apos;, &apos;utf8&apos;, callback)
}
`&lt;/pre&gt;

Thunks can also be created dynamically as shown below:

&lt;pre&gt;`function readFile(filename) {
  return function(callback) {
    fs.readFile(filename, &apos;utf8&apos;, callback);
  };
}
`&lt;/pre&gt;

#### Using `co`

`co` is a nice module which helps to use thunks and generators together to create Node.js applications without callbacks.

A simple application which uses `co` and the `readFile()` thunk.

&lt;pre&gt;`var co = require(&apos;co&apos;);

co(function* (){
  var file1 = yield readFile(&apos;file1.md&apos;);
  var file2 = yield readFile(&apos;file2.md&apos;);

  console.log(file1);
  console.log(file2);
})();
`&lt;/pre&gt;

As you can see, we are no longer using callbacks. This gives us a simple way to write large modular Node apps easily.

###### How `co` Works Internally
</code></pre><ol>
<li>First, it calls <code>next(null)</code> and gets a thunk.</li>
<li>Then, it evaluate the thunk and saves the result.</li>
<li>Then, it calls <code>next(savedResult)</code>(in this case, saveResult == readFile(‘file1.md’), and next(savedResult) pass the content to var file1)</li>
<li><p>Repeat these steps until <code>next()</code> return <code>{done: true}</code></p>
<p>A minimal version of <code>co</code> written to show how it works internally.</p>
<p>```<br>function co(generator){<br>  var gen = generator();</p>
<p>function nextItem(err, result) {</p>
<pre><code>var item = gen.next(result);
</code></pre><p><pre>`if (!item.done) {<br>  item.value(nextItem); // item.value is a thunk, because yield a thunk<br>}</pre></p>
</li>
</ol>
<p>}</p>
<p>nextItem();<br>}</p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/page/10/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/12/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/10/">10</a></li>
            
            <li><a class="pagination-link is-current" href="/page/11/">11</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/12/">12</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/16/">16</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.jpg" alt="Keith Chen">
                    
                    
                    <p class="is-size-4 is-block">
                        Keith Chen
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        FE Engineer on Blockchain
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>30°17&#39;37N, 120°9&#39;41E</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        308
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        7
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        92
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/keith-CY" target="_blank">
                Follow</a>
        </div>
        
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/keith-CY" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Keith CY</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.linkedin.com/in/宇-陈-644b61ba" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Yu Chen</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.linkedin.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Soup/">
            <span class="level-start">
                <span class="level-item">Soup</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Uncategorized/">
            <span class="level-start">
                <span class="level-item">Uncategorized</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/github/">
            <span class="level-start">
                <span class="level-item">github</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/github/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">141</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/note/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/AJAX/" style="font-size: 10.91px;">AJAX</a> <a href="/tags/BOOTSTRAP/" style="font-size: 10px;">BOOTSTRAP</a> <a href="/tags/Bash/" style="font-size: 11.82px;">Bash</a> <a href="/tags/BlockChain/" style="font-size: 10px;">BlockChain</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/CSS/" style="font-size: 10.91px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 20px;">CSS3</a> <a href="/tags/Closure/" style="font-size: 10px;">Closure</a> <a href="/tags/CommonJS/" style="font-size: 10px;">CommonJS</a> <a href="/tags/Contract-Ethereum-Web3/" style="font-size: 10px;">Contract, Ethereum, Web3</a> <a href="/tags/Contract-Solidity/" style="font-size: 10px;">Contract, Solidity</a> <a href="/tags/D3-Example/" style="font-size: 10px;">D3, Example</a> <a href="/tags/DAPP-Solidity/" style="font-size: 10px;">DAPP, Solidity</a> <a href="/tags/DApp-Solidity/" style="font-size: 10px;">DApp, Solidity</a> <a href="/tags/DOM/" style="font-size: 12.73px;">DOM</a> <a href="/tags/DevTools/" style="font-size: 10px;">DevTools</a> <a href="/tags/Drizzle-Ethereum-BlockChain/" style="font-size: 10px;">Drizzle, Ethereum, BlockChain</a> <a href="/tags/ES6/" style="font-size: 10.91px;">ES6</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/ETH-Wallet/" style="font-size: 10px;">ETH, Wallet</a> <a href="/tags/Elixir-Phoenix-SCSS/" style="font-size: 10px;">Elixir, Phoenix, SCSS</a> <a href="/tags/Erlang-Elixir-GenServer/" style="font-size: 10px;">Erlang, Elixir, GenServer</a> <a href="/tags/Ethereum/" style="font-size: 10px;">Ethereum</a> <a href="/tags/Ethereum-IPFS/" style="font-size: 10px;">Ethereum, IPFS</a> <a href="/tags/FP/" style="font-size: 10px;">FP</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub-Workflow/" style="font-size: 10px;">GitHub, Workflow</a> <a href="/tags/Go-Http-Web/" style="font-size: 10px;">Go, Http, Web</a> <a href="/tags/GraphQL-Apollo-TypeScript/" style="font-size: 10px;">GraphQL, Apollo, TypeScript</a> <a href="/tags/Gulp/" style="font-size: 11.82px;">Gulp</a> <a href="/tags/HTML5/" style="font-size: 15.45px;">HTML5</a> <a href="/tags/HTTP2-Node/" style="font-size: 10px;">HTTP2, Node</a> <a href="/tags/Html-Picture/" style="font-size: 10px;">Html, Picture</a> <a href="/tags/Immutable/" style="font-size: 10px;">Immutable</a> <a href="/tags/Int8Array/" style="font-size: 10px;">Int8Array</a> <a href="/tags/JSON-RPC/" style="font-size: 10px;">JSON-RPC</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Javascript/" style="font-size: 19.09px;">Javascript</a> <a href="/tags/Koa/" style="font-size: 10.91px;">Koa</a> <a href="/tags/Koa-NPM-Package/" style="font-size: 10px;">Koa, NPM, Package</a> <a href="/tags/MDL/" style="font-size: 16.36px;">MDL</a> <a href="/tags/Material-Design/" style="font-size: 17.27px;">Material Design</a> <a href="/tags/Mock-JavaScript/" style="font-size: 10px;">Mock, JavaScript</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NODE/" style="font-size: 13.64px;">NODE</a> <a href="/tags/NPM/" style="font-size: 10.91px;">NPM</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Nock/" style="font-size: 10px;">Nock</a> <a href="/tags/Node-CLI/" style="font-size: 10.91px;">Node, CLI</a> <a href="/tags/Node-Fastify/" style="font-size: 10.91px;">Node, Fastify</a> <a href="/tags/Node-Graphql-Koa/" style="font-size: 10px;">Node, Graphql, Koa</a> <a href="/tags/Node-js/" style="font-size: 10.91px;">Node.js</a> <a href="/tags/Phoenix-Elixir-Ecto/" style="font-size: 10px;">Phoenix, Elixir, Ecto</a> <a href="/tags/Promise/" style="font-size: 11.82px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10px;">Protobuf</a> <a href="/tags/Pug-HTML/" style="font-size: 10px;">Pug, HTML</a> <a href="/tags/React/" style="font-size: 18.18px;">React</a> <a href="/tags/React-Docker/" style="font-size: 10px;">React, Docker</a> <a href="/tags/React-Router-Code-splitting/" style="font-size: 10px;">React, Router, Code-splitting</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/React-Redux/" style="font-size: 10px;">React-Redux</a> <a href="/tags/React-Router/" style="font-size: 10.91px;">React-Router</a> <a href="/tags/Redux/" style="font-size: 14.55px;">Redux</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/Ruby-Rails/" style="font-size: 10px;">Ruby, Rails</a> <a href="/tags/Ruby-Rails-RoR-Mina/" style="font-size: 10px;">Ruby, Rails, RoR, Mina</a> <a href="/tags/Rust-Rocket/" style="font-size: 10px;">Rust, Rocket</a> <a href="/tags/RxJS/" style="font-size: 10px;">RxJS</a> <a href="/tags/Smart-Contract-Web3/" style="font-size: 10px;">Smart Contract, Web3</a> <a href="/tags/Solidity/" style="font-size: 12.73px;">Solidity</a> <a href="/tags/Solidity-Error-Handling/" style="font-size: 10px;">Solidity, Error Handling</a> <a href="/tags/Solidity-Public-External/" style="font-size: 10px;">Solidity, Public, External</a> <a href="/tags/Solidity-Smart-Contract/" style="font-size: 10px;">Solidity, Smart Contract</a> <a href="/tags/Thunk/" style="font-size: 10.91px;">Thunk</a> <a href="/tags/Trick/" style="font-size: 11.82px;">Trick</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Webpack-DLL/" style="font-size: 10px;">Webpack, DLL</a> <a href="/tags/automatic/" style="font-size: 10px;">automatic</a> <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/babel-polyfill/" style="font-size: 10px;">babel-polyfill</a> <a href="/tags/blockchain-bitcoin-bip/" style="font-size: 10.91px;">blockchain, bitcoin, bip</a> <a href="/tags/commandline/" style="font-size: 10px;">commandline</a> <a href="/tags/github/" style="font-size: 10.91px;">github</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/lecture-yc/" style="font-size: 10px;">lecture, yc</a> <a href="/tags/precache/" style="font-size: 10px;">precache</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/webpack/" style="font-size: 17.27px;">webpack</a> <a href="/tags/webpack2/" style="font-size: 11.82px;">webpack2</a> <a href="/tags/测试/" style="font-size: 11.82px;">测试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/20/note-on-bip-173/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/segwit.png" alt="Note-on-Bip-173">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-20T08:36:54.000Z">2019-04-20</time></div>
                    <a href="/2019/04/20/note-on-bip-173/" class="has-link-black-ter is-size-6">Note-on-Bip-173</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[WIP]notes of Building Product, Talking to Users and Growing">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-17T03:32:32.000Z">2019-04-17</time></div>
                    <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="has-link-black-ter is-size-6">[WIP]notes of Building Product, Talking to Users and Growing</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/03/16/keystore/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/keystore.jpg" alt="Keystore">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-03-16T07:22:16.000Z">2019-03-16</time></div>
                    <a href="/2019/03/16/keystore/" class="has-link-black-ter is-size-6">Keystore</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/20/note-on-bip-173/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/segwit.png" alt="Note-on-Bip-173">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-20T08:36:54.000Z">2019-04-20</time></div>
                    <a href="/2019/04/20/note-on-bip-173/" class="has-link-black-ter is-size-6">Note-on-Bip-173</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[WIP]notes of Building Product, Talking to Users and Growing">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-17T03:32:32.000Z">2019-04-17</time></div>
                    <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="has-link-black-ter is-size-6">[WIP]notes of Building Product, Talking to Users and Growing</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/03/16/keystore/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/keystore.jpg" alt="Keystore">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-03-16T07:22:16.000Z">2019-03-16</time></div>
                    <a href="/2019/03/16/keystore/" class="has-link-black-ter is-size-6">Keystore</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="EzCook" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Chen Yu&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>