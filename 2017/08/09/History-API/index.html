<!DOCTYPE html>
<html  lang="en">

<head>
    <meta charset="utf-8">
<title>History API - EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">

</head>

<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="History API" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/projects">Projects</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-08-09T05:59:40.000Z">2017-08-09</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 1011 words)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span> visits
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                History API
            
        </h1>
        <div class="content">
            <p>The DOM window object provides access to the browser’s history through the <code>history</code> object.</p>
<h3 id="Moving-Forward-and-Backward"><a href="#Moving-Forward-and-Backward" class="headerlink" title="Moving Forward and Backward"></a>Moving Forward and Backward</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-built_in">window</span>.history.back()</div><div class="line"><span class="hljs-built_in">window</span>.history.forward()</div></pre></td></tr></table></figure>
<h3 id="Moving-to-a-specific-point-in-history"><a href="#Moving-to-a-specific-point-in-history" class="headerlink" title="Moving to a specific point in history"></a>Moving to a specific point in history</h3><p>You can use the <code>go()</code> method to load a specific page from session history, identified by its relative position to the current page.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-built_in">window</span>.history.go(<span class="hljs-number">-1</span>)</div><div class="line"><span class="hljs-built_in">window</span>.history.go(<span class="hljs-number">1</span>)</div></pre></td></tr></table></figure>
<p>You can determine the number of pages in the history stack by looking at the value of the length property:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> numberOfEntries = <span class="hljs-built_in">window</span>.history.length</div></pre></td></tr></table></figure>
<h3 id="Adding-and-Modifying-History-Entries"><a href="#Adding-and-Modifying-History-Entries" class="headerlink" title="Adding and Modifying History Entries"></a>Adding and Modifying History Entries</h3><p><code>history.pushState()</code> and <code>history.replaceState()</code> methods work in conjunction with the <code>window.onpopstate</code> event.</p>
<p>Using <code>history.pushState()</code> changes the referrer that gets used in the HTTP header for <code>XMLHttpRequest</code> objects created after you change the state. The referrer will be the URL of the document whose window is this at the time of creation of the <code>XMLHttpRequest</code> object.</p>
<h4 id="Example-of-pushState-Method"><a href="#Example-of-pushState-Method" class="headerlink" title="Example of pushState() Method"></a>Example of pushState() Method</h4><p>Suppose <a href="http://mozilla.org/foo.html" target="_blank" rel="noopener">http://mozilla.org/foo.html</a> executes the following JS.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// history.pushState(StateObj, title, URL)</span></div><div class="line"><span class="hljs-keyword">var</span> stateObj = &#123; <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> &#125;</div><div class="line">history.pushState(&#123; stateObj, <span class="hljs-string">'page 2'</span>, <span class="hljs-string">'bar.html'</span> &#125;)</div></pre></td></tr></table></figure>
<p>This will cause the URL bar to display <a href="http://mozilla.org/bar.html" target="_blank" rel="noopener">http://mozilla.org/bar.html</a>, but won’t cause the browser to load <code>bar.html</code> or even check that <code>bar.html</code> exists.</p>
<p>Suppose now that the user now navigates to <a href="http://google.com" target="_blank" rel="noopener">http://google.com</a>, then click back. At this point, the URL bar will display <a href="http://mozilla.org/bar.html" target="_blank" rel="noopener">http://mozilla.org/bar.html</a>, and the page will get a <code>popstate</code> event whose <code>state object</code> contains a copy of <code>stateObj</code>.</p>
<p>If we click back again, the URL change to <a href="http://mozilla.org/foo.html" target="_blank" rel="noopener">http://mozilla.org/foo.html</a>, and the document will get another <code>popstate</code> event, this time with a null state object.(which is different from replaceState).</p>
<h4 id="The-pushState-method"><a href="#The-pushState-method" class="headerlink" title="The pushState() method"></a>The pushState() method</h4><p><code>pushState()</code> takes three arguments: a state object, a title(which is currently ignored), and (optionally) a URL.</p>
<ul>
<li><code>state object</code> - The state object is a javascript object which is associated with the new history entry created by <code>pushState</code>. Whenever the user navigates to the new state, a <code>popstate</code> event is fired, and the state property of the event contains a copy of the history entry’s state object.</li>
</ul>
<p>The state object can be anything that can be serialized. Because Firefox saves the state objects to the user’s disk so they can be restored after the user restarts the browser, we impose a size limit of 640k characters on the serialized representation of a state object. If you pass a state object whose serialized representation is larger than this to <code>pushState()</code>, the method will throw an exception. If you need more space than this, you’re encouraged to use <code>sessionStorage</code> and/or <code>localStorage</code>.</p>
<ul>
<li><p><code>title</code> - Firefox currently ingores this parameter, although it may use it in the future. Passing the empty string here should be safe against future changes to the method.</p>
</li>
<li><p><code>URL</code> - The new history entry’s URL is given by this parameter. Note that the browser won’t attempt to load this URL after a call to <code>pushState()</code>, but it might attempt to load the URL later, for instance after the user restarts the browser. The new URL does not need to be absolute; if it’s relative, it’s resolved to the current URL. The new URL must be of the same origin as the current URL; otherwise <code>pushState</code> will throw an exception. The parameter is optional, if it isn’t specified, it’s set to the document’s current URL.</p>
</li>
</ul>
<p>In a sense, calling <code>pushState()</code> is similar to setting <code>window.location = &#39;#foo&#39;</code>, in that both will create and activate another history entry associated with the current document, but <code>pushState</code> has a few advantages:</p>
<ul>
<li><p>The new URL can be any URL in the same origin as the current URL. In contrast, setting <code>window.location</code> keeps you at the same document only if you modify only the hash</p>
</li>
<li><p>You don’t have to change the URL if you don’t want to. In contrast, setting <code>window.location = &#39;#foo&#39;</code> only creates a new history entry if the current hash isn’t <code>#hash</code></p>
</li>
<li><p>You can associate arbitrary data with your new history entry. With the hash-based approach, you need to encode all of the relevant data int o a short string.</p>
</li>
</ul>
<h4 id="The-replaceState-method"><a href="#The-replaceState-method" class="headerlink" title="The replaceState() method"></a>The replaceState() method</h4><p><code>history.replaceState()</code> operates exactly like <code>history.pushState()</code> except the <code>replaceState()</code> modifies the current history entry instead of creating a new one. Note that this doesn’t prevent the creation of a new entry in the global browser history.</p>
<p><code>replaceState()</code> is particularly useful when you want to upate the state object or URL of the current history entry in reponse to some user action.</p>
<h4 id="Example-of-replaceState-method"><a href="#Example-of-replaceState-method" class="headerlink" title="Example of replaceState() method"></a>Example of replaceState() method</h4><p>Suppose <a href="http://mozilla.org/foo.html" target="_blank" rel="noopener">http://mozilla.org/foo.html</a> executes the following JS:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> stateObj = &#123; <span class="hljs-attr">foo</span>: <span class="hljs-string">'bar'</span> &#125;</div><div class="line">history.replaceState(stateObj, <span class="hljs-string">'page 2'</span>, <span class="hljs-string">'bar.htmk'</span>)</div></pre></td></tr></table></figure>
<p>This will cause the URL bar to display <a href="http://mozilla.org/bar.html" target="_blank" rel="noopener">http://mozilla.org/bar.html</a>, but won’t cause the browser to load bar.html or even check that bar.html exists.</p>
<p>Suppose now that the user navigates to <a href="http://www.microsoft.com" target="_blank" rel="noopener">http://www.microsoft.com</a>, then clicks back. At this point, the URL bar will display <a href="http://mozilla.org/bar.html" target="_blank" rel="noopener">http://mozilla.org/bar.html</a>.</p>
<p>If you click back again, you will be nagivated to the page before foo.html. (which is different from pushState())</p>
<h3 id="The-popstate-event"><a href="#The-popstate-event" class="headerlink" title="The popstate event"></a>The popstate event</h3><p>A popstate event is dispatched to the <code>window</code> every time the active history entry changes. If the history entry being activated was created by a call to <code>pushState</code> or affected by <code>replaceState</code>, the <code>popstate</code> event’s <code>state</code> property contains a copy of the history entry’s state object.</p>
<h3 id="Reading-the-current-state"><a href="#Reading-the-current-state" class="headerlink" title="Reading the current state"></a>Reading the current state</h3><p>When your page loads, it might have a non-null state object. This can be happen, for example, if the page sets a state object(by <code>pushState</code>, or <code>replaceState</code>) and then the user restarts their browser. When your page reloads, the page will receive an <code>onload</code> event, but no <code>popstate</code> event. However if you read the <code>history.state</code> property, you’ll get back the state object you would have to gotten if a <code>popstate</code> had fired.</p>
<p>You can read it directly:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> currentState = history.state</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">Like this article? Support the author with</h3>
        <div class="buttons is-centered">
            
                <!-- Visit https://www.paypal.com/donate/buttons/ to get your donate button -->

<a class="button is-warning donate" onclick="document.getElementById(&#39;paypal-donate-form&#39;).submit()">
    <span class="icon is-small">
        <i class="fab fa-paypal"></i>
    </span>
    <span>Paypal</span>
</a>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal-donate-form">
    <input type="hidden" name="cmd" value="_donations" />
    <input type="hidden" name="business" value="chen.yu.keith@foxmail.com" />
    <input type="hidden" name="currency_code" value="USD" />
</form>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2017/08/10/Build-GraphQL-Server-with-Express-1/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">Build GraphQL Server With Express</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2017/08/07/Note-on-Sequelize/">
                <span class="level-item">Note on Sequelize</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Comments</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
	var gitment = new Gitment({
		id: '2017/08/09/History-API/',
		owner: 'Keith-CY',
		repo: 'Keith-CY.github.io',
		oauth: {
			client_id: '56319e1ce36ed4313555',
			client_secret: 'ca7f10a8357d52290f5509fb54e5173a8bea0a5d',
		},
	})
	gitment.render('comment-container')
</script>

    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>

</html>
