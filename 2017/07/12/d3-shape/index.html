<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>D3-Shape | EzCook</title><meta name="description" content="d3.shapeVisualization typically consist of discrete  graphical marks, such as Symbols, arcs, lines and areas. While the ractangles of a bar chart may be easy enough to generate directly using SVG or C"><meta name="keywords" content="D3"><meta name="author" content="Chen Yu"><meta name="copyright" content="Chen Yu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/images/logo.png"><link rel="canonical" href="https://ezcook.de/2017/07/12/d3-shape/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="D3-Shape"><meta property="og:url" content="https://ezcook.de/2017/07/12/d3-shape/"><meta property="og:site_name" content="EzCook"><meta property="og:description" content="d3.shapeVisualization typically consist of discrete  graphical marks, such as Symbols, arcs, lines and areas. While the ractangles of a bar chart may be easy enough to generate directly using SVG or C"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2017-07-12T07:43:59.000Z"><meta property="article:modified_time" content="2020-08-30T12:25:47.992Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-136207372-1');
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '5.1.1',
  algolia: {"appId":"KU7XP6WJWL","apiKey":"6806ddc27f224d4ebc2fe49dc770371c","indexName":"Blog","hits":{"per_page":6},"languages":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}.","hits_stats":"${hits} results found in ${time} ms"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: false,
  copyright: {"limitCount":50,"languages":{"author":"Author: Chen Yu","link":"Link: ","source":"Source: EzCook","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: true    
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-08-30 20:25:47'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 5.1.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/images/yudan.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">304</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">73</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">7</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-card"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/portfolio/"><i class="fa-fw fas fa-code"></i><span> Portfolio</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="color"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#d3-shape"><span class="toc-number">1.</span> <span class="toc-text">d3.shape</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Installing"><span class="toc-number">2.</span> <span class="toc-text">Installing</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Arcs"><span class="toc-number">3.</span> <span class="toc-text">Arcs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pies"><span class="toc-number">4.</span> <span class="toc-text">Pies</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lines"><span class="toc-number">5.</span> <span class="toc-text">Lines</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Areas"><span class="toc-number">6.</span> <span class="toc-text">Areas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Curves"><span class="toc-number">7.</span> <span class="toc-text">Curves</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Links"><span class="toc-number">8.</span> <span class="toc-text">Links</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stacks"><span class="toc-number">9.</span> <span class="toc-text">Stacks</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">EzCook</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-card"></i><span> About</span></a></div><div class="menus_item"><a class="site-page" href="/portfolio/"><i class="fa-fw fas fa-code"></i><span> Portfolio</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">D3-Shape</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2017-07-12T07:43:59.000Z" title="Created 2017-07-12 15:43:59">2017-07-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-08-30T12:25:47.992Z" title="Updated 2020-08-30 20:25:47">2020-08-30</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><span class="disqus-comment-count comment-count"><a href="https://ezcook.de/2017/07/12/d3-shape/#disqus_thread"></a></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id="d3-shape"><a href="#d3-shape" class="headerlink" title="d3.shape"></a>d3.shape</h3><p>Visualization typically consist of discrete  graphical marks, such as <code>Symbols</code>, <code>arcs</code>, <code>lines</code> and <code>areas</code>. While the ractangles of a bar chart may be easy enough to generate directly using <code>SVG</code> or <code>Canvas</code>, other shapes are complex, such as roudned annular sectors and centripetal Catmull-Rom splines. This module provides a variety of shape generators for your convenience.</p>
<p>As with other aspects of D3, these shapes are driven by data: each shape generator exposes accessors that control how the input data are mapped to a visual representation.</p>
<p>You might define a line generator for a time series by <code>scaling</code> field of your data to fit the chart.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> lineGen = d3.line()</span><br><span class="line">    .x(<span class="function"><span class="params">d</span> =&gt;</span> (d.date))</span><br><span class="line">    .y(<span class="function"><span class="params">d</span> =&gt;</span> (d.value))</span><br></pre></td></tr></table></figure>

<p>This line generator can then be used to compute the <code>d</code> attribute of an SVG path element:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.datum(data).attr(<span class="string">&#x27;d&#x27;</span>, lineGen)</span><br></pre></td></tr></table></figure>

<p>Or you can use it to render to a Canvas 2D context:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lineGen.context(context)(data)</span><br></pre></td></tr></table></figure>

<h3 id="Installing"><a href="#Installing" class="headerlink" title="Installing"></a>Installing</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://d3js.org/d3-path.v1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://d3js.org/d3-shape.v1.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>or</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add d3-shape</span><br></pre></td></tr></table></figure>
<h3 id="Arcs"><a href="#Arcs" class="headerlink" title="Arcs"></a>Arcs</h3><p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/d3/d3-shape/master/img/pie.png"></p>
<p>The arc genrateor produces a circular or annular sector, as in a pie or donut chart. If the difference between the start and end angles(the regular span) is greater than 2 * Math.PI, the arc generator will produce a complete circle or annulus. If it is less than 2 * Math.PI, arcs may have rounded corners and angular padding.</p>
<p>Arcs are always centered at &lt;0, 0&gt;, use a transform to move the arc to a different position.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arc = d3.arc() <span class="comment">// construct a new arc genrator with default settings.</span></span><br><span class="line"></span><br><span class="line">arc(&#123;</span><br><span class="line">  innerRadius: <span class="number">0</span>,</span><br><span class="line">  outerRadius: <span class="number">100</span>,</span><br><span class="line">  startAngle: <span class="number">0</span>,</span><br><span class="line">  endAngle: <span class="built_in">Math</span>.PI / <span class="number">2</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">const</span> arc = d3.arc()</span><br><span class="line">    .innerRadius(<span class="number">0</span>)</span><br><span class="line">    .outerRadius(<span class="number">100</span>)</span><br><span class="line">    .startAngle(<span class="number">0</span>)</span><br><span class="line">    .endAngle(<span class="built_in">Math</span>.PI/<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">arc()</span><br></pre></td></tr></table></figure>

<p><strong>arc.centroid(arguments)</strong> computes the midpoint &lt;x, y&gt; of the center line of the arc that would be generated by the given arguments. The arguments are arbitrary. They are simple propagated to the arc generator’s accessor functions along with the <code>this</code> object.</p>
<p>To be consistent with the generated arc, the accessors must be deterministirc, i.e., return the same value given the same arguments. The midpoint is defined as (startAngle + endAngle) / 2 and (innerRadius + outerRadius) / 2</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/d3/d3-shape/master/img/centroid-annular-sector.png"></p>
<p><strong>arc.cornerRadius([radius])</strong> sets the corner radius to the specified function or number and returns the arc generator.</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/d3/d3-shape/master/img/rounded-annular-sector.png"></p>
<p><strong>arc.padAngle([angle])</strong> sets the pad angle to the specifid function or number and returns this arc generator. The pad angle is converted to a fixed linear distances seperateing adajacent arcs, defined as *<em>padRadius * padAngle*</em>.</p>
<p><strong>arc.context([context])</strong> sets the context and returns this arc generator. If <em>context</em> is not specified, returns the current context, which defaults to null. If the context is not null, then the generated arc is rendered to this context as a sequence of path method calls. Otherwise, a path data string representing the generated arc is returned.</p>
<h3 id="Pies"><a href="#Pies" class="headerlink" title="Pies"></a>Pies</h3><p>This pie generator does not produce a shape directly, but instead <strong>computes</strong> the necessary angles to represent a tabular dataset as a pie or donut chart. These angles can be passed to an arc generator.</p>
<p><strong>d3.pie()</strong> constructs a new pie generator with the default settings.</p>
<p><strong>pie(data[, arguments])</strong> generates a pie for the given array of data, <strong>returning an array of objects representing each datum’s arc angle</strong>. Any additional arguments are arbitrary. They are simply propagated to the pie generator’s accessor functions along with the <code>this</code> object.</p>
<p>The length of the returned array is the same as data and each element <em>i</em> in the returned array corresponds to the element <em>i</em> in the input data. Each object in the returned array has the following properties:</p>
<ul>
<li><p>data: the input datum; the corresponding element in the input data array.</p>
</li>
<li><p>value: the numeric value of the arc</p>
</li>
<li><p>index: the zero-based sorted index of arc</p>
</li>
<li><p>startAgnle: the start angle of the arc</p>
</li>
<li><p>endAngle: the end angle of the arc</p>
</li>
<li><p>padAngle: the pad angle of the arc</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">13</span>, <span class="number">21</span>];</span><br><span class="line"><span class="keyword">var</span> arcs = d3.pie()(data);</span><br><span class="line"><span class="comment">// to</span></span><br><span class="line">[</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>:  <span class="number">1</span>, <span class="string">&quot;value&quot;</span>:  <span class="number">1</span>, <span class="string">&quot;index&quot;</span>: <span class="number">6</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">6.050474740247008</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">6.166830023713296</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>:  <span class="number">1</span>, <span class="string">&quot;value&quot;</span>:  <span class="number">1</span>, <span class="string">&quot;index&quot;</span>: <span class="number">7</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">6.166830023713296</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">6.283185307179584</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>:  <span class="number">2</span>, <span class="string">&quot;value&quot;</span>:  <span class="number">2</span>, <span class="string">&quot;index&quot;</span>: <span class="number">5</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">5.817764173314431</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">6.050474740247008</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>:  <span class="number">3</span>, <span class="string">&quot;value&quot;</span>:  <span class="number">3</span>, <span class="string">&quot;index&quot;</span>: <span class="number">4</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">5.468698322915565</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">5.817764173314431</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>:  <span class="number">5</span>, <span class="string">&quot;value&quot;</span>:  <span class="number">5</span>, <span class="string">&quot;index&quot;</span>: <span class="number">3</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">4.886921905584122</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">5.468698322915565</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>:  <span class="number">8</span>, <span class="string">&quot;value&quot;</span>:  <span class="number">8</span>, <span class="string">&quot;index&quot;</span>: <span class="number">2</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">3.956079637853813</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">4.886921905584122</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>: <span class="number">13</span>, <span class="string">&quot;value&quot;</span>: <span class="number">13</span>, <span class="string">&quot;index&quot;</span>: <span class="number">1</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">2.443460952792061</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">3.956079637853813</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;,</span><br><span class="line">  &#123;<span class="string">&quot;data&quot;</span>: <span class="number">21</span>, <span class="string">&quot;value&quot;</span>: <span class="number">21</span>, <span class="string">&quot;index&quot;</span>: <span class="number">0</span>, <span class="string">&quot;startAngle&quot;</span>: <span class="number">0.000000000000000</span>, <span class="string">&quot;endAngle&quot;</span>: <span class="number">2.443460952792061</span>, <span class="string">&quot;padAngle&quot;</span>: <span class="number">0</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>The first pair of parens, <code>pie()</code> constructs a default pie generator, the second <code>pie()(data)</code> invokes this generator on the dataset, returning an array of objects.</p>
<p>Note that the returned array is in the same order as the data.</p>
<h3 id="Lines"><a href="#Lines" class="headerlink" title="Lines"></a>Lines</h3><p>The line generator produces a spline or polyline, as in a line chart. Lines also appear in many other visualization types, such as the links in hierarchical edge bundling.</p>
<p><strong>d3.line()</strong> constructs a new line generator with default settings.</p>
<p><strong>line(data)</strong> generates a line for the given array of data. Depending on this line generator’s assciated curve, the given input data may need to be sorted by x-value before being passed to the line generator. If the line generator has a context, then the line is rendered to this context as a sequence of path method calls and this function returns void.</p>
<p><strong>line.x(fn)</strong> specifies the x accessor.</p>
<p><strong>line.y(fn)</strong> specifies the y accessor.</p>
<p><strong>line.defined([defined])</strong> sets the defined accessor.</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/d3/d3-shape/master/img/line-defined.png"></p>
<p><strong>line.curve([curve])</strong> sets the curve factory and returns this line genrator. If curve is not specified, returns the current curve factory, which defaults to <strong>curveLinear</strong>.</p>
<p><strong>d3.lineRadial()</strong> constructs a new radial line generator with the default settings.</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/d3/d3-shape/master/img/line-radial.png"></p>
<p>A radial line generator is equivalent to the standard cartesian line generator, except the x and y accessor are replaced with angle and readius accessors.</p>
<p>Radial lines are always positioned relative to &lt;0, 0&gt;, use a transform to change the origin.</p>
<h3 id="Areas"><a href="#Areas" class="headerlink" title="Areas"></a>Areas</h3><p>The area generator produces an area, as in an area chart. An area is defined by two bounding lines, either splines or polilines. Typically two lines share the same x-value, differing only in y-value; most commonly, y0 is defined as a constant representing zero.  The first line (the top line) is defined by x1 and y1 and is rendered first; the second line (the base line) is defined by x0 and y0 and is rendered second, with the points in reverse order.</p>
<p><strong>d3.area()</strong> constructs a new area generator with the default settings.</p>
<p><strong>area.data()</strong> generats area for the given array of data. Depending on this area generator’s associated curve.</p>
<p><strong>area.x([x])</strong> sets x0 to x and x1 to null.</p>
<p><strong>area.x0()</strong> sets the x0 accessor.</p>
<p><strong>area.defined()</strong></p>
<p><strong>d3.areaRadial()</strong></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://raw.githubusercontent.com/d3/d3-shape/master/img/area-radial.png"></p>
<h3 id="Curves"><a href="#Curves" class="headerlink" title="Curves"></a>Curves</h3><p>Curves are typically not constructed or used directly, insread being passed to <code>line.curve</code> and <code>arec.curve</code>. For example:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> line = d3.line()</span><br><span class="line">  .x(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> x(d.date) &#125;)</span><br><span class="line">  .y(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> y(d.value) &#125;)</span><br><span class="line">  .curve(d3.curveCatmullRom.alpha(<span class="number">0.5</span>))</span><br></pre></td></tr></table></figure>

<ul>
<li><p>d3.curveBasis(context)</p>
</li>
<li><p>d3.curveBasisClosed(context)</p>
</li>
<li><p>d3.curveBasisOpen(context)</p>
</li>
<li><p>d3.curveBundle(context)</p>
</li>
<li><p>d3.curveCardinal(context)</p>
</li>
<li><p>d3.curveCardinalClosed(context)</p>
</li>
<li><p>d3.curveLinear(context)</p>
</li>
<li><p>d3.curveStep(context)</p>
</li>
<li><p>d3.curveStepAfter(context)</p>
</li>
<li><p>d3.curveStepBefore(context)</p>
</li>
</ul>
<h3 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h3><p>The link shape generates a smooth cubic Bezier curve from a source point to a target point. The tangents of the curve at the start and end are either <code>vertical</code>, <code>horizontal</code>, or <code>radial</code>.</p>
<p><strong>d3.linkVertical()</strong>, returns a new link generator with vertical tangents.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> link = d3.linkVertical()</span><br><span class="line">    .x(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123; <span class="keyword">return</span> d.x &#125;)</span><br><span class="line">    .y(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>)</span>&#123; <span class="keyword">return</span> d.y &#125;)</span><br></pre></td></tr></table></figure>

<p><strong>d3.linkHorizontal()</strong>, returns a new link generator with horizontal tangents.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> link = d3.linkHorizontal()</span><br><span class="line">    .x(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d.y &#125;)</span><br><span class="line">    .y(<span class="function"><span class="keyword">function</span>(<span class="params">d</span>) </span>&#123; <span class="keyword">return</span> d.x &#125;)</span><br></pre></td></tr></table></figure>

<h3 id="Stacks"><a href="#Stacks" class="headerlink" title="Stacks"></a>Stacks</h3><p>Some shape types can be stakced, placing one shape adjacent to another.</p>
<p>Stacked charts can show overall value and per-category value simultaneously.</p>
<p><strong>d3.stack()</strong>, constructs a new stack generator with the default settings.</p>
<p><strong>stack(data[, arguments])</strong>, generates a stack for the given array of data, returning an array of representing each series. Any additional arguments are arbitrary, they are simply propagated to accessors along with <code>this</code> object.</p>
<p>The series are determined by the keys accessor; each series <em>i</em> in the returned array corresponds to the <em>i</em> th key. Each series is an array o points, where each point <em>j</em> corresponds to the <em>j</em> th element in the input <em>data</em>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = [</span><br><span class="line">  &#123;<span class="attr">month</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2015</span>, <span class="number">0</span>, <span class="number">1</span>), <span class="attr">apples</span>: <span class="number">3840</span>, <span class="attr">bananas</span>: <span class="number">1920</span>, <span class="attr">cherries</span>: <span class="number">960</span>, <span class="attr">dates</span>: <span class="number">400</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">month</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2015</span>, <span class="number">1</span>, <span class="number">1</span>), <span class="attr">apples</span>: <span class="number">1600</span>, <span class="attr">bananas</span>: <span class="number">1440</span>, <span class="attr">cherries</span>: <span class="number">960</span>, <span class="attr">dates</span>: <span class="number">400</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">month</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2015</span>, <span class="number">2</span>, <span class="number">1</span>), <span class="attr">apples</span>:  <span class="number">640</span>, <span class="attr">bananas</span>:  <span class="number">960</span>, <span class="attr">cherries</span>: <span class="number">640</span>, <span class="attr">dates</span>: <span class="number">400</span>&#125;,</span><br><span class="line">  &#123;<span class="attr">month</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="number">2015</span>, <span class="number">3</span>, <span class="number">1</span>), <span class="attr">apples</span>:  <span class="number">320</span>, <span class="attr">bananas</span>:  <span class="number">480</span>, <span class="attr">cherries</span>: <span class="number">640</span>, <span class="attr">dates</span>: <span class="number">400</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// To produce a stack of this data</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> stack = d3.stack()</span><br><span class="line">    .keys([ <span class="string">&#x27;apples&#x27;</span>, <span class="string">&#x27;bananas&#x27;</span>, <span class="string">&#x27;cherries&#x27;</span>, <span class="string">&#x27;dates&#x27;</span> ])</span><br><span class="line">    .order(d3.stackOrderNone)</span><br><span class="line">    .offset(d3.stackOffsetNone)</span><br><span class="line"></span><br><span class="line"><span class="comment">// returned</span></span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">  [[   <span class="number">0</span>, <span class="number">3840</span>], [   <span class="number">0</span>, <span class="number">1600</span>], [   <span class="number">0</span>,  <span class="number">640</span>], [   <span class="number">0</span>,  <span class="number">320</span>]], <span class="comment">// apples</span></span><br><span class="line">  [[<span class="number">3840</span>, <span class="number">5760</span>], [<span class="number">1600</span>, <span class="number">3040</span>], [ <span class="number">640</span>, <span class="number">1600</span>], [ <span class="number">320</span>,  <span class="number">800</span>]], <span class="comment">// bananas</span></span><br><span class="line">  [[<span class="number">5760</span>, <span class="number">6720</span>], [<span class="number">3040</span>, <span class="number">4000</span>], [<span class="number">1600</span>, <span class="number">2240</span>], [ <span class="number">800</span>, <span class="number">1440</span>]], <span class="comment">// cherries</span></span><br><span class="line">  [[<span class="number">6720</span>, <span class="number">7120</span>], [<span class="number">4000</span>, <span class="number">4400</span>], [<span class="number">2240</span>, <span class="number">2640</span>], [<span class="number">1440</span>, <span class="number">1840</span>]], <span class="comment">// dates</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p><strong>stack.keys([keys])</strong>, sets the keys accessor to the specified function or array and returns this stack generator.</p>
<p><strong>stack.order([order])</strong>, sets the order accessor to the specified functino or array and returns this stack generator. If order is not specified, returns the current order accessor, which default to <code>stackOrderNone</code>, this uses the order given by the key accessor.</p>
<ul>
<li><p>d3.stackOrderAscending(series)</p>
</li>
<li><p>d3.stackOrderDescending(series)</p>
</li>
<li><p>d3.stackOrderInsideOut(series)</p>
</li>
<li><p>d3.stackOrderNone(series)</p>
</li>
<li><p>d3.stackOrderReverse(series)</p>
</li>
</ul>
<p><strong>stack.offset([offest])</strong>, sets the offset accessor to the specified function or array, and returns this stack generator. If no offset is specified, returns the current offset accessor, which default to <code>stackOffsetNone</code>, this uses a zero baseline.</p>
<ul>
<li><p>d3.stackOffsetDiverging(series, order)</p>
</li>
<li><p>d3.stackOffsetExpand(series, order)</p>
</li>
<li><p>d3.stackOffsetNone(series, order)</p>
</li>
</ul>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Chen Yu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://ezcook.de/2017/07/12/d3-shape/">https://ezcook.de/2017/07/12/d3-shape/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/D3/">D3</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2017/07/13/Tutorial-Par1-of-Dapp/"><img class="prev-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Tutorial Part 1 of Dapp</div></div></a></div><div class="next-post pull-right"><a href="/2017/07/12/d3-range/"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">d3.range</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> Related Articles</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2017/08/30/Attributes-in-D3/" title="Attributes in D3"><img class="relatedPosts_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-08-30</div><div class="relatedPosts_title">Attributes in D3</div></div></a></div><div class="relatedPosts_item"><a href="/2017/08/30/Basic-Elements-in-D3/" title="Basic Elements in D3"><img class="relatedPosts_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-08-30</div><div class="relatedPosts_title">Basic Elements in D3</div></div></a></div><div class="relatedPosts_item"><a href="/2017/08/31/Manipulate-Data-in-D3/" title="Manipulate Data in D3"><img class="relatedPosts_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-08-31</div><div class="relatedPosts_title">Manipulate Data in D3</div></div></a></div><div class="relatedPosts_item"><a href="/2017/07/11/Quick-Reference-of-D3/" title="Quick Reference of D3"><img class="relatedPosts_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-07-11</div><div class="relatedPosts_title">Quick Reference of D3</div></div></a></div><div class="relatedPosts_item"><a href="/2017/08/29/Simple-Example-of-Line-Chart-with-D3v4/" title="Simple Example of Line Chart With D3v4"><img class="relatedPosts_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-08-29</div><div class="relatedPosts_title">Simple Example of Line Chart With D3v4</div></div></a></div><div class="relatedPosts_item"><a href="/2017/08/31/Styles-in-D3/" title="Styles in D3"><img class="relatedPosts_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2017-08-31</div><div class="relatedPosts_title">Styles in D3</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2015 - 2020 By Chen Yu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="Increase Font Size"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="Decrease Font Size"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="/js/search/algolia.js"></script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://ezcook.de/2017/07/12/d3-shape/'
    this.page.identifier = '2017/07/12/d3-shape/'
    this.page.title = 'D3-Shape'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://ezcook-de.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script><script>if (window.DISQUSWIDGETS === undefined) {
  var d = document, s = d.createElement('script');
  s.src = 'https://ezcook-de.disqus.com/count.js';
  s.id = 'dsq-count-scr';
  (d.head || d.body).appendChild(s);
} else {
  DISQUSWIDGETS.getCount({reset: true});
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  'meta[name=description]',
  '#config_change',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

const pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
})

document.addEventListener('pjax:complete', function () {
  refreshFn()

  $('script[data-pjax]').each(function () {
    $(this).parent().append($(this).remove())
  })

  GLOBAL_CONFIG.islazyload && lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  if (typeof gtag === 'function') {
    gtag('config', 'UA-136207372-1', {'page_path': window.location.pathname});
  }

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

})

document.addEventListener('pjax:send', function () {
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  $(window).off('scroll')

  //reset readmode
  $('body').hasClass('read-mode') && $('body').removeClass('read-mode')

  //reset font-size
  $('body').css('font-size') !== originFontSize && $('body').css('font-size', parseFloat(originFontSize))
})</script></div></body></html>