<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8">
<title>EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>


    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    
    
    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="EzCook" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-03-05T06:30:17.000Z">2018-03-05</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 812 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/03/05/Writing-Upgradable-Contracts-in-Solidity/">Writing Upgradable Contracts in Solidity</a>
            
        </h1>
        <div class="content">
            <p><a href="https://blog.colony.io/writing-upgradeable-contracts-in-solidity-6743f0eecc88" target="_blank" rel="noopener">origin</a></p>
<p>Ethereum contracts are immutable – once deployed to the blockchain they cannot be updated, yet the need to change their logic with time is ultimately necessary.</p>
<p>During a contract upgrade the following factors need to be considered:</p>
<ul>
<li><p>Block gas limit(4712388 for Homestead)</p>
<p>Upgrade transaction tend to be large due to the amount of processing they have to complete e.g. <em>deploy a contract, move data, move references</em>.</p>
</li>
<li><p>Inter-contract dependencies</p>
<p><em>when a contract is compiled, all of its imports are compiled into the contract thus leading to a ripple effect when you want to swap out a contract which is being referenced by other contract</em>.</p>
</li>
</ul>
<p>These two are related, as having more dependencies affects the size of your deployed contracts and the overall transaction size of the upgrade. The implementation patterns below work to <em>minimise the upgrade gas costs as well as loosening the coupling of contracts without breaking Solidity type safety</em>.</p>
<p>Note that for the sake of simplying the examples, we have omitted the implementation of security and permission.</p>
<h3 id="Avoiding-large-data-copy-operations"><a href="#Avoiding-large-data-copy-operations" class="headerlink" title="Avoiding large data copy operations"></a>Avoiding large data copy operations</h3><p>Storing data is expensive(<code>SSTORE</code> operation costs 5000 or 20000 gas) and upgrading contracts containing large storage variables runs the chance of hitting the transaction gas limit during the copying of its data.</p>
<p><strong>You may therefore want to isolate your datastore from the rest of your code, and make it as flexible as possible, so that it is unlikely to need to be upgrade.</strong></p>
<p>Depending on your circumstances, how large of a datastore you need and whether you expect its structure to change often, you may choose a strict definition or a loosely typed flat store. Below is an example of the latter which implements support for storing a <em>sha3</em> key and value pairs. It is the more flexible and extensible option. This ensures data schema changes can be implemented without requiring upgrades to the storage contract.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">contract EternalStorage &#123;</span><br><span class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> uint) UIntStorage;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUIntValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">uint</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> UIntStorage[record];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setUIntValue</span>(<span class="hljs-params">bytes32 record, uint value</span>) </span>&#123;</span><br><span class="line">    UIntStorage[record] = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> string) StringStorage;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStringValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">string</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> StringStorage(record);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setStringValue</span>(<span class="hljs-params">bytes32 record, string value</span>) </span>&#123;</span><br><span class="line">    StringStorage[record] = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> address) AddressStorage;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAddressValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">address</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> AddressStorage[record];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setAddressValue</span>(<span class="hljs-params">bytes32 record, address value</span>) </span>&#123;</span><br><span class="line">    AddressStorage[record] = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> bytes) BytesStorage;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBytesValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bytes</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> BytesStorage[record];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setBytesValue</span>(<span class="hljs-params">bytes32 record, bytes value</span>) </span>&#123;</span><br><span class="line">    BytesStorage[record] = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapping (<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> bool) BooleanStorage;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBooleanValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> BooleanStorage[record];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setBooleanValue</span>(<span class="hljs-params">bytes32 record, bool value</span>) </span>&#123;</span><br><span class="line">    BooleanStorage[record] = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  mapping (<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> int) IntStorage;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getIntValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">int</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> IntStorage[record];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setIntValue</span>(<span class="hljs-params">bytes32 record, int value</span>) </span>&#123;</span><br><span class="line">    IntStorage[record] = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For upgrades you can then just switch the upgraded contract to point to the new EternalStorage contract instance without having a copy of its data.</p>
<h3 id="Use-Libraries-to-Encapsulate-Logic"><a href="#Use-Libraries-to-Encapsulate-Logic" class="headerlink" title="Use Libraries to Encapsulate Logic"></a>Use Libraries to Encapsulate Logic</h3><p>Libraries are special form of contracts that are singletons and not allowed any storage variables.</p>
<p>The advantage of libraries in the context of upgrades is that they allow encapsulation of business logic or data management logic into singleton instance that cost only upgrading one and not many contracts.</p>
<p>Example below shows a library used for adding a <em>Proposal</em> to storage.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"EternalStorage.sol"</span>;</span><br><span class="line"></span><br><span class="line">library ProposalsLibrary &#123;</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProposalCount</span>(<span class="hljs-params">address _storageContract</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">uint256</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> EternalStorage(_storageContract).getUIntValue(sha3(<span class="hljs-string">"proposalCount"</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addProposal</span>(<span class="hljs-params">address _storageContract, bytes32 _name</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">var</span> idx = getProposalCount(_storageContract);</span><br><span class="line">    EternalStorage(_storageContract).setBytes32Value(sha3(<span class="hljs-string">"proposal_name"</span>, idx), _name);</span><br><span class="line">    EternalStorage(_storageContract).setUIntValue(sha3(<span class="hljs-string">"proposal_eth"</span>, idx), <span class="hljs-number">0</span>);</span><br><span class="line">    EternalStorage(_storageContract).setUIntValue(sha3(<span class="hljs-string">"ProposalCount"</span>), idx + <span class="hljs-number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Under the cover, library functions are called using <code>delegatecall</code> from the calling contract which has the advantage of passing the <code>msg.sender</code> and <code>msg.value</code> seamlessly. You can therefore write your library code as if it were just part of your contract, without having to worry about the sender or value chagning.</p>
<p>The example below shows a sample <code>Organization</code> contract using <code>ProposalsLibrary</code> to interact with data storage.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"ProposalsLibrary.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract Organization &#123;</span><br><span class="line">  using ProposalsLibrary <span class="hljs-keyword">for</span> address;</span><br><span class="line">  address public eternalStorage;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Organization</span>(<span class="hljs-params">address _eternalStorage</span>) </span>&#123;</span><br><span class="line">    eternalStorage = _eternalStorage;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addProposal</span>(<span class="hljs-params">bytes32 _name</span>) </span>&#123;</span><br><span class="line">    eternalStorage.addProposal(_name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>With libraries, there is a slight gas overhead on each call. However, it makes deploying a new contract much cheaper.</p>
<h3 id="Use-‘interface’-to-decouple-inter-contract-communication"><a href="#Use-‘interface’-to-decouple-inter-contract-communication" class="headerlink" title="Use ‘interface’ to decouple inter-contract communication"></a>Use ‘interface’ to decouple inter-contract communication</h3><p>Abstract Contract implementation behind an interface that only define its function siguatures.</p>
<p>This is a well known pattern in object oriented programming.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"ITokenLedger.sol"</span>;</span><br><span class="line"></span><br><span class="line">contract Organization &#123;</span><br><span class="line">  ITokenLedger public tokenLedger;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Organization</span>(<span class="hljs-params">address _tokenLedger</span>) </span>&#123;</span><br><span class="line">    tokenLedger = ITokenLedger(_tokenLedger);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateToekns</span>(<span class="hljs-params">uint256 _amount</span>) </span>&#123;</span><br><span class="line">    tokenLedger.generateTokens(_amount);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here instead of importing the entire <code>TokenLedger.sol</code> contract, we use an interface containing just the function signatures. This eases any possible upgrades to TokenLedger which don’t affect its interface, too, which with this model can be implemented without redeploying the Organization contract.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-28T03:32:11.000Z">2018-02-28</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 445 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/28/Dockerizing-a-React-App/">Dockerizing a React App</a>
            
        </h1>
        <div class="content">
            <p><a href="http://mherman.org/blog/2017/12/07/dockerizing-a-react-app/" target="_blank" rel="noopener">origin</a></p>
<h3 id="Project-Setup"><a href="#Project-Setup" class="headerlink" title="Project Setup"></a>Project Setup</h3><p>Install <code>create-react-app</code></p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g create-react-app@1.5.2</span><br></pre></td></tr></table></figure>
<p>Creating a new app</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">create-react-app docker-app</span><br><span class="line"><span class="hljs-built_in">cd</span> docker-app</span><br></pre></td></tr></table></figure>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>Add a <code>Dockerfile</code> to the project root</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># base image</span><br><span class="line">FROM node:9.6.1</span><br><span class="line"></span><br><span class="line"># set working directory</span><br><span class="line">RUN mkdir /usr/src/app</span><br><span class="line">WORKDIR /usr/src/app</span><br><span class="line"></span><br><span class="line"># add `/usr/src/app/node_modules/.bin` to $PATH</span><br><span class="line">ENV PATH /usr/src/app/node_modules/.bin:$PATH</span><br><span class="line"></span><br><span class="line"># install and cache app dependencies</span><br><span class="line">COPY package.json /usr/src/app/package.json</span><br><span class="line">RUN npm install</span><br><span class="line">RUN npm install react-scripts@1.1.1 -g</span><br><span class="line"></span><br><span class="line"># start app</span><br><span class="line">CMP [&quot;npm&quot;, &quot;start&quot;]</span><br></pre></td></tr></table></figure>
<p>Add a <code>.dockerignore</code> to speed up the Docker build process as our local dependencies will not be sent to the Docker Daemon</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node_modules</span><br></pre></td></tr></table></figure>
<p>Build and tag the Docker Image</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t docker-app:1.0.0</span><br></pre></td></tr></table></figure>
<p>Then spin up the container once the image is built.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -v <span class="hljs-variable">$&#123;PWD&#125;</span>:/usr/src/app -v /usr/src/app/node_modules -p 3000:3000 --rm docker-app:1.0.0</span><br></pre></td></tr></table></figure>
<p>Now you can visit your app <code>http://localhost:3000</code></p>
<h3 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h3><p>Add a <code>docker-compose.yml</code> to the project root.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.3'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-attr">services:</span></span><br><span class="line"><span class="hljs-attr">  docker-app:</span></span><br><span class="line"><span class="hljs-attr">    container_name:</span> <span class="hljs-string">docker-app</span></span><br><span class="line"><span class="hljs-attr">    build:</span></span><br><span class="line"><span class="hljs-attr">      context:</span> <span class="hljs-string">.</span></span><br><span class="line"><span class="hljs-attr">      dockerfile:</span> <span class="hljs-string">Dockerfile</span></span><br><span class="line"><span class="hljs-attr">    volumnes:</span></span><br><span class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'.:/usr/src/app'</span></span><br><span class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'/usr/src/app/node_modules'</span></span><br><span class="line"><span class="hljs-attr">    ports:</span></span><br><span class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'3000:3000'</span></span><br><span class="line"><span class="hljs-attr">    environment:</span></span><br><span class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">NODE_ENV=development</span></span><br></pre></td></tr></table></figure>
<p>Take note of the volumes. Without the data volume <code>/usr/src/app/node_modules</code>, the <code>node_modules</code> directory would be overwritten by the mounting of the host directory at runtime that were installed when the container was built.</p>
<p>BUild the image and fire up the container</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d --build</span><br></pre></td></tr></table></figure>
<p>Ensure the app is running in the browser.</p>
<p>Bring down the container before moving on</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose stop</span><br></pre></td></tr></table></figure>
<h3 id="Production"><a href="#Production" class="headerlink" title="Production"></a>Production</h3><p>Let’s create a seperate <code>Dockerfile</code> for use in production called <code>Dockerfile-prod</code></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># build environment</span><br><span class="line">FROM node:9.6.1 as builder</span><br><span class="line">RUN mkdir /usr/src/app</span><br><span class="line">WORKDIR /usr/src/app</span><br><span class="line">ENV PATH /usr/src/app/node_moudles/.bin:$PATH</span><br><span class="line">COPY package.json /usr/src/app/package.json</span><br><span class="line">RUN npm install</span><br><span class="line">RUN npm install react-scripts@1.1.1 -g</span><br><span class="line">COPY . /usr/src/app</span><br><span class="line">RUN npm run build</span><br><span class="line"></span><br><span class="line"># production environment</span><br><span class="line">FROM nginx:1.13.9-alpine</span><br><span class="line">COPY --from=builder /usr/src/app/build /usr/share/nginx/html</span><br><span class="line">EXPOSE 80</span><br><span class="line">CMD [&quot;nginx&quot;,&quot;-g&quot;,&apos;deamon off;&quot;]</span><br></pre></td></tr></table></figure>
<p>Using the production Dockerfile, build and tag the Docker Image:</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f Dockerfile-prod -t docker-app-prod .</span><br></pre></td></tr></table></figure>
<p>Spin up the container</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -it -p 80:80 --rm docker-app-prod</span><br></pre></td></tr></table></figure>
<p>Add Prod Docker Compose as `docker-compose-prod.yml’</p>
<figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">version:</span> <span class="hljs-string">"3.3"</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-attr">services:</span></span><br><span class="line"><span class="hljs-attr">  docker-app-prod:</span></span><br><span class="line"><span class="hljs-attr">    container_name:</span> <span class="hljs-string">docker-app-prod</span></span><br><span class="line"><span class="hljs-attr">    build:</span></span><br><span class="line"><span class="hljs-attr">      context:</span> <span class="hljs-string">.</span></span><br><span class="line"><span class="hljs-attr">      dockerfile:</span> <span class="hljs-string">Dockerfile-prod</span></span><br><span class="line"><span class="hljs-attr">    prots:</span></span><br><span class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">"80:80"</span></span><br></pre></td></tr></table></figure>
<p>Fire up the container</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose -f docker-compose-prod.yml up -d --build</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-24T03:05:49.000Z">2018-02-24</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 542 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/24/Deploy-RoR-with-Mina/">Deploy RoR With Mina</a>
            
        </h1>
        <div class="content">
            <h3 id="Mina-Setup"><a href="#Mina-Setup" class="headerlink" title="Mina Setup"></a>Mina Setup</h3><p>Let’s take a look at setting up Mina with Puma. First, you’ll need to add Mina and mina-puma in Gemfile.</p>
<p>Then install gems and execute the initial Mina Command for generating a <code>config/deploy.rb</code>.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bundle</span><br><span class="line">mina init</span><br></pre></td></tr></table></figure>
<h3 id="Detailed-Explanations-for-the-Mina-deploy-file"><a href="#Detailed-Explanations-for-the-Mina-deploy-file" class="headerlink" title="Detailed Explanations for the Mina deploy file"></a>Detailed Explanations for the Mina deploy file</h3><figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># Set the domain or ip address of the remote server.</span></span><br><span class="line">set <span class="hljs-symbol">:domain</span>, <span class="hljs-string">'yourdomain'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Set the folder of the remote server where Mina will deploy your app.</span></span><br><span class="line">set <span class="hljs-symbol">:deploy_to</span>, <span class="hljs-string">'path/to/directory'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Set a link to the repository. Better git protocol.</span></span><br><span class="line">set <span class="hljs-symbol">:repository</span>, <span class="hljs-string">'git@...'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Set the name of a branch you plan to deploy as default master.</span></span><br><span class="line">set <span class="hljs-symbol">:branch</span>, <span class="hljs-string">'master'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Fill in the names of the files and directories that will be symlinks to the shared directory.</span></span><br><span class="line"><span class="hljs-comment"># All folders will be created automatically on Mina Setup.</span></span><br><span class="line"><span class="hljs-comment"># Don't forget to add a path to the uploads folder if you are using Dragonfly or Carrierwaves.</span></span><br><span class="line"><span class="hljs-comment"># Otherwise, you will lose your uploads on each deploy.</span></span><br><span class="line">set <span class="hljs-symbol">:shared_dirs</span>, fetch(<span class="hljs-symbol">:shared_dirs</span>, []).push(<span class="hljs-string">'log'</span>, <span class="hljs-string">'tmp/pids'</span>, <span class="hljs-string">'tmp/sockets'</span>, <span class="hljs-string">'public/uploads'</span>)</span><br><span class="line">set <span class="hljs-symbol">:shared_files</span>, fetch(<span class="hljs-symbol">:shared_files</span>, []).push(<span class="hljs-string">'config/database.yml'</span>, <span class="hljs-string">'config/secrets.yml'</span>, <span class="hljs-string">'config/puma.rb'</span>)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Username of ssh for access to the remote server.</span></span><br><span class="line">set <span class="hljs-symbol">:user</span>, <span class="hljs-string">'root'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># This is not a required field, you can use it to set an app name for easy recognition.</span></span><br><span class="line">set <span class="hljs-symbol">:application_name</span>, <span class="hljs-string">'MyApp'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># Set ruby version. If you have RVM installed globally, you'll also need to set an RVM path,</span></span><br><span class="line"><span class="hljs-comment"># like set:rvm_use_path, '/usr/local/rvm/scripts/rvm'.</span></span><br><span class="line"><span class="hljs-comment"># You can find the RVM location with rvm info command.</span></span><br><span class="line">task <span class="hljs-symbol">:environment</span> <span class="hljs-keyword">do</span></span><br><span class="line">  invoke <span class="hljs-symbol">:<span class="hljs-string">'rvm:use'</span></span>, <span class="hljs-string">'ruby-2.5.1@default'</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br></pre></td></tr></table></figure>
<p>By default, Mina will create all folders mentioned in shared_dirs and shared_files.</p>
<p>You deploy section in deploy.rb should look like this:</p>
<figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">task <span class="hljs-symbol">:deploy</span> <span class="hljs-keyword">do</span></span><br><span class="line">  deploy <span class="hljs-keyword">do</span></span><br><span class="line">    comment <span class="hljs-string">"Deploying <span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:application_name</span>)&#125;</span> to <span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:domain</span>)&#125;</span>:<span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:deploy_to</span>)&#125;</span>"</span></span><br><span class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'git:clone'</span></span></span><br><span class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'deploy:link_shared_paths'</span></span></span><br><span class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'rvm:load_env_vars'</span></span></span><br><span class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'bundle:install'</span></span></span><br><span class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'rails:db_migrate'</span></span></span><br><span class="line">    command <span class="hljs-string">%&#123;<span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:rails</span>) <span class="hljs-symbol">db:</span>seed&#125;</span>&#125;</span></span><br><span class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'rails:assets_precompile'</span></span></span><br><span class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'deploy:cleanup'</span></span></span><br><span class="line"></span><br><span class="line">    on <span class="hljs-symbol">:launch</span> <span class="hljs-keyword">do</span></span><br><span class="line">      invoke <span class="hljs-symbol">:<span class="hljs-string">'puma:phased_restart'</span></span></span><br><span class="line">    <span class="hljs-keyword">end</span></span><br><span class="line">  <span class="hljs-keyword">end</span></span><br><span class="line"><span class="hljs-keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="Puma-Setup"><a href="#Puma-Setup" class="headerlink" title="Puma Setup"></a>Puma Setup</h3><p>Create or fill a puma.rb file in a config folder</p>
<figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">environment <span class="hljs-string">"productino"</span></span><br><span class="line"></span><br><span class="line">bind <span class="hljs-string">"unix:///&#123;path_to_your_app&#125;/shared/tmp/sockets/puma.sock"</span></span><br><span class="line">pidfile <span class="hljs-string">"/&#123;path_to_your_app&#125;/shared/tmp/pids/puma.pid"</span></span><br><span class="line">state_path <span class="hljs-string">"/&#123;path_to_your_app&#125;/shared/tmp/sockets/puma.state"</span></span><br><span class="line">directory <span class="hljs-string">"/&#123;path_to_your_app&#125;/current"</span></span><br><span class="line"></span><br><span class="line">workers <span class="hljs-number">2</span></span><br><span class="line">threads <span class="hljs-number">1</span>,<span class="hljs-number">2</span></span><br><span class="line"></span><br><span class="line">daemonize <span class="hljs-literal">true</span></span><br><span class="line"></span><br><span class="line">activate_control_app <span class="hljs-string">'unix:///&#123;path_to_your_app&#125;/shared/tmp/sockets/pumactl.sock'</span></span><br><span class="line"></span><br><span class="line">prune_bundler</span><br></pre></td></tr></table></figure>
<h3 id="Fill-database-yml-and-secrets-yml"><a href="#Fill-database-yml-and-secrets-yml" class="headerlink" title="Fill database.yml and secrets.yml"></a>Fill database.yml and secrets.yml</h3><h3 id="Setup-nginx"><a href="#Setup-nginx" class="headerlink" title="Setup nginx"></a>Setup nginx</h3><p>Create file myapp.conf in a <code>/nginx/etc/conf.d</code> folder with similar content.</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">upstream mysite &#123;</span><br><span class="line">  server unix:///home/admin/mysite/shared/tmp/sockets/puma.sock fail_timeout=0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">  listen 80;</span><br><span class="line">  listen [::]:80;</span><br><span class="line"></span><br><span class="line">  server_name mysite.com;</span><br><span class="line">  root /home/admin/mysite/current/public;</span><br><span class="line"></span><br><span class="line">  location ~ ^/assets/ &#123;</span><br><span class="line">    expires max;</span><br><span class="line">    gzip_static on;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    add_header Cache-Control public;</span><br><span class="line">    break;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  location / &#123;</span><br><span class="line">    proxy_pass http://mysite;</span><br><span class="line">    proxy_set_header Host $host;</span><br><span class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  location ~ ^/(500|404|422).html &#123;</span><br><span class="line">    root /home/admin/mysite/current/public;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  error_page 500 502 503 504 /500.html;</span><br><span class="line">  error_page 404 /404.html;</span><br><span class="line">  error_page 422 /422.html;</span><br><span class="line"></span><br><span class="line">  client_max_body_size 4G;</span><br><span class="line">  keepalive_timeout 10;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-14T15:11:11.000Z">2018-02-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 18 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/14/What-Blockchain-came-with/">What Blockchain Came With</a>
            
        </h1>
        <div class="content">
            <p><a href="http://naotu.baidu.com/file/1d400c82d65cd3fd530ffc55d8eb3783?token=5e57783dc51b3617" target="_blank" rel="noopener">MindMap</a></p>
<embed src="http://naotu.baidu.com/file/1d400c82d65cd3fd530ffc55d8eb3783?token=5e57783dc51b3617" width="100%" height="30vh">

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-14T15:02:32.000Z">2018-02-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 20 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/14/Ethereum-IPFS/">Ethereum + IPFS</a>
            
        </h1>
        <div class="content">
            <p><a href="http://naotu.baidu.com/file/2b8d146aa6314a4205c8573a7e84f834?token=c4a7105f4f935d63" target="_blank" rel="noopener">MindMap</a></p>
<embed src="http://naotu.baidu.com/file/2b8d146aa6314a4205c8573a7e84f834?token=c4a7105f4f935d63" width="100%" height="30vh">

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-29T05:41:35.000Z">2018-01-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 260 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/29/Gas-Used-by-Public-and-External-Function-in-Solidity/">Gas Used by Public and External Function in Solidity</a>
            
        </h1>
        <div class="content">
            <p><a href="https://ethereum.stackexchange.com/questions/19380/external-vs-public-best-practices?answertab=active#tab-top" target="_blank" rel="noopener">Origin</a></p>
<p>A simple example demostrating this effect looks like this:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.19;</span><br><span class="line"></span><br><span class="line">contract Test &#123;</span><br><span class="line">  function test(uint[20] a) public returns (uint) &#123;</span><br><span class="line">    return a[10] * 2;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function test2(uint[20] a) external returnss (uint) &#123;</span><br><span class="line">    return a[10] * 2;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Calling each function, the <code>public</code> function uses 496 gas, while the <code>external</code> function uses 261 gas.</p>
<p>The difference is because in public functions, Solidity immediately copies array argument to <strong>memory</strong>, while external functions can read directly from <strong>calldata</strong>. Memory allocation is expensive, whereas reading from calldata is cheap.</p>
<p>The reason that <code>public</code> functions need to write all the arguments to memory is that public functions may be called internally, which is actually an entirely different process than external calls.</p>
<p>Internal calls are executed via jumps in the code, and array arguments are passed internally by pointers to memory. Thus, <strong>when the compiler generates the code for an internal function, that function expects its arguments to be located in memory</strong>.</p>
<p>For external functions, the compiler doesn’t need to allow internal calls, and so it allows arguments to be read directly from calldata, saving the copying step.</p>
<p>As for best practices, you should use <code>external</code> fi you expect that the function will only ever be called externally, and use public if you need to call the function internally. It almost never makes sense to use the <code>this.f()</code> pattern, as this requires a real <code>CALL</code> to be executed, which is expensive. Also, passing arrays via this method would be far more expensive than passing them internally.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-29T02:33:20.000Z">2018-01-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 760 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/29/智能合约编写注意事项/">智能合约编写注意事项</a>
            
        </h1>
        <div class="content">
            <p><a href="https://medium.com/loom-network/how-to-secure-your-smart-contracts-6-solidity-vulnerabilities-and-how-to-avoid-them-part-1-c33048d4d17d" target="_blank" rel="noopener">原文连接</a></p>
<h3 id="Overflow-与-Underflow"><a href="#Overflow-与-Underflow" class="headerlink" title="Overflow 与 Underflow"></a>Overflow 与 Underflow</h3><p>Solidity 可以处理 256 位数字, 最高为 2<strong>256 - 1, 所以对 (2 </strong> 256 - 1) 加 1 会导致归 0.</p>
<p>同理, 对 unsigned 类型 0 做减 1 运算会得到 (2**256 - 1)</p>
<p>测试代码如下</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity 0.4.18;</span><br><span class="line"></span><br><span class="line">contract OverflowUnderflow &#123;</span><br><span class="line">    uint public zero = 0;</span><br><span class="line">    uint public max = 2**256 - 1;</span><br><span class="line"></span><br><span class="line">    // zero will end up at  2 ** 256 - 1</span><br><span class="line">    function underflow() public &#123;</span><br><span class="line">        zero -= 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function overflow() public &#123;</span><br><span class="line">        max += 1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>尽管他们同样危险, 但是在智能合约中, underflow 造成的影响更大.</p>
<p>比如, 账号 A 持有 X tokens, 如果他发起一笔 X + 1 tokens 的交易, 如果代码不进行校验, 则账号 A 的余额可能发生 underflow 导致余额变多.</p>
<p>可以引入 <strong>SafeMath Library</strong> 解决</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity 0.4.18;</span><br><span class="line"></span><br><span class="line">library SafeMath &#123;</span><br><span class="line">    function mul(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">        if (a==0) &#123;</span><br><span class="line">            return 0;</span><br><span class="line">        &#125;</span><br><span class="line">        uint c = a * b;</span><br><span class="line">        assert(c / a == b);</span><br><span class="line">        return c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function div(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">        uint256 c = a / b;</span><br><span class="line">        return c;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function sub(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">        assert(b &lt;= a);</span><br><span class="line">        return a - b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function add(uint256 a, uint256 b) internal pure returns (uint256) &#123;</span><br><span class="line">        uint256 c = a + b;</span><br><span class="line">        assert(c &gt;= a);</span><br><span class="line">        return c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract OverflowUnderflow &#123;</span><br><span class="line">    using SafeMath for uint;</span><br><span class="line">    uint public zero = 0;</span><br><span class="line">    uint public max = 2 ** 256 - 1;</span><br><span class="line"></span><br><span class="line">    function underflow() public &#123;</span><br><span class="line">        zero = zero.sub(1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function overflow() public &#123;</span><br><span class="line">        max = max.add(1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Visibility-与-Delegatecall"><a href="#Visibility-与-Delegatecall" class="headerlink" title="Visibility 与 Delegatecall"></a>Visibility 与 Delegatecall</h3><ul>
<li><p><strong>Public</strong> functions 可以被任意地址调用</p>
</li>
<li><p><strong>External</strong> functions 只能从合约外部调用</p>
</li>
<li><p><strong>Private</strong> functions 只能从合约内部调用</p>
</li>
<li><p><strong>Internal</strong> functions 允许从合约及其子合约调用</p>
</li>
</ul>
<p><strong>External</strong> functions 消耗的 gas 比 public 少, 因为其使用 <code>calldata</code> 而 <strong>Public</strong> 需要复制所有参数到 memory.</p>
<h5 id="Delegatecall"><a href="#Delegatecall" class="headerlink" title="Delegatecall"></a>Delegatecall</h5><p>引自 <a href="http://solidity.readthedocs.io/en/develop/introduction-to-smart-contracts.html?highlight=delegatecall#delegatecall-callcode-and-libraries" target="_blank" rel="noopener">Solidity Docs</a></p>
<blockquote>
<p>Delegatecall is identical to a message call apart from the fact that the code at the target address is executed in the context of the calling contract and <code>msg.sender</code> and <code>msg.value</code> do not change their values.</p>
<p>This means that a contract can dynamically load code from a different address at runtime. Storage, current address and balance still refer to the calling contract, only the code is taken from the called address.</p>
</blockquote>
<p>这个特性可以用于构建 Library 和模块化代码. 但是与此同时, 这也有可能造成别人对你的代码进行操作.</p>
<p>下例中, 攻击者调用 <code>pwn</code> 方法获得了合约的拥有权.</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity 0.4.18;</span><br><span class="line"></span><br><span class="line">contract Delegate &#123;</span><br><span class="line">    address public owner;</span><br><span class="line"></span><br><span class="line">    function Delegate(address _owner) public &#123;</span><br><span class="line">        owner = _owner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function pwn() public &#123;</span><br><span class="line">        owner = msg.sender;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract Deletagion &#123;</span><br><span class="line">    address public owner;</span><br><span class="line">    Delegate delegate;</span><br><span class="line"></span><br><span class="line">    function Delegation(address _delegateAddreses) public &#123;</span><br><span class="line">        delegate = Delegate(_delegateAddreses);</span><br><span class="line">        owner = msg.sender;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // an attacker can call Delegate.pwn() in the context of Delegation, this means that pwn() will modify the state of **Delegation** and not Delegate, the result is that the attacker takes unauthorized ownership of the contract.</span><br><span class="line">    function () public &#123;</span><br><span class="line">        if(delegate.delegatecall(msg.data)) &#123;</span><br><span class="line">            this;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Reentrancy-TheDAO-hack"><a href="#Reentrancy-TheDAO-hack" class="headerlink" title="Reentrancy(TheDAO hack)"></a>Reentrancy(TheDAO hack)</h3><p>Solidity 中 <code>call</code> 函数被调用时, 如果带有 value 参数, 则会转发所有他所收到的 gas.</p>
<p>在一下代码片段中, <code>call</code> 函数在 sender 的余额实际减少前被调用. 这里有一个漏洞曾导致 TheDAO 攻击.</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function withdraw(uint _amount) public &#123;</span><br><span class="line">  if(balances[msg.sender] &gt;= _amount) &#123;</span><br><span class="line">    if(msg.sender.call.value(_amount)()) &#123;</span><br><span class="line">      _amount;</span><br><span class="line">    &#125;</span><br><span class="line">    balances[msg.sender] -= amount;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>引自 <a href="https://www.reddit.com/r/ethereum/comments/4oi2ta/i_think_thedao_is_getting_drained_right_now/d4cxvc3/" target="_blank" rel="noopener">Reddit</a> 的解释</p>
<blockquote>
<p>In simple words, it’s like the bank teller doesn’t change your balance until she has given you all the money you requested. “Can I withdraw $500? Wait, before that , can I withdraw $500?”</p>
</blockquote>
<blockquote>
<p>And so on. The smart contracts as designed only check you have $500 at beginning once, and allow themselves to be interrupted.</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-12-22T09:36:55.000Z">2017-12-22</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 minutes read (About 1485 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/12/22/Start-in-Protobuf/">Start in Protobuf</a>
            
        </h1>
        <div class="content">
            <p><strong>Protocol Buffers</strong> are a language-neutral, platform-neutral, extensible way of serializing structured data for use in commnucations protocols, data storage, and more, originally designed at Google.</p>
<p><strong>Protobuf.js</strong> is a pure JS implementation with <strong>TypeScript</strong> support for node.js and browser. It’s easy to use, blazingly fast and works out of the box with <code>.proto</code> files.</p>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>Node.js</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install protobufjs</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> protobuf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'protobufjs'</span>)</span><br></pre></td></tr></table></figure>
<p>Browsers</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../protobuf.js"</span>&gt;</span><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="Distributions"><a href="#Distributions" class="headerlink" title="Distributions"></a>Distributions</h3><p>Where bundle size is a factor, there are additional stripped-down versions of the full-library(~19kb gzipped) available that excldue certain functinality</p>
<ul>
<li>when working with JSON descriptor, and/or reflection only, see the light-library(~16kb gzipped) that excludes the parser. CommonJS entry point is:</li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> protobuf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'protobufjs/light'</span>)</span><br></pre></td></tr></table></figure>
<p>When working with statically generated code only, see the minimal library(~6.5kb gzipped) that also excludes reflection. CommonJS entry point is:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> protobuf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'protobufjs/minimal`)</span></span><br></pre></td></tr></table></figure>
<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p>Because JS is a dynamically typed language, protobuf.js introduces the concept of a <strong>valid message</strong> in order to provide the best possible performance.</p>
<h4 id="Valid-Message"><a href="#Valid-Message" class="headerlink" title="Valid Message"></a>Valid Message</h4><blockquote>
<p>A valid message is an object not missing any required fields and exclusively composed of JS types understood by the wire format writer.</p>
</blockquote>
<p>There are two possible types of valid messages and the encoder is able to work with both these for convenience:</p>
<ul>
<li><p><strong>Message Instance</strong> (explicit instance of message classes with default values on their prototype) always (have to) satisfy the requirements of a valid message by design.</p>
</li>
<li><p><strong>Plain JavaScript Objects</strong> that just so happen to be composed in a way satisfying the requirements of a valid message as well.</p>
</li>
</ul>
<p>In a nutshell, the wire format writer understoods the following types:</p>
<table>
<thead>
<tr>
<th>Field Type</th>
<th>Expected JS type(create, encode)</th>
<th>Conversion (fromObject)</th>
</tr>
</thead>
<tbody>
<tr>
<td>s-/u-/int32<br>s-/fixed32</td>
<td><code>number</code> (32 bit integer)</td>
<td>`value</td>
<td>0<code>if signed&lt;br&gt;</code>value &gt;&gt;&gt; 0` is unsigned</td>
</tr>
<tr>
<td>s-/u-/int64<br>s-/fixed64</td>
<td><code>Long</code>-like(optimal)<br><code>number</code>(53 bit integer)</td>
<td><code>Long.fromValue(value)</code> with long.js<br><code>parseInt(value, 10)</code> otherwise</td>
</tr>
<tr>
<td>float<br>double</td>
<td><code>number</code></td>
<td><code>Number(value)</code></td>
</tr>
<tr>
<td>bool</td>
<td><code>boolean</code></td>
<td><code>Boolean(value)</code></td>
</tr>
<tr>
<td>string</td>
<td><code>string</code></td>
<td><code>String(value)</code></td>
</tr>
<tr>
<td>bytes</td>
<td><code>Uint8Array</code>(optimal)<br><code>Buffer</code>(optimal under node)<br><code>Array.&lt;number&gt;</code>(8 bit integers)</td>
<td><code>base64.decode(value)</code> if a <code>string</code><br><code>Object</code> with non-zero<code>.length</code> is assumed to be buffer-like</td>
</tr>
<tr>
<td>enum</td>
<td><code>number</code> (32 bit integer)</td>
<td>Looks up the numeric id if a <code>string</code></td>
</tr>
<tr>
<td>message</td>
<td>Valid Message</td>
<td><code>Message.fromObject(value)</code></td>
</tr>
</tbody>
</table>
<ul>
<li><p>Explicit <code>undefined</code> and <code>null</code> are considered as not set if the field is optional</p>
</li>
<li><p>Repeated fields are <code>Array.&lt;T&gt;</code></p>
</li>
<li><p>Map fields are <code>Object.&lt;string, T&gt;</code> with the key being the string representation of the respective value or an 8 character long binary hash string for <code>Long</code>-likes.</p>
</li>
<li><p>Types marked as <em>optimal</em> provide the best performance because no conversion step(i.e. number to low and high bits or base64 string to buffer) is required.</p>
</li>
</ul>
<p>For performance reasons, each message class provides a distinct set of methods with each method doing just one thing. This avoid unnecessary assertions / redundant operations where performance is a concern but also forces a user to perform verification explicityly where necessary.</p>
<h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><ul>
<li><p>Message.verify(message: Object): null | string</p>
</li>
<li><p>Message.encode(message: Message | Object[, writer: Writer]): Writer</p>
</li>
<li><p>Message.encodeDelimited(message: Message | Object[, writer: Writer]): Writer</p>
</li>
<li><p>Message.decode(reader: Reader | Uint8Array): Message</p>
</li>
<li><p>Message.toObject(message: Message[, options: ConversionOptions]): Object</p>
</li>
<li><p>Message.verify(message: Object): null | string</p>
<p>Verifies that a plain js object satisfies the requirements of a valid message and thus can be encoded without issues. Instead of throwing, it returns the error message as a string, if any:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> payload = <span class="hljs-string">'invalid (not an object)'</span></span><br><span class="line"><span class="hljs-keyword">var</span> err = AwesomeMessage.verify(payload)</span><br><span class="line"><span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(err)</span><br></pre></td></tr></table></figure>
</li>
<li><p>Message.encode(message: Message | Object[, writer: Writer]): Writer</p>
</li>
</ul>
<p>Encodes a message instance or valid plain javascript object. This method does not implicit verify the message and it’s up to user to make sure that the payload is a valid message.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> buffer = AwesomeBuffer.encode(message).finish()</span><br></pre></td></tr></table></figure>
<ul>
<li>Message.encodeDelimited(message: Message | Object[, writer: Writer]): Writer</li>
</ul>
<p>Works like <code>Message.encode</code> but additionally prepends the length of the message as a varint.</p>
<ul>
<li>Message.decode(reader: Reader): Message</li>
</ul>
<p>Decode a buffer to a message instance. If required fields are missing, it throws a <code>util.ProtocolError</code> with an <code>instance</code> property set to the so far decoded message. If the wire format is invalid, it throws an <code>Error</code>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">try</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">var</span> decodedMessage = AwesomeMessage.decode(buffer)</span><br><span class="line">&#125; cache (e) &#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> protobuf.util.ProtocolError) &#123;</span><br><span class="line">    <span class="hljs-comment">// e.instance holds the so far decoded message with missing required fields</span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-comment">// wire format is invalid</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Message.decodeDelimited(reader: Reader | Uint8Array): Message</li>
</ul>
<p>works like Message.decode but additionally reads the length of the message prepended as a varint</p>
<ul>
<li>Message.create(properties: Object): Message</li>
</ul>
<p>Creates a new message instance from a set of properties that satisfy the requirements of a valid message. Where applicable, it is recommended to prefer <code>Message.create</code> over <code>Message.fromObject</code> because it doesn’t perform possibly redundant conversion.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> message = AwesomeMessage.create(&#123; <span class="hljs-attr">awesomeField</span>: <span class="hljs-string">'AwesomeString'</span> &#125;)</span><br></pre></td></tr></table></figure>
<ul>
<li>Message.fromObject(object: Object): Message</li>
</ul>
<p>Converts any non-valid plain javascript object to a message instance using the conversion steps outlined within the table above.</p>
<ul>
<li>Message.toObject(message: Message[, options: ConversionOptions]): Object</li>
</ul>
<p>Converts a message instance to an arbitrary plain javascript object for interoperability with other libraries or storage. The resulting plain javascript object might still satisify the requirements of a vlaid message depending on the actual conversion options specified, but most of the time it does not.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> object = AwesomeMessage.toObject(message, &#123;</span><br><span class="line">  enums: <span class="hljs-built_in">String</span>,</span><br><span class="line">  longs: <span class="hljs-built_in">String</span>,</span><br><span class="line">  bytes: <span class="hljs-built_in">String</span>,</span><br><span class="line">  defaults: <span class="hljs-literal">true</span>,</span><br><span class="line">  arrays: <span class="hljs-literal">true</span>,</span><br><span class="line">  objects: <span class="hljs-literal">true</span>,</span><br><span class="line">  oneofs: <span class="hljs-literal">true</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>For reference, the following diagram aims to display relationships between the different methods and the concepts of a valid message:</p>
<p><img src="https://camo.githubusercontent.com/f090df881cc6c82ecb7c5d09c9fad550fdfd153e/687474703a2f2f64636f64652e696f2f70726f746f6275662e6a732f746f6f6c7365742e737667" alt=""></p>
<blockquote>
<p>In other words: <code>verify</code> indicates that calling <code>create</code> or <code>encode</code> directly on the plain object will [result in a valid message respectively] succeed. <code>fromObject</code>, on the other hand, does conversion from a broader range of plain objects to create valid message.</p>
</blockquote>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="Using-proto-files"><a href="#Using-proto-files" class="headerlink" title="Using .proto files"></a>Using .proto files</h4><p>It is possible to load existing .proto files using the full library, which parses and compiles the definitions to ready to use (reflection-based) message classes:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">package awesomepackage</span><br><span class="line">syntax = <span class="hljs-string">"proto3"</span></span><br><span class="line"></span><br><span class="line">message AwesomeMessage &#123;</span><br><span class="line">  string awesome_field = <span class="hljs-number">1</span>; becomes awesomeField</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">protobuf.load(<span class="hljs-string">'awesome.proto'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, root</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="hljs-keyword">throw</span> err</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-comment">// Obtain a message type</span></span><br><span class="line">  <span class="hljs-keyword">var</span> AwesomeMessage = root.lookupType(<span class="hljs-string">'awesomepackage.AwesomeMessage'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// Exemplary payload</span></span><br><span class="line">  <span class="hljs-keyword">var</span> payload = &#123; <span class="hljs-attr">awesomeField</span>: <span class="hljs-string">'AwesomeField'</span> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// Verify the payload if necessary(i.e. when possible incomplete or invalid)</span></span><br><span class="line">  <span class="hljs-keyword">var</span> errMsg = AwesomeMessage.verify(payload)</span><br><span class="line">  <span class="hljs-keyword">if</span> (errMsg) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(errMsg)</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// Create a new message</span></span><br><span class="line">  <span class="hljs-keyword">var</span> message = AwesomeMessage.create(payload) <span class="hljs-comment">// or use .fromObject if conversion is necessary</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// Encode a message to an Uint8Array(browser) or Buffer (node)</span></span><br><span class="line">  <span class="hljs-keyword">var</span> buffer = AwesomeMessage.encode(message).finish()</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ... do something with message</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// Decode an Uint8Array(browser) or Buffer(node) to a message</span></span><br><span class="line">  <span class="hljs-keyword">var</span> message = AwesomeMessage.decode(buffer)</span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// ...do something with message</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// If the application uses length-delimited buffers, there is also encodeDelimited and decodeDelimited.</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// Maybe conver the message back to a plain object</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">var</span> object = AwesomeMessage.toObject(message, &#123;</span><br><span class="line">    loings: <span class="hljs-built_in">String</span>,</span><br><span class="line">    enums: <span class="hljs-built_in">String</span>,</span><br><span class="line">    bytes: <span class="hljs-built_in">String</span>,</span><br><span class="line">    <span class="hljs-comment">// see Conversions</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Additionally, promise syntax can be used by omitting the callback, if preferred:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protobuf.load(<span class="hljs-string">'awesome.proto'</span>).then(<span class="hljs-function"><span class="hljs-params">root</span> =&gt;</span> &#123;&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Using-JSON-Descriptors"><a href="#Using-JSON-Descriptors" class="headerlink" title="Using JSON Descriptors"></a>Using JSON Descriptors</h3><p>The library utilize JSON descriptor that are equivalent to a .proto definition. For example, the following is identical to the .proto definition seen above:</p>
<figure class="highlight hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// awesome.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="hljs-attr">"nested"</span>: &#123;</span><br><span class="line">    <span class="hljs-attr">"AwesomeMessage"</span>: &#123;</span><br><span class="line">      <span class="hljs-attr">"fields"</span>: &#123;</span><br><span class="line">        <span class="hljs-attr">"awesomeField: &#123;</span></span><br><span class="line">          "type": "string",</span><br><span class="line">          "id", 1</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>JSON descriptor closely resemble the internal reflection structure:</p>
<p>Exclusively using JSON descriptor instead of .proto files enables the use of just the light library(the parser isn’t requried in this case)</p>
<p>A JSON descriptor can either be loaded the usual way:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">protobuf.load(<span class="hljs-string">'awesome.json'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, root</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Or it can be loaded inline:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">var</span> jsonDescriptor = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./awesome.json'</span>) <span class="hljs-comment">// exemplary for node</span></span><br><span class="line"><span class="hljs-keyword">var</span> root = protobuf.Root.fromJSON(jsonDescriptor)</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// Continue at 'Obtain a message type' above</span></span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/dcodeIO/ProtoBuf.js/" target="_blank" rel="noopener">More Info here</a></p>
<h3 id="Usage-with-TypeScript"><a href="#Usage-with-TypeScript" class="headerlink" title="Usage with TypeScript"></a>Usage with TypeScript</h3><p>The library ships with its own type definitions and modern editors will automatically detect and use them for code completion.</p>
<p>The npm package depends on <code>@types/node</code> because of <code>Buffer</code> and <code>@types/long</code> because of <code>Long</code>. If you are not building for node and/or using long.js, it should be safe to exclude them manually.</p>
<h4 id="Using-the-JS-API"><a href="#Using-the-JS-API" class="headerlink" title="Using the JS API"></a>Using the JS API</h4><p>The API shown above works pretty much the same with TypeScript. However, because everything is typed, accessing fields on instances of dynamically generated message classes requries either using bracket-notation(i.e. message[‘awesomeField’]), or explicit casts.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> &#123; load &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'protobufjs'</span></span><br><span class="line"></span><br><span class="line">load(<span class="hljs-string">'awesome.proto'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, root</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(err)</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">const</span> AwesomeMessage = root.lookupType(<span class="hljs-string">'awesomepackage.AwesomeMessage'</span>)</span><br><span class="line">  <span class="hljs-keyword">let</span> message = AwesomeMessage.create(&#123; <span class="hljs-attr">awesomeField</span>: <span class="hljs-string">'hello'</span> &#125;)</span><br><span class="line">  cnosole.log(<span class="hljs-string">`message = <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(message)&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">let</span> buffer = AwesomeMessage.encode(message).finish()</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Buffer = <span class="hljs-subst">$&#123;<span class="hljs-built_in">Array</span>.prototype.toString.call(buffer)&#125;</span>`</span>)</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">let</span> decoded = AwesomeMessage.decode(buffer)</span><br><span class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`decoded = <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(decoded)&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-12-07T08:59:20.000Z">2017-12-07</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 490 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/12/07/Get-the-most-out-of-the-CommonsChunkPlugin/">Get the Most Out of the CommonsChunkPlugin</a>
            
        </h1>
        <div class="content">
            <p><a href="https://medium.com/webpack/webpack-bits-getting-the-most-out-of-the-commonschunkplugin-ab389e5f318" target="_blank" rel="noopener">Origin</a></p>
<p>Use <code>webpack-bundle-analyzer</code> to generate a fancy colorful image of all of your<br>bundles.</p>
<h3 id="Case-1-Many-vendor-bundles-with-duplicate-code"><a href="#Case-1-Many-vendor-bundles-with-duplicate-code" class="headerlink" title="Case 1: Many vendor bundles with duplicate code"></a>Case 1: Many vendor bundles with duplicate code</h3><p><img src="https://cdn-images-1.medium.com/max/2000/1*Mt5awEvcigXceRDpZRX4Dw.png" alt=""></p>
<p>Each single-page app is using a <code>new CommonsChunkPlugin</code> that targets just that<br>entry point, and its vendor code. This creates a bundle with only modules that<br>come from node_modules folder, and another bundle with just application code.</p>
<p>The configuration portion was provided:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-built_in">Object</span>.keys(activeApps).map(</span><br><span class="line">  app =&gt;</span><br><span class="line">    <span class="hljs-keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">      name: <span class="hljs-string">`<span class="hljs-subst">$&#123;app&#125;</span>_vendor`</span>,</span><br><span class="line">      chunk: [app],</span><br><span class="line">      minChunks: isVendor,</span><br><span class="line">    &#125;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>The <code>activeApps</code> variable most likely represents each of the individual entry<br>points.</p>
<p>Below are a few areas that could use some improvement.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*D4m4sa9X1V05y7I7ZCMbZA.png" alt=""></p>
<h3 id="“Meta”-caching"><a href="#“Meta”-caching" class="headerlink" title="“Meta” caching"></a>“Meta” caching</h3><p>What we see above is many large libraries like momentjs, lodash, and jquery<br>being used across 6 or more vendor bundles. The strategy for add all vendor into<br>a seperate bundle is good, but we should also apply the same strategy acroll<br><strong>all vendor bundle</strong>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">new</span> webpack.optimizeCommonsChunkPlugin(&#123;</span><br><span class="line">  children: <span class="hljs-literal">true</span>,</span><br><span class="line">  minChunks: <span class="hljs-number">6</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>We are telling the webpack to follow:</p>
<blockquote>
<p>Hey webpack, look across all chunks(including the vendor ones that were<br>generated) and move any modules that occur in at least 6 chunks to a seperate<br>file.</p>
</blockquote>
<h3 id="Case-2-duplicate-vendors-across-async-chunks"><a href="#Case-2-duplicate-vendors-across-async-chunks" class="headerlink" title="Case 2: duplicate vendors across async chunks"></a>Case 2: duplicate vendors across async chunks</h3><p><img src="https://cdn-images-1.medium.com/max/2000/1*yRCgk_pzDpkMfQGKpCO_HA.jpeg" alt=""></p>
<p>As you can see, the same 2-3 components are used across all 40-50 async bundles</p>
<p><code>CommonsChunkPlugin</code> can solve this.</p>
<h4 id="Create-an-async-Commons-Chunk"><a href="#Create-an-async-Commons-Chunk" class="headerlink" title="Create an async Commons Chunk"></a>Create an async Commons Chunk</h4><p>The technique will be very simillar to the first, however we will need to set<br>the <code>async</code> property in the configuration option, to <code>true</code> as seen below:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">  <span class="hljs-keyword">async</span>: <span class="hljs-literal">true</span>,</span><br><span class="line">  children: <span class="hljs-literal">true</span>,</span><br><span class="line">  filename: <span class="hljs-string">'commonlazy.js'</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>In the same way – webpack will scan all chunks and look for common modules.<br>Since <code>async: true</code>, only code split bundles will be scanned.</p>
<p>Because we did not specify <code>minChunks</code>, the value default to 3. so what webpack<br>is being told is:</p>
<blockquote>
<p>Hey webpack, look through all normal [aka lazy loaded] chunks and if you find<br>the smae module that appears across 3 or more chunks, then seperate it out<br>into a seperate async commons chunk.</p>
</blockquote>
<h3 id="More-Control"><a href="#More-Control" class="headerlink" title="More Control"></a>More Control</h3><h4 id="minChunks-function"><a href="#minChunks-function" class="headerlink" title="minChunks function"></a>minChunks function</h4><p>There are scenario you don’t want to have a single shared bundle because not<br>every lazy/entry chunk may use it. The <code>minChunks</code> property also takes a<br>function. This can be your ‘filtering predicate’ for what modules are added to<br>your newly created bundle.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</span><br><span class="line">  filename: <span class="hljs-string">'loash-moment-shared-bundle.js'</span>,</span><br><span class="line">  minChunks: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, count</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> (</span><br><span class="line">      <span class="hljs-built_in">module</span>.resource &amp;&amp; <span class="hljs-regexp">/lodash|moment/</span>.test(<span class="hljs-built_in">module</span>.resource) &amp;&amp; count &gt;= <span class="hljs-number">3</span></span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>This example says:</p>
<blockquote>
<p>Yo webpack, when you come across a module whos absolute path amtches lodash or<br>moment, and occurs across 3 seperate entries/chunks, then extract those<br>modules into a seperate bundle.</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-12-05T03:37:07.000Z">2017-12-05</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 926 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/12/05/Go-Web/">Go Web</a>
            
        </h1>
        <div class="content">
            <p><a href="https://gowebexamples.com/hello-world/" target="_blank" rel="noopener">Origin</a></p>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Go is a battery included programming language and has a webserver already built<br>in.</p>
<p>The <code>net/http</code> package from the standard library contains all functionalities<br>about the HTTP protocol.</p>
<p>This includes an HTTP client and an HTTP server.</p>
<h3 id="Registering-a-Request-Handler"><a href="#Registering-a-Request-Handler" class="headerlink" title="Registering a Request Handler"></a>Registering a Request Handler</h3><p>First, create a Handler which receives all incoming HTTP connections from<br>browsers, HTTP client or API requests. A handler in Go is a function with this<br>signature.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></span><br></pre></td></tr></table></figure>
<p>The function receives two parameters:</p>
<ul>
<li><p>An <code>http.ResponseWriter</code> which is where you write your text/html response to.</p>
</li>
<li><p>An <code>http.Request</code> which contains all information about this HTTP request<br>including like URL or header fields</p>
</li>
</ul>
<p>Registering a request handler to the default HTTP Server is as simple as this:</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http.HandleFunc(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">  fmt.Fprintf(w, <span class="hljs-string">"Hello, you've requested: %s\n"</span>, r.URL.Path)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="Listen-for-HTTP-Connections"><a href="#Listen-for-HTTP-Connections" class="headerlink" title="Listen for HTTP Connections"></a>Listen for HTTP Connections</h3><p>The request handler alone can not accept any HTTP connections from the outside.</p>
<p>An HTTP server has to listen on a port to pass connections on to the request<br>handler. Because port 80 is in most case the default port for HTTP traffic, this<br>server will also listen on it.</p>
<p>The following code will start Go’s default HTTP server and listen for<br>connections on port 80. You can navigate your browser to <code>http://localhost/</code> and<br>see your server handling yoru request</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.ListenAndServe(<span class="hljs-string">":80"</span>, <span class="hljs-literal">nil</span>)</span><br></pre></td></tr></table></figure>
<h3 id="The-Code"><a href="#The-Code" class="headerlink" title="The Code"></a>The Code</h3><figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">  <span class="hljs-string">"fmt"</span></span><br><span class="line">  <span class="hljs-string">"net/http"</span></span><br><span class="line">)</span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span></span> &#123;</span><br><span class="line">  http.HandleFunc(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">    fmt.Fprintf(w, <span class="hljs-string">"Hello, you've requested: %s\n"</span>, r.URL.Path)</span><br><span class="line">  &#125;)</span><br><span class="line">  http.ListenAndServe(<span class="hljs-string">":80"</span>, <span class="hljs-literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Routing-using-gorilla-mux"><a href="#Routing-using-gorilla-mux" class="headerlink" title="Routing (using gorilla/mux)"></a>Routing (using gorilla/mux)</h3><p>Go’s <code>net/http</code> package provides a lot of functionalities for the HTTP protocol.<br>One thing it doesn’t do very well is complex request routing like segmenting a<br>request url into single parameters.</p>
<p>Use <code>gorilla/mux</code> package to create routes with named parameters, GET/POST<br>handlers and domain restrictions.</p>
<p><code>gorilla/mux</code> is a package which adapts to Go’s default HTTP router. It comes<br>with a lot of features to increase the productivity when writing web<br>applications. It is also compliant to Go’s default request handler signature<br><code>func (w http.ResponseWriter, r *http.Request)</code>, so package can be mixed and<br>matched with other HTTP libraries like middleware or existing applications. Use<br>the <code>go get</code> command to install the package from Github.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go get -u github.com/gorilla/mux</span><br></pre></td></tr></table></figure>
<h4 id="Creating-a-new-Router"><a href="#Creating-a-new-Router" class="headerlink" title="Creating a new Router"></a>Creating a new Router</h4><p>First create a new request router. The router is the main router for your web<br>application and will later be passed as parameter to the server. It will receive<br>all HTTP connections and pass it on to the request handlers you will register on<br>it. You can create a new router like so:</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r := mux.NewRouter()</span><br></pre></td></tr></table></figure>
<h4 id="Registering-a-Request-Handler-1"><a href="#Registering-a-Request-Handler-1" class="headerlink" title="Registering a Request Handler"></a>Registering a Request Handler</h4><p>Once you have a new router you can register request handlers like usual. The<br>only difference is that instead of calling <code>http.HandleFunc(...)</code>, you call<br><code>HandleFunc</code> on your router like this <code>r.HandleFunc(...)</code></p>
<h4 id="URL-Parameters"><a href="#URL-Parameters" class="headerlink" title="URL Parameters"></a>URL Parameters</h4><p>The biggest strength of the <code>gorilla/mux</code> Router is the ability to extract<br>segments from the request URL. As an example, this is a URL in your application</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/books/go-programming-bluepring/page/10</span><br></pre></td></tr></table></figure>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;/page/&#123;page&#125;"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">  <span class="hljs-comment">// get the book</span></span><br><span class="line">  <span class="hljs-comment">// navigate to the page</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>The last thing to get the data from these segments. The package comes with the<br>function <code>mux.Vars(r)</code> which takes the <code>http.Request</code> as parameter and returns a<br>map of the segments.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">  vars := mux.Vars(r)</span><br><span class="line">  vars[<span class="hljs-string">"title"</span>]</span><br><span class="line">  vars[<span class="hljs-string">"page"</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Setting-the-HTTP-server’s-router"><a href="#Setting-the-HTTP-server’s-router" class="headerlink" title="Setting the HTTP server’s router"></a>Setting the HTTP server’s router</h4><p>Ever wondered what the <code>nil</code> in <code>http.ListenAndServe(&quot;:80&quot;, nil)</code> ment? It is<br>the parameter for the main router of the HTTP server. By default it’s <code>nil</code>,<br>which means to use the default router of the <code>net/http</code> package. To make use of<br>your own router, replace the <code>nil</code> with the variable of your router <code>r</code>.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http.ListenAndServe(<span class="hljs-string">":80"</span>, r)</span><br></pre></td></tr></table></figure>
<h4 id="The-Code-1"><a href="#The-Code-1" class="headerlink" title="The Code"></a>The Code</h4><figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">package</span> main</span><br><span class="line"><span class="hljs-keyword">import</span> (</span><br><span class="line">  <span class="hljs-string">"fmt"</span></span><br><span class="line">  <span class="hljs-string">"net/http"</span></span><br><span class="line">  <span class="hljs-string">"github.com/gorilla/mux"</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span></span> &#123;</span><br><span class="line">  r := mux.NewRouter()</span><br><span class="line">  r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;/page/&#123;page&#125;"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">    vars := mux.Vars(r)</span><br><span class="line">    title := vars[<span class="hljs-string">"title"</span>]</span><br><span class="line">    page := vars[<span class="hljs-string">"page"</span>]</span><br><span class="line"></span><br><span class="line">    fmt.Fprintf(w, <span class="hljs-string">"You've requested the book %s on page %s\n"</span>, title, page)</span><br><span class="line">  &#125;)</span><br><span class="line">  http.ListenAndServe(<span class="hljs-string">":80"</span>, r)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Features-of-the-gorilla-mux-Router"><a href="#Features-of-the-gorilla-mux-Router" class="headerlink" title="Features of the gorilla/mux Router"></a>Features of the <code>gorilla/mux</code> Router</h4><h5 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h5><p>Restrict the request handler to specific HTTP methods</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, CreateBook).Methods(<span class="hljs-string">"POST"</span>)</span><br><span class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, ReadBook).Methods(<span class="hljs-string">"GET"</span>)</span><br><span class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, UpdateBook).Methods(<span class="hljs-string">"PUT"</span>)</span><br><span class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, DeleteBook).Methods(<span class="hljs-string">"DELETE"</span>)</span><br></pre></td></tr></table></figure>
<h5 id="Hostnames-amp-Subdomains"><a href="#Hostnames-amp-Subdomains" class="headerlink" title="Hostnames &amp; Subdomains"></a>Hostnames &amp; Subdomains</h5><p>Restrict the request handler to specific hostname or subdomain</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, BookHandler).Host(<span class="hljs-string">"www.mybookstore.com"</span>)</span><br></pre></td></tr></table></figure>
<h5 id="Schemes"><a href="#Schemes" class="headerlink" title="Schemes"></a>Schemes</h5><p>Restrict the request handler to http/https</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">r.HandleFunc(<span class="hljs-string">"/secure"</span>, SecureHandler).Scheme(<span class="hljs-string">"https"</span>)</span><br><span class="line">r.HandleFunc(<span class="hljs-string">"/insecure"</span>, InsecureHandler).Scheme(<span class="hljs-string">"http"</span>)</span><br></pre></td></tr></table></figure>
<h5 id="Path-Prefixes-amp-Subrouters"><a href="#Path-Prefixes-amp-Subrouters" class="headerlink" title="Path Prefixes &amp; Subrouters"></a>Path Prefixes &amp; Subrouters</h5><p>Restrict the request handler to specific path prefixes.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bookrouter := r.Path.Prefix(<span class="hljs-string">"/books"</span>).subRouter()</span><br><span class="line">bookrouter.HandleFunc(<span class="hljs-string">"/"</span>, AllBooks)</span><br><span class="line">bookrouter.HandleFunc(<span class="hljs-string">"/&#123;title&#125;"</span>, GetBook)</span><br></pre></td></tr></table></figure>
<h3 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h3><p>Go’s <code>html/template</code> package provides a rich templating language for HTML<br>templates. It is mostly used in web applications to display data in a structured<br>way in a client’s browser. One great benefit of Go’s templating language is the<br>automatic escaping of data. There is no need to worry about XSS attacka as Go<br>parses the HTML template and escapes all inputs before displaying it to the<br>browser.</p>
<h4 id="First-Template"><a href="#First-Template" class="headerlink" title="First Template"></a>First Template</h4>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-30T02:14:25.000Z">2017-11-30</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 695 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/30/Generate-Ethereum-keys-and-wallet-address/">Generate Ethereum Keys and Wallet Address</a>
            
        </h1>
        <div class="content">
            <p><a href="https://kobl.one/blog/create-full-ethereum-keypair-and-address/" target="_blank" rel="noopener">Origin</a></p>
<p>This article is a guide on how to generate an <strong>ECDSA</strong> private key and derives<br>its Ethereum address.</p>
<p>Use Openssl and keccak-256sum from a terminal.</p>
<blockquote>
<p>SHA3 != keccak. Ethereum is using the <strong>keccak-256</strong> algorithm and not the<br>standard sha3.</p>
</blockquote>
<blockquote>
<p>Ethereum use keccak-256, it should be noted that it does not follow the<br>FIPS-202 based standard(aka. SHA-3), which was finalized in August 2015</p>
</blockquote>
<blockquote>
<p>web3.utils.sha3 uses keccak-256 web3.sha3(string[, option]): keccak-256</p>
</blockquote>
<h3 id="Generate-the-EC-private-key"><a href="#Generate-the-EC-private-key" class="headerlink" title="Generate the EC private key"></a>Generate the EC private key</h3><p>First of all we use <strong>Openssl</strong> ecparam command to generate an elliptic curve<br>private key. Ethereum standard is to use the <strong>secp256k1</strong> curve. The same curve<br>is used in Bitcion.</p>
<p>This command will print the private key in BEM format(using the wonderful ASN.1<br>key structure) on stdout.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt; openssl ecparam -name secp256k1 -genkey -noout</span><br><span class="line">-----BEGIN EC PRIVATE KEY-----</span><br><span class="line">MHQCAQEEIFDLYO9KuwsC4ej2UsdA4SYk7s3lb8aZuW+B8rjugrMmoAcGBSuBBAAK</span><br><span class="line">oUQDQgAEsNjwhFoLKLXGBxfpMv3ILhzg2FeySRlFhtjfi3s8YFZzJtmckVR3N/YL</span><br><span class="line">JLnUV7w3orZUyAz77k0ebug0ILd1lQ==</span><br><span class="line">-----END EC PRIVATE KEY-----</span><br></pre></td></tr></table></figure>
<p>On its own this command is not very useful for us, but if you pipe it with the<br>ec command it will display both private and public part in hexadecimal format,<br>and this is what we want.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt; openssl ecparam -name secp256k1 -genkey -noout | openssl ec -text -noout</span><br><span class="line"><span class="hljs-built_in">read</span> EC key</span><br><span class="line">Private-Key: (256 bit)</span><br><span class="line">priv:</span><br><span class="line">    20:80:65:a2:47:ed:be:5d:f4:d8:6f:bd:c0:17:13:</span><br><span class="line">    03:f2:3a:76:96:1b:e9:f6:01:38:50:dd:2b:dc:75:</span><br><span class="line">    9b:bb</span><br><span class="line">pub:</span><br><span class="line">    04:83:6b:35:a0:26:74:3e:82:3a:90:a0:ee:3b:91:</span><br><span class="line">    bf:61:5c:6a:75:7e:2b:60:b9:e1:dc:18:26:fd:0d:</span><br><span class="line">    d1:61:06:f7:bc:1e:81:79:f6:65:01:5f:43:c6:c8:</span><br><span class="line">    1f:39:06:2f:c2:08:6e:d8:49:62:5c:06:e0:46:97:</span><br><span class="line">    69:8b:21:85:5e</span><br><span class="line">ASN1 OID: secp256k1</span><br></pre></td></tr></table></figure>
<p>This command decodes the ASN.1 structure and derives the public key from the<br>private one.</p>
<p>Sometimes, Openssl is adding a null byte(0x00) in front of the private part, I<br>don’t know why it does that but you have to <strong>trim any leading zero bytes</strong> in<br>order to use it with Ethereum.</p>
<blockquote>
<p>The private key <strong>must be 32 bytes and not begin with 0x00</strong> and the public<br>one <strong>must be uncompressed and 64 bytes long</strong> or 65 with the constant (0x04)<br>prefix.</p>
</blockquote>
<h3 id="Derive-the-Ethereum-address-from-the-public-key"><a href="#Derive-the-Ethereum-address-from-the-public-key" class="headerlink" title="Derive the Ethereum address from the public key"></a>Derive the Ethereum address from the public key</h3><p>The public key is what we need in order to derive its Ethereum address. Every EC<br>Public key begins with ‘0x04’ prefix byte in order to hash it correctly.</p>
<blockquote>
<p>This prefix represents the encoding of the public key:</p>
<ul>
<li>0x04 - both x and y of the elliptic curve point follows</li>
<li>0x02, 0x03 - only x follows (y is either odd or even depending on the<br>prefix)</li>
</ul>
</blockquote>
<p>Use any method you like to get it in the form of an hexadecimal string(without<br>line return nor semicolon)</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># Extract the public key and remove the EC prefix 0x04</span></span><br><span class="line">&gt; cat Key | grep pub -A 5 | tail -n +2 |</span><br><span class="line">            tr -d <span class="hljs-string">'\n[:space:]:'</span> | sed <span class="hljs-string">'s/^04//'</span> &gt; pub</span><br><span class="line">836b35a026743e823a90a0ee3b91bf615c6a757e2b60b9e1dc1826fd0dd16106f7bc1e8179f665015f43c6c81f39062fc2086ed849625c06e04697698b21855e</span><br></pre></td></tr></table></figure>
<p>The pub file now contains the hexadecimal value of the public key without the<br>0x04 prefix.</p>
<p>An Ethereum address is made of 20 bytes(40 hex characters), it is commonly<br>represented by adding the 0x prefix. In order to derive it, one should take the<br>keccak-256 hash of the hexadecimal form of a public key, then <strong>keep only the<br>last 20 bytes</strong> (aka get rid of the first 12 bytes)</p>
<p>Simply pass the file containing the public key in hexadecimal format to the<br>keccak-256sum command. <strong>Do not forget to use the ‘-x’ option</strong> in order to<br>interpret it as hexadecimal and not a simple string.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># Generate the hash and take the address part</span></span><br><span class="line">&gt; cat pub | keccak-256sum -x -l | tr -d <span class="hljs-string">' -'</span> | tail -c 41</span><br><span class="line">0bed7abd61247635c1973eb38474a2516ed1d884</span><br></pre></td></tr></table></figure>
<p>Which gives us the Ethereum address<br><code>0x0bed7abd61247635c1973eb38474a2516ed1d884</code>.</p>
<blockquote>
<p>CAUTION: if your final address looks like<br><code>0xdcc703c0E500B653Ca82273B7BFAd8045D85a470</code>, this means you have hashed an<br>empty public key. Sending funds to this address will lock them forever.</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-29T12:27:01.000Z">2017-11-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 61 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/29/Caution-on-Int8Array/">Caution on Int8Array</a>
            
        </h1>
        <div class="content">
            <figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> t = crypto.getRandomValues(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Int8Array</span>(<span class="hljs-number">3</span>))</span><br><span class="line"><span class="hljs-comment">// Int8Array(3) [-15, -17, -90]</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// t is not typeof Array</span></span><br><span class="line"><span class="hljs-built_in">Array</span>.isArray(t)</span><br><span class="line"><span class="hljs-comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// element in Int8Array must be type Int8</span></span><br><span class="line"><span class="hljs-comment">// method map returns array of same type as origin array</span></span><br><span class="line"><span class="hljs-keyword">let</span> _t = []</span><br><span class="line">t.map(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="hljs-keyword">let</span> _tmp = i.toString(<span class="hljs-number">16</span>)</span><br><span class="line">  _t.push(_tmp)</span><br><span class="line">  <span class="hljs-keyword">return</span> _tmp</span><br><span class="line">&#125;)</span><br><span class="line"><span class="hljs-comment">// Int8Array(3) [0, -11, 0]</span></span><br><span class="line"><span class="hljs-comment">// _t: ['-f', '-11', '-5a']</span></span><br><span class="line"></span><br><span class="line">t[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span></span><br><span class="line"><span class="hljs-comment">// t: Int8Array(3) [0, -17, -90]</span></span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-23T09:12:33.000Z">2017-11-23</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 0 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/23/Client-Wallet-Inspection/">Client Wallet Inspection</a>
            
        </h1>
        <div class="content">
            <iframe width="853" height="800" src="https://embed.coggle.it/diagram/WhaB3hE2BAABznZF/065e922ba0f89869d4682bb60d9e426164106f817068fedc350e1193c7322293" frameborder="0" allowfullscreen></iframe>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-23T01:53:34.000Z">2017-11-23</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 779 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/23/react-lodable/">React-Lodable</a>
            
        </h1>
        <div class="content">
            <p><code>react-lodable</code> is a higher order component for loading components with dynamic<br>imports.</p>
<p>Code-splitting is the process of taking one large bundle containing your entire<br>app, and splitting them up into multiple smaller bundles which contain seperate<br>parts of your app.</p>
<p>This might seem difficult to do, but tools like Webpack have this built in, and<br>React Loadable is designed to make is super simple.</p>
<h4 id="Route-based-splitting-vs-Component-based-splitting"><a href="#Route-based-splitting-vs-Component-based-splitting" class="headerlink" title="Route-based splitting vs. Component-based splitting"></a>Route-based splitting vs. Component-based splitting</h4><p>A common piece of advice you will see is to break your app into seperate routes<br>and load each one asynchronously. This seems to work well enough for many apps<br>– a a user, clicking a link and waiting for a page to load is a familiar<br>experience on the web.</p>
<p>Namely, a route is simple a component.</p>
<p>But in fact there are more places than just routes where you can pretty easily<br>split apart your app: Modals, Tabs, and many more UI Components hide content<br>until the user has done something to reveal it.</p>
<p><img src="http://thejameskyle.com/img/react-loadable-component-splitting.png" alt=""></p>
<blockquote>
<p>Example: Maybe your app ahs a map buried inside of a tab component. Why would<br>you load a massive mapping library for the parent route every time the user<br>never to to that tab.</p>
</blockquote>
<p>React Loadable is a small library that makes component-centric code splitting<br>incredibly easy in React.</p>
<p><code>Loadable</code> is a higher-order component(a function that returns a component)<br>which lets you dynamically load any module before rendering it into your app.</p>
<p>We can make it by <code>dynamic import</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> Bar <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Bar'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bar</span> /&gt;</span></span></span><br><span class="line"><span class="hljs-xml">  &#125;</span></span><br><span class="line"><span class="hljs-xml">&#125;</span></span><br></pre></td></tr></table></figure>
<p>=&gt;</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    Bar: <span class="hljs-literal">null</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  componentWillMount() &#123;</span><br><span class="line">    <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/Bar'</span>).then(<span class="hljs-function"><span class="hljs-params">Bar</span> =&gt;</span> <span class="hljs-keyword">this</span>.setState(&#123; Bar &#125;))</span><br><span class="line">  &#125;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="hljs-keyword">let</span> &#123; Bar &#125; = <span class="hljs-keyword">this</span>.state</span><br><span class="line">    <span class="hljs-keyword">if</span> (!Bar) &#123;</span><br><span class="line">      <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">      <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bar</span> /&gt;</span></span></span><br><span class="line"><span class="hljs-xml">    &#125;</span></span><br><span class="line"><span class="hljs-xml">  &#125;</span></span><br><span class="line"><span class="hljs-xml">&#125;</span></span><br></pre></td></tr></table></figure>
<p>But that’s whole bunch of work, and it doesn’t even handle a bunch of caess.<br>What about when <code>import()</code> fails? What about server-side rendering?</p>
<p><code>react-loadable</code> considers the unexpected cases.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> Loadable <span class="hljs-keyword">from</span> <span class="hljs-string">'react-loadable'</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> LoadableBar = Loadable(&#123;</span><br><span class="line">  loader: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/Bar'</span>),</span><br><span class="line">  loading: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &lt;div&gt;Loading&lt;<span class="hljs-regexp">/div&gt;,</span></span><br><span class="line"><span class="hljs-regexp">&#125;)</span></span><br><span class="line"><span class="hljs-regexp"></span></span><br><span class="line"><span class="hljs-regexp">class Foo extends React.Component &#123;</span></span><br><span class="line"><span class="hljs-regexp">  render() &#123;</span></span><br><span class="line"><span class="hljs-regexp">    return &lt;LoadableBar /</span>&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When you use <code>import()</code> with webpack2, it will<br><a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener">automatically code-split</a> for<br>you with no additional configuration.</p>
<p>Define your Loading Component</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>When your loader fails, your Loading component will receive an error prop which<br>will be <code>true</code>(otherwise it will be <code>false</code>).</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params">props</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (props.error) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Sometimes components load really quickly(&lt;200ms) and the loading screen only<br>quickly flashes on the screen.</p>
<p>Your loading component will get a <code>pastDelay</code> props which will only be <code>true</code><br>once the component has taken longer to load than a set <code>delay</code>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params">props</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (props.error) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.pastDelay) &#123;</span><br><span class="line">    <span class="hljs-comment">// only show loading when it takes longer than 200ms</span></span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This delay defaults to 200ms, but you can customize the delay in Loadable.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Loadable(&#123;</span><br><span class="line">  loader: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/Bar'</span>),</span><br><span class="line">  loading: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> Loading,</span><br><span class="line">  delay: <span class="hljs-number">300</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>Timing out when the loader is taking too long</p>
<p>Sometimes network connections suck and never resolve or fail, they just hang<br>there forever. This sucks for the user because they won’t know if it should<br>always take this long, or if they should try refreshing.</p>
<p>The Loading component will receive a <code>timeOut</code> prop which will be set to <code>true</code><br>when the loader has timed out.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params">props</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (props.error) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.timedOut) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Timed out<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.pastDelay) &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This feature is disabled by default, you can pass a <code>timeout</code> option to<br><code>Loadable</code> to enable it.</p>
<p>By default <code>Loadable</code> will render the <code>default</code> export of the returned module.<br>If you want to customize this behavior you can use the <code>render</code> option.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Loadable(&#123;</span><br><span class="line">  loader: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./myComponent'</span>),</span><br><span class="line">  render(loaded, props) &#123;</span><br><span class="line">    <span class="hljs-keyword">let</span> Component = loaded.namedExport</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> &#123;<span class="hljs-attr">...props</span>&#125; /&gt;</span></span></span><br><span class="line"><span class="hljs-xml">  &#125;,</span></span><br><span class="line"><span class="hljs-xml">&#125;)</span></span><br></pre></td></tr></table></figure>
<p>You can do whatever you want within <code>loader()</code> as long as it returns a promise<br>and you are able to render everything</p>
<p>You can load multiple resources in parallel with <code>Loadable.Map</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Loadable.Map(&#123;</span><br><span class="line">  loader: &#123;</span><br><span class="line">    Bar: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./Bar'</span>),</span><br><span class="line">    i18n: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fetch(<span class="hljs-string">'./i18n/bar.json'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.json()),</span><br><span class="line">  &#125;,</span><br><span class="line">  render(loaded, props) &#123;</span><br><span class="line">    <span class="hljs-keyword">let</span> Bar = loaded.Bar.default</span><br><span class="line">    <span class="hljs-keyword">let</span> i18n = loaded.i18n</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bar</span> &#123;<span class="hljs-attr">...props</span>&#125; <span class="hljs-attr">i18n</span>=<span class="hljs-string">&#123;i18n&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="hljs-xml">  &#125;,</span></span><br><span class="line"><span class="hljs-xml">&#125;)</span></span><br></pre></td></tr></table></figure>
<p>As an optimization, you can also decide to preload a component before it gets<br>rendered.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> LoadableBar = Loadable(&#123;</span><br><span class="line">  loader: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./Bar'</span>),</span><br><span class="line">  loading: Loading,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    showBar: <span class="hljs-literal">false</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="hljs-keyword">this</span>.setState(&#123; <span class="hljs-attr">showBar</span>: <span class="hljs-literal">true</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  onMouseOver = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</span><br><span class="line">    LoadableBar.preload()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;<span class="hljs-keyword">this</span>.onClick&#125; onMouseOver=&#123;<span class="hljs-keyword">this</span>.onMouseOver&#125;&gt;</span><br><span class="line">          showbar</span><br><span class="line">        &lt;<span class="hljs-regexp">/button&gt;</span></span><br><span class="line"><span class="hljs-regexp">        &#123;this.state.showBar &amp;&amp; &lt;LoadableBar /</span>&gt;&#125;</span><br><span class="line">      &lt;<span class="hljs-regexp">/div&gt;</span></span><br><span class="line"><span class="hljs-regexp">    )</span></span><br><span class="line"><span class="hljs-regexp">  &#125;</span></span><br><span class="line"><span class="hljs-regexp">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="Server-side-rendering-to-see-Github"><a href="#Server-side-rendering-to-see-Github" class="headerlink" title="Server-side rendering to see Github"></a>Server-side rendering to see <a href="https://github.com/thejameskyle/react-loadable" target="_blank" rel="noopener">Github</a></h3>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-21T09:47:01.000Z">2017-11-21</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 96 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/21/Difference-between-Contract-Calling-in-Web3/">Difference Between Contract Calling in Web3</a>
            
        </h1>
        <div class="content">
            <p>After we get the instance of Contract(<code>testInstance</code>), we can invoke its method by three ways:</p>
<ul>
<li><p><code>testInstance.testFunc.sendTransaction()</code></p>
<ul>
<li>It will make a transaction which will be broadcasted into the net, use gas and return the <code>txHash</code></li>
</ul>
</li>
<li><p><code>testInstance.testFunc.call()</code></p>
<ul>
<li>Call the contract function in VM, no broadcast and no gas used, return the response from method</li>
</ul>
</li>
<li><p><code>testInstance.testFunc()</code></p>
<ul>
<li>If the testFunc is signified <code>constant</code>, which means it won’t change the state on chain, it won’t be executed(web3 will invoke it by <code>.call()</code>). If the testFunc is not <code>constant</code>, <code>sendTransaction()</code> will be invoked.</li>
</ul>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-21T03:44:40.000Z">2017-11-21</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 0 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/21/JSON-PRC/">JSON-PRC</a>
            
        </h1>
        <div class="content">
            <iframe width="100%" height="800px" src="https://embed.coggle.it/diagram/WhOeZuojMQABUzIo/99b086bdc0ebfc435ab27512cc9484dfe4d5352dc2ff34812c64d3706efe7066" frameborder="0" allowfullscreen></iframe>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-14T09:35:34.000Z">2017-11-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 593 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/14/Common-Patterns-in-Contract/">Common Patterns in Contract</a>
            
        </h1>
        <div class="content">
            <h3 id="Withdrawal-from-Contract"><a href="#Withdrawal-from-Contract" class="headerlink" title="Withdrawal from Contract"></a>Withdrawal from Contract</h3><p>The recommended method of sending funds after an effect is using the withdrawal pattern.</p>
<p>Although the most intuitive method of sending Ether, as a result of an effect, is a direct <code>send</code> call, this is not recommended as it introduces a potential security risk.</p>
<p>This is an example of the withdrawal pattern in practice in a contract where the goal is to send the most money to the contract in order to become the “richest”.</p>
<p>In the following contract, if you are usurped as the richest, you will receive the funds of the person who has gone on to be the new richest:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract WithdrawalContract &#123;</span><br><span class="line">  address public richest;</span><br><span class="line">  uint public mostSent;</span><br><span class="line"></span><br><span class="line">  mapping(<span class="hljs-function"><span class="hljs-params">address</span> =&gt;</span> uint) public pendingWithdrawals;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">WithdrawalContract</span>(<span class="hljs-params"></span>) <span class="hljs-title">payable</span> </span>&#123;</span><br><span class="line">    richest = msg.sender;</span><br><span class="line">    mostSent = msg.value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">becomeRichest</span>(<span class="hljs-params"></span>) <span class="hljs-title">payable</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">if</span> (msg.value &gt; mostSent) &#123;</span><br><span class="line">      pendingWithdrawals[msg.sender] += msg.value;</span><br><span class="line">      richest = msg.sender;</span><br><span class="line">      mostSent = msg.value;</span><br><span class="line">      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;</span><br><span class="line">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="line">      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withdraw</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    uint amount = pendingWithdrawals[msg.sender];</span><br><span class="line">    pendingWithdrawals[msg.sender] = <span class="hljs-number">0</span>;</span><br><span class="line">    msg.sender.transfer(amount);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the example above, if the Contract is attacked and the withdraw method stuck(for example, msg.sender.transfer(amount) fails), the Contract will keep working.</p>
<h3 id="Restricting-Access"><a href="#Restricting-Access" class="headerlink" title="Restricting Access"></a>Restricting Access</h3><p>Restricting access is a common pattern for contract.</p>
<p>Note that you can never restrict any human or computer from reading the content of your transactions or your contract’s state. You can make it a bit harder by using encryption, but if your contract is supposed to read the data, so will everyone else.</p>
<p>You can restrict read access to your contract’s state by <strong>other contract</strong>. This is actually the default unless you declare make your state variables <code>public</code>.</p>
<p>Furthermore, you can restrict who can make modifications to your contract’s state or call your contract’s functions.</p>
<p>The use of <strong>function modifier</strong> makes thse restrictions highly readable.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract AccessRestriction &#123;</span><br><span class="line">    address public owner = msg.sender;</span><br><span class="line">    uint public creationTime = now;</span><br><span class="line"></span><br><span class="line">    modifier onlyBy(address _account) &#123;</span><br><span class="line">        <span class="hljs-built_in">require</span>(msg.sender == _account);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changeOwner</span>(<span class="hljs-params">address _newOwner</span>) <span class="hljs-title">onlyBy</span>(<span class="hljs-params">owner</span>) </span>&#123;</span><br><span class="line">        owner = _newOwner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier onlyAfter(uint _time) &#123;</span><br><span class="line">        <span class="hljs-built_in">require</span>(now &gt; _time);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">disown</span>(<span class="hljs-params"></span>) <span class="hljs-title">onlyBy</span>(<span class="hljs-params">owner</span>) <span class="hljs-title">onlyAfter</span>(<span class="hljs-params">creationTime + <span class="hljs-number">6</span> weeks</span>) </span>&#123;</span><br><span class="line">        <span class="hljs-keyword">delete</span> owner;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier costs(uint _amount) &#123;</span><br><span class="line">        <span class="hljs-built_in">require</span>(msg.value &gt; _amount);</span><br><span class="line">        _;</span><br><span class="line">        <span class="hljs-keyword">if</span> (msg.value &gt; _amount)</span><br><span class="line">            msg.sender.send(msg.value - _amount);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">forceOwnerChange</span>(<span class="hljs-params">address _newOwner</span>) <span class="hljs-title">costs</span>(<span class="hljs-params"><span class="hljs-number">200</span> ether</span>) </span>&#123;</span><br><span class="line">        owner = _newOwner;</span><br><span class="line">        <span class="hljs-keyword">if</span> (uint(owner) &amp; <span class="hljs-number">0</span> == <span class="hljs-number">1</span>)</span><br><span class="line">            <span class="hljs-keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="State-Machine"><a href="#State-Machine" class="headerlink" title="State Machine"></a>State Machine</h3><p>Contracts often act as a state machine, which means that they have certain <strong>stage</strong> in which they behave differently or in which different functions can be called.</p>
<p>A function call often ends a stage and transitions the contract into the next stage.</p>
<p>Function modifiers can be used in this situation to model the states and guard against incorrect usage of the contract.</p>
<p>In the following example, the modifier <code>atStage</code> ensures that the function can only be called at a certain stage, automatic timed transitions are handled by the modifier <code>timeTransitions</code>, which should be used for all functions.</p>
<blockquote>
<p>Modifier Order Matters: If <code>atStage</code> is combined with <code>timedTransitions</code>, make sure that you mention it after the latter, so that the new stage is taken into account.</p>
</blockquote>
<p>Finally, the modifier <code>transitionNext</code> can be used to automatically go to the next stage when the function finishes.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract StateMachine &#123;</span><br><span class="line">    enum Stages &#123;</span><br><span class="line">        AcceptingBlindedBids,</span><br><span class="line">        RevealBids,</span><br><span class="line">        AnotherStage,</span><br><span class="line">        AreWeDoneYet,</span><br><span class="line">        Finished</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Stages public stage = Stages.AcceptingBlindedBids;</span><br><span class="line"></span><br><span class="line">    uint public creationTime = now;</span><br><span class="line"></span><br><span class="line">    modifier atStage(Stages _stage) &#123;</span><br><span class="line">        <span class="hljs-built_in">require</span>(stage == _stage);</span><br><span class="line">        _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">nextStage</span>(<span class="hljs-params"></span>) <span class="hljs-title">internal</span> </span>&#123;</span><br><span class="line">        stage = Stages(uint(stage) + <span class="hljs-number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    modifier timedTransitions() &#123;</span><br><span class="line">      <span class="hljs-keyword">if</span> (stage == Stages.AcceptingBlindedBids &amp;&amp; now &gt;= creationTime + <span class="hljs-number">10</span> days)</span><br><span class="line">          nextStage();</span><br><span class="line">      <span class="hljs-keyword">if</span> (stage == Stages.RevealBids &amp;&amp; now &gt;= creationTime + <span class="hljs-number">12</span> days)</span><br><span class="line">          nextStage();</span><br><span class="line">      _;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bid</span>(<span class="hljs-params"></span>)</span></span><br><span class="line"><span class="hljs-function">        <span class="hljs-title">payable</span></span></span><br><span class="line"><span class="hljs-function">        <span class="hljs-title">timedTransitions</span></span></span><br><span class="line"><span class="hljs-function">        <span class="hljs-title">atStage</span>(<span class="hljs-params">Stages.AcceptingBlindedBids</span>)</span></span><br><span class="line"><span class="hljs-function">    </span>&#123;</span><br><span class="line">        <span class="hljs-comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reveal</span>(<span class="hljs-params"></span>)</span></span><br><span class="line"><span class="hljs-function">        <span class="hljs-title">timedTransitions</span></span></span><br><span class="line"><span class="hljs-function">        <span class="hljs-title">atStage</span>(<span class="hljs-params">Stages.RevealBids</span>)</span></span><br><span class="line"><span class="hljs-function">    </span>&#123;</span><br><span class="line">        <span class="hljs-comment">//</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-14T08:51:49.000Z">2017-11-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 286 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/14/Solidity-Style-Guide/">Solidity Style Guide</a>
            
        </h1>
        <div class="content">
            <h3 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h3><p>4 spaces per indentation level</p>
<p>Use spaces for indentation</p>
<p>Use blank lines</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">contract A &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">contract B &#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Blank lines may be omitted between groups of related one-liners</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">contract A &#123;</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">spam</span>(<span class="hljs-params"></span>);</span></span><br><span class="line"><span class="hljs-function">  <span class="hljs-title">function</span> <span class="hljs-title">ham</span>(<span class="hljs-params"></span>);</span></span><br><span class="line"><span class="hljs-function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Use <code>UTF-8</code> or <code>ASCII</code> encoding</p>
<p>Place import statements at the top of the file</p>
<p>Functions should be be grouped according to their visibility and ordered:</p>
<ul>
<li><p>constructor</p>
</li>
<li><p>fallback function (if exists)</p>
</li>
<li><p>external</p>
</li>
<li><p>public</p>
</li>
<li><p>internal</p>
</li>
<li><p>private</p>
</li>
</ul>
<p>Within a grouping, place the <code>constant</code> functions last.</p>
<p>Use white spaces in expressions</p>
<p>Avoid extraneous whitespaces inthe following situations: immediately inside parenthesis, brackets or braces, with the exception of single line function declaration.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">spam(ham[<span class="hljs-number">1</span>], Coin(&#123;<span class="hljs-attr">name</span>: <span class="hljs-string">"han"</span>&#125;)):</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">// exception</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">singleLine</span>(<span class="hljs-params"></span>) </span>&#123; spam() &#125;</span><br></pre></td></tr></table></figure>
<p>More than one space around an assignment or other operator to align with</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="hljs-number">1</span>;</span><br><span class="line">y = <span class="hljs-number">2</span>;</span><br><span class="line">long_variable = <span class="hljs-number">3</span>;</span><br></pre></td></tr></table></figure>
<p>Don’t include a whitespace in the fallback function</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// not </span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>For control structure whose body contains a single statement, omitting the braces is ok if the statement is contained on a single line</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">if</span> (x &lt; <span class="hljs-number">10</span>)</span><br><span class="line">    x += <span class="hljs-number">1</span>;</span><br><span class="line"><span class="hljs-keyword">else</span></span><br><span class="line">    x -= <span class="hljs-number">1</span>;</span><br></pre></td></tr></table></figure>
<p>Function declaration</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span>(<span class="hljs-params">uint x</span>) <span class="hljs-title">returns</span> (<span class="hljs-params">uint</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// visibility precedes custom modifier</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span>(<span class="hljs-params">uint x</span>) <span class="hljs-title">public</span> <span class="hljs-title">onlyOwner</span> <span class="hljs-title">returns</span> (<span class="hljs-params">uint</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> x + <span class="hljs-number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// long parameters list</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span>(<span class="hljs-params"></span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">    uint x1,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">    uint x2,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">    uint x3,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">    uint x4,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">    uint x5,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params">    uint x6,</span></span></span><br><span class="line"><span class="hljs-function"><span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">  <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="hljs-comment">// long visibility modifier list</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">increment</span> (<span class="hljs-params">uint x</span>)</span></span><br><span class="line"><span class="hljs-function">    <span class="hljs-title">public</span></span></span><br><span class="line"><span class="hljs-function">    <span class="hljs-title">onlyOwner</span></span></span><br><span class="line"><span class="hljs-function">    <span class="hljs-title">priced</span></span></span><br><span class="line"><span class="hljs-function"></span>&#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Stirng should be quoted with double-quotes.</p>
<p>Contract and Library Names should be named using the CapWords style.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SimpleToken,</span><br><span class="line">SmartBank,</span><br></pre></td></tr></table></figure>
<p>Event Names should use CapWords</p>
<p>Function Names should use CamelCase</p>
<p>Function Arguments should use CamelCase</p>
<p>Local and State Variables should use CamelCase</p>
<p>Constants should be named with all captial letters with underscores seperating words: <code>MAX_BLOCKS</code></p>
<p>Modifier should use CamelCase</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-10T08:33:02.000Z">2017-11-10</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    16 minutes read (About 2404 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/10/Notes-on-Solidity-in-Depth/">Notes on Solidity in Depth</a>
            
        </h1>
        <div class="content">
            <h3 id="Layout-of-a-Solidity-Source-File"><a href="#Layout-of-a-Solidity-Source-File" class="headerlink" title="Layout of a Solidity Source File"></a>Layout of a Solidity Source File</h3><h4 id="Version-Pragma"><a href="#Version-Pragma" class="headerlink" title="Version Pragma"></a>Version Pragma</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br></pre></td></tr></table></figure>
<h4 id="Importing-other-Source-File"><a href="#Importing-other-Source-File" class="headerlink" title="Importing other Source File"></a>Importing other Source File</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"filename"</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> symbolName <span class="hljs-keyword">from</span> <span class="hljs-string">"filename"</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> &#123; symbol <span class="hljs-keyword">as</span> alias, symbol2 &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">"filename"</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"filename"</span> <span class="hljs-keyword">as</span> symbolName;</span><br></pre></td></tr></table></figure>
<p>In the above, <code>filename</code> is always treated as a path with <code>/</code> as directory seperator.</p>
<p>All path names are treated as absolute paths unless thay start with <code>.</code> or <code>..</code>.</p>
<h5 id="Remapping"><a href="#Remapping" class="headerlink" title="Remapping"></a>Remapping</h5><p>For example, remap <code>github.com/ethereum/dapp-bin/library</code> to <code>/usr/local/dapp-bin/library</code></p>
<p><strong>solc</strong></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"github.com/ethereum/dapp-bin/library/iterable_mapping.sol` as it_mapping;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">solc github.com/ethereum/dapp-bin/=/usr/<span class="hljs-built_in">local</span>/dapp-bin/ source.sol</span><br></pre></td></tr></table></figure>
<h4 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h4><p>Single Line Comments: <code>//</code></p>
<p>Multi-line Comments: <code>/* ... */</code></p>
<p>Natspec Comments: <code>///</code> or <code>/** ... */</code></p>
<p>Natspec should be used directly above function declarations or statements.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">/** @title Shape calculator */</span></span><br><span class="line">contract shapeCaculator &#123;</span><br><span class="line">  <span class="hljs-comment">/** @dev Calculates a rectangle's surface and perimeter.</span></span><br><span class="line"><span class="hljs-comment">    * @param w Width of the rectangle.</span></span><br><span class="line"><span class="hljs-comment">    * @param h Height of the rectangle.</span></span><br><span class="line"><span class="hljs-comment">    * @param s The calculated surface.</span></span><br><span class="line"><span class="hljs-comment">    * @param p The calculated perimeter.</span></span><br><span class="line"><span class="hljs-comment">    */</span></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rectangle</span>(<span class="hljs-params">uint w, uint h</span>) <span class="hljs-title">returns</span> (<span class="hljs-params">uint s, uint p</span>) </span>&#123;</span><br><span class="line">    s = w * h;</span><br><span class="line">    p = <span class="hljs-number">2</span> * (w + h);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Structure-of-Contract"><a href="#Structure-of-Contract" class="headerlink" title="Structure of Contract"></a>Structure of Contract</h3><p>Contracts in Solidity are similar to classes in object-oriented languages. Each contract can contain declarations of <strong>State Variables</strong>, <strong>Functions</strong>, <strong>Function Modifiers</strong>, <strong>Events</strong>, <strong>Struct Types</strong> and <strong>Enum Types</strong>.</p>
<h4 id="State-Variables"><a href="#State-Variables" class="headerlink" title="State Variables"></a>State Variables</h4><p>State variables are values which are permanently stored in contract storage.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract SimpleStorage &#123;</span><br><span class="line">  uint storedData; <span class="hljs-comment">// state variable</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h4><p>Functions are executable units of code within a contract.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract SimpleAuction &#123;</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bid</span>(<span class="hljs-params"></span>) <span class="hljs-title">payable</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Function-Modifiers"><a href="#Function-Modifiers" class="headerlink" title="Function Modifiers"></a>Function Modifiers</h4><p>Function modifiers can be used to amend the semantics of functions in a declarative way.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract Purchase &#123;</span><br><span class="line">  address public seller;</span><br><span class="line"></span><br><span class="line">  modifier onlySeller () &#123; <span class="hljs-comment">// Modifier</span></span><br><span class="line">    <span class="hljs-built_in">require</span>(msg.sender == seller);</span><br><span class="line">    _;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">abort</span>(<span class="hljs-params"></span>) <span class="hljs-title">onlySeller</span> </span>&#123; <span class="hljs-comment">// Modifier usage</span></span><br><span class="line">    <span class="hljs-comment">//...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h4><p>Events are convenience interfaces with the EVM logging facilities.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract SimpleAuction &#123;</span><br><span class="line">  event HighestBidIncreased(address bidder, uint amount);</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bid</span>(<span class="hljs-params"></span>) <span class="hljs-title">payable</span> </span>&#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">    HighestBidIncreased(msg.sender, msg.value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Struct-Types"><a href="#Struct-Types" class="headerlink" title="Struct Types"></a>Struct Types</h4><p>Structs are custom defined types that can group several variables.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract Ballot &#123;</span><br><span class="line">  struct Voter &#123;</span><br><span class="line">    uint weight;</span><br><span class="line">    bool voted;</span><br><span class="line">    address delegate;</span><br><span class="line">    uint vote;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Enum-Types"><a href="#Enum-Types" class="headerlink" title="Enum Types"></a>Enum Types</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.0</span>;</span><br><span class="line"></span><br><span class="line">contract Purchase &#123;</span><br><span class="line">  enum State &#123;</span><br><span class="line">    Created,</span><br><span class="line">    Locked,</span><br><span class="line">    Inactive</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h4><ul>
<li><p><code>bool</code>: <code>true</code> or <code>false</code></p>
<ul>
<li><p><code>!</code> logical negation</p>
</li>
<li><p><code>&amp;&amp;</code> logical and</p>
</li>
<li><p><code>||</code> logical or</p>
</li>
<li><p><code>==</code> logical equality</p>
</li>
<li><p><code>!=</code> logical inequality</p>
</li>
</ul>
</li>
<li><p><code>int/uint</code>: <code>uint8</code> to <code>uint256</code>, <code>int8</code> to <code>int256</code></p>
<ul>
<li><p><code>&lt;=</code>, <code>&gt;=</code>, <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code></p>
</li>
<li><p><code>&amp;</code>, <code>|</code>, <code>^</code>, <code>~</code>, bit operators</p>
</li>
<li><p><code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>**</code>, <code>&lt;&lt;</code>, <code>&gt;&gt;</code></p>
</li>
</ul>
</li>
<li><p><code>address</code>: holds a 20 bytes value(size of an Ethereum address)</p>
<ul>
<li><code>&lt;=</code>, <code>=&gt;</code>, <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>Starting with version 0.5.0 contracts do not derive from the <code>address</code> type, but can still be explicitly converted to address.</p>
</blockquote>
<h4 id="Members-of-Address"><a href="#Members-of-Address" class="headerlink" title="Members of Address"></a>Members of Address</h4><ul>
<li><p><code>balance</code></p>
</li>
<li><p><code>transfer</code>, address.transfer(value), send value Wei to the address.</p>
</li>
<li><p><code>send</code>: Send is the low-level counterpart of <code>transfer</code>. If the execution fails, the current contract will not stop with an exception, but <code>send</code> will return <code>false</code></p>
</li>
</ul>
<blockquote>
<p>There are some dangers in using <code>send</code>: The transfer fails if the call stack depth is 1024 and it also fails if the recipient runs out of gas. So in order to make safe Ether transfers, always check the return value of <code>send</code>, use <code>transfer</code> or even better.</p>
</blockquote>
<ul>
<li><code>call</code>, <code>callcode</code>, and <code>delegatecall</code></li>
</ul>
<p>Furthermore, to interface with contracts that do not adhere to the ABI, the function <code>call</code> is provided which takes an arbitrary number of arguments of any type. The arguments are padding to 32 bytes and concatenated. One exception is the case where the first argument is encoded to exactly four bytes. In this case, it is not padding to allow the use of function signatures here.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">address nameReg = <span class="hljs-string">'0x72ba7d8e73fe8eb666ea66babc8116a41bfb10e2'</span>;</span><br><span class="line">nameReg.call(<span class="hljs-string">'register'</span>, <span class="hljs-string">'MyName'</span>);</span><br><span class="line">nameReg.call(bytes4(keccak256(<span class="hljs-string">"fun(uint256))), );</span></span><br></pre></td></tr></table></figure>
<p><code>call</code> returns a boolean indicating whether the invoked function terminated (true) or caused an EVM exception (false). It is not possible to access the actual data returned.</p>
<p>It is possible to adjust the supplied gas with the <code>.gas()</code> modifier:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameReg.call.gas(<span class="hljs-number">1000000000</span>)(<span class="hljs-string">'register'</span>, <span class="hljs-string">'myName'</span>);</span><br></pre></td></tr></table></figure>
<p>and supplied Ether value can be controlled too:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameReg.call.value(<span class="hljs-number">1</span> ether)(<span class="hljs-string">'regiter'</span>, <span class="hljs-string">'myName'</span>);</span><br></pre></td></tr></table></figure>
<p>Chained</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameReg.call.value(<span class="hljs-number">1</span> ether).gas(<span class="hljs-number">100000000</span>)(<span class="hljs-string">'register'</span>, <span class="hljs-string">'myName'</span>);</span><br></pre></td></tr></table></figure>
<p>In a similar way, the function <code>delegatecall</code> can be used: the difference is that only the code of the given address is used, all other aspects(storage, balance, …) are taken from the current contract. The purpose of <code>delegatecall</code> is to use library code which is stored in another contract. The user has to ensure that the layout of storage in both contracts is suitable for delegatecall to be used. Prior to homestead, only a limited variant called <code>callcode</code> was available that did not provide access to the original <code>msg.sender</code> and <code>msg.value</code>.</p>
<p>All three functions <code>call</code>, <code>delegatecall</code>, and <code>callcode</code> are very low-level functions and should only be used as a <em>last resort</em> as they break the type-safety of Solidity.</p>
<p>The <code>.gas()</code> option is available on all three methods, while the <code>.value()</code> option is not supported for <code>delegatecall</code>.</p>
<blockquote>
<p>All Contracts inherit the members of address, so it is possible to query the balance of the current contract using <code>this.balance</code>.</p>
</blockquote>
<blockquote>
<p>The use of <code>callcode</code> is discouraged and will be removed in the future.</p>
</blockquote>
<h4 id="Fixed-size-byte-array"><a href="#Fixed-size-byte-array" class="headerlink" title="Fixed-size byte array"></a>Fixed-size byte array</h4><ul>
<li><code>.length</code> yields the fixed length of the byte array(read-only)</li>
</ul>
<blockquote>
<p>It is possible to use an array of bytes as <code>byte[]</code>, but it is wasting a lot of space, 21 bytes every element, to be exact, when passing in calls. It is better to use <code>bytes</code>.</p>
</blockquote>
<h4 id="Dynamically-sized-byte-array"><a href="#Dynamically-sized-byte-array" class="headerlink" title="Dynamically-sized byte array"></a>Dynamically-sized byte array</h4><p><code>bytes</code>: dynamically-sized array, see Array, not a value-type.</p>
<p><code>string</code>: dynamically-sized UTF-8-encoded string, see Array, not a value-type.</p>
<h4 id="Address-Liberals"><a href="#Address-Liberals" class="headerlink" title="Address Liberals"></a>Address Liberals</h4><p>Hexadecimal literals that pass the address checksum test, for example <code>0xdCad3a6d3569DF655070DEd06cb7A1b2Ccd1D3AF</code> are of <code>address</code> type. Hexadecimal literals that are between 39 and 41 digits long and do not pass the checksum test produce a warning and are treated as regular rational number literals</p>
<h4 id="Rational-and-Integer-Literals"><a href="#Rational-and-Integer-Literals" class="headerlink" title="Rational and Integer Literals"></a>Rational and Integer Literals</h4><p>Integer literal are formed form a sequence of numbers in the range 0-9. They are interpreted as decimals, for example, <code>69</code> means sixty nine. Octal literals do not exist in Solidity and leading zeros are invalid.</p>
<p>Decimal fraction literals are formed by a <code>.</code> with at least one number on one side(<code>1.</code>, <code>.2</code>, <code>1.3</code>)</p>
<p>Scientific notation is also supported, where the base can have fractions, white the exponent cannot(2e10, -2e10, 2e-10, 2.5e10)</p>
<p>Number literal expressions retains arbitrary precision until they are converted to a non-literal type.</p>
<p>For example <code>(2**800 + 1) - 2**800</code> result in the constant <code>1</code>, <code>.5 * 8</code> results in the integer <code>4</code></p>
<blockquote>
<p>Number literal expressions are converted into a non-literal type as soon as they are used with non-literal expressions. Even though we know that the value of the expression assigned to <code>b</code> in the following example evaluates to an integer, but the partial expression <code>2.5 + a</code> does not type check so the code does not compile.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uint128 a = <span class="hljs-number">1</span>;</span><br><span class="line">uint128 b = <span class="hljs-number">2.5</span> + a + <span class="hljs-number">0.5</span>;</span><br></pre></td></tr></table></figure>
<h4 id="String-Literals"><a href="#String-Literals" class="headerlink" title="String Literals"></a>String Literals</h4><p>String literals are written with either double or sinlge-quotes. They do not imply trailing zeros as in C, <code>&quot;foo&quot;</code> represents three bytes not four.</p>
<p>String Literal supports escape characters, such as <code>\n</code>, <code>\xNN</code> and <code>\uNNNN</code>.</p>
<h4 id="Hexadecimal-Literals"><a href="#Hexadecimal-Literals" class="headerlink" title="Hexadecimal Literals"></a>Hexadecimal Literals</h4><p><code>hex&quot;001122FF&quot;</code></p>
<h4 id="Enums"><a href="#Enums" class="headerlink" title="Enums"></a>Enums</h4><p>Enums are one way to create a user-defined type in Solidity. They are explicitly convertable to and from all integer types but implicit conversion is not allowed. The explicit conversions check the value ranges at runtime, and a failure causes an exception.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract test &#123;</span><br><span class="line">  enum ActionChoices &#123;</span><br><span class="line">    GoLeft,</span><br><span class="line">    GoRight,</span><br><span class="line">    GoStraight,</span><br><span class="line">    GoStill</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ActionChoices choice;</span><br><span class="line">  ActionChoices constant defaultChoice = ActionChoices.GoStraight;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setGoStraight</span>(<span class="hljs-params"></span>) </span>&#123;</span><br><span class="line">    choice = ActionChoices.GoStraight;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getChoice</span>(<span class="hljs-params"></span>) <span class="hljs-title">returns</span> (<span class="hljs-params">ActionChoices</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> choice;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getDefaultChoice</span>(<span class="hljs-params"></span>) <span class="hljs-title">returns</span> (<span class="hljs-params">uint</span>) </span>&#123;</span><br><span class="line">    <span class="hljs-keyword">return</span> uint(defaultChoice);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Function-Types"><a href="#Function-Types" class="headerlink" title="Function Types"></a>Function Types</h4><p>Function types are notated as follows:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">&lt;parameter types&gt;</span>) </span>&#123;internal|external&#125; [pure|constant|view|payable] [returns (<span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">return</span> <span class="hljs-attr">types</span>&gt;</span>)]</span></span><br></pre></td></tr></table></figure>
<p>In contrast to the parameter types, the return types cannot be empty - if the function type should not return anything, the whole <code>returns (&lt;return type&gt;)</code> part has to be omitted.</p>
<p>Public (or external) functions have a special member called <code>selector</code>, which returns the <code>ABI function selector</code>:</p>
<h4 id="Reference-Types"><a href="#Reference-Types" class="headerlink" title="Reference Types"></a>Reference Types</h4><p>Complex types, i.e. types which do not always fit into 256 bits have to be handled more carefully than than the value-types we have already seen. Since copying them can be quite expensive, we have to think about whether we want them to be store in <strong>memory</strong>(which is not persisting) or <strong>storage</strong>(where the state variables are held).</p>
<h4 id="Data-location"><a href="#Data-location" class="headerlink" title="Data location"></a>Data location</h4><p>Every complex type, i.e. <em>arrays</em> and <em>structs</em> has an additional annotation, the “data location” about where it is stored in <strong>memory</strong> or in <strong>storage</strong>. Depending on the context, there is always a default, but it can be overrideen by appeding either <code>storage</code> or <code>memory</code> to the type. The default for function parameters(including return parameters) is <strong>memory</strong> the default for local variable is <strong>storage</strong> and the location is forced to <strong>storage</strong> for state variables</p>
<p>There is also a third data location, <strong>calldata</strong>, which is a non-modificable, non-persistent area where function arguments are stored. Function parameter(not return parameters) of external functions are forced to <strong>calldata</strong> and behave mostly like <strong>memory</strong>.</p>
<p>Data locations are imortant because they change how assignment behave: assignments between storage and memory and also to a state variable always create an independent copy. Assignments to local storage variables only assign a reference though, and this reference always points to the state variable even if the latter is changed in the meantime. On the other hand, assignments from a memory stoted reference type to another memory-stored reference type do not create a copy.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract C &#123;</span><br><span class="line">  uint[] x; <span class="hljs-comment">// the data location of x is storage</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment">// the data location of memoryArray is memory</span></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">uint[] memoryArray</span>) </span>&#123;</span><br><span class="line">    x = memoryArray; <span class="hljs-comment">// works, copy the whole array to storage</span></span><br><span class="line">    <span class="hljs-keyword">var</span> y = x; <span class="hljs-comment">// works, assigns a pointer, data location of y is storage</span></span><br><span class="line">    y[<span class="hljs-number">7</span>]; <span class="hljs-comment">// fine, returns the 8th element</span></span><br><span class="line">    y.length = <span class="hljs-number">2</span>; <span class="hljs-comment">// fine, modifies x through y</span></span><br><span class="line">    <span class="hljs-keyword">delete</span> x; <span class="hljs-comment">// fine, clears the array, also modifies y</span></span><br><span class="line">    <span class="hljs-comment">// the following does not work; it would need to create a new temporary / unamed array in storage, but storage is 'statically' allocated</span></span><br><span class="line">    <span class="hljs-comment">// y = memoryArray;</span></span><br><span class="line">    <span class="hljs-comment">// This does not work either, since it would 'reset' the pointer, but there is not sensible location it could point to.</span></span><br><span class="line">    <span class="hljs-comment">// delete y;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h5><ul>
<li><p>Forced data location:</p>
<ul>
<li><p>parameters(not return) of external functions: calldata</p>
</li>
<li><p>state variables: storage</p>
</li>
</ul>
</li>
<li><p>Default data location:</p>
<ul>
<li><p>parameters(also return) of functions: memory</p>
</li>
<li><p>all other local variables: storage</p>
</li>
</ul>
</li>
</ul>
<h4 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h4><p>An array of fixed size <code>k</code> and element type <code>T</code> is written as <code>T[k]</code></p>
<p>An array of dynamic size as <code>T[]</code></p>
<p>An array of 5 dynamic arrays of <code>uint</code> is <code>uint[][5]</code>. (note that the notation is reversed when compared to some other language). To access the second uint in the third dynamic array, you use <code>x[2][1]</code></p>
<p>Variables of type <code>bytes</code> and <code>string</code> are special arrays. A <code>bytes</code> is similar to <code>byte[]</code>, but it is packed tightly in calldata. <code>string</code> is equal to <code>bytes</code> but does not allow length or index access(for now).</p>
<p>So <code>bytes</code> should always be preferred over <code>byte[]</code> because it is cheaper.</p>
<h4 id="Structs"><a href="#Structs" class="headerlink" title="Structs"></a>Structs</h4><p>Solidity provides a way to define new types in the form of structs, which is shown in the following example:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^<span class="hljs-number">0.4</span><span class="hljs-number">.11</span>;</span><br><span class="line"></span><br><span class="line">contract CrowdFunding &#123;</span><br><span class="line">  struct Funder &#123;</span><br><span class="line">    address addr;</span><br><span class="line">    uint amount;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  struct Campaign &#123;</span><br><span class="line">    address beneficiary;</span><br><span class="line">    uint fundingGoal;</span><br><span class="line">    uint numFunders;</span><br><span class="line">    uint amount;</span><br><span class="line">    mapping(<span class="hljs-function"><span class="hljs-params">uint</span> =&gt;</span> Funder) funders;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is not possible for a struct to contain a member of its own type, although the struct itself can be the value type of a mapping member. This restriction is necessary, as the size of the struct has to be finite.</p>
<h4 id="Mappings"><a href="#Mappings" class="headerlink" title="Mappings"></a>Mappings</h4><p>Mapping types are declared as <code>mapping(_keyType =&gt; _valueType)</code>. Here <code>_keyType</code> can be almost any type except for a mapping, a dynamically sized array, a contract, an enum, and a struct. <code>_valueType</code> can actually be any type, including mappings.</p>
<p>Mappings can be seen as hash tables which are virtually initialized such that every possible key exists and is mapped to a value whose byte-representation is all zeros: a type’s default value.</p>
<p>Mappings are only allowed for state variables( or as storage reference types in internal function).</p>
<p>It is possible to mark mapping <code>public</code> and have Solidity create a getter. The <code>_keyType</code> will become a required parameter for the getter and it will return <code>_valueType</code>.</p>
<p>Mappings are not iterable, but it is possible to implement a data structure on top of them.</p>
<h4 id="Operators-Involving-LValues"><a href="#Operators-Involving-LValues" class="headerlink" title="Operators Involving LValues"></a>Operators Involving LValues</h4><p>LValue, i.e. a variable or something that can be assigned to.</p>
<h5 id="delete"><a href="#delete" class="headerlink" title="delete"></a>delete</h5><p><code>delete a</code> assigns the initial value for the type to a. I.e., for integers, it is equivalent to <code>a = 0</code>.</p>
<p><code>delete</code> has no effect on whole mappints. So if you delete a struct, it will reset all members that are not mappings and also recurse into the memebers unless they are mappings. However, individual keys and what they map to can be deleted.</p>
<p>It’s really important to note that <code>delete a</code> really behaves like an assignment to <code>a</code>, it stores a new object in <code>a</code>.</p>
<h4 id="Conversions-between-Elementary-Types"><a href="#Conversions-between-Elementary-Types" class="headerlink" title="Conversions between Elementary Types."></a>Conversions between Elementary Types.</h4><h5 id="Implicit-Conversions"><a href="#Implicit-Conversions" class="headerlink" title="Implicit Conversions"></a>Implicit Conversions</h5><p>In general, an implicit conversion between value-types is possible if it makes sense semantically and no information is lost: <code>uint8</code> is convertible to <code>uint16</code>, but <code>uint16</code> is not convertible to <code>uint8</code>. And <code>int8</code> is not convertible to <code>uint256</code>(because <code>uint256</code> cannot hold hold e.g. <code>-1</code>).</p>
<h5 id="Explicit-Conversions"><a href="#Explicit-Conversions" class="headerlink" title="Explicit Conversions"></a>Explicit Conversions</h5><p>If the compiler does not allow implicit conversion but you know what you are doing, an explicit type conversion is sometimes possible.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int8 y = <span class="hljs-number">-3</span>;</span><br><span class="line">uint x = uint(y);</span><br></pre></td></tr></table></figure>
<h4 id="Type-Deduction"><a href="#Type-Deduction" class="headerlink" title="Type Deduction"></a>Type Deduction</h4><p>For convenience, it is not always necessary to explicitly specify the type of a variable, the compiler automatically infers it from the type of the first expression that is assigned to the variable:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">uint24 x = <span class="hljs-number">0x123</span>;</span><br><span class="line"><span class="hljs-keyword">var</span> y = x;</span><br></pre></td></tr></table></figure>
<h3 id="Units-and-Globally-Available-Variables"><a href="#Units-and-Globally-Available-Variables" class="headerlink" title="Units and Globally Available Variables"></a>Units and Globally Available Variables</h3><h4 id="Ether-Units"><a href="#Ether-Units" class="headerlink" title="Ether Units"></a>Ether Units</h4><p>A literal number can take a suffix of <code>wei</code>, <code>finney</code>, <code>szabo</code>, or <code>ether</code> to convert between the subdenominations of Ether, where Ether currency numbers without a postfix are assumed to be Wei.</p>
<p><code>2 ether === 2000 finney</code> evaluates to <code>true</code></p>
<h4 id="Time-Units"><a href="#Time-Units" class="headerlink" title="Time Units"></a>Time Units</h4><p>Suffixes like <code>seconds</code>, <code>minutes</code>, <code>hours</code>, <code>days</code>, <code>weeks</code> and <code>years</code> after literal numbers can be used to convert between units of time where seconds are the base unit.</p>
<p>Take care if you perform calendar calculations using these units, because not every year equals 365 days and not even every day has 24 hours because of leap seconds. Due to the fact that leap seconds cannot be predicted, an exact calendar library has to be updated by an external oracle.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">f</span>(<span class="hljs-params">unit start, unit dayAfter</span>) </span>&#123;</span><br><span class="line">  <span class="hljs-keyword">if</span> (now &gt;= start + dayAfter + <span class="hljs-number">1</span> days) &#123;</span><br><span class="line">    <span class="hljs-comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Other Global Variables and Functions:</p>
<p><a href="http://ezcook.de/2017/11/10/Solidity-CheatSheet/" target="_blank" rel="noopener">Post</a></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-10T07:02:45.000Z">2017-11-10</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 477 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/10/Solidity-CheatSheet/">Solidity CheatSheet</a>
            
        </h1>
        <div class="content">
            <h3 id="Global-Variables"><a href="#Global-Variables" class="headerlink" title="Global Variables"></a>Global Variables</h3><h4 id="Block"><a href="#Block" class="headerlink" title="Block"></a>Block</h4><ul>
<li><p>block.coinbase: address - current block miner’s address</p>
</li>
<li><p>block.difficulty: uint - current block difficulty</p>
</li>
<li><p>block.gaslimit: uint - current block gaslimit</p>
</li>
<li><p>block.number: uint - current block number</p>
</li>
<li><p>block.timestamp: uint - current block timestamp</p>
</li>
</ul>
<h4 id="Msg"><a href="#Msg" class="headerlink" title="Msg"></a>Msg</h4><ul>
<li><p>msg.data: bytes - complete calldata</p>
</li>
<li><p>msg.gas: uint - remaining gas</p>
</li>
<li><p>msg.sender: address - sender of the message(current call)</p>
</li>
<li><p>msg.value: uint - number of wei sent with the message</p>
</li>
</ul>
<h4 id="Now"><a href="#Now" class="headerlink" title="Now"></a>Now</h4><ul>
<li>now: uint - current block timestamp(alias for block.timestamp)</li>
</ul>
<h4 id="Tx"><a href="#Tx" class="headerlink" title="Tx"></a>Tx</h4><ul>
<li><p>tx.gasprice: uint - gas price of the transaction</p>
</li>
<li><p>tx.origin: address - sender of the transaction (full call chain)</p>
</li>
</ul>
<h3 id="Global-Functions"><a href="#Global-Functions" class="headerlink" title="Global Functions"></a>Global Functions</h3><ul>
<li><p>assert(bool condition): abort execution and revert state changes if condition is <code>false</code>(use for internal error)</p>
</li>
<li><p>require(bool condition): abort execution and revert state changes if condition is <code>false</code>(use for malformed input or error in external component)</p>
</li>
<li><p>revert(): abort execution and revert state changes</p>
</li>
<li><p>block.blockhash(uint blockNumber) returns (bytes32): hash of the given block - only works for 256 most recent blocks</p>
</li>
<li><p>sha256(…) returns (bytes32): compute the SHA-256 hash of the (tightly packed) arguments</p>
</li>
<li><p>keccak256(…) returns (bytes32): compute the Ethereum-SHA-3(Keccak-256) hash of the (tightly packed) arguments</p>
</li>
<li><p>sha3(…) returns (bytes32): alias for keccak256</p>
</li>
<li><p>ecrecover(bytes32 hash, uint8 v, bytes32 r, bytes32 s) returns (address): recover address associated with the public key from elliptic curve signature</p>
</li>
<li><p>addmod(uint x, uint y, uint k) returns (uint): compute <code>(x + y) % k</code> where the addition is performed with arbitrary precision and does not wrap around at 2 ** 256</p>
</li>
<li><p>mulmod(uint x, uint y, uint k) returns (uint): compute <code>(x * y) % k</code> where the addition is performed with arbitrary precision and does not wrap around 2 ** 256</p>
</li>
<li><p>selfdestruct(address recipient): destroy the current contract, sending its funds to the given address</p>
</li>
<li><p>suicide(address recipient): alias for selfdestruct</p>
</li>
<li><p><address>.balance: uint256: balance of the Address in Wei</address></p>
</li>
<li><p><address>.send(uint256 amount) returns (bool): send given amount of Wei to Address, returns <code>false</code> on failure</address></p>
</li>
<li><p><address>.transfer(uint256 amount): send given amount of Wei to Address, throws on failure.</address></p>
</li>
</ul>
<h3 id="Scope-Variables"><a href="#Scope-Variables" class="headerlink" title="Scope Variables"></a>Scope Variables</h3><ul>
<li><p>this: current contract’s type - the current contract, explicitly convertable to address</p>
</li>
<li><p>super: the contract one level higher in the inheritance hierarchy</p>
</li>
</ul>
<h3 id="Function-Visibility-Specifier"><a href="#Function-Visibility-Specifier" class="headerlink" title="Function Visibility Specifier"></a>Function Visibility Specifier</h3><ul>
<li><p>public: visible externally and internally(creates accessor function for storage/state variables)</p>
</li>
<li><p>private: only visible in the current contract</p>
</li>
<li><p>external: only visible externally(only for functions) - i.e. can only be message-called)</p>
</li>
<li><p>internal: only visible internally</p>
</li>
</ul>
<h3 id="Modifiers"><a href="#Modifiers" class="headerlink" title="Modifiers"></a>Modifiers</h3><ul>
<li><p>pure: for function - disallows modification or access of state - this is not enforced yet</p>
</li>
<li><p>view: for function - disallows modifiction of state - this is not enforced yet</p>
</li>
<li><p>payable: for function - allows them to receive Ether together with a call</p>
</li>
<li><p>constant: for state variable - disallow assignment(except initialization), does not occupy storage slot</p>
</li>
<li><p>contant: for function - same as view</p>
</li>
<li><p>anonymous: for events - does not store event signature as topic</p>
</li>
<li><p>indexed: for event parameters - store the parameter as topic</p>
</li>
</ul>
<p><img src="https://s3-eu-west-1.amazonaws.com/b9-academy-assets/public/solidity-cheatsheet.png" alt=""></p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/3/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><a class="pagination-link is-current" href="/page/2/">2</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/3/">3</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/16/">16</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.jpg" alt="Keith Chen">
                    
                    
                    <p class="is-size-4 is-block">
                        Keith Chen
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        FE Engineer on Blockchain
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>30°17&#39;37N, 120°9&#39;41E</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        304
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        7
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        89
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/keith-CY" target="_blank">
                Follow</a>
        </div>
        
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/keith-CY" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Keith CY</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.linkedin.com/in/宇-陈-644b61ba" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Yu Chen</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.linkedin.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Soup/">
            <span class="level-start">
                <span class="level-item">Soup</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Uncategorized/">
            <span class="level-start">
                <span class="level-item">Uncategorized</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/github/">
            <span class="level-start">
                <span class="level-item">github</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/github/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">141</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/note/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/AJAX/" style="font-size: 10.91px;">AJAX</a> <a href="/tags/BOOTSTRAP/" style="font-size: 10px;">BOOTSTRAP</a> <a href="/tags/Bash/" style="font-size: 11.82px;">Bash</a> <a href="/tags/BlockChain/" style="font-size: 10px;">BlockChain</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/CSS/" style="font-size: 10.91px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 20px;">CSS3</a> <a href="/tags/Closure/" style="font-size: 10px;">Closure</a> <a href="/tags/CommonJS/" style="font-size: 10px;">CommonJS</a> <a href="/tags/Contract-Ethereum-Web3/" style="font-size: 10px;">Contract, Ethereum, Web3</a> <a href="/tags/Contract-Solidity/" style="font-size: 10px;">Contract, Solidity</a> <a href="/tags/D3-Example/" style="font-size: 10px;">D3, Example</a> <a href="/tags/DAPP-Solidity/" style="font-size: 10px;">DAPP, Solidity</a> <a href="/tags/DApp-Solidity/" style="font-size: 10px;">DApp, Solidity</a> <a href="/tags/DOM/" style="font-size: 12.73px;">DOM</a> <a href="/tags/DevTools/" style="font-size: 10px;">DevTools</a> <a href="/tags/Drizzle-Ethereum-BlockChain/" style="font-size: 10px;">Drizzle, Ethereum, BlockChain</a> <a href="/tags/ES6/" style="font-size: 10.91px;">ES6</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/ETH-Wallet/" style="font-size: 10px;">ETH, Wallet</a> <a href="/tags/Elixir-Phoenix-SCSS/" style="font-size: 10px;">Elixir, Phoenix, SCSS</a> <a href="/tags/Erlang-Elixir-GenServer/" style="font-size: 10px;">Erlang, Elixir, GenServer</a> <a href="/tags/Ethereum/" style="font-size: 10px;">Ethereum</a> <a href="/tags/Ethereum-IPFS/" style="font-size: 10px;">Ethereum, IPFS</a> <a href="/tags/FP/" style="font-size: 10px;">FP</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/Go-Http-Web/" style="font-size: 10px;">Go, Http, Web</a> <a href="/tags/GraphQL-Apollo-TypeScript/" style="font-size: 10px;">GraphQL, Apollo, TypeScript</a> <a href="/tags/Gulp/" style="font-size: 11.82px;">Gulp</a> <a href="/tags/HTML5/" style="font-size: 15.45px;">HTML5</a> <a href="/tags/HTTP2-Node/" style="font-size: 10px;">HTTP2, Node</a> <a href="/tags/Html-Picture/" style="font-size: 10px;">Html, Picture</a> <a href="/tags/Immutable/" style="font-size: 10px;">Immutable</a> <a href="/tags/Int8Array/" style="font-size: 10px;">Int8Array</a> <a href="/tags/JSON-RPC/" style="font-size: 10px;">JSON-RPC</a> <a href="/tags/Javascript/" style="font-size: 19.09px;">Javascript</a> <a href="/tags/Koa/" style="font-size: 10.91px;">Koa</a> <a href="/tags/Koa-NPM-Package/" style="font-size: 10px;">Koa, NPM, Package</a> <a href="/tags/MDL/" style="font-size: 16.36px;">MDL</a> <a href="/tags/Material-Design/" style="font-size: 17.27px;">Material Design</a> <a href="/tags/Mock-JavaScript/" style="font-size: 10px;">Mock, JavaScript</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NODE/" style="font-size: 13.64px;">NODE</a> <a href="/tags/NPM/" style="font-size: 10.91px;">NPM</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Nock/" style="font-size: 10px;">Nock</a> <a href="/tags/Node-CLI/" style="font-size: 10.91px;">Node, CLI</a> <a href="/tags/Node-Fastify/" style="font-size: 10.91px;">Node, Fastify</a> <a href="/tags/Node-Graphql-Koa/" style="font-size: 10px;">Node, Graphql, Koa</a> <a href="/tags/Node-js/" style="font-size: 10.91px;">Node.js</a> <a href="/tags/Phoenix-Elixir-Ecto/" style="font-size: 10px;">Phoenix, Elixir, Ecto</a> <a href="/tags/Promise/" style="font-size: 11.82px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10px;">Protobuf</a> <a href="/tags/Pug-HTML/" style="font-size: 10px;">Pug, HTML</a> <a href="/tags/React/" style="font-size: 18.18px;">React</a> <a href="/tags/React-Docker/" style="font-size: 10px;">React, Docker</a> <a href="/tags/React-Router-Code-splitting/" style="font-size: 10px;">React, Router, Code-splitting</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/React-Redux/" style="font-size: 10px;">React-Redux</a> <a href="/tags/React-Router/" style="font-size: 10.91px;">React-Router</a> <a href="/tags/Redux/" style="font-size: 14.55px;">Redux</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/Ruby-Rails/" style="font-size: 10px;">Ruby, Rails</a> <a href="/tags/Ruby-Rails-RoR-Mina/" style="font-size: 10px;">Ruby, Rails, RoR, Mina</a> <a href="/tags/Rust-Rocket/" style="font-size: 10px;">Rust, Rocket</a> <a href="/tags/RxJS/" style="font-size: 10px;">RxJS</a> <a href="/tags/Smart-Contract-Web3/" style="font-size: 10px;">Smart Contract, Web3</a> <a href="/tags/Solidity/" style="font-size: 12.73px;">Solidity</a> <a href="/tags/Solidity-Error-Handling/" style="font-size: 10px;">Solidity, Error Handling</a> <a href="/tags/Solidity-Public-External/" style="font-size: 10px;">Solidity, Public, External</a> <a href="/tags/Solidity-Smart-Contract/" style="font-size: 10px;">Solidity, Smart Contract</a> <a href="/tags/Thunk/" style="font-size: 10.91px;">Thunk</a> <a href="/tags/Trick/" style="font-size: 11.82px;">Trick</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Webpack-DLL/" style="font-size: 10px;">Webpack, DLL</a> <a href="/tags/automatic/" style="font-size: 10px;">automatic</a> <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/babel-polyfill/" style="font-size: 10px;">babel-polyfill</a> <a href="/tags/blockchain-bitcoin-bip/" style="font-size: 10px;">blockchain, bitcoin, bip</a> <a href="/tags/commandline/" style="font-size: 10px;">commandline</a> <a href="/tags/github/" style="font-size: 10.91px;">github</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/precache/" style="font-size: 10px;">precache</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/webpack/" style="font-size: 17.27px;">webpack</a> <a href="/tags/webpack2/" style="font-size: 11.82px;">webpack2</a> <a href="/tags/测试/" style="font-size: 11.82px;">测试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/03/16/keystore/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/keystore.jpg" alt="Keystore">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-03-16T07:22:16.000Z">2019-03-16</time></div>
                    <a href="/2019/03/16/keystore/" class="has-link-black-ter is-size-6">Keystore</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/03/05/note-on-bip32/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/bip32.png" alt="Note on Bip32">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-03-05T05:54:32.000Z">2019-03-05</time></div>
                    <a href="/2019/03/05/note-on-bip32/" class="has-link-black-ter is-size-6">Note on Bip32</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/20/React-Hooks/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="React Hooks">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-20T09:41:39.000Z">2018-11-20</time></div>
                    <a href="/2018/11/20/React-Hooks/" class="has-link-black-ter is-size-6">React Hooks</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/11/5-tips-in-CRA-2-0/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="5 Tips in CRA@2.0">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-11T15:52:25.000Z">2018-11-11</time></div>
                    <a href="/2018/11/11/5-tips-in-CRA-2-0/" class="has-link-black-ter is-size-6">5 Tips in CRA@2.0</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/Assembly-in-Solidity/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Assembly in Solidity">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T03:30:30.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/Assembly-in-Solidity/" class="has-link-black-ter is-size-6">Assembly in Solidity</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/03/16/keystore/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/keystore.jpg" alt="Keystore">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-03-16T07:22:16.000Z">2019-03-16</time></div>
                    <a href="/2019/03/16/keystore/" class="has-link-black-ter is-size-6">Keystore</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/03/05/note-on-bip32/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/bip32.png" alt="Note on Bip32">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-03-05T05:54:32.000Z">2019-03-05</time></div>
                    <a href="/2019/03/05/note-on-bip32/" class="has-link-black-ter is-size-6">Note on Bip32</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/20/React-Hooks/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="React Hooks">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-20T09:41:39.000Z">2018-11-20</time></div>
                    <a href="/2018/11/20/React-Hooks/" class="has-link-black-ter is-size-6">React Hooks</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/11/5-tips-in-CRA-2-0/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="5 Tips in CRA@2.0">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-11T15:52:25.000Z">2018-11-11</time></div>
                    <a href="/2018/11/11/5-tips-in-CRA-2-0/" class="has-link-black-ter is-size-6">5 Tips in CRA@2.0</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2018/11/08/Assembly-in-Solidity/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Assembly in Solidity">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2018-11-08T03:30:30.000Z">2018-11-08</time></div>
                    <a href="/2018/11/08/Assembly-in-Solidity/" class="has-link-black-ter is-size-6">Assembly in Solidity</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="EzCook" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Chen Yu&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>