<!DOCTYPE html>
<html  lang="en">

<head>
    <meta charset="utf-8">
<title>Note of Sw-Precache - EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">

</head>

<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="Note of Sw-Precache" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/projects">Projects</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-09-04T02:55:34.000Z">2017-09-04</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 700 words)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span> visits
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Note of Sw-Precache
            
        </h1>
        <div class="content">
            <p>A node module to generate service worker code that will precaches specific resource so they work offline.</p>
<p>Serving your local static resources cache-first means that you can get all the crucial scaffolding for your web app – your app shell – on the screen  without having to wait for any network responses.</p>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add --dev sw-precache</div></pre></td></tr></table></figure>
<h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><ol>
<li><p>Make sure your site is served using HTTPS.</p>
</li>
<li><p>incorporate <code>sw-precache</code> into your <code>node</code>-based build script.</p>
</li>
<li><p>Register the service worker JavaScript.</p>
</li>
</ol>
<h3 id="Considerations"><a href="#Considerations" class="headerlink" title="Considerations"></a>Considerations</h3><ul>
<li><p>Service worker caching should be considered a prograssive enhancement. If you follow the model of conditionally registering a service worker only if it’s supported(determined by <code>if(&#39;serviceWorker&#39; in navigator)</code>), you’ll get offline support on browsers with service workers and on browsers that don’t support service workers, the offline-specific code will never be called.</p>
</li>
<li><p>All resources that are precached will be fetched by a service worker runing in a separate thread as soon as the service worker is installed. You should be judicious in what you list in the <code>dynamicUrlsToDependencies</code> and <code>staticFileGlobs</code> options, since listing files that are non-essential(large-images that are not shown on every page, for instance) will result in browsers downloading more data than is strictly necessary.</p>
</li>
<li><p>Precaching doesn’t make sense for all types of resource. Other caching strategies can be used in conjunction with <code>sw-precache</code> to provide the best experience for your users. If you do implement additional caching logic, put the code in a separate file and include it using the <code>importScripts()</code> method.</p>
</li>
<li><p><code>sw-precache</code> uses a <strong>cache-first</strong> strategy, which results in a copy of any cached content being returned without consulting the network.</p>
</li>
</ul>
<h3 id="Use-with-webpack"><a href="#Use-with-webpack" class="headerlink" title="Use with webpack"></a>Use with webpack</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add --dev sw-precache-webpack-plugin</div></pre></td></tr></table></figure>
<h4 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h4><p>A simple configuration example that will work well in most production environments.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)</div><div class="line"><span class="hljs-keyword">const</span> SWPrecachePlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'sw-precache-webpack-plugin'</span>)</div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> PUBLIC_PATH = <span class="hljs-string">'https://www.my-project-name.com/'</span></div><div class="line"></div><div class="line"><span class="hljs-built_in">module</span>.exporst = &#123;</div><div class="line">  <span class="hljs-attr">entry</span>: &#123;</div><div class="line">    <span class="hljs-attr">main</span>: path.resolve(__dirname, <span class="hljs-string">'src/index'</span>)</div><div class="line">  &#125;,</div><div class="line">  <span class="hljs-attr">output</span>: &#123;</div><div class="line">    <span class="hljs-attr">path</span>: path.resolve(__dirname, <span class="hljs-string">'src/bundles/'</span>),</div><div class="line">    <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name]-[hash].js'</span>,</div><div class="line">    <span class="hljs-attr">publicPath</span>: PUBLIC_PATH,</div><div class="line">  &#125;,</div><div class="line">  <span class="hljs-attr">plugins</span>: [</div><div class="line">    <span class="hljs-keyword">new</span> SWPrecachePlugin(&#123;</div><div class="line">      <span class="hljs-attr">cacheId</span>: <span class="hljs-string">'my-project-name'</span>,</div><div class="line">      <span class="hljs-attr">dontCacheBustUrlsMatching</span>: <span class="hljs-regexp">/\.\w&#123;8&#125;\./</span>,</div><div class="line">      <span class="hljs-attr">filename</span>: <span class="hljs-string">'service-worker.js'</span>,</div><div class="line">      <span class="hljs-attr">minify</span>: <span class="hljs-literal">true</span>,</div><div class="line">      <span class="hljs-attr">navigateFallback</span>: PUBLIC_PATH + <span class="hljs-string">'index.html'</span>,</div><div class="line">      <span class="hljs-attr">staticFileGlobsIgnorePatterns</span>: [</div><div class="line">        <span class="hljs-regexp">/\.map$/</span>,</div><div class="line">        /asset-manifest\.json$/,</div><div class="line">      ]</div><div class="line">    &#125;)</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This will generate a new service worker at <code>src/bundles/service-worker.js</code>, then you would register it in your application:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) &#123;</div><div class="line">    navigator.serviceWorker.register(<span class="hljs-string">'./service-worker.js'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)()</div></pre></td></tr></table></figure>
<h4 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h4><ul>
<li><p>filename: string - service worker filename, default is <code>service-worker.js</code></p>
</li>
<li><p>filepath: string - service worker path and name, default is to use <code>webpack.output.path</code> + <code>options.filename</code>. This will override <code>filename</code>.</p>
</li>
<li><p>staticFileGlobsIngorePatters: [Regexp] - Define an optional array of regex patterns to filter out of staticFileGlobs.</p>
</li>
<li><p>mergeStaticsConfig: [boolean] - Merge provided staticFileGlobs and stripPrefixMulti with webpack’s config, rather than having those take precedence, default is false.</p>
</li>
<li><p>minify: [boolean] - Set to true to minify and uglify the generated service-worker, default is false.</p>
</li>
<li><p>cacheId: [string] - Not required but you should include this, it will give your service worker cache a unique name, default to <code>sw-precache-webpack-plugin</code>.</p>
</li>
<li><p>importScripts: [Array<string|object>]</string|object></p>
<ul>
<li><p>when importScripts array item is a string, converts to object format: <code>{ filename: &#39;&lt;publicPath&gt;/my-scripts.js&#39;}</code></p>
</li>
<li><p>when importScripts array item is an Object</p>
<ul>
<li><p>look for <code>chunkName</code> property</p>
</li>
<li><p>look for <code>filename</code> property</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>replacePrefix: [String] - should only be used in conjunction with <code>stripPrefix</code></p>
</li>
<li><p>staticFileGlobs: [Array<string>] - Omit this to allow the plugin to cache all your bundles’ emitted assets. If <code>mergeStaticsConfig=true</code>: this value will be merged with your bundles’ emitted assets, otherwise this value is just passed to <code>sw-precache</code> and emitted assets won’t be included.</string></p>
</li>
<li><p>stripPrefix: [String] - Same as stripPrefixMulti[stripPrefix] = ‘’</p>
</li>
<li><p>stripPrefixMulti: [Object<string,string>] - Omit this to use your webpack config’s <code>output.path</code> + <code>/</code>: <code>output.publicPath</code>.</string,string></p>
</li>
</ul>
<blockquote>
<p>Note taht all configuration options are optional. <code>SWPrecacheWebpackPlugin</code> will by default use all your assets emitted by webpack’s compiler for the <code>staticFileGlobs</code> parameter and your webpack config’s <code>{[output.path + &#39;/&#39;]: output.publicPath}</code> as the stripPrefixMulti parameter. This behavior is probably what you want, all your webpack assets will be cached by your generated service worker. Just don’t pass any arguments when you initialize this plugin, and let this plugin handle generating your <code>sw-precache</code> configuration.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">plugins: [</div><div class="line">  <span class="hljs-keyword">new</span> SWPrecacheWebpackPlugin(),</div><div class="line">]</div></pre></td></tr></table></figure>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/precache/">precache</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">Like this article? Support the author with</h3>
        <div class="buttons is-centered">
            
                <!-- Visit https://www.paypal.com/donate/buttons/ to get your donate button -->

<a class="button is-warning donate" onclick="document.getElementById(&#39;paypal-donate-form&#39;).submit()">
    <span class="icon is-small">
        <i class="fab fa-paypal"></i>
    </span>
    <span>Paypal</span>
</a>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal-donate-form">
    <input type="hidden" name="cmd" value="_donations" />
    <input type="hidden" name="business" value="chen.yu.keith@foxmail.com" />
    <input type="hidden" name="currency_code" value="USD" />
</form>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2017/09/04/AsyncRoute-with-React-Router-v4/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">AsyncRoute With React-Router-V4</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2017/09/03/service-worker-with-webpack/">
                <span class="level-item">Service-Worker With Webpack</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Comments</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
	var gitment = new Gitment({
		id: '2017/09/04/note-of-sw-precache/',
		owner: 'Keith-CY',
		repo: 'Keith-CY.github.io',
		oauth: {
			client_id: '56319e1ce36ed4313555',
			client_secret: 'ca7f10a8357d52290f5509fb54e5173a8bea0a5d',
		},
	})
	gitment.render('comment-container')
</script>

    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>

</html>
