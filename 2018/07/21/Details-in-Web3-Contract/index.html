<!DOCTYPE html>
<html  lang="en">

<head>
    <meta charset="utf-8">
<title>Details in Web3 -- Contract - EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">
<script data-ad-client="ca-pub-8896169856986797" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="Details in Web3 -- Contract" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/projects">Projects</a>
                
                <a class="navbar-item"
                href="https://wiki.digit-map.de/">Digit Map</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-07-21T12:54:58.000Z">2018-07-21</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 minutes read (About 1475 words)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span> visits
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Details in Web3 -- Contract
            
        </h1>
        <div class="content">
            <h1 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// To initialize a contract</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">var</span> Contract = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-eth-contract'</span>)</div><div class="line">Contract.setProvider(<span class="hljs-string">'ws://localhost:8546'</span>)</div><div class="line"><span class="hljs-keyword">var</span> contract = <span class="hljs-keyword">new</span> Contract(abi, address, options)</div></pre></td></tr></table></figure>
<h1 id="Import"><a href="#Import" class="headerlink" title="Import"></a>Import</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>)</div><div class="line"><span class="hljs-keyword">var</span> core = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core'</span>)</div><div class="line"><span class="hljs-keyword">var</span> Method = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-method'</span>)</div><div class="line"><span class="hljs-keyword">var</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-utils'</span>)</div><div class="line"><span class="hljs-keyword">var</span> Subscription = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-subscription'</span>).subscription</div><div class="line"><span class="hljs-keyword">var</span> formatters = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-helpers'</span>).formatters</div><div class="line"><span class="hljs-keyword">var</span> errors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-helpers'</span>).errors</div><div class="line"><span class="hljs-keyword">var</span> promiEvent = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-promievent'</span>)</div><div class="line"><span class="hljs-keyword">var</span> abi = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-eth-abi'</span>)</div></pre></td></tr></table></figure>
<h1 id="Contract-Constructor"><a href="#Contract-Constructor" class="headerlink" title="Contract Constructor"></a>Contract Constructor</h1><figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line"> * Should be called to create new contract instance</div><div class="line"> *</div><div class="line"> * @method Contract</div><div class="line"> * @constructor</div><div class="line"> * @paramÂ &#123;Array&#125; jsonInterface</div><div class="line"> * @param &#123;String&#125; address</div><div class="line"> * @param &#123;Object&#125; options</div><div class="line"> */</div><div class="line"></div><div class="line">var Contract = function Contract(jsonInterface, address, options) &#123;</div><div class="line">  var _this = this</div><div class="line">  var args = Array.prototype.slice.call(arguments)</div><div class="line"></div><div class="line">  // check if the instance is initialized correctly</div><div class="line">  if (!(this instanceof Contract)) &#123;</div><div class="line">    throw new Error(</div><div class="line">      'Please use the "new" keyword to instantiate a web3.eth.contract() object!',</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // sets _requestManager</div><div class="line">  core.packageInit(this, [this.constructor.currentProvider])</div><div class="line"></div><div class="line">  // set clearSubscriptions</div><div class="line">  this.clearSubscriptions = this._requestManager.clearSubscriptions</div><div class="line">  // check params jsonInterface</div><div class="line">  if (!jsonInterface || !Array.isArray(jsonInterface)) &#123;</div><div class="line">    throw new Error(</div><div class="line">      'You must provide the json interface of the contract when instantiating a contract object',</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // clear the options object</div><div class="line">  this.options = &#123;&#125;</div><div class="line"></div><div class="line">  var lastArg = args[args.length - 1]</div><div class="line">  // set options</div><div class="line">  if (_.isObject(lastArg) &amp;&amp; !_.isArray(lastArray)) &#123;</div><div class="line">    options = lastArgs</div><div class="line">    this.options = _.extend(this.options, this._getOrSetDefaultOptions(options))</div><div class="line">    // clear address if the fact is options, in this case the address is not passed in.</div><div class="line">    if (_.isObject(address)) &#123;</div><div class="line">      address = null</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // set address</div><div class="line">  Object.defineProperty(this.options, 'address', &#123;</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      if (value) &#123;</div><div class="line">        _this._address = utils.toChecksumAddress(</div><div class="line">          formatters.inputAddressFormatter('value'),</div><div class="line">        )</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return _this._address</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  // add method and event signature when the jsonInterface gets set</div><div class="line">  Object.defineProperty(this.options, 'jsonInterface', &#123;</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      _this.methods = &#123;&#125;</div><div class="line">      _this.events = &#123;&#125;</div><div class="line"></div><div class="line">      _this._jsonInterface = value.map(method =&gt; &#123;</div><div class="line">        var func, funcName</div><div class="line">        if (method.name) &#123;</div><div class="line">          funcName = utils._jsonInterfaceMethodToString(method)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (method.type === 'function') &#123;</div><div class="line">          method.signature = abi.encodeFunctionSignature(funcName)</div><div class="line">          func = _this._createTxObject.bind(&#123;</div><div class="line">            method: method,</div><div class="line">            parent: _this,</div><div class="line">          &#125;)</div><div class="line"></div><div class="line">          // add method only if not one already exists</div><div class="line">          if (!_this.methods[method.name]) &#123;</div><div class="line">            _this.methods[method.name] = func</div><div class="line">          &#125; else &#123;</div><div class="line">            var cascadeFunc = _this._createTxObject.bind(&#123;</div><div class="line">              method: method,</div><div class="line">              parent: _this,</div><div class="line">              nextMethod: _this.methods[method.name],</div><div class="line">            &#125;)</div><div class="line">            this.methods[method.name] = cascadeFunc</div><div class="line">          &#125;</div><div class="line">          // definitely add the method based on its signature</div><div class="line">          _this.methods[method.signature] = func</div><div class="line">          //add method by name</div><div class="line">          _this.methods[method.name] = func</div><div class="line">          // event</div><div class="line">        &#125; else if (method.type === 'event') &#123;</div><div class="line">          method.signature = abi.encodeEventSignature(funcName)</div><div class="line">          var event = _this._on.bind(_this, method.signature)</div><div class="line"></div><div class="line">          // add method only if not already exists</div><div class="line">          if (</div><div class="line">            !_this.events[method.name] ||</div><div class="line">            _this.events[method.name].name === 'bound'</div><div class="line">          ) &#123;</div><div class="line">            _this.events[method.name] = event</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          // definitely add the method based on its signature</div><div class="line">          _this.events[method.signature] = event</div><div class="line"></div><div class="line">          // add event by name</div><div class="line">          _this.events[funcName] = event</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return method</div><div class="line">      &#125;)</div><div class="line"></div><div class="line">      // add allEvents</div><div class="line">      _this.events.allEvents = _this._on.bind(_this, 'allevents')</div><div class="line"></div><div class="line">      return _this._jsonInterface</div><div class="line">    &#125;,</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return _this._jsonInterface</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  // get default account from the Class</div><div class="line">  var defaultAccount = this.constructor.defaultAccount</div><div class="line">  var defaultBlock = this.constructor.defaultBlock || 'latest'</div><div class="line"></div><div class="line">  Object.defineProperty(this, 'defaultAccount', &#123;</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return defaultAddress</div><div class="line">    &#125;,</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      if (value) &#123;</div><div class="line">        defaultAccount = utils.toChecksumAddress(</div><div class="line">          formatters.inputAddressFormatter(value),</div><div class="line">        )</div><div class="line">      &#125;</div><div class="line">      return value</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  Object.defineProperty(this, 'defaultBlock', &#123;</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return defaultBlock</div><div class="line">    &#125;,</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      defaultBlock = value</div><div class="line">      return value</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  // properties</div><div class="line">  this.methods = &#123;&#125;</div><div class="line">  this.events = &#123;&#125;</div><div class="line">  this._address = null</div><div class="line">  this._jsonInterface = []</div><div class="line"></div><div class="line">  // set getter/setter properties</div><div class="line">  this.options.address = address</div><div class="line">  this.options.jsonInterface = jsonInterface</div><div class="line">&#125;</div><div class="line"></div><div class="line">Contract.setProvider = function(provider, accounts) &#123;</div><div class="line">  // Contract.currentProvider = provider</div><div class="line">  core.packageInit(this, [provider])</div><div class="line">  this._ethAccounts = accounts</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Get the callback and modify the array if necessary</div><div class="line"> *</div><div class="line"> * @method _getCallback</div><div class="line"> * @param &#123;Array&#125; args</div><div class="line"> * @return &#123;Function&#125; the callback</div><div class="line"> */</div><div class="line">Contract.prototype._getCallback = function getCallback(args) &#123;</div><div class="line">  if (args &amp;&amp; _.isFunction(args[args.length - 1])) &#123;</div><div class="line">    return args.pop() // modify the args array!</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Checks that no listener with name 'newListener' or 'removeListener' is added</div><div class="line"> *</div><div class="line"> * @method _checkLister</div><div class="line"> * @param &#123;String&#125; type</div><div class="line"> * @param &#123;String&#125; event</div><div class="line"> * @return &#123;Object&#125; the contract instance</div><div class="line"> */</div><div class="line">Contract.prototype._checkListerner = function(type, event) &#123;</div><div class="line">  if (event === type) &#123;</div><div class="line">    throw new Error(</div><div class="line">      `The event $&#123;type&#125; is a reserved event name, you can't use it`,</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Use default values, if options are not avaible</div><div class="line"> *</div><div class="line"> * @method _getOrSetDefaultOptions</div><div class="line"> * @param &#123;Object&#125; options the options given by the user</div><div class="line"> * @return &#123;Object&#125; the options with gaps filled by defaults</div><div class="line"> */</div><div class="line">Contract.prototype._getOrSetDefaultOptions = function getOrSetDefaultOptions(</div><div class="line">  options,</div><div class="line">) &#123;</div><div class="line">  var gasPrice = options.gasPrice ? String(options.gasPrice)&#125; : null</div><div class="line">  var from = options.from ? utils.toChecksumAddress(formatters.inputAddressFormatter(options.from)): null</div><div class="line"></div><div class="line">  options.data = option.data || this.options.data</div><div class="line"></div><div class="line">  option.from = from || this.options.from</div><div class="line">  option.gasPrice = gasPrice || this.options.gasPrice</div><div class="line">  options.gas = options.gas || options.gasLimit || this.options.gas</div><div class="line"></div><div class="line">  delete options.gasLimit</div><div class="line">  return options</div><div class="line">&#125;</div><div class="line"></div><div class="line">// TODO:</div><div class="line">// _encodeEventABI</div><div class="line">// _decodeEventABI</div><div class="line">// _encodeMethodABI</div><div class="line">// _decodeMethodABI</div><div class="line">// _decodeMethodReturn</div><div class="line"></div><div class="line">/**</div><div class="line"> * Deploys a contract and fire events based on its state: transactionHash, receipt</div><div class="line"> *</div><div class="line"> * All event listeners will be removed, once the last possible event is fired ('error' or 'receipt')</div><div class="line"> *</div><div class="line"> * @method deploy</div><div class="line"> * @param &#123;Object&#125; options</div><div class="line"> * @param &#123;Function&#125; callback</div><div class="line"> * @return &#123;Object&#125; EventEmitter possible are "error", "transactionHash", and "receipt"</div><div class="line"> */</div><div class="line">Contract.prototype.deploy = function(options, callback) &#123;</div><div class="line">  options = options || &#123;&#125;</div><div class="line">  options.arguments = options.arguments || []</div><div class="line">  options = this._getOrSetDefaultOptions(options)</div><div class="line"></div><div class="line">  // return error if no 'data' is specified</div><div class="line">  if (!options.data) &#123;</div><div class="line">    return utils._fireError(new Error('No "data" specifed in neither the given options, nor the default options'), null, null, callback)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  var constructor = _.find(this.options.jsonInterface, function(method) &#123;</div><div class="line">    return (method.type === 'contructor')</div><div class="line">  &#125;) || &#123;&#125;</div><div class="line"></div><div class="line">  constructor.signature = 'constructor'</div><div class="line"></div><div class="line">  return this._createTxObject.apply(&#123;</div><div class="line">    method: constructor,</div><div class="line">    parent: this,</div><div class="line">    deployData: options.data,</div><div class="line">    _ethAccounts: this.constructor._ethAccounts</div><div class="line">  &#125;, options.arguments)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// TODO:</div><div class="line">// _generateEventOptions</div><div class="line">// clone</div><div class="line">// once</div><div class="line">// _on</div><div class="line">// getPastEvents</div><div class="line"></div><div class="line">/**</div><div class="line"> * returns the an object with call, send, estimate functions</div><div class="line"> *</div><div class="line"> * @method _createTxObject</div><div class="line"> * @return &#123;Object&#125; an object with functions to call the method</div><div class="line"> */</div><div class="line"></div><div class="line">Contract.prototype._createTxObject = function _createTxObject()&#123;</div><div class="line">  var args = Array.prototype.slice.call(arguments)</div><div class="line">  var txObject = &#123;&#125;</div><div class="line"></div><div class="line">  if (this.method.type === 'function') &#123;</div><div class="line">    txObject.call = this.parent._executeMethod.bind(txObject, 'call')</div><div class="line">    txObject.call.request = this.parent._executeMethod.bind(txObject, 'call', true) // to make batch request</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  txObject.send = this.parent._executeMethod.bind(txObject, 'send')</div><div class="line">  txObject.send.request = this.parent._executeMethod.bind(txObject)</div><div class="line">  txObject.encodeABI = this.parent._encodeMethodABI.bind(txObject)</div><div class="line">  txObject.estimateGas = this.parent._executeMethod.bind(txObject, 'estimate')</div><div class="line"></div><div class="line">  // check arguments length</div><div class="line">  if (args &amp;&amp; this.method.inputs &amp;&amp; args.length !== this.method.inputs.length) &#123;</div><div class="line">    if (this.nextMethod) &#123;</div><div class="line">      return this.nextMethod.apply(null, args)</div><div class="line">    &#125;</div><div class="line">    throw errors.InvalidNumberOfParams(args.length, this.method.inputs.length, this.method.name)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  txObject.arguments = args || []</div><div class="line">  txObject._method = this.method</div><div class="line">  txObject._parent = this.parent</div><div class="line">  txObject._ethAccounts = this.parent.constructor._ethAccounts || this._ethAccounts</div><div class="line"></div><div class="line">  if(this.deployData) &#123;</div><div class="line">    txObject._deployData = this.deployData</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  return txObject</div><div class="line">&#125;</div><div class="line"></div><div class="line">// _processExecuteArguments</div><div class="line"></div><div class="line">/**</div><div class="line"> * Execute a call, transact or estimateGas on a contract function</div><div class="line"> *</div><div class="line"> * @method _executeMethod</div><div class="line"> * @param &#123;String&#125; type the type this execute function should execute</div><div class="line"> * @param &#123;Boolean&#125; makeRequest if true, it simply returns the request parameters, rather than execute it.</div><div class="line"> */</div><div class="line"></div><div class="line">Contract.prototype._executeMethod = function _executeMethod () &#123;</div><div class="line">  var _this = this</div><div class="line">  var args = this._parent._processExecuteArguments.call(this, Array.prototype.slice.call(arguments))</div><div class="line">  var defer = promiEvent((args.type !== 'send))</div><div class="line">  var ethAccounts = _this.constructor._ethAccounts || _this._ethAccounts</div><div class="line"></div><div class="line">  // simply return request for batch requests</div><div class="line"></div><div class="line">  if (args.generateRequest) &#123;</div><div class="line">    // handle batch request</div><div class="line">    var payload = &#123;</div><div class="line">      params: [formatters.inputCallFormatter.call(this._parent, args.options)],</div><div class="line">      callback: args.callback,</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if (args.type === 'call') &#123;</div><div class="line">      payload.params.push(formatters.inputDefaultBlockNumber.call(this._parent, args.defaultBlockNumber))</div><div class="line">      payload.method = 'eth_call'</div><div class="line">      payload.format = this._parent.decodeMethodReturn.bind(null, this._method.outputs)</div><div class="line">    &#125; else &#123;</div><div class="line">      payload.method = 'eth_sendTransaction'</div><div class="line">    &#125;</div><div class="line">    return payload</div><div class="line">  &#125; else &#123;</div><div class="line">    // handle call or send</div><div class="line">    switch (args.type) &#123;</div><div class="line">      case 'estimate': &#123;</div><div class="line">        var estimateGas = (new Method(&#123;</div><div class="line">          name: 'estimateGas',</div><div class="line">          call: 'eth_estimateGas',</div><div class="line">          params: 1,</div><div class="line">          inputFormatter: [formatter.inputCallFormatter],</div><div class="line">          outputFormatter: utils.hexToNumber,</div><div class="line">          requestManager: _this._parent._requestManager,</div><div class="line">          accounts: ethAccounts, // specify accounts</div><div class="line">          defaultAccount: _this._parent.defaultAccount,</div><div class="line">          defaultBlock: _this._parent.defaultBlock,</div><div class="line">        &#125;)).createFunction();</div><div class="line">        return estimateGas(args.options, args.callback)</div><div class="line">      &#125;</div><div class="line">      case 'call': &#123;</div><div class="line">        var call = (new Method(&#123;</div><div class="line">           name: 'call',</div><div class="line">           call: 'eth_call',</div><div class="line">           params: 2,</div><div class="line">           inputFormatter: [formatters.inputCallFormatter, formatters.inputDefaultBlockNumberFormatter],</div><div class="line">           outputFormatter: result =&gt; &#123;</div><div class="line">             return _this._parent.decodeMethodReturn(_this._method.outputs, result)</div><div class="line">           &#125;,</div><div class="line">           requestManager: _this._parent._requestManager,</div><div class="line">           accounts: ethAccounts, // is eth.accounts (necessary for wallet signing)</div><div class="line">           defaultAccount: _this._parent.defaultAccount,</div><div class="line">           defaultBlock: _this._parent.defaultBlock,</div><div class="line">        &#125;)).createFunction()</div><div class="line"></div><div class="line">        return call(args.options, args.defaultBlock, args.callback)</div><div class="line">      &#125;</div><div class="line">      case 'send': &#123;</div><div class="line">        if(!utils.isAddress(args.options.from)) &#123;</div><div class="line">            return utils._fireError(new Error('No "from" address specified in neither the given options, nor the default options.'), defer.eventEmitter, defer.reject, args.callback);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (_.isBoolean(this._method.payable) &amp;&amp; !this._method.payable &amp;&amp; args.options.value &amp;&amp; args.options.value &gt; 0) &#123;</div><div class="line">            return utils._fireError(new Error('Can not send value to non-payable contract method or constructor'), defer.eventEmitter, defer.reject, args.callback);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // make sure receipt logs are decoded</div><div class="line">        var extraFormatters = &#123;</div><div class="line">          receiptFormatter: receipt =&gt; &#123;</div><div class="line">            if (_.isArray(receipt.logs)) &#123;</div><div class="line">              // decode logs</div><div class="line">              var events = _.map(receipt.logs, log =&gt; &#123;</div><div class="line">                return _this._parent._decodeEventABI.call(&#123;</div><div class="line">                  name: 'ALLEVENT',</div><div class="line">                  jsonInterface: _this._parent.options.jsonInterface,</div><div class="line">                &#125;, log)</div><div class="line">              &#125;)</div><div class="line"></div><div class="line">              // make sure log names keys</div><div class="line">              receipt.events = &#123;&#125;</div><div class="line">              var count = 0</div><div class="line">              events.forEach(ev =&gt; &#123;</div><div class="line">                if (ev.event) &#123;</div><div class="line">                  // if &gt; 1 of the same event, don't overwrite any existing events</div><div class="line">                  if (receipt.events[ev.event]) &#123;</div><div class="line">                    if (Array.isArray(receipt.events[ev.event])) &#123;</div><div class="line">                      receipt.events[ev.event].push(ev)</div><div class="line">                    &#125; else &#123;</div><div class="line">                      receipt.events[ev.event] = [receipt.events[ev.event], ev]</div><div class="line">                    &#125;</div><div class="line">                  &#125; else &#123;</div><div class="line">                    receipt.event[ev.event] = ev</div><div class="line">                  &#125;</div><div class="line">                &#125; else &#123;</div><div class="line">                  receipt.events[count] = ev</div><div class="line">                  count++</div><div class="line">                &#125;</div><div class="line">              &#125;)</div><div class="line">              delete receipt.logs</div><div class="line">            &#125;</div><div class="line">            return receipt</div><div class="line">          &#125;,</div><div class="line"></div><div class="line">          contractDeployFormatter: receipt =&gt; &#123;</div><div class="line">            var newContract = _this._parent.clone()</div><div class="line">            newContract.options.address = receipt.contractAddress</div><div class="line">            return newContract</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        var sendTransaction = (new Method(&#123;</div><div class="line">          name: 'sendTransaction',</div><div class="line">          call: 'eth_sendTransaction',</div><div class="line">          params: 1,</div><div class="line">          inputFormatter: [formatters.inputTransactionFormatter],</div><div class="line">          requestManager: _this._parent.requestManager,</div><div class="line">          accounts: _this.constructor._ethAccount || _this._ethAccounts, // is eth.accounts,</div><div class="line">          defaultAccount: _this._parent.defaultAccount,</div><div class="line">          defaultBlock: _this._parent.defaultBlock,</div><div class="line">          extraFormatter: extraFormatters,</div><div class="line">        &#125;)).createFunction()</div><div class="line"></div><div class="line">        return sendTransaction(args.options, args.callback)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/Contract-Ethereum-Web3/">Contract, Ethereum, Web3</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">Like this article? Support the author with</h3>
        <div class="buttons is-centered">
            
                <!-- Visit https://www.paypal.com/donate/buttons/ to get your donate button -->

<a class="button is-warning donate" onclick="document.getElementById(&#39;paypal-donate-form&#39;).submit()">
    <span class="icon is-small">
        <i class="fab fa-paypal"></i>
    </span>
    <span>Paypal</span>
</a>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal-donate-form">
    <input type="hidden" name="cmd" value="_donations" />
    <input type="hidden" name="business" value="chen.yu.keith@foxmail.com" />
    <input type="hidden" name="currency_code" value="USD" />
</form>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2018/08/27/development-of-neuron-web-extension/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">Development of Neuron Web Extension</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2018/07/11/Declaration-in-TypeScript/">
                <span class="level-item">Declaration in TypeScript</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Comments</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
	var gitment = new Gitment({
		id: '2018/07/21/Details-in-Web3-Contract/',
		owner: 'Keith-CY',
		repo: 'Keith-CY.github.io',
		oauth: {
			client_id: '56319e1ce36ed4313555',
			client_secret: 'ca7f10a8357d52290f5509fb54e5173a8bea0a5d',
		},
	})
	gitment.render('comment-container')
</script>

    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>

</html>
