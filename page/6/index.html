<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8">
<title>EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">

</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="EzCook" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
                <a class="navbar-item"
                href="/resume">Resume</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-08-01T04:07:29.000Z">2017-08-01</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 233 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/08/01/http-cache-Etag-Last-Modified-Cache-Control/">Http Cache: Etag, Last-Modified, Cache-Control</a>
            
        </h1>
        <div class="content">
            <h3 id="Cache-Control"><a href="#Cache-Control" class="headerlink" title="Cache-Control"></a>Cache-Control</h3><p><code>Cache-Control</code> general-header field is used to specify deirectives that MUST be obeyed by all caching mechanisms along the request/response chain.</p>
<p>When the <code>Cache-Control</code> allow to cache, like <code>Cache-Control: public, max-age: 86400</code>, it means that in this day the browser can use the cahce directly without any request to server.a</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> http: <span class="hljs-string">'http'</span></div><div class="line"><span class="hljs-keyword">let</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;</div><div class="line">  res.setHeader(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'public'</span>, <span class="hljs-string">'max-age=86400'</span>)</div><div class="line">  res.end(<span class="hljs-string">'hello world'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">server.listen(<span class="hljs-number">3000</span>)</div></pre></td></tr></table></figure>
<h3 id="Etag"><a href="#Etag" class="headerlink" title="Etag"></a>Etag</h3><p>Used for conditional HTTP request.</p>
<p><code>Etag</code> represents Version of Resource, browser will add <code>If-None-Match</code> in headers with request. If the resource on server has not been modified, code 304 will be returned.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'http'</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(req.url, req.headers[<span class="hljs-string">'if-none-match'</span>])</div><div class="line">  <span class="hljs-keyword">if</span> (req.headers[<span class="hljs-string">'if-none-match'</span>]) &#123;</div><div class="line">    <span class="hljs-comment">// check if resource modified</span></div><div class="line">    res.statusCode = <span class="hljs-number">304</span></div><div class="line">    res.end()</div><div class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</div><div class="line">    res.setHeader(<span class="hljs-string">'Etag'</span>, <span class="hljs-string">'0000000'</span>)</div><div class="line">    res.end(<span class="hljs-string">'hello world'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">server.listen(<span class="hljs-number">3000</span>)</div></pre></td></tr></table></figure>
<h3 id="Last-Modified"><a href="#Last-Modified" class="headerlink" title="Last-Modified"></a>Last-Modified</h3><p>Similar to <code>Etag</code>, <code>Last-Modified</code> represents if the resource modified. It uses <code>time when modified</code> instead of <code>version tag</code>.</p>
<p>The key in header is <code>If-Modified-Since</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'http'</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> server = http.createServer(<span class="hljs-function">(<span class="hljs-params">req, res</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(req.url, req.headers[<span class="hljs-string">'if-modified-since'</span>])</div><div class="line">  <span class="hljs-keyword">if</span> (req.headers[<span class="hljs-string">'if-modified-since'</span>]) &#123;</div><div class="line">    <span class="hljs-comment">// check timestamp</span></div><div class="line">    res.statusCode = <span class="hljs-number">304</span></div><div class="line">    res.end()</div><div class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</div><div class="line">    res.setHeader(<span class="hljs-string">'Last-Modified'</span>, <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toString())</div><div class="line">    res.end(<span class="hljs-string">'hello world'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line"></div><div class="line">server.listen(<span class="hljs-number">3000</span>)</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-31T07:27:46.000Z">2017-07-31</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 450 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/31/WebSocket-on-Node/">WS on Node</a>
            
        </h1>
        <div class="content">
            <h3 id="Create-WS-Server"><a href="#Create-WS-Server" class="headerlink" title="Create WS Server"></a>Create WS Server</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// get WS Object</span></div><div class="line"><span class="hljs-keyword">const</span> WebSocket = <span class="hljs-built_in">require</span>(<span class="hljs-string">'ws'</span>)</div><div class="line"></div><div class="line"><span class="hljs-comment">// Create new Server Instance</span></div><div class="line"><span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> WebSocket.Server(&#123;</div><div class="line">  <span class="hljs-attr">port</span>: <span class="hljs-number">80</span>, <span class="hljs-comment">// port</span></div><div class="line">  verifyClient: socketverify <span class="hljs-comment">// (optional)function to verify connection</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h4 id="new-WebSocket-Server-options-callback"><a href="#new-WebSocket-Server-options-callback" class="headerlink" title="new WebSocket.Server(options[, callback])"></a>new WebSocket.Server(options[, callback])</h4><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">options: &#123;</div><div class="line">  host: string,</div><div class="line">  port: number,</div><div class="line">  backlog: number, // the maximum length of the queue of pending connection.</div><div class="line">  server: http.Server | https.Server, // a pre-created Node Http Server.</div><div class="line">  verifyClient: function, // a function which can be used to validate incoming connections.</div><div class="line">  handleProtocols: function, // a function which can be used to handle the WebSocket subprotocols.</div><div class="line">  path: string, // Accept only connections matching this path.</div><div class="line">  noServer: boolean, // Enable no server mode.</div><div class="line">  clientTracking: boolean, // Specifies whether or not track clients.</div><div class="line">  perMessageDeflate: boolean | object, // Enable/Disable permessage-deflate.</div><div class="line">  maxPayload: number, // Maximum allowed message size in bytes.</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Create a new server instance. One of <code>port</code>, <code>server</code>, or <code>noServer</code> must be provided or an error is thrown.</p>
<h3 id="Set-VerifyClient"><a href="#Set-VerifyClient" class="headerlink" title="Set VerifyClient"></a>Set VerifyClient</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">socketverify</span>(<span class="hljs-params">info</span>) </span>&#123;</div><div class="line">  <span class="hljs-comment">// connect if return true</span></div><div class="line">  <span class="hljs-keyword">var</span> origin = info.origin.match(<span class="hljs-comment">/*...*/</span>)</div><div class="line">  <span class="hljs-keyword">if</span> (<span class="hljs-comment">/*...*/</span>) &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span></div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If <code>verifyClient</code> is not set then the handshake is automatically accepted. If it is is provided with a single argument then that is:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">info: &#123;</div><div class="line">  origin: string, // The value in the Origin header indicated by the client.</div><div class="line">  req: http.incomingMessage, // The client HTTP GET request.</div><div class="line">  secure: boolean, // `true` is `req.connection.authorized` or `req.connection.encrypted` is set.</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If the <code>verifyClient</code> provided with 2 arguments, the second one is <code>cb</code>, which accepts <code>result: boolean</code>, <code>code: number</code>, <code>name: string</code>.</p>
<h3 id="Handle-Request"><a href="#Handle-Request" class="headerlink" title="Handle Request"></a>Handle Request</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">ws.on(<span class="hljs-string">'connect'</span>, (socket) =&gt; &#123;</div><div class="line">  <span class="hljs-comment">// the socket is a connect to client</span></div><div class="line">  <span class="hljs-comment">// usually you should push it in an array for management</span></div><div class="line">  socket.onmessage = message</div><div class="line">  socket.onclose = close</div><div class="line">  socket.onerror = error</div><div class="line">  socket.onopen = open</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">message</span>(<span class="hljs-params">msg</span>) </span>&#123;</div><div class="line">  <span class="hljs-comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params">err</span>) </span>&#123;</div><div class="line">  <span class="hljs-comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span>(<span class="hljs-params"></span>) </span>&#123;</div><div class="line">  <span class="hljs-comment">// ...</span></div><div class="line">&#125;</div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">open</span>(<span class="hljs-params"></span>) </span>&#123;</div><div class="line">  <span class="hljs-comment">// ...</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h4><h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><h4 id="Sending-msg"><a href="#Sending-msg" class="headerlink" title="Sending msg"></a>Sending msg</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.send(data[, options[, callback]])</div></pre></td></tr></table></figure>
<ul>
<li><p>data: binary or string</p>
</li>
<li><p>options:</p>
<ul>
<li><p>mask: true | false  是否使用掩码</p>
</li>
<li><p>binary: true | false 是否二进制流</p>
</li>
<li><p>compress: true | false 是否压缩</p>
</li>
</ul>
</li>
<li><p>callback: 回调</p>
</li>
</ul>
<h4 id="close-connection"><a href="#close-connection" class="headerlink" title="close connection"></a>close connection</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.close([code], [data])</div></pre></td></tr></table></figure>
<ul>
<li><p>code: 返回一个状态码</p>
</li>
<li><p>data: 结束连接时发送的信息</p>
</li>
</ul>
<h4 id="pause"><a href="#pause" class="headerlink" title="pause"></a>pause</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.pause()</div></pre></td></tr></table></figure>
<h4 id="resume"><a href="#resume" class="headerlink" title="resume"></a>resume</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.resume()</div></pre></td></tr></table></figure>
<h4 id="PING"><a href="#PING" class="headerlink" title="PING"></a>PING</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.ping([data], [options], [dontFailWhenClosed])</div></pre></td></tr></table></figure>
<ul>
<li><p>data: ping 的时候发送的信息</p>
</li>
<li><p>options: 同 send</p>
</li>
<li><p>dontFailWhenClosed: true | false // 如果连接断开, 是否抛出错误</p>
</li>
</ul>
<h4 id="PONG"><a href="#PONG" class="headerlink" title="PONG"></a>PONG</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">socket.pong([data], [options], [dontFailWhenClosed])</div></pre></td></tr></table></figure>
<p>Ping 和 Pong 的区别在于, 一个包含 ping 帧(0x9), 一个包含 pong 帧(0xA)</p>
<p>pong 是对于接到 ping 之后的回应, 让双方都知道连接还存在</p>
<h4 id="stream"><a href="#stream" class="headerlink" title="stream"></a>stream</h4><h4 id="terminate"><a href="#terminate" class="headerlink" title="terminate"></a>terminate</h4>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-31T02:27:23.000Z">2017-07-31</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 minutes read (About 1357 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/31/Short-Clip-of-TypeScript(1)/">Short Clip of TypeScript(1)</a>
            
        </h1>
        <div class="content">
            <h3 id="Basic-Types"><a href="#Basic-Types" class="headerlink" title="Basic Types"></a>Basic Types</h3><p><code>Boolean</code>, <code>Number</code>, <code>String</code>, <code>Array</code>, <code>Tuple</code>, <code>Enum</code>, <code>Any</code>, <code>Void</code>, <code>Null</code>, <code>Undefined</code>, <code>Never</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Boolean</span></div><div class="line"><span class="hljs-keyword">let</span> isDone: boolean: <span class="hljs-literal">false</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// Number</span></div><div class="line"><span class="hljs-keyword">let</span> decimal: number = <span class="hljs-number">6</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// String</span></div><div class="line"><span class="hljs-keyword">let</span> color: string = <span class="hljs-string">'red'</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// Array</span></div><div class="line"><span class="hljs-keyword">let</span> list: number[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</div><div class="line"><span class="hljs-keyword">let</span> list: <span class="hljs-built_in">Array</span>&lt;number&gt; = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</div><div class="line"></div><div class="line"><span class="hljs-comment">// Tuple</span></div><div class="line"><span class="hljs-keyword">let</span> x: [string, number] = [<span class="hljs-string">'hello'</span>, <span class="hljs-number">10</span>]</div><div class="line"></div><div class="line"><span class="hljs-comment">// Enum</span></div><div class="line">enum Color &#123;Red, Green, Blue&#125;</div><div class="line"><span class="hljs-keyword">let</span> c: Color = Color.Green <span class="hljs-comment">// 1</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// Any</span></div><div class="line"><span class="hljs-keyword">let</span> notSure = <span class="hljs-number">5</span></div><div class="line">notSure = <span class="hljs-string">'not sure'</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// Void</span></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">warnUser</span> (<span class="hljs-params"></span>): <span class="hljs-title">void</span> </span>&#123;</div><div class="line">  alert(<span class="hljs-string">'This is my warning message'</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-comment">// Never</span></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">error</span>(<span class="hljs-params">message: string</span>): <span class="hljs-title">never</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(message)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Note:</p>
<blockquote>
<p>By default <code>null</code> and <code>undefined</code> are subtypes of all other types, that means you can assign <code>null</code> and <code>undefined</code> to something like <code>number</code></p>
<p>However, when using <code>--strictNullChecks</code> flag, <code>null</code> and <code>undefined</code> are only assignable to <code>void</code> and their respective types. This helps avoid many common errors. In cases where you want to pass in either a <code>string</code> or <code>null</code> or <code>undefined</code>, you can use the <code>union type</code> <code>string | null | undefined</code>.</p>
</blockquote>
<h3 id="Type-assertions"><a href="#Type-assertions" class="headerlink" title="Type assertions"></a>Type assertions</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">let</span> someValue = <span class="hljs-string">'this is a string'</span></div><div class="line"><span class="hljs-keyword">let</span> strLength: number = (<span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">string</span>&gt;</span>someValue).length</span></div><div class="line">let strLength: number = (someValue as string).length</div></pre></td></tr></table></figure>
<h3 id="Variable-Declarations"><a href="#Variable-Declarations" class="headerlink" title="Variable Declarations"></a>Variable Declarations</h3><h3 id="Interfaces"><a href="#Interfaces" class="headerlink" title="Interfaces"></a>Interfaces</h3><blockquote>
<p>One of TypeScript’s core principles is that type-checking focuses on the <em>shape</em> that value have. This is sometimes called ‘duck typing’ or ‘structural subtyping’. In TypeScript, interface fill the role of naming these types and are a powerful way of defining contracts within your code as well as contracts with code outside your project.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printLabel</span>(<span class="hljs-params">labelObj: &#123; label: string &#125;</span>) </span>&#123;</div><div class="line">&#125;</div><div class="line"><span class="hljs-comment">// Or</span></div><div class="line">interface LabelledValue &#123;</div><div class="line">  <span class="hljs-attr">label</span>: string;</div><div class="line">&#125;</div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">printLabel</span>(<span class="hljs-params">labelObj: LabelledValue</span>) </span>&#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Optional-Properties"><a href="#Optional-Properties" class="headerlink" title="Optional Properties"></a>Optional Properties</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">interface SquareConfig &#123;</div><div class="line">  color?: string;</div><div class="line">  width?: number;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Readonly-Properties"><a href="#Readonly-Properties" class="headerlink" title="Readonly Properties"></a>Readonly Properties</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">interface Point &#123;</div><div class="line">  readonly x: number;</div><div class="line">  readonly y: number;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> ro: ReadonlyArray&lt;number&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p>Note: Readonly Array</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">let</span> a: number[] = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]</div><div class="line"><span class="hljs-keyword">let</span> ro: ReadonlyArray&lt;number&gt; = a</div><div class="line">ro[<span class="hljs-number">0</span>] = <span class="hljs-number">12</span> <span class="hljs-comment">// error</span></div><div class="line">ro.push(<span class="hljs-number">5</span>) <span class="hljs-comment">// error</span></div><div class="line">ro.legnth = <span class="hljs-number">100</span> <span class="hljs-comment">// error</span></div><div class="line">a = ro <span class="hljs-comment">// error</span></div></pre></td></tr></table></figure>
<p>You can’t assign the entire <code>ReadonlyArray</code> back to a normal array. Instead, you could do this:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">a = ro <span class="hljs-keyword">as</span> number[]</div></pre></td></tr></table></figure>
<blockquote>
<p>Object literals get special treatment and undergo <em>excess property checking</em> when assigning them to other variables, or <em>passing them as arguments</em>. If an object literal has any properties that the <code>target type</code> doesn’t have, you’ll get an error.</p>
</blockquote>
<h3 id="Adding-Index-Signature"><a href="#Adding-Index-Signature" class="headerlink" title="Adding Index Signature"></a>Adding Index Signature</h3><p>Add a string index signature if you’re sure that the object can have some extra properties that are used in some special way.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">interface SquareConfig &#123;</div><div class="line">  color?: string;</div><div class="line">  width?: number;</div><div class="line">  [propName: string]: any;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Function-Types"><a href="#Function-Types" class="headerlink" title="Function Types"></a>Function Types</h3><p>To describe a function type with an interface, we give the interface a <code>call signature</code>. This is like a function declaration with only the parameter list and return type given. Each parameter in the parameter list requires both name and type.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">interface SearchFunc &#123;</div><div class="line">  (source: string, <span class="hljs-attr">subString</span>: string): boolean;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> mySearch: SearchFunc</div><div class="line"></div><div class="line">mySearch = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">source: string, subString: string</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">let</span> result = source.search(subString)</div><div class="line">  <span class="hljs-keyword">return</span> result &gt; <span class="hljs-number">-1</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Indexable-Types"><a href="#Indexable-Types" class="headerlink" title="Indexable Types"></a>Indexable Types</h3><p>Similarly to how we can use interfaces to describe function types, we can also describe types that we can ‘index into’ like <code>a[10]</code> or <code>ageMap[&#39;daniel&#39;]</code>. Indexable types have an <em>index signature</em> that describes the types we can use to index into the object, along with the corresponding return types when indexing.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">interface StringArray &#123;</div><div class="line">  [index: number]: string;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> myArray: StringArray</div><div class="line">myArray = [<span class="hljs-string">'Bob'</span>, <span class="hljs-string">'Fred'</span>]</div><div class="line"><span class="hljs-keyword">let</span> myStr: string = myArray[<span class="hljs-number">0</span>]</div><div class="line"></div><div class="line"><span class="hljs-comment">// readonly</span></div><div class="line">interface ReadonlyStringArray &#123;</div><div class="line">  readonly [index: number]: string</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Class-Types"><a href="#Class-Types" class="headerlink" title="Class Types"></a>Class Types</h3><p>Implementing an interface.</p>
<p>One of the most common uses of interfaces is explicitly enforcing a class meets a particular contract.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">inerface ClockInterface &#123;</div><div class="line">  <span class="hljs-attr">currentTime</span>: <span class="hljs-built_in">Date</span>;</div><div class="line">  setTime(d: <span class="hljs-built_in">Date</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Clock</span> <span class="hljs-title">implements</span> <span class="hljs-title">ClockInterface</span> </span>&#123;</div><div class="line">  currentTime: <span class="hljs-built_in">Date</span></div><div class="line">  setTime(d: <span class="hljs-built_in">Date</span>) &#123;</div><div class="line">    <span class="hljs-keyword">this</span>.currentTime = d</div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">constructor</span> (h: number, m: number) &#123;</div><div class="line"></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Interface describe the public side of the class, rather than both the public and private side. This prohibits you from using them to check that a class also have particular types for the private side of the class instance.</p>
<p>Difference between the static and instance side of classes.</p>
<p>When working with classes and interfaces, it helps to keep in mind that a class <em>have two types</em>: the type of static side and the type of the instance side.</p>
<p>When a class implements an interface, only the instance side of the class is checked.</p>
<p>Notice: constructor sits in the static side, it is not included in this check.</p>
</blockquote>
<h3 id="Extending-Interfaces"><a href="#Extending-Interfaces" class="headerlink" title="Extending Interfaces"></a>Extending Interfaces</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">interface Shape &#123;</div><div class="line">  <span class="hljs-attr">color</span>: string;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface Square extends Shape &#123;</div><div class="line">  <span class="hljs-attr">sideLength</span>: number;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> square = <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Square</span>&gt;</span>&#123;&#125;</span></div><div class="line"></div><div class="line">square.color = 'blue'</div><div class="line">square.sideLength = 10</div></pre></td></tr></table></figure>
<blockquote>
<p>An interface can extend multiple interface, creating a combination of all of the interfaces.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">interface Shape &#123;</div><div class="line">  <span class="hljs-attr">color</span>: string;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface PenStroke &#123;</div><div class="line">  <span class="hljs-attr">penWidth</span>: number;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface Square extends Shape, PenStroke &#123;</div><div class="line">  <span class="hljs-attr">sideLength</span>: number;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> square = <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Square</span>&gt;</span>&#123;&#125;</span></div></pre></td></tr></table></figure>
<h3 id="Hybrid-Types"><a href="#Hybrid-Types" class="headerlink" title="Hybrid Types"></a>Hybrid Types</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">interface Counter &#123;</div><div class="line">  (start: number): string;</div><div class="line">  interval: number;</div><div class="line">  reset(): <span class="hljs-keyword">void</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getCounter</span>(<span class="hljs-params"></span>): <span class="hljs-title">Counter</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">let</span> counter = <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Counter</span>&gt;</span>function (start: number)</span></div><div class="line">  counter.interval = 123;</div><div class="line">  counter.reset = function () &#123;&#125;</div><div class="line">  return counter</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Interface-Extending-Classes"><a href="#Interface-Extending-Classes" class="headerlink" title="Interface Extending Classes"></a>Interface Extending Classes</h3><blockquote>
<p>When an interface type extends a class type it inherits members of the class but not their implementations. It is as if the interface has declared all of the members of the class without providing an implementation. Interface inherits even the private and protected members of a base class. This means that when you create an interface that extends a class with private or protected members, that interface type can only be implemented by that class or a subclass of it.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Control</span> </span>&#123;</div><div class="line">  private state: any;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface SelectableControl extends Control &#123;</div><div class="line">  select(): <span class="hljs-keyword">void</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Control</span> </span>&#123;</div><div class="line">  select() &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Classes"><a href="#Classes" class="headerlink" title="Classes"></a>Classes</h3><p>Example:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Greeter</span> </span>&#123;</div><div class="line">  greeting: string;</div><div class="line">  <span class="hljs-keyword">constructor</span> (message: string) &#123;</div><div class="line">    <span class="hljs-keyword">this</span>.greeting = message;</div><div class="line">  &#125;</div><div class="line">  greet() &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello, '</span> + <span class="hljs-keyword">this</span>.greeting;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> greeter = <span class="hljs-keyword">new</span> Greeter(<span class="hljs-string">'world'</span>)</div></pre></td></tr></table></figure>
<h4 id="Class-Inheritance"><a href="#Class-Inheritance" class="headerlink" title="Class Inheritance"></a>Class Inheritance</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;</div><div class="line">  name: string;</div><div class="line">  <span class="hljs-keyword">constructor</span>(theName: string) &#123;</div><div class="line">    <span class="hljs-keyword">this</span>.name = theName</div><div class="line">  &#125;</div><div class="line">  move(distanceInMeters: number = <span class="hljs-number">0</span>) &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-keyword">this</span>.name&#125;</span> moved <span class="hljs-subst">$&#123;distanceInMeters&#125;</span>`</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Snake</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">constructor</span> (name: string) &#123;</div><div class="line">    <span class="hljs-keyword">super</span>(name)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  move(distanceInMeters = <span class="hljs-number">5</span>) &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Slithering...'</span>)</div><div class="line">    <span class="hljs-keyword">super</span>.move(distanceInMeters)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Hores</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Animal</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">constructor</span> (name: string) &#123;</div><div class="line">    <span class="hljs-keyword">super</span>(name)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  move(distanceInMeters = <span class="hljs-number">45</span>) &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Galloping...'</span>)</div><div class="line">    <span class="hljs-keyword">super</span>.move(distanceInMeters)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Public-Private-Protected-Modifiers"><a href="#Public-Private-Protected-Modifiers" class="headerlink" title="Public, Private, Protected Modifiers"></a>Public, Private, Protected Modifiers</h4><blockquote>
<p>Public by default</p>
<p>Private: when a member is marked <code>private</code>, it cannot be accessed from outside of its containing class.</p>
<p>Protected: The protected modifier acts much like the <code>private</code> modifier with exception that members declared <code>protected</code> can also be accessed by instance of deriving classes. Namely the <code>protected</code> property can be used in instance method.</p>
</blockquote>
<h4 id="Readonly-Modifier"><a href="#Readonly-Modifier" class="headerlink" title="Readonly Modifier"></a>Readonly Modifier</h4><blockquote>
<p>Readonly properties must be initialized at their declaration or in the constructor.</p>
</blockquote>
<h4 id="Accessors"><a href="#Accessors" class="headerlink" title="Accessors"></a>Accessors</h4><blockquote>
<p>TypeScript supports getters/setters as a way of intercepting accesses to a member of an object.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Employee</span> </span>&#123;</div><div class="line">  private _fullName: string;</div><div class="line">  get fullName(): string &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._fullName;</div><div class="line">  &#125;</div><div class="line">  set fullName(newName: string) &#123;</div><div class="line">    <span class="hljs-keyword">this</span>._fullName = newName;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Static-Properties"><a href="#Static-Properties" class="headerlink" title="Static Properties"></a>Static Properties</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Grid</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">static</span> origin = &#123;<span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span>&#125;</div><div class="line">  calculateDistanceFromOrigin(point: &#123;<span class="hljs-attr">x</span>: number, <span class="hljs-attr">y</span>: number&#125;) &#123;</div><div class="line">    <span class="hljs-keyword">let</span> xDist = (point.x - Grid.origin.x)</div><div class="line">    <span class="hljs-keyword">let</span> yDist = (point.y - Grid.origin.y)</div><div class="line">    retrun <span class="hljs-built_in">Math</span>.sqrt(xDist * xDist + yDist * yDist) / <span class="hljs-keyword">this</span>.scale</div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">constructor</span> (public scale: number) &#123;</div><div class="line">    <span class="hljs-comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Abstract-Classes"><a href="#Abstract-Classes" class="headerlink" title="Abstract Classes"></a>Abstract Classes</h4><blockquote>
<p>Abstract classes are base classes from which other classes may be derived. They may not be instantiated directly.</p>
<p>Unlike an interface, an abstract class may contain implementation detail for its members. The <code>abstract</code> keyword is used to define abstract classes as well as abstract methods within an abstract class.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Animal</span> </span>&#123;</div><div class="line">  abstract makeSound: <span class="hljs-keyword">void</span>;</div><div class="line">  move(): <span class="hljs-keyword">void</span> &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'roaming the earth...'</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Methods within an abstract class that are marked as abstract do not contain an implementation and must be implemented in derived classes.</p>
<p>Abstract methods share a similar syntax to interface methods. Both define the signature of a method without including a method body.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">abstract <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Department</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">constructor</span> (public name: string) &#123;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  printName (): <span class="hljs-keyword">void</span> &#123;</div><div class="line">  &#125;</div><div class="line">  abstract printMeetng () :<span class="hljs-keyword">void</span> <span class="hljs-comment">// must be implemented in derived classes</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccountDepartment</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Department</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">constructor</span> ()&#123;</div><div class="line">    <span class="hljs-keyword">super</span>(<span class="hljs-string">'Accounting and Auditing'</span>)</div><div class="line">  &#125;</div><div class="line">  printMeetng (): <span class="hljs-keyword">void</span> &#123;</div><div class="line">    <span class="hljs-comment">// ...</span></div><div class="line">  &#125;</div><div class="line">  generateReports () : <span class="hljs-keyword">void</span> &#123;</div><div class="line">    <span class="hljs-comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Advanced-Techniques"><a href="#Advanced-Techniques" class="headerlink" title="Advanced Techniques"></a>Advanced Techniques</h4><h5 id="Constructor-Functions"><a href="#Constructor-Functions" class="headerlink" title="Constructor Functions"></a>Constructor Functions</h5><blockquote>
<p>When you declare a class in TypeScript, you are actually creating multiple declarations at the same time. The first is the type of the <code>instance</code> of the class.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Greeter</span> </span>&#123;</div><div class="line">  greeting: string;</div><div class="line">  <span class="hljs-keyword">constructor</span> (message: string) &#123;</div><div class="line">    <span class="hljs-keyword">this</span>.greeting = message;</div><div class="line">  &#125;</div><div class="line">  greet () &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'Hello, '</span> + <span class="hljs-keyword">this</span>.greeting;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">let</span> greeter: Greeter;</div><div class="line">greeter = <span class="hljs-keyword">new</span> Greeter(<span class="hljs-string">'world'</span>)</div></pre></td></tr></table></figure>
<blockquote>
<p>Here when we say <code>let greeter: Greeter</code>, we’re using <code>Greeter</code> as the type of instance of the class <code>Greeter</code>. Almost we use the class constructor as a type.</p>
</blockquote>
<h5 id="Using-a-class-as-an-interface"><a href="#Using-a-class-as-an-interface" class="headerlink" title="Using a class as an interface"></a>Using a class as an interface</h5><blockquote>
<p>A class declaration creates two things: a type representing instances of the class, and a constructor function.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Point</span> </span>&#123;</div><div class="line">  x: number;</div><div class="line">  y: number;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface Point3d extends Point &#123;</div><div class="line">  <span class="hljs-attr">z</span>: number;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-29T09:37:55.000Z">2017-07-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 153 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/29/Web-App-Manifest/">Web App Manifest</a>
            
        </h1>
        <div class="content">
            <p>The web app manifest provides information about an application(such as <code>name</code>, <code>author</code>, <code>icon</code> and <code>description</code>) in a JSON text file. The purpose of the manifest is to install web application to the homescreen of a device, providing users with quicker access and a richer experience.</p>
<p>Web app manifest are part of a collection of web technologies called <code>progressive web apps</code>, which are web applications that can be installed to the homescreen of a device without needing the user to go through an app store, along with other capabilities such as being available offline and receiving push notification.</p>
<h3 id="Deploying-a-manifest"><a href="#Deploying-a-manifest" class="headerlink" title="Deploying a manifest"></a>Deploying a manifest</h3><p>Web app manifests are deployed in your HTML pages using a <code>link</code> tag in the head of your document.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;link ref=<span class="hljs-string">"manifest"</span> href=<span class="hljs-string">"/manifest.json"</span> /&gt;</div></pre></td></tr></table></figure>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><figure class="highlight json hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"HackerWeb"</span>,</div><div class="line">  <span class="hljs-attr">"short_name"</span>: <span class="hljs-string">"Hacker"</span>,</div><div class="line">  <span class="hljs-attr">"start_url"</span>: <span class="hljs-string">"."</span>,</div><div class="line">  <span class="hljs-attr">"display"</span>: <span class="hljs-string">"standalone"</span>,</div><div class="line">  <span class="hljs-attr">"background_color"</span>: <span class="hljs-string">"#fff"</span>,</div><div class="line">  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"A simple readable Hacker New app."</span>,</div><div class="line">  <span class="hljs-attr">"icons"</span>: [&#123;</div><div class="line">    <span class="hljs-attr">"src"</span>: <span class="hljs-string">"images/touch/homescreen48.png"</span>,</div><div class="line">    <span class="hljs-attr">"sizes"</span>: <span class="hljs-string">"72x72"</span>,</div><div class="line">    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"image/png"</span></div><div class="line">  &#125;]</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-29T06:40:58.000Z">2017-07-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 304 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/29/Cache-Object/">Cache Object</a>
            
        </h1>
        <div class="content">
            <p>The Cache interface provides a storage mechanism for <code>Request</code> / <code>Response</code> object pairs that are cahced, for example as part of the <code>ServiceWorker</code> lifecycle. Note that the Cache Interface is exposed to windowed scopes as well as workers. You don’t have to use it in conjunction with service workers, even though it is defined in the service worker spec.</p>
<p>An orgin can have <code>multiple Cache Objects</code>. You are responsible for implementing how your script handles <code>Cache Update</code>. Items in a Cache do not get updated unless explictly requested – they don’t expires unless deleted.</p>
<p>Use <code>CacheStorage.open(cacheName)</code> to open a specific named cache object and then call any of the cache methods to maintain the cache.</p>
<blockquote>
<p>The caching API doesn’t honor HTTP caching headers.</p>
</blockquote>
<h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><ul>
<li><p>Cache.match(request, options)</p>
<p>Returns a <code>Promise</code> that resolves to the response associated with the first matching request in the Cache Object.</p>
</li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">cache.match(request).then(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">if</span> (response) &#123;</div><div class="line">    <span class="hljs-comment">// ...</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li><p>Cache.matchAll(request, options)</p>
<p>Returns a <code>Promise</code> that resolves to an array of all matching requests in the Cache Object.</p>
</li>
<li><p>Cache.add(request)</p>
<p>Takes a URL, retrieves it and adds the resulting response object to the given cache. This is functionally equivalent to calling <code>fetch()</code>, then using <code>Cache.put()</code> to add the results to the cache.</p>
</li>
<li><p>Cache.addAll(requests)</p>
<p>Takes an array of URLs, retrieves them, and adds the resulting response objects to the given cache.</p>
</li>
<li><p>Cache.put(request, response)</p>
<p>Takes both a request and its response and adds it to the given cache. // namely cache the Request/Response pair.</p>
</li>
<li><p>Cache.delete(request, options)</p>
<p>Finds the Cache entry whose key is the request, and if found, deletes the Cache entry and returns a <code>Promsie</code> that resolves to <code>true</code>. Otherwise resolve to <code>false</code>.</p>
</li>
<li><p>Cache.keys(request, options)</p>
<p>Returns a <code>Promise</code> that resolves to an array of <code>Cache Key</code>.</p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-25T08:54:00.000Z">2017-07-25</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 557 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/25/Some-Concepts-on-BlockChain/">Some Concepts on BlockChain</a>
            
        </h1>
        <div class="content">
            <h2 id="Getting-BlockChain-Data"><a href="#Getting-BlockChain-Data" class="headerlink" title="Getting BlockChain Data:"></a>Getting BlockChain Data:</h2><ul>
<li><p>Blocks;</p>
</li>
<li><p>Transactions;</p>
</li>
<li><p>Sending Transactions;</p>
</li>
</ul>
<h2 id="Cryptocurrency-Functions"><a href="#Cryptocurrency-Functions" class="headerlink" title="Cryptocurrency Functions:"></a>Cryptocurrency Functions:</h2><ul>
<li><p>Generating Private/Public keys, Hashing, Address Encoding etc;</p>
</li>
<li><p>Creating transactions;</p>
</li>
<li><p>Signing transactions;</p>
</li>
<li><p>Support functions;</p>
</li>
</ul>
<h2 id="Build-A-Block"><a href="#Build-A-Block" class="headerlink" title="Build A Block"></a>Build A Block</h2><ul>
<li><p>Receive the transaction broadcase;</p>
</li>
<li><p>Verify the crypto in the transaction;</p>
</li>
<li><p>Add it to the unconfirmed Pool;</p>
</li>
<li><p>Do some hard maths on all the transactions in the pool;</p>
</li>
<li><p>Broadcast the Block to the network;</p>
</li>
<li><p>The Block is added to the blockchain;</p>
</li>
</ul>
<h2 id="Blockchains-as-Distributed-Database"><a href="#Blockchains-as-Distributed-Database" class="headerlink" title="Blockchains as Distributed Database"></a>Blockchains as Distributed Database</h2><ul>
<li><p>Everyone running the Bitcoin client is part of the network;</p>
</li>
<li><p>New blocks are boradcast to the network;</p>
</li>
<li><p>Everyone updates their local copy of the blockchain;</p>
</li>
<li><p>If you’re behind the current height of the chain, you can ask other nodes for copies of the Blocks needed to catch-up;</p>
</li>
</ul>
<h2 id="Implications"><a href="#Implications" class="headerlink" title="Implications:"></a>Implications:</h2><ul>
<li><p>Tranactions take time to ‘confirm’;</p>
</li>
<li><p>Each transaction, once it’s in an accepted block has a height;</p>
</li>
<li><p>Each increase in blockchain height is called a confirmation;</p>
</li>
<li><p>A transaction 5 blocks below the top of the chain is said to have ‘6 confirmations’;</p>
</li>
<li><p>The merchant cant decide how many confirmations is sensible to warit for;</p>
</li>
<li><p>Current default is it wait for 6 confirmations for anything of value;</p>
</li>
<li><p>Blocks store data, in Bitcoin, it’s the transactions, but it could be any digital data;</p>
</li>
<li><p>Blocks are created periodically(on average, 10mins for Bitcoin) by a process called ‘mining’;</p>
</li>
<li><p>A block represents a set of events that have occurred over a particular time frame(ususally, since the previous block);</p>
</li>
<li><p>Block aren’t identified by their height, but by their id; (may be multiple blocks at same height)</p>
</li>
<li><p>Block id is the hash of the metadata in the block;</p>
</li>
<li><p>Block id is a digial fingerprint of that block;</p>
</li>
<li><p>Some metadata:</p>
<ul>
<li><p>A version number of the block format;</p>
</li>
<li><p>A link to the previous block that came immediately before it;</p>
</li>
<li><p>Merkle root of all the transactions in the block;</p>
</li>
<li><p>Timestamp of when the block was created;</p>
</li>
<li><p>Mining difficulty;</p>
</li>
<li><p>Nonce for Proof-of-Work;</p>
</li>
</ul>
</li>
<li><p>All the transactions that were recorded in this block;</p>
</li>
<li><p>All the transactions in the block are used to create the Merkle Root Hash;</p>
</li>
<li><p>It’s added to the other metadata in the header, with a nonce;</p>
</li>
<li><p>We hash the whole thing, look at the resulting hash, if it starts with a required number of leading ‘0’(which means the hash need to be small enough), we’ve solved the block and broadcast it;</p>
</li>
<li><p>If not, we increment the nonce and try again;</p>
</li>
<li><p>Repeat until we find the leading zero;</p>
</li>
<li><p>Difficulty defines how many leading zeros when solveing the block;</p>
</li>
<li><p>The more zeros we need to find, the more attemps at hashing we need.</p>
</li>
<li><p>More hashing power becomes the driving force amongst miners;</p>
</li>
<li><p>Miner insert a special transaction at the beginning of block called ‘coinbase’ transaction. This ‘pays’ the miner for the work they did, and collects the transaction fees from all the transactions;</p>
</li>
</ul>
<h2 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h2><ul>
<li><p>Transactions tranfer control of coins from inputs to outputs;</p>
</li>
<li><p>Control is enforced by cryptography;</p>
</li>
</ul>
<h2 id="Construct-A-Transaction"><a href="#Construct-A-Transaction" class="headerlink" title="Construct A Transaction"></a>Construct A Transaction</h2><ul>
<li><p>You need the address of the person you’re going to pay;</p>
</li>
<li><p>Find UTXO’s Unspent Transaction Outputs that exceed the amount you wish to pay;</p>
</li>
<li><p>Calculate the transaction fee(optional but recommended);</p>
</li>
<li><p>Create the outputs with the correct scriptPubKey; scriptPubKey defines who can spend the coin by specifying a small verification program that is run in order to perform that verification.</p>
</li>
<li><p>Sign the transaction details;</p>
</li>
<li><p>Broadcast the transaction, see if it works;</p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-22T10:34:31.000Z">2017-07-22</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 557 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/22/Some-Note-on-Blockchain/">Some Note on Blockchain</a>
            
        </h1>
        <div class="content">
            <h2 id="Getting-BlockChain-Data"><a href="#Getting-BlockChain-Data" class="headerlink" title="Getting BlockChain Data:"></a>Getting BlockChain Data:</h2><ul>
<li><p>Blocks;</p>
</li>
<li><p>Transactions;</p>
</li>
<li><p>Sending Transactions;</p>
</li>
</ul>
<h2 id="Cryptocurrency-Functions"><a href="#Cryptocurrency-Functions" class="headerlink" title="Cryptocurrency Functions:"></a>Cryptocurrency Functions:</h2><ul>
<li><p>Generating Private/Public keys, Hashing, Address Encoding etc;</p>
</li>
<li><p>Creating transactions;</p>
</li>
<li><p>Signing transactions;</p>
</li>
<li><p>Support functions;</p>
</li>
</ul>
<h2 id="Build-A-Block"><a href="#Build-A-Block" class="headerlink" title="Build A Block"></a>Build A Block</h2><ul>
<li><p>Receive the transaction broadcase;</p>
</li>
<li><p>Verify the crypto in the transaction;</p>
</li>
<li><p>Add it to the unconfirmed Pool;</p>
</li>
<li><p>Do some hard maths on all the transactions in the pool;</p>
</li>
<li><p>Broadcast the Block to the network;</p>
</li>
<li><p>The Block is added to the blockchain;</p>
</li>
</ul>
<h2 id="Blockchains-as-Distributed-Database"><a href="#Blockchains-as-Distributed-Database" class="headerlink" title="Blockchains as Distributed Database"></a>Blockchains as Distributed Database</h2><ul>
<li><p>Everyone running the Bitcoin client is part of the network;</p>
</li>
<li><p>New blocks are boradcast to the network;</p>
</li>
<li><p>Everyone updates their local copy of the blockchain;</p>
</li>
<li><p>If you’re behind the current height of the chain, you can ask other nodes for copies of the Blocks needed to catch-up;</p>
</li>
</ul>
<h2 id="Implications"><a href="#Implications" class="headerlink" title="Implications:"></a>Implications:</h2><ul>
<li><p>Tranactions take time to ‘confirm’;</p>
</li>
<li><p>Each transaction, once it’s in an accepted block has a height;</p>
</li>
<li><p>Each increase in blockchain height is called a confirmation;</p>
</li>
<li><p>A transaction 5 blocks below the top of the chain is said to have ‘6 confirmations’;</p>
</li>
<li><p>The merchant cant decide how many confirmations is sensible to warit for;</p>
</li>
<li><p>Current default is it wait for 6 confirmations for anything of value;</p>
</li>
<li><p>Blocks store data, in Bitcoin, it’s the transactions, but it could be any digital data;</p>
</li>
<li><p>Blocks are created periodically(on average, 10mins for Bitcoin) by a process called ‘mining’;</p>
</li>
<li><p>A block represents a set of events that have occurred over a particular time frame(ususally, since the previous block);</p>
</li>
<li><p>Block aren’t identified by their height, but by their id; (may be multiple blocks at same height)</p>
</li>
<li><p>Block id is the hash of the metadata in the block;</p>
</li>
<li><p>Block id is a digial fingerprint of that block;</p>
</li>
<li><p>Some metadata:</p>
<ul>
<li><p>A version number of the block format;</p>
</li>
<li><p>A link to the previous block that came immediately before it;</p>
</li>
<li><p>Merkle root of all the transactions in the block;</p>
</li>
<li><p>Timestamp of when the block was created;</p>
</li>
<li><p>Mining difficulty;</p>
</li>
<li><p>Nonce for Proof-of-Work;</p>
</li>
</ul>
</li>
<li><p>All the transactions that were recorded in this block;</p>
</li>
<li><p>All the transactions in the block are used to create the Merkle Root Hash;</p>
</li>
<li><p>It’s added to the other metadata in the header, with a nonce;</p>
</li>
<li><p>We hash the whole thing, look at the resulting hash, if it starts with a required number of leading ‘0’(which means the hash need to be small enough), we’ve solved the block and broadcast it;</p>
</li>
<li><p>If not, we increment the nonce and try again;</p>
</li>
<li><p>Repeat until we find the leading zero;</p>
</li>
<li><p>Difficulty defines how many leading zeros when solveing the block;</p>
</li>
<li><p>The more zeros we need to find, the more attemps at hashing we need.</p>
</li>
<li><p>More hashing power becomes the driving force amongst miners;</p>
</li>
<li><p>Miner insert a special transaction at the beginning of block called ‘coinbase’ transaction. This ‘pays’ the miner for the work they did, and collects the transaction fees from all the transactions;</p>
</li>
</ul>
<h2 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h2><ul>
<li><p>Transactions tranfer control of coins from inputs to outputs;</p>
</li>
<li><p>Control is enforced by cryptography;</p>
</li>
</ul>
<h2 id="Construct-A-Transaction"><a href="#Construct-A-Transaction" class="headerlink" title="Construct A Transaction"></a>Construct A Transaction</h2><ul>
<li><p>You need the address of the person you’re going to pay;</p>
</li>
<li><p>Find UTXO’s Unspent Transaction Outputs that exceed the amount you wish to pay;</p>
</li>
<li><p>Calculate the transaction fee(optional but recommended);</p>
</li>
<li><p>Create the outputs with the correct scriptPubKey; scriptPubKey defines who can spend the coin by specifying a small verification program that is run in order to perform that verification.</p>
</li>
<li><p>Sign the transaction details;</p>
</li>
<li><p>Broadcast the transaction, see if it works;</p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-19T02:34:56.000Z">2017-07-19</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 271 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/19/Five-Models-in-Smart-Contract/">Five Models in Smart Contract</a>
            
        </h1>
        <div class="content">
            <h1 id="Database-Contracts"><a href="#Database-Contracts" class="headerlink" title="Database Contracts"></a>Database Contracts</h1><p>These are used only as data storage. The only logic they need is functions that allow other contracts to write, update and get data, and some simple way of checking caller permissions.</p>
<h1 id="Controller-Contracts"><a href="#Controller-Contracts" class="headerlink" title="Controller Contracts"></a>Controller Contracts</h1><p>These contracts operate on the storage contracts. In a flexible system, both controllers and databases can be replaced by other, similar contracts that share the same public api(although this is not always needed).) Controllers can be advanced, and could for example do batched reads/writes, or read from and write to multiple databases instead of just one.</p>
<h1 id="Contract-Managine-Contracts-CMCs"><a href="#Contract-Managine-Contracts-CMCs" class="headerlink" title="Contract Managine Contracts (CMCs)"></a>Contract Managine Contracts (CMCs)</h1><p>The purpose of these contracts is only to manage other contracts. Their main tasks is to keep track of all the contracts/components of the system, handle the communication between thses components, and to make modular design easier. Keeping this functionality separate from normal business logic should be considered good practice, and has a number of positive effects on the system.</p>
<h1 id="Application-Logic-Contracts-ALCs"><a href="#Application-Logic-Contracts-ALCs" class="headerlink" title="Application Logic Contracts (ALCs)"></a>Application Logic Contracts (ALCs)</h1><p>Application logic contracts contains application-specific code. Generally speaking, if the contract utilizes controllers and other contracts to perform application specific tasks it’s an ALC.</p>
<h1 id="Utility-Contracts"><a href="#Utility-Contracts" class="headerlink" title="Utility Contracts"></a>Utility Contracts</h1><p>These type of contracts usually perform a specific task, and can be called by other contracts without restrictions. It could be a contract that hashes strings using some algorithm, provide random numbers or other things. They normally don’t need a log of storage, often have few or no dependencies.</p>
<p>The rationale for this division will be laid out after we’ve tried to apply it to the fund manager system, as it will be a lot more clear then.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-14T02:32:30.000Z">2017-07-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 949 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/14/Tutorial-Part-4-of-Parity/">Tutorial Part 4 of Dapp</a>
            
        </h1>
        <div class="content">
            <h1 id="Calling-Contracts"><a href="#Calling-Contracts" class="headerlink" title="Calling Contracts"></a>Calling Contracts</h1><p>Contract API basically comes in three pieces.</p>
<ul>
<li><p>Firstly, there’s state-changing transaction like tranferring tokens to a counter-party.</p>
</li>
<li><p>Secondly, there’s event reception and reporting that happen when such a state change occurs.</p>
</li>
<li><p>Finally, there is inspection of the contract state through calling <code>constant</code> function.</p>
</li>
</ul>
<h2 id="Our-first-contract"><a href="#Our-first-contract" class="headerlink" title="Our first contract"></a>Our first contract</h2><p>The first contract we will deal with is the global(name) registry. If you are not yet familiar, this is a registry that exists on all sensible blockchain which records fields of information for any desired name.</p>
<p>The registry records onwership information so that names can be registered and their information changed at a later date.</p>
<p>The registry contract has a fairly simple API for inspecting. We only need to worry about two functions:</p>
<ul>
<li><p><code>getOwner(bytes32) -&gt; address</code>, given the Keccak hash of name, this returns the address of its owner, if it has been reserved.</p>
</li>
<li><p><code>getData(bytes32, bytes32) -&gt; bytes32</code>, given the Keccak hash of a name and a second field key, this returns the associated data.</p>
</li>
</ul>
<p>There are subordinate functions to the latter such as <code>getAddress</code> and <code>getUint</code> which coerce the data into some other type. It is important to note that amongst the standardised field keys are:</p>
<ul>
<li><p><code>A</code> the <code>address</code> primarily associated with the name; if you’re wanting to send funds to the name, this is where to send them(assuming it’s not null)</p>
</li>
<li><p><code>CONTENT</code> the <code>bytes32</code> which equals the Keccak hash of any content associated with this name. e.g. If the name represents a dapp, then this would be the hash of the dapp’s content.</p>
</li>
<li><p><code>IMG</code> the <code>bytes32</code> which equals the Keccak hash of an associated image; this might be a person’s avatar or the dapp icon, depending on what is being named.</p>
</li>
</ul>
<p>Let’s begin by displaying the address associated with the name <code>gavofyork</code>. To do this we will need to create a special <code>Bond</code>-API contract object. The function to do this is <code>bonds.makeContract</code>; It takes the address and the ABI of the contract and returns an object with <code>Bond</code> – returning functions for each of the contract’s functions.</p>
<p>The address is easy enough to find; this can be determined via the <code>parity.api.parity.registry</code> call. The ABI spec is rather long and can be derived from the contract code available at the ethcode/contracts repository. Since there is only a single canonical registry, Parity, conveniently constructs this for you and provides it at the <code>bonds.registry</code> object.</p>
<p>To figure out the primary associated address of the <code>gavofyork</code> name, we can use the <code>getAddress</code> call, together with the <code>parity.api.util.sha3</code> call to take the Keccak hash of our name. The full expression would be:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bonds.registry.getAddress(parity.api.util.sha3(<span class="hljs-string">'gavofyork'</span>))</div></pre></td></tr></table></figure>
<p>Typing <code>parity.api.util.sha3(...)</code> every time you want to look up a name in the registry gets tedious fast. Happily, Parity provides a number of derivative helper functions as part of the <code>bonds&#39;registry</code> object: <code>lookupDate</code>, <code>lookupAddress</code>, <code>lookupUint</code> and <code>lookupOwner</code>. They are all just like the <code>get-</code> prefixed brethren, but do the hashing for you. Our expression therefore can become:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bonds.registry.lookupAddress(<span class="hljs-string">'gavofyork'</span>, <span class="hljs-string">'A'</span>)</div></pre></td></tr></table></figure>
<p>Let’s get this in to our dapp, Change the <code>render()</code>ed HTML to:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  gavofyorks address is:</div><div class="line">  <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span>&#123;bonds.registry.lookupAddress('gavofyork', 'A')&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></span></div><div class="line">&lt;<span class="hljs-regexp">/div&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Dynamic-lookups"><a href="#Dynamic-lookups" class="headerlink" title="Dynamic lookups"></a>Dynamic lookups</h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">constructor</span> () &#123;</div><div class="line">    <span class="hljs-keyword">super</span>()</div><div class="line">    <span class="hljs-keyword">this</span>.bond = <span class="hljs-keyword">new</span> Bond()</div><div class="line">  &#125;</div><div class="line">  render () &#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">        Address of <span class="hljs-tag">&lt;<span class="hljs-name">InputBond</span> <span class="hljs-attr">bond</span>=<span class="hljs-string">&#123;this.bond&#125;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Lookup a name"</span> /&gt;</span> is:<span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span></div><div class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span>&#123;bonds.registry.lookupAddress(this.bond, 'A')&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></div><div class="line">        Its balance is</div><div class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span></div><div class="line">          &#123;bonds.balance(bonds.registry.lookupAddress(this.bond, 'A')).map(formatBalance)&#125;</div><div class="line">        <span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></div><div class="line">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Derivative-contracts"><a href="#Derivative-contracts" class="headerlink" title="Derivative contracts"></a>Derivative contracts</h2><p>Typically the registry is used to lookup the address of a second contract that you would actucally like to use.</p>
<p>Let’s suppose that second contract is the GithubHint contract; if you’re not already familiar, the GithubHint contract allows you to suggest which URLs might serve content for a particular hash.It’s a semi-centralized, hacky alternative to content-addressable-delivery systems like BitTorrent/Kademlia, Swarm and IPFS. We use it widely in Parity as a means of content dissemination.</p>
<p>Since is a ‘standard’ contract in Parity, the ABI for it is available in <code>oo7-parity</code> as <code>GitHubHintABI</code>. The address changes per chain, but can be discovered via the registry under the name ‘githubhint’. The expression would therefore be <code>bonds.registry.lookupAddress(&#39;githubhint&#39;, &#39;A&#39;)</code>.</p>
<p>Though we mustn’t forget to import <code>GitHubHint</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; GitHubHintABI &#125; form <span class="hljs-string">'oo7-parity'</span></div></pre></td></tr></table></figure>
<p>The GithubHint contract has only a single inspection method: <code>entries</code>. This takes a <code>bytes32</code> and returns three items(via an array). There are three kinds of entry: Github repository entries, whereby the first and second items form the addresss of a particular commit of a particular repository; general URLs, where the first item is a URL and the second is the null hash; and empty entries where both items are null. The third item is always the owner (if any) of the entry and the only account capable of changing the hint information.</p>
<p>In this small demo, we’ll assume that we are looking up only URLs and so are only interested in the first item. We therefore want an expression like:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">GitHubHint.entries(hash)[<span class="hljs-number">0</span>]</div></pre></td></tr></table></figure>
<p>Where <code>hash</code> is some content hash and <code>GitHubHint</code> is the contract object.</p>
<p>Putting this all together we can change our dapp to:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">constructor</span> () &#123;</div><div class="line">    <span class="hljs-keyword">super</span>()</div><div class="line">    <span class="hljs-keyword">this</span>.bond = <span class="hljs-keyword">new</span> Bond()</div><div class="line">    <span class="hljs-keyword">this</span>.GitHubHint = bonds.makeContract(bonds.registry.lookupAddress(<span class="hljs-string">'githubhint'</span>, <span class="hljs-string">'A'</span>), GitHubHintABI)</div><div class="line">  &#125;</div><div class="line">  render () &#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">        URL for content <span class="hljs-tag">&lt;<span class="hljs-name">HashBond</span> <span class="hljs-attr">bond</span>=<span class="hljs-string">&#123;this.bond&#125;</span> <span class="hljs-attr">floatingLabelText</span>=<span class="hljs-string">"Content-Hash"</span> /&gt;</span> is:</div><div class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span>&#123;this.GithubHint.entries(this.bond)[0]&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></div><div class="line">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Note that we are using <code>HashBond</code> from <code>oo7-react</code> rather than <code>InputBond</code>. This just ensures that we enter only valid 32-byte hashes. Ensure that the import line is changed to:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; InputBond, HashBond &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'parity-reactive-ui'</span></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-13T14:54:24.000Z">2017-07-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 591 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/13/Tutorial-Part-3-of-Dapp/">Tutorial Part 3 of Dapp</a>
            
        </h1>
        <div class="content">
            <h1 id="Parity-Bonds"><a href="#Parity-Bonds" class="headerlink" title="Parity Bonds"></a>Parity Bonds</h1><p>It’s time to get down and dirty with the blockchain.</p>
<p>For this we will introduce the <code>oo7-parity</code> package, which provides a high-level reactive <code>Bond</code> API.</p>
<p>To set this up, all we need do is import <code>bonds</code> from the <code>oo7-parity</code> module, so ensure you have this at the top of your file:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; bonds &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'oo7-parity'</span></div></pre></td></tr></table></figure>
<h2 id="Watch-the-block"><a href="#Watch-the-block" class="headerlink" title="Watch the block"></a>Watch the block</h2><p>For our first task, we will introduce the simplest of all bonds: <code>bonds.height</code>. This evaluates to <code>the number of the latest block</code>, expressed as a simple number.</p>
<p>In <code>app.jsx</code>:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  render () &#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span>&#123;bonds.height&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It’s not especially pretty so you can add some style on it.</p>
<p>We also provide the <code>formatBlockNumber</code> function:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> formatBlockNumber = <span class="hljs-function">(<span class="hljs-params">n</span>) =&gt;</span> <span class="hljs-string">'#'</span> + (<span class="hljs-string">''</span> + n).replace(<span class="hljs-regexp">/(\d)(?=(\d&#123;3&#125;)+$)/g</span>, <span class="hljs-string">'$1,'</span>)</div></pre></td></tr></table></figure>
<p>You can use it through</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; bonds, formatBlockNumber &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'oo7-parity'</span></div></pre></td></tr></table></figure>
<h2 id="Blocks"><a href="#Blocks" class="headerlink" title="Blocks"></a>Blocks</h2><p>The block number is great and all, but perhaps we’re more intereseted in the latest block itself. Parity can help us there with the <code>bonds.blocks</code> object. This is a lazy-evaluated ‘array’ of bonds which can subscribe to. To give yourself an idea of its capabilities, let’s try it out in the console. First we will expose the <code>bonds</code> object to the environment by adding this at the end of our obejct’s constructor:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-built_in">window</span>.bonds = bonds</div></pre></td></tr></table></figure>
<p>Having reloaded, quickly open the Chrome JS console, alter the environment to 127.0.0.1 and evaluate the block at number 69 with <code>bonds.blocks[69].log()</code></p>
<p>Note that since it’s all asynchronous, we must use the <code>.log()</code> trick to feed the result into the console (it’s exactly equivalent to <code>.map(console.log)</code>) The result is, of course, the block object representing the 69th mined block on this chain.</p>
<p>Naturally, <code>bonds.blocks</code> is able to accept any number, even a bond, as its subscript. Let’s make our dapp always give us the timestamp of the latest block.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  Latest block timestamp is:</div><div class="line">  <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span>&#123;bonds.blocks[bonds.blocks.height].map(b =&gt; b.timestamp).map(_ =&gt; _.toString())&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></span></div><div class="line">&lt;<span class="hljs-regexp">/div&gt;</span></div></pre></td></tr></table></figure>
<p>That map is a bit cumbersome, the <code>bond</code> API knows about subscripting, which means the <code>.timestamp</code> can be moved out of the <code>map</code></p>
<p>Furthermore, <code>bonds.blocks[bonds.height]</code> is a fairly common expression. So much so that it has a shorter alias: <code>bonds.head</code>, so in fact the simplest means of expressing this becomes:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123; bonds.head.timestamp.map(<span class="hljs-function"><span class="hljs-params">_</span> =&gt;</span> _.toString())&#125;</div></pre></td></tr></table></figure>
<h2 id="Composing-expressions"><a href="#Composing-expressions" class="headerlink" title="Composing expressions"></a>Composing expressions</h2><p>These expressios are sometimes very useful, but often you want to do some blockchain based computation on this information.</p>
<p>Parity puts various means at your disposal to help you here:</p>
<ul>
<li><p><code>bonds.balance(address)</code>: evaluates to the current balanece of account at <code>address</code></p>
</li>
<li><p><code>bonds.transactionCount(address)</code>: evaluates to the current transaction count (‘nonce’) of account at <code>address</code></p>
</li>
<li><p><code>bonds.code(address)</code>: evaluates to the current ‘contract’ code of account at <code>address</code></p>
</li>
<li><p><code>bonds.storageAt(address, location)</code>: evaluates to the value in storage <code>location</code> of account at <code>address</code></p>
</li>
</ul>
<p>Use the first one:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  Current block authors balance is:</div><div class="line">  <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span></span></div><div class="line">    &#123;bonds.balance(bonds.head.author).map(formatBalance)&#125;</div><div class="line">  <span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></div><div class="line">&lt;<span class="hljs-regexp">/div&gt;</span></div></pre></td></tr></table></figure>
<h2 id="Our-balance"><a href="#Our-balance" class="headerlink" title="Our balance"></a>Our balance</h2><p>Parity can help us get information about our own accounts in a reactive manner.</p>
<p>Some apis like:</p>
<ul>
<li><p><code>bonds.coinbase</code>: evaluates to the node’s current block authoring address.</p>
</li>
<li><p><code>bonds.accounts</code>: evaluates to the list of accounts available for the dapp to use.</p>
</li>
<li><p><code>bonds.me</code>: evaluates to the preferred account for this dapp to use. In parity, this is the account visible in the Parity Signer at the bottom right of the page.</p>
</li>
<li><p><code>bonds.accountsInfo</code>: evaluates to the mapping between dapp-visible addresses and account metadata.</p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-13T08:21:12.000Z">2017-07-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 485 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/13/Tutorial-Part2-of-Dapp/">Tutorial Part 2 of Dapp</a>
            
        </h1>
        <div class="content">
            <h1 id="oo7-Bonds"><a href="#oo7-Bonds" class="headerlink" title="oo7 Bonds"></a>oo7 Bonds</h1><p>Now we have our basic dapp harness, we can start introducing more interesting functionality. Without too much ado, let’s get started. Head in to <code>src/client/scripts/app.jsx</code>. You will see our basic file:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  render () &#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This is a JSX file. Baiscally means that can handle embedded HTML when describing how React components should be rendered.</p>
<h2 id="Your-first-Bond"><a href="#Your-first-Bond" class="headerlink" title="Your first Bond"></a>Your first <code>Bond</code></h2><p>The first thing we’ll do is introduce the <code>oo7 library</code>. This introduces into Javascript the notion of reactive value known as ‘bonds’. Reactive values are similar to normal variables, except that any places in which they are used will automatically upate themselves as the value changes.</p>
<p>The oo7 package is still very much in development, as such there might be one or two rough edges in this tutorial.</p>
<p>Our first example will just demonstrate how <code>Bond</code> can introduce effortless reactivity by dynamically replicating the contents of an editable text field into a <code>&lt;span&gt;</code>.</p>
<p>Import the needed components by placing three lines at the top of <code>app.jsx</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; Bond &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'oo7'</span></div><div class="line"><span class="hljs-keyword">import</span> &#123; Rspan &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'oo7-react'</span></div><div class="line"><span class="hljs-keyword">import</span> &#123; InputBond &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'parity-reactive-ui'</span></div></pre></td></tr></table></figure>
<p>Next we need to introduce a new instance of a <code>Bond</code>. It will represent the current contents of a text field. We will initialize it in our class’s contructor. Insert these lines directly into the <code>App</code> class decalration.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">constructor</span> () &#123;</div><div class="line">  <span class="hljs-keyword">super</span> ()</div><div class="line">  <span class="hljs-keyword">this</span>.bond = <span class="hljs-keyword">new</span> Bond()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Your code should now look like this:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></div><div class="line"><span class="hljs-keyword">import</span> &#123; Bond &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'oo7'</span></div><div class="line"><span class="hljs-keyword">import</span> &#123; Rspan &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'oo7-react'</span></div><div class="line"><span class="hljs-keyword">import</span> &#123; InputBond &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'parity-reactive-ui'</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  <span class="hljs-keyword">constructor</span> () &#123;</div><div class="line">    <span class="hljs-keyword">super</span> ()</div><div class="line">    <span class="hljs-keyword">this</span>.bond = <span class="hljs-keyword">new</span> Bond()</div><div class="line">  &#125;</div><div class="line">  render () &#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Next we need to create the text entry field and the <code>&lt;span&gt;</code> element(in which the text field’s contents will be reflected). We will use a version of Semantic UI’s <code>Input</code> element which has been specially modified to propagate the value into a named <code>Bond</code>. This is called <code>InputBond</code>.</p>
<p>Similarly, for the <code>span</code> we will use a special ‘reactive’ version of the <code>span</code> element which is able to accept <code>Bond</code>s as children and values of certain properties. This is known as <code>Rspan</code>.</p>
<p>Change the <code>&lt;div&gt;Hello World&lt;/div&gt;</code> line to:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;div&gt;</div><div class="line">  <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">InputBond</span> <span class="hljs-attr">bond</span>=<span class="hljs-string">&#123;this.bond&#125;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Go ahead and type some text"</span> /&gt;</span></span></div><div class="line">  <span class="hljs-tag">&lt;<span class="hljs-name">Rspan</span>&gt;</span>&#123;this.bond&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Rspan</span>&gt;</span></div><div class="line"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>As you see there’s not all that much here, we just tell the text field input <code>InputBond</code> to place its value into <code>this.bond</code> and conversely tell <code>Rspan</code> to display that value from <code>this.bond</code>.</p>
<p>Run webpack and let it watch your files to ensure your dapp is continuously rebuilt.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm start</div></pre></td></tr></table></figure>
<h2 id="Transforming-Bonds"><a href="#Transforming-Bonds" class="headerlink" title="Transforming Bonds"></a>Transforming Bonds</h2><p><code>Bond</code>s don’t just have to pass on data; they can also represent transformations on the data.</p>
<p>One example of a transform on text would be simple upper-casing. A function to upper-case text would be <code>text =&gt; text.toUpperCase()</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Rspan&gt;&#123;<span class="hljs-keyword">this</span>.bond.map(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.toUpperCase())&#125;&lt;<span class="hljs-regexp">/Rspan&gt;</span></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-13T07:11:48.000Z">2017-07-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 492 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/13/Tutorial-Par1-of-Dapp/">Tutorial Part 1 of Dapp</a>
            
        </h1>
        <div class="content">
            <h1 id="Spawning-a-new-Dapp"><a href="#Spawning-a-new-Dapp" class="headerlink" title="Spawning a new Dapp"></a>Spawning a new Dapp</h1><p>The dapp will use modern JS technologies: NPM, Webpack2, React, Babel, ES6, JSX and oo7.</p>
<p>Clone a <code>skeleton</code> repo from parity:</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="hljs-built_in">clone</span> https://github.com/paritytech/skeleton mydapp</div></pre></td></tr></table></figure>
<p>This will make your a new repo with everything ready.</p>
<p><code>cd</code> in to it and remove the origin repository lest it confuse Git.</p>
<p>It’s liberally licensed (Apache 2.0) so you don’t have to worry about open sourcing your own code(though obviously you’ll be enlightened and want to do that anyway.)</p>
<p>The next stage is to get all dependencies installed, NPM makes this rather easy, but the bundled script makes it even easier</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./init.sh</div></pre></td></tr></table></figure>
<p>This should grab and install all that is required. The next thing to do is to build the final web-ready version of the fledling dapp. We use webpack for this.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack</div></pre></td></tr></table></figure>
<p>You now have a basic dapp built.</p>
<h1 id="Configuring-its-look"><a href="#Configuring-its-look" class="headerlink" title="Configuring its look"></a>Configuring its look</h1><p>While your dapp may well be built, it is not yet easily discoverable. You would have to host it somewhere. This can be done traditionally with a web server but for development, we will use Parity’s in-built hosting.</p>
<p>Parity uses a special ‘manifest’ file called to figure out how to display the entry for your dapp in Parity Wallet. This file is called <code>manifest.json</code> and must be placed in the root of your dapp’s directory, in our case, thi sis our ‘build’ directory, <code>dist</code>.</p>
<p>Open an editor to edit <code>dist/manifest.json</code> you’ll see something like:</p>
<figure class="highlight json hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"skeleton"</span>,</div><div class="line">  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Skeleton"</span>,</div><div class="line">  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"A skeleton dapp"</span>,</div><div class="line">  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.1"</span>,</div><div class="line">  <span class="hljs-attr">"author"</span>: <span class="hljs-string">"parity Technologies Ltd"</span>,</div><div class="line">  <span class="hljs-attr">"iconUrl"</span>: <span class="hljs-string">"title.png"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>The <code>id</code> is the dapp’s unique identity: change that from <code>skeleton</code> to <code>mydapp</code></p>
</li>
<li><p>The <code>name</code> is the dapp’s user-visible name: change that to <code>My Dapp</code></p>
</li>
<li><p>The <code>description</code> is a user-visible by-line describing what the dapp is good for.</p>
</li>
<li><p><code>version</code> is the dapp’s version - you can leave that at <code>0.1</code> for now.</p>
</li>
<li><p>You can change the <code>author</code> to your name.</p>
</li>
<li><p>The <code>iconUrl</code> is the path(within <code>dist</code>) to a square(best to make it 128 x 128) icon for your dapp.</p>
</li>
</ul>
<h1 id="Getting-it-visible-in-Parity"><a href="#Getting-it-visible-in-Parity" class="headerlink" title="Getting it visible in Parity"></a>Getting it visible in Parity</h1><p>To get Parity to discover your dapp, it needs to be placed into a place that Parity will see it in its local ‘dapps’ directory. We will make a symbolic linke for our dapp’s <code>dist</code> directory(containing all of the ready-built dapp) in Parity’s dapp directory.</p>
<p>Parity’s directory structure is different depending on your system.</p>
<p>For Mac, Parity’s local dapp directory sits at <code>$HOME/Library/Application Support/io.parity.ethereum/dapps</code></p>
<p>Once you have it linked, you should start(or restart, if already running) Parity and head to the Application Page of Parity Wallet. There you will see your new dapp:</p>
<p>Note: If you are not running <code>npm start</code> in parity/src/js to have a development instance your URL is likely <code>localhost:8180</code> instead of port 3000.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-13T02:07:07.000Z">2017-07-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 0 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/13/d3-scale/">D3-Scale</a>
            
        </h1>
        <div class="content">
            
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-12T07:43:59.000Z">2017-07-12</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    11 minutes read (About 1597 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/12/d3-shape/">D3-Shape</a>
            
        </h1>
        <div class="content">
            <h3 id="d3-shape"><a href="#d3-shape" class="headerlink" title="d3.shape"></a>d3.shape</h3><p>Visualization typically consist of discrete  graphical marks, such as <code>Symbols</code>, <code>arcs</code>, <code>lines</code> and <code>areas</code>. While the ractangles of a bar chart may be easy enough to generate directly using <code>SVG</code> or <code>Canvas</code>, other shapes are complex, such as roudned annular sectors and centripetal Catmull-Rom splines. This module provides a variety of shape generators for your convenience.</p>
<p>As with other aspects of D3, these shapes are driven by data: each shape generator exposes accessors that control how the input data are mapped to a visual representation.</p>
<p>You might define a line generator for a time series by <code>scaling</code> field of your data to fit the chart.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> lineGen = d3.line()</div><div class="line">    .x(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (d.date))</div><div class="line">    .y(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (d.value))</div></pre></td></tr></table></figure>
<p>This line generator can then be used to compute the <code>d</code> attribute of an SVG path element:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">path.datum(data).attr(<span class="hljs-string">'d'</span>, lineGen)</div></pre></td></tr></table></figure>
<p>Or you can use it to render to a Canvas 2D context:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lineGen.context(context)(data)</div></pre></td></tr></table></figure>
<h3 id="Installing"><a href="#Installing" class="headerlink" title="Installing"></a>Installing</h3><figure class="highlight html hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://d3js.org/d3-path.v1.min.js"</span>&gt;</span><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></div><div class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://d3js.org/d3-shape.v1.min.js"</span>&gt;</span><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add d3-shape</div></pre></td></tr></table></figure>
<h3 id="Arcs"><a href="#Arcs" class="headerlink" title="Arcs"></a>Arcs</h3><p><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/pie.png" alt=""></p>
<p>The arc genrateor produces a circular or annular sector, as in a pie or donut chart. If the difference between the start and end angles(the regular span) is greater than 2 <em> Math.PI, the arc generator will produce a complete circle or annulus. If it is less than 2 </em> Math.PI, arcs may have rounded corners and angular padding.</p>
<p>Arcs are always centered at <0, 0="">, use a transform to move the arc to a different position.</0,></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> arc = d3.arc() <span class="hljs-comment">// construct a new arc genrator with default settings.</span></div><div class="line"></div><div class="line">arc(&#123;</div><div class="line">  <span class="hljs-attr">innerRadius</span>: <span class="hljs-number">0</span>,</div><div class="line">  <span class="hljs-attr">outerRadius</span>: <span class="hljs-number">100</span>,</div><div class="line">  <span class="hljs-attr">startAngle</span>: <span class="hljs-number">0</span>,</div><div class="line">  <span class="hljs-attr">endAngle</span>: <span class="hljs-built_in">Math</span>.PI / <span class="hljs-number">2</span>,</div><div class="line">&#125;)</div><div class="line"><span class="hljs-comment">// or</span></div><div class="line"><span class="hljs-keyword">const</span> arc = d3.arc()</div><div class="line">    .innerRadius(<span class="hljs-number">0</span>)</div><div class="line">    .outerRadius(<span class="hljs-number">100</span>)</div><div class="line">    .startAngle(<span class="hljs-number">0</span>)</div><div class="line">    .endAngle(<span class="hljs-built_in">Math</span>.PI/<span class="hljs-number">2</span>)</div><div class="line"></div><div class="line">arc()</div></pre></td></tr></table></figure>
<p><strong>arc.centroid(arguments)</strong> computes the midpoint <x, y=""> of the center line of the arc that would be generated by the given arguments. The arguments are arbitrary. They are simple propagated to the arc generator’s accessor functions along with the <code>this</code> object.</x,></p>
<p>To be consistent with the generated arc, the accessors must be deterministirc, i.e., return the same value given the same arguments. The midpoint is defined as (startAngle + endAngle) / 2 and (innerRadius + outerRadius) / 2</p>
<p><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/centroid-annular-sector.png" alt=""></p>
<p><strong>arc.cornerRadius([radius])</strong> sets the corner radius to the specified function or number and returns the arc generator.</p>
<p><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/rounded-annular-sector.png" alt=""></p>
<p><strong>arc.padAngle([angle])</strong> sets the pad angle to the specifid function or number and returns this arc generator. The pad angle is converted to a fixed linear distances seperateing adajacent arcs, defined as <strong>padRadius * padAngle</strong>.</p>
<p><strong>arc.context([context])</strong> sets the context and returns this arc generator. If <em>context</em> is not specified, returns the current context, which defaults to null. If the context is not null, then the generated arc is rendered to this context as a sequence of path method calls. Otherwise, a path data string representing the generated arc is returned.</p>
<h3 id="Pies"><a href="#Pies" class="headerlink" title="Pies"></a>Pies</h3><p>This pie generator does not produce a shape directly, but instead <strong>computes</strong> the necessary angles to represent a tabular dataset as a pie or donut chart. These angles can be passed to an arc generator.</p>
<p><strong>d3.pie()</strong> constructs a new pie generator with the default settings.</p>
<p><strong>pie(data[, arguments])</strong> generates a pie for the given array of data, <strong>returning an array of objects representing each datum’s arc angle</strong>. Any additional arguments are arbitrary. They are simply propagated to the pie generator’s accessor functions along with the <code>this</code> object.</p>
<p>The length of the returned array is the same as data and each element <em>i</em> in the returned array corresponds to the element <em>i</em> in the input data. Each object in the returned array has the following properties:</p>
<ul>
<li><p>data: the input datum; the corresponding element in the input data array.</p>
</li>
<li><p>value: the numeric value of the arc</p>
</li>
<li><p>index: the zero-based sorted index of arc</p>
</li>
<li><p>startAgnle: the start angle of the arc</p>
</li>
<li><p>endAngle: the end angle of the arc</p>
</li>
<li><p>padAngle: the pad angle of the arc</p>
</li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> data = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>, <span class="hljs-number">13</span>, <span class="hljs-number">21</span>];</div><div class="line"><span class="hljs-keyword">var</span> arcs = d3.pie()(data);</div><div class="line"><span class="hljs-comment">// to</span></div><div class="line">[</div><div class="line">  &#123;<span class="hljs-string">"data"</span>:  <span class="hljs-number">1</span>, <span class="hljs-string">"value"</span>:  <span class="hljs-number">1</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">6</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">6.050474740247008</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">6.166830023713296</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;,</div><div class="line">  &#123;<span class="hljs-string">"data"</span>:  <span class="hljs-number">1</span>, <span class="hljs-string">"value"</span>:  <span class="hljs-number">1</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">7</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">6.166830023713296</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">6.283185307179584</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;,</div><div class="line">  &#123;<span class="hljs-string">"data"</span>:  <span class="hljs-number">2</span>, <span class="hljs-string">"value"</span>:  <span class="hljs-number">2</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">5</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">5.817764173314431</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">6.050474740247008</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;,</div><div class="line">  &#123;<span class="hljs-string">"data"</span>:  <span class="hljs-number">3</span>, <span class="hljs-string">"value"</span>:  <span class="hljs-number">3</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">4</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">5.468698322915565</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">5.817764173314431</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;,</div><div class="line">  &#123;<span class="hljs-string">"data"</span>:  <span class="hljs-number">5</span>, <span class="hljs-string">"value"</span>:  <span class="hljs-number">5</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">3</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">4.886921905584122</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">5.468698322915565</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;,</div><div class="line">  &#123;<span class="hljs-string">"data"</span>:  <span class="hljs-number">8</span>, <span class="hljs-string">"value"</span>:  <span class="hljs-number">8</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">3.956079637853813</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">4.886921905584122</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;,</div><div class="line">  &#123;<span class="hljs-string">"data"</span>: <span class="hljs-number">13</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">13</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">2.443460952792061</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">3.956079637853813</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;,</div><div class="line">  &#123;<span class="hljs-string">"data"</span>: <span class="hljs-number">21</span>, <span class="hljs-string">"value"</span>: <span class="hljs-number">21</span>, <span class="hljs-string">"index"</span>: <span class="hljs-number">0</span>, <span class="hljs-string">"startAngle"</span>: <span class="hljs-number">0.000000000000000</span>, <span class="hljs-string">"endAngle"</span>: <span class="hljs-number">2.443460952792061</span>, <span class="hljs-string">"padAngle"</span>: <span class="hljs-number">0</span>&#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>The first pair of parens, <code>pie()</code> constructs a default pie generator, the second <code>pie()(data)</code> invokes this generator on the dataset, returning an array of objects.</p>
<p>Note that the returned array is in the same order as the data.</p>
<h3 id="Lines"><a href="#Lines" class="headerlink" title="Lines"></a>Lines</h3><p>The line generator produces a spline or polyline, as in a line chart. Lines also appear in many other visualization types, such as the links in hierarchical edge bundling.</p>
<p><strong>d3.line()</strong> constructs a new line generator with default settings.</p>
<p><strong>line(data)</strong> generates a line for the given array of data. Depending on this line generator’s assciated curve, the given input data may need to be sorted by x-value before being passed to the line generator. If the line generator has a context, then the line is rendered to this context as a sequence of path method calls and this function returns void.</p>
<p><strong>line.x(fn)</strong> specifies the x accessor.</p>
<p><strong>line.y(fn)</strong> specifies the y accessor.</p>
<p><strong>line.defined([defined])</strong> sets the defined accessor.</p>
<p><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/line-defined.png" alt=""></p>
<p><strong>line.curve([curve])</strong> sets the curve factory and returns this line genrator. If curve is not specified, returns the current curve factory, which defaults to <strong>curveLinear</strong>.</p>
<p><strong>d3.lineRadial()</strong> constructs a new radial line generator with the default settings.</p>
<p><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/line-radial.png" alt=""></p>
<p>A radial line generator is equivalent to the standard cartesian line generator, except the x and y accessor are replaced with angle and readius accessors.</p>
<p>Radial lines are always positioned relative to <0, 0="">, use a transform to change the origin.</0,></p>
<h3 id="Areas"><a href="#Areas" class="headerlink" title="Areas"></a>Areas</h3><p>The area generator produces an area, as in an area chart. An area is defined by two bounding lines, either splines or polilines. Typically two lines share the same x-value, differing only in y-value; most commonly, y0 is defined as a constant representing zero.  The first line (the top line) is defined by x1 and y1 and is rendered first; the second line (the base line) is defined by x0 and y0 and is rendered second, with the points in reverse order.</p>
<p><strong>d3.area()</strong> constructs a new area generator with the default settings.</p>
<p><strong>area.data()</strong> generats area for the given array of data. Depending on this area generator’s associated curve.</p>
<p><strong>area.x([x])</strong> sets x0 to x and x1 to null.</p>
<p><strong>area.x0()</strong> sets the x0 accessor.</p>
<p><strong>area.defined()</strong></p>
<p><strong>d3.areaRadial()</strong></p>
<p><img src="https://raw.githubusercontent.com/d3/d3-shape/master/img/area-radial.png" alt=""></p>
<h3 id="Curves"><a href="#Curves" class="headerlink" title="Curves"></a>Curves</h3><p>Curves are typically not constructed or used directly, insread being passed to <code>line.curve</code> and <code>arec.curve</code>. For example:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> line = d3.line()</div><div class="line">  .x(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>&#123; <span class="hljs-keyword">return</span> x(d.date) &#125;)</div><div class="line">  .y(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>&#123; <span class="hljs-keyword">return</span> y(d.value) &#125;)</div><div class="line">  .curve(d3.curveCatmullRom.alpha(<span class="hljs-number">0.5</span>))</div></pre></td></tr></table></figure>
<ul>
<li><p>d3.curveBasis(context)</p>
</li>
<li><p>d3.curveBasisClosed(context)</p>
</li>
<li><p>d3.curveBasisOpen(context)</p>
</li>
<li><p>d3.curveBundle(context)</p>
</li>
<li><p>d3.curveCardinal(context)</p>
</li>
<li><p>d3.curveCardinalClosed(context)</p>
</li>
<li><p>d3.curveLinear(context)</p>
</li>
<li><p>d3.curveStep(context)</p>
</li>
<li><p>d3.curveStepAfter(context)</p>
</li>
<li><p>d3.curveStepBefore(context)</p>
</li>
</ul>
<h3 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h3><p>The link shape generates a smooth cubic Bezier curve from a source point to a target point. The tangents of the curve at the start and end are either <code>vertical</code>, <code>horizontal</code>, or <code>radial</code>.</p>
<p><strong>d3.linkVertical()</strong>, returns a new link generator with vertical tangents.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> link = d3.linkVertical()</div><div class="line">    .x(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>)</span>&#123; <span class="hljs-keyword">return</span> d.x &#125;)</div><div class="line">    .y(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>)</span>&#123; <span class="hljs-keyword">return</span> d.y &#125;)</div></pre></td></tr></table></figure>
<p><strong>d3.linkHorizontal()</strong>, returns a new link generator with horizontal tangents.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> link = d3.linkHorizontal()</div><div class="line">    .x(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>&#123; <span class="hljs-keyword">return</span> d.y &#125;)</div><div class="line">    .y(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">d</span>) </span>&#123; <span class="hljs-keyword">return</span> d.x &#125;)</div></pre></td></tr></table></figure>
<h3 id="Stacks"><a href="#Stacks" class="headerlink" title="Stacks"></a>Stacks</h3><p>Some shape types can be stakced, placing one shape adjacent to another.</p>
<p>Stacked charts can show overall value and per-category value simultaneously.</p>
<p><strong>d3.stack()</strong>, constructs a new stack generator with the default settings.</p>
<p><strong>stack(data[, arguments])</strong>, generates a stack for the given array of data, returning an array of representing each series. Any additional arguments are arbitrary, they are simply propagated to accessors along with <code>this</code> object.</p>
<p>The series are determined by the keys accessor; each series <em>i</em> in the returned array corresponds to the <em>i</em> th key. Each series is an array o points, where each point <em>j</em> corresponds to the <em>j</em> th element in the input <em>data</em>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> data = [</div><div class="line">  &#123;<span class="hljs-attr">month</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2015</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>), <span class="hljs-attr">apples</span>: <span class="hljs-number">3840</span>, <span class="hljs-attr">bananas</span>: <span class="hljs-number">1920</span>, <span class="hljs-attr">cherries</span>: <span class="hljs-number">960</span>, <span class="hljs-attr">dates</span>: <span class="hljs-number">400</span>&#125;,</div><div class="line">  &#123;<span class="hljs-attr">month</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2015</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), <span class="hljs-attr">apples</span>: <span class="hljs-number">1600</span>, <span class="hljs-attr">bananas</span>: <span class="hljs-number">1440</span>, <span class="hljs-attr">cherries</span>: <span class="hljs-number">960</span>, <span class="hljs-attr">dates</span>: <span class="hljs-number">400</span>&#125;,</div><div class="line">  &#123;<span class="hljs-attr">month</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2015</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>), <span class="hljs-attr">apples</span>:  <span class="hljs-number">640</span>, <span class="hljs-attr">bananas</span>:  <span class="hljs-number">960</span>, <span class="hljs-attr">cherries</span>: <span class="hljs-number">640</span>, <span class="hljs-attr">dates</span>: <span class="hljs-number">400</span>&#125;,</div><div class="line">  &#123;<span class="hljs-attr">month</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2015</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>), <span class="hljs-attr">apples</span>:  <span class="hljs-number">320</span>, <span class="hljs-attr">bananas</span>:  <span class="hljs-number">480</span>, <span class="hljs-attr">cherries</span>: <span class="hljs-number">640</span>, <span class="hljs-attr">dates</span>: <span class="hljs-number">400</span>&#125;</div><div class="line">];</div><div class="line"></div><div class="line"><span class="hljs-comment">// To produce a stack of this data</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">var</span> stack = d3.stack()</div><div class="line">    .keys([ <span class="hljs-string">'apples'</span>, <span class="hljs-string">'bananas'</span>, <span class="hljs-string">'cherries'</span>, <span class="hljs-string">'dates'</span> ])</div><div class="line">    .order(d3.stackOrderNone)</div><div class="line">    .offset(d3.stackOffsetNone)</div><div class="line"></div><div class="line"><span class="hljs-comment">// returned</span></div><div class="line"></div><div class="line">[</div><div class="line">  [[   <span class="hljs-number">0</span>, <span class="hljs-number">3840</span>], [   <span class="hljs-number">0</span>, <span class="hljs-number">1600</span>], [   <span class="hljs-number">0</span>,  <span class="hljs-number">640</span>], [   <span class="hljs-number">0</span>,  <span class="hljs-number">320</span>]], <span class="hljs-comment">// apples</span></div><div class="line">  [[<span class="hljs-number">3840</span>, <span class="hljs-number">5760</span>], [<span class="hljs-number">1600</span>, <span class="hljs-number">3040</span>], [ <span class="hljs-number">640</span>, <span class="hljs-number">1600</span>], [ <span class="hljs-number">320</span>,  <span class="hljs-number">800</span>]], <span class="hljs-comment">// bananas</span></div><div class="line">  [[<span class="hljs-number">5760</span>, <span class="hljs-number">6720</span>], [<span class="hljs-number">3040</span>, <span class="hljs-number">4000</span>], [<span class="hljs-number">1600</span>, <span class="hljs-number">2240</span>], [ <span class="hljs-number">800</span>, <span class="hljs-number">1440</span>]], <span class="hljs-comment">// cherries</span></div><div class="line">  [[<span class="hljs-number">6720</span>, <span class="hljs-number">7120</span>], [<span class="hljs-number">4000</span>, <span class="hljs-number">4400</span>], [<span class="hljs-number">2240</span>, <span class="hljs-number">2640</span>], [<span class="hljs-number">1440</span>, <span class="hljs-number">1840</span>]], <span class="hljs-comment">// dates</span></div><div class="line">]</div></pre></td></tr></table></figure>
<p><strong>stack.keys([keys])</strong>, sets the keys accessor to the specified function or array and returns this stack generator.</p>
<p><strong>stack.order([order])</strong>, sets the order accessor to the specified functino or array and returns this stack generator. If order is not specified, returns the current order accessor, which default to <code>stackOrderNone</code>, this uses the order given by the key accessor.</p>
<ul>
<li><p>d3.stackOrderAscending(series)</p>
</li>
<li><p>d3.stackOrderDescending(series)</p>
</li>
<li><p>d3.stackOrderInsideOut(series)</p>
</li>
<li><p>d3.stackOrderNone(series)</p>
</li>
<li><p>d3.stackOrderReverse(series)</p>
</li>
</ul>
<p><strong>stack.offset([offest])</strong>, sets the offset accessor to the specified function or array, and returns this stack generator. If no offset is specified, returns the current offset accessor, which default to <code>stackOffsetNone</code>, this uses a zero baseline.</p>
<ul>
<li><p>d3.stackOffsetDiverging(series, order)</p>
</li>
<li><p>d3.stackOffsetExpand(series, order)</p>
</li>
<li><p>d3.stackOffsetNone(series, order)</p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-12T06:44:24.000Z">2017-07-12</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 107 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/12/d3-range/">d3.range</a>
            
        </h1>
        <div class="content">
            <figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">d3.range([start, ]stop[, step])</div></pre></td></tr></table></figure>
<p>Returns an array containing an arithmetic progression, similar to the Python built-in range. This method is often used to iterate over a sequence of uniformly-spaced numeric values, such as the indexes of an array or the ticks of a linear scale.</p>
<p>If <em>step</em> is ommitted, it defaults to 1. If <em>start</em> ommitted, it defaults to 0. The <em>stop</em> value is exclusive; it is not included in the result.</p>
<p>The arguments are not required to be integers; however, the results are more predicable if they are.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">d3.range(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>/<span class="hljs-number">49</span>) <span class="hljs-comment">// BAD, and returns 50 elements</span></div><div class="line">d3.range(<span class="hljs-number">49</span>).map(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (d/<span class="hljs-number">49</span>)) <span class="hljs-comment">// GOOD, and returns 49 elements</span></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-11T06:34:23.000Z">2017-07-11</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 853 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/11/Quick-Reference-of-D3/">Quick Reference of D3</a>
            
        </h1>
        <div class="content">
            <h1 id="Selections"><a href="#Selections" class="headerlink" title="Selections"></a>Selections</h1><h3 id="d3-select"><a href="#d3-select" class="headerlink" title="d3.select()"></a>d3.select()</h3><p>Returns a reference to the first element found.</p>
<h3 id="d3-selectAll"><a href="#d3-selectAll" class="headerlink" title="d3.selectAll()"></a>d3.selectAll()</h3><p>Returns references to all found elements</p>
<h3 id="selection-append"><a href="#selection-append" class="headerlink" title="selection.append()"></a>selection.append()</h3><p>Takes a selection, creates a new element inside of it, then returns a reference to the newly created element.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> newCirlce = svg.append(<span class="hljs-string">'circle'</span>)</div></pre></td></tr></table></figure>
<h3 id="selection-remove"><a href="#selection-remove" class="headerlink" title="selection.remove()"></a>selection.remove()</h3><p>Takes a selection, removes it from the DOM, and returns a reference to the deleted selection.</p>
<h3 id="selection-text"><a href="#selection-text" class="headerlink" title="selection.text()"></a>selection.text()</h3><p>Takes a selection, sets its text content, and returns a reference to the acted-upon selection.</p>
<h3 id="selection-attr"><a href="#selection-attr" class="headerlink" title="selection.attr()"></a>selection.attr()</h3><p>Takes a selection, sets an attribute value, and returns a reference to the acted-upon selection.</p>
<h3 id="selection-style"><a href="#selection-style" class="headerlink" title="selection.style()"></a>selection.style()</h3><p>Takes a selection, sets an inline CSS style, and returns a reference to the acted-upon selection.</p>
<h3 id="selection-classed"><a href="#selection-classed" class="headerlink" title="selection.classed()"></a>selection.classed()</h3><p>Takes a selection, adds or remove a class, and returns a reference to the acted-upon selection; <code>true</code> adds the specified class, <code>false</code> removes it.</p>
<h3 id="selection-each"><a href="#selection-each" class="headerlink" title="selection.each()"></a>selection.each()</h3><p>Takes a selection, and runs an arbitrary function for each element in the selection, with the <code>this</code> context set to the element being acted upon.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">d3.selectAll(<span class="hljs-string">'circle'</span>).each(zoomAndEnhance)</div></pre></td></tr></table></figure>
<h1 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h1><h3 id="selection-data"><a href="#selection-data" class="headerlink" title="selection.data()"></a>selection.data()</h3><p>Takes a selection, calculates the difference between the number of elements and number of data value, and binds the array of data value to any existing elements(or not existing placeholder elements).</p>
<h3 id="selection-datum"><a href="#selection-datum" class="headerlink" title="selection.datum()"></a>selection.datum()</h3><p>Takes a selection, and binds a single data value to a single element.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svg.append(<span class="hljs-string">'path'</span>).datum(dataset).attr(<span class="hljs-string">'d'</span>, line)</div></pre></td></tr></table></figure>
<h3 id="selection-enter"><a href="#selection-enter" class="headerlink" title="selection.enter()"></a>selection.enter()</h3><p>Takes a selection and returns a subselection of ‘new’ placeholder elements.</p>
<h3 id="selection-merge"><a href="#selection-merge" class="headerlink" title="selection.merge()"></a>selection.merge()</h3><p>Takes a selection and merges it with another specified selection, returning a newly merged selection.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bars.enter().append(<span class="hljs-string">'rect'</span>).merge(bars) <span class="hljs-comment">// merge enter subselection with existing selection.</span></div></pre></td></tr></table></figure>
<h3 id="selection-exit"><a href="#selection-exit" class="headerlink" title="selection.exit()"></a>selection.exit()</h3><p>Takes a selection and returns a subselection of ‘exiting’ elements.</p>
<h3 id="selection-remove-1"><a href="#selection-remove-1" class="headerlink" title="selection.remove()"></a>selection.remove()</h3><p>Takes a selection and removes associated elements from the DOM.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bars.exit().remove()</div></pre></td></tr></table></figure>
<h3 id="function-d-…"><a href="#function-d-…" class="headerlink" title="function (d) { … }"></a>function (d) { … }</h3><p>Use anonymouse functions to access data values bound to element via <code>d</code>.</p>
<h3 id="function-d-i-…"><a href="#function-d-i-…" class="headerlink" title="function (d, i) { … }"></a>function (d, i) { … }</h3><p>Including <code>i</code> to get the index value of each element in the selection.</p>
<h3 id="selection-fitler"><a href="#selection-fitler" class="headerlink" title="selection.fitler()"></a>selection.fitler()</h3><p>Takes a selection and returns a new (sub)selection</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">d3.selectAll(<span class="hljs-string">'circle'</span>)</div><div class="line">  .filter(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> d &gt; <span class="hljs-number">15</span></div><div class="line">  &#125;)</div><div class="line">  .style(<span class="hljs-string">'color'</span>, <span class="hljs-string">'red'</span>)</div></pre></td></tr></table></figure>
<h3 id="d3-csv"><a href="#d3-csv" class="headerlink" title="d3.csv()"></a>d3.csv()</h3><p>Loads an external CSV file, parses the contents into JSON, then hands off the results to a callback function.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">d3.csv(<span class="hljs-string">'food.csv'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>) </span>&#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(data)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="d3-json"><a href="#d3-json" class="headerlink" title="d3.json()"></a>d3.json()</h3><p>Loads an external JSON file, parse the content into JSON, then hands off the results to a callback function.</p>
<h3 id="d3-request"><a href="#d3-request" class="headerlink" title="d3.request()"></a>d3.request()</h3><p>Loads an arbitrary external file, then hands off the result to a callback function.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">d3.request(<span class="hljs-string">'interesting_data.txt'</span>)</div><div class="line">  .get(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>&#123;</div><div class="line">    <span class="hljs-comment">// Do something</span></div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h1 id="Transitions"><a href="#Transitions" class="headerlink" title="Transitions"></a>Transitions</h1><h3 id="selection-transition"><a href="#selection-transition" class="headerlink" title="selection.transition()"></a>selection.transition()</h3><p>Takes a selection, and initiates a new transition, so values specified after this point will be interpolated over time(rather than set immediately).</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">d3.selectAll(<span class="hljs-string">'circle'</span>)</div><div class="line">  .attr(<span class="hljs-string">'cx'</span>, <span class="hljs-number">0</span>)</div><div class="line">  .transition()</div><div class="line">  .attr(<span class="hljs-string">'cx'</span>, <span class="hljs-number">100</span>)</div></pre></td></tr></table></figure>
<h3 id="selection-delay"><a href="#selection-delay" class="headerlink" title="selection.delay()"></a>selection.delay()</h3><p>Takes a transition, and sets the delay, in milliseconds.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">d3.selectAll(<span class="hljs-string">'circle'</span>)</div><div class="line">  .attr(<span class="hljs-string">'cx'</span>, <span class="hljs-number">0</span>)</div><div class="line">  .transition()</div><div class="line">  .delay(<span class="hljs-number">1000</span>)</div><div class="line">  .attr(<span class="hljs-string">'cx'</span>, <span class="hljs-number">100</span>)</div></pre></td></tr></table></figure>
<h3 id="transition-duration"><a href="#transition-duration" class="headerlink" title="transition.duration()"></a>transition.duration()</h3><p>Takes a transition and sets the duration in milliseconds.</p>
<h3 id="transition-ease"><a href="#transition-ease" class="headerlink" title="transition.ease()"></a>transition.ease()</h3><p>Takes a transition and sets the easing to be used.</p>
<h3 id="transition-on"><a href="#transition-on" class="headerlink" title="transition.on()"></a>transition.on()</h3><p>Takes a transition, and binds a function to be executed at either the <code>start</code> or <code>end</code>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">d3.selectAll(<span class="hljs-string">'circle'</span>)</div><div class="line">  .attr(<span class="hljs-string">'cx'</span>, <span class="hljs-number">0</span>)</div><div class="line">  .transition()</div><div class="line">  .attr(<span class="hljs-string">'cx'</span>, <span class="hljs-number">100</span>)</div><div class="line">  .on(<span class="hljs-string">'end'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'All done'</span>)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h1 id="Scale"><a href="#Scale" class="headerlink" title="Scale"></a>Scale</h1><h3 id="d3-scaleLinear"><a href="#d3-scaleLinear" class="headerlink" title="d3.scaleLinear()"></a>d3.scaleLinear()</h3><p>Creates a new linear scale function.</p>
<h3 id="scaleLinear-domain"><a href="#scaleLinear-domain" class="headerlink" title="scaleLinear.domain()"></a>scaleLinear.domain()</h3><p>Sets a linear scale’s input domain.</p>
<h3 id="scaleLinear-range"><a href="#scaleLinear-range" class="headerlink" title="scaleLinear.range()"></a>scaleLinear.range()</h3><p>Sets a linear scale’s output range.</p>
<h3 id="scaleLinear-rangeRound"><a href="#scaleLinear-rangeRound" class="headerlink" title="scaleLinear.rangeRound()"></a>scaleLinear.rangeRound()</h3><p>Sets a linear scale’s output range, and have all values output by the scale rounded to the nearest whole number.</p>
<h3 id="scaleLinear-nice"><a href="#scaleLinear-nice" class="headerlink" title="scaleLinear.nice()"></a>scaleLinear.nice()</h3><p>Expands a linear sclae’s domain to the nearest round values.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xScale.nice()</div></pre></td></tr></table></figure>
<h3 id="scaleLinear-clamp"><a href="#scaleLinear-clamp" class="headerlink" title="scaleLinear.clamp()"></a>scaleLinear.clamp()</h3><p>Forces any values output by this scale to be constrainted (rounded to be) within the specified range.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xScale.clamp(<span class="hljs-literal">true</span>)</div></pre></td></tr></table></figure>
<h3 id="d3-min"><a href="#d3-min" class="headerlink" title="d3.min()"></a>d3.min()</h3><p>Returns the smallest value in an array.</p>
<h3 id="d3-max"><a href="#d3-max" class="headerlink" title="d3.max()"></a>d3.max()</h3><p>Returns the largest value in an array.</p>
<h1 id="Axes"><a href="#Axes" class="headerlink" title="Axes"></a>Axes</h1><h3 id="d3-axisTop-d3-axisRight-d3-axisBottom-d3-axisLeft"><a href="#d3-axisTop-d3-axisRight-d3-axisBottom-d3-axisLeft" class="headerlink" title="d3.axisTop, d3.axisRight, d3.axisBottom, d3.axisLeft"></a>d3.axisTop, d3.axisRight, d3.axisBottom, d3.axisLeft</h3><p>Create a new axis generator function, with specified orientation.</p>
<h3 id="axis-scale"><a href="#axis-scale" class="headerlink" title="axis.scale()"></a>axis.scale()</h3><p>Takes an axis, and specifies the scale to be used.</p>
<h3 id="axis-ticks"><a href="#axis-ticks" class="headerlink" title="axis.ticks()"></a>axis.ticks()</h3><p>Takes an axis, and specifies a target number of ticks to be used.</p>
<h3 id="axis-tickValues"><a href="#axis-tickValues" class="headerlink" title="axis.tickValues()"></a>axis.tickValues()</h3><p>Takes an axis, and specifies the values to be labeled with ticks.</p>
<h3 id="selection-call"><a href="#selection-call" class="headerlink" title="selection.call()"></a>selection.call()</h3><p>Takes a selection, and calls an arbitrary method to act upon the selection; commonly used to generate an axis.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svg.append(<span class="hljs-string">'g'</span>).call(xAxis)</div></pre></td></tr></table></figure>
<h1 id="Interactivity"><a href="#Interactivity" class="headerlink" title="Interactivity"></a>Interactivity</h1><h3 id="selection-on"><a href="#selection-on" class="headerlink" title="selection.on()"></a>selection.on()</h3><p>Takes a selection, and binds an event listener</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">d3.select(<span class="hljs-string">'#button'</span>)</div><div class="line">  .on(<span class="hljs-string">'click'</span>, () =&gt; &#123; ... &#125;)</div></pre></td></tr></table></figure>
<h3 id="d3-select-this"><a href="#d3-select-this" class="headerlink" title="d3.select(this)"></a>d3.select(this)</h3><p>Within an anonymous function, <code>this</code> refers to <code>the element current being acted upon</code></p>
<h1 id="Numebrs-Dates-and-Times"><a href="#Numebrs-Dates-and-Times" class="headerlink" title="Numebrs, Dates, and Times"></a>Numebrs, Dates, and Times</h1><h3 id="d3-range"><a href="#d3-range" class="headerlink" title="d3.range()"></a>d3.range()</h3><p>Generates an array of sequential numbers.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">d3.range(<span class="hljs-number">5</span>); <span class="hljs-comment">// Returns [0, 1, 2, 3, 4]</span></div></pre></td></tr></table></figure>
<h3 id="d3-format"><a href="#d3-format" class="headerlink" title="d3.format()"></a>d3.format()</h3><p>Creates a new number formatter, for convertiing numbers to strings.</p>
<h3 id="d3-timeParse"><a href="#d3-timeParse" class="headerlink" title="d3.timeParse()"></a>d3.timeParse()</h3><p>Creates a new time parser, for converting strings to Date Object.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> parseTime = d3.timeParse(<span class="hljs-string">"%m/%d/%y"</span>)</div><div class="line">parseTime(<span class="hljs-string">'02/20/17'</span>)</div></pre></td></tr></table></figure>
<h3 id="d3-timeFormat"><a href="#d3-timeFormat" class="headerlink" title="d3.timeFormat()"></a>d3.timeFormat()</h3><p>Creates a new time formatter, for converting Data Object to strings.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> formatTime = d3.timeFormat(<span class="hljs-string">"%b %e"</span>)</div><div class="line">formatTime(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>)</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-10T04:09:21.000Z">2017-07-10</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 338 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/10/Simple-Api-of-Mongoose/">Simple Api of Mongoose</a>
            
        </h1>
        <div class="content">
            <h3 id="Two-methods-to-connect-to-Mongo-DB"><a href="#Two-methods-to-connect-to-Mongo-DB" class="headerlink" title="Two methods to connect to Mongo DB"></a>Two methods to connect to Mongo DB</h3><ul>
<li><p><code>mongoose.connect</code></p>
</li>
<li><p><code>mongoose.createConnection</code></p>
</li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> dbURL = <span class="hljs-string">'mongodb://...'</span></div><div class="line"><span class="hljs-keyword">const</span> dbOptions = &#123;</div><div class="line">  <span class="hljs-attr">user</span>: <span class="hljs-string">'db_user'</span>,</div><div class="line">  <span class="hljs-attr">pass</span>: <span class="hljs-string">'db_pass'</span></div><div class="line">&#125;</div><div class="line"><span class="hljs-keyword">const</span> adminConnection = mongoose.createConnection(dbURL, dbOptions)</div></pre></td></tr></table></figure>
<h3 id="Close-Connection"><a href="#Close-Connection" class="headerlink" title="Close Connection"></a>Close Connection</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">mongoose.connection.close(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Connection cvlosed'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">adminConnection.close(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'adminConnection closed'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// auto close when process exit</span></div><div class="line">process..on(<span class="hljs-string">'SIGINT'</span> () =&gt; &#123;</div><div class="line">  mongoose.connection.close(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Mongoose disconnected through app termination'</span>)</div><div class="line">    process.exit(<span class="hljs-number">0</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Cache-Error"><a href="#Cache-Error" class="headerlink" title="Cache Error"></a>Cache Error</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mongoose.connection.on(<span class="hljs-string">'error'</span>, (err) =&gt; &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Mongoose connection error: '</span> + err)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="db-js"><a href="#db-js" class="headerlink" title="db.js"></a>db.js</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// /model/db.js</span></div><div class="line"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>)</div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> dbURL = <span class="hljs-string">'mongodb://...'</span></div><div class="line"></div><div class="line">mongoose.connect(dbURL)</div><div class="line"></div><div class="line">mongoose.connection.on(<span class="hljs-string">'connected'</span>, () =&gt; &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Mongoose connected to '</span> + dbURL)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">mongoose.connection.on(<span class="hljs-string">'error'</span>, (err) =&gt; &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Mongoose connection error: '</span> + err)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">mongoose.connection.on(<span class="hljs-string">'disconnected'</span>, () =&gt; &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Mongoose disconnected'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">process.on(<span class="hljs-string">'SIGINT'</span>, () =&gt; &#123;</div><div class="line">  mongoose.connection.close(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Mongoose disconnected through app termination'</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// app.js</span></div><div class="line">db = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./model/db'</span>)</div></pre></td></tr></table></figure>
<h2 id="Schema-and-Model-in-Mongoose"><a href="#Schema-and-Model-in-Mongoose" class="headerlink" title="Schema and Model in Mongoose"></a>Schema and Model in Mongoose</h2><blockquote>
<p>Everything in Mongoose starts with a Schema. Each schema maps to a MongoDB collection and defines the shape of the documents within that collection.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> Schema = mongoose.Schema</div><div class="line"><span class="hljs-keyword">const</span> userSchema = <span class="hljs-keyword">new</span> Schema(&#123;</div><div class="line">  <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,</div><div class="line">  <span class="hljs-attr">pass</span>: <span class="hljs-built_in">String</span>,</div><div class="line">  <span class="hljs-attr">email</span>: <span class="hljs-built_in">String</span>,</div><div class="line">  <span class="hljs-attr">createTime</span>: <span class="hljs-built_in">String</span>,</div><div class="line">  <span class="hljs-attr">lastLogin</span>: <span class="hljs-built_in">String</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Schema to define table structure.</p>
<p>Model to manipulate collection.</p>
<p>Use model to create documents in Mongodb.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// create model</span></div><div class="line"><span class="hljs-keyword">const</span> User = mongoose.model(<span class="hljs-string">'User'</span>, userSchema)</div><div class="line"></div><div class="line"><span class="hljs-comment">// create instance, namely document</span></div><div class="line"><span class="hljs-keyword">const</span> newUser = <span class="hljs-keyword">new</span> User(&#123;</div><div class="line">  ...</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// insert document to db</span></div><div class="line">newUser.save(<span class="hljs-function">(<span class="hljs-params">err, doc</span>) =&gt;</span> &#123;</div><div class="line">  err &amp;&amp; <span class="hljs-built_in">console</span>.error(err)</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'doc is saved'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// create and insert</span></div><div class="line">User.create(&#123;...&#125;, (err, doc) =&gt; &#123;</div><div class="line">  err &amp;&amp; <span class="hljs-built_in">console</span>.error(err)</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'doc saved'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// add staitc methods</span></div><div class="line">userSchema.statics.findUsersByType = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">type, cb</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.find(&#123; <span class="hljs-attr">type</span>: <span class="hljs-keyword">this</span>.type &#125;, cb)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>Model.$where(argument: string | Function): <query>, creates a Query and specifies a <em>$where</em> condition</query></li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Blog.$where(<span class="hljs-string">'this.username.indexOf("val") !== -1'</span>).exec(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, docs</span>) </span>&#123;&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>Model#increment()</li>
</ul>
<h3 id="search"><a href="#search" class="headerlink" title="search"></a>search</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">User.find(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">'type'</span> &#125;).where(<span class="hljs-string">'age'</span>).gt(<span class="hljs-number">2</span>).limit(<span class="hljs-number">10</span>).exec()</div></pre></td></tr></table></figure>
<h3 id="remove"><a href="#remove" class="headerlink" title="remove"></a>remove</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">User.remove(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">'type'</span> &#125;, (err, res) =&gt; &#123;</div><div class="line">  err &amp;&amp; <span class="hljs-built_in">console</span>.error(err)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="update"><a href="#update" class="headerlink" title="update"></a>update</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">User.find(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">'type'</span> &#125;).update(&#123;</div><div class="line">  <span class="hljs-attr">$set</span>: &#123;</div><div class="line">    <span class="hljs-attr">date</span>: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()</div><div class="line">  &#125;</div><div class="line">&#125;, (err) =&gt; &#123;</div><div class="line">  err &amp;&amp; <span class="hljs-built_in">console</span>.error(err)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>More…</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-07T04:23:35.000Z">2017-07-07</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    29 minutes read (About 4375 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/07/Notes-on-Interactive-Data-Visualization-for-the-Web/">Notes on Interactive Data Visualization for the Web</a>
            
        </h1>
        <div class="content">
            <h1 id="Introducing-D3"><a href="#Introducing-D3" class="headerlink" title="Introducing D3"></a>Introducing D3</h1><p>D3 – also referred to as d3.js – is a JavaScript library for creating data visualization. But that kind of undersell it.</p>
<p>The abbreviation D3 reference the tool’s full name, <em>Data-Driven Documents</em>. The <em>data</em> is provided by you, and the <em>documents</em> are web-based documents, meaning anything that can be rendered by a web browser, such as HTML and SVG. D3 does the <em>driviing</em>, in the sense that it connects the data to the documents.</p>
<h1 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h1><p><em>Data</em> is an extemely broad term, only slightly less vague than the nearly all-encompassing <em>information</em>.</p>
<p>Boradly speaking, data is a structured information with potential for meaning.</p>
<p>In the context of programming for visualization, data is stored in a digital file, typically in either text or binary form. Of course, potentially every piece of digital ephemera may be considered <code>data</code> – not just text, but bits and bytes representing images, audio, video, database, streams, models, archives, and anything else.</p>
<p>Within the scope of D3 and browser-based visualization, however, we will limit ourselves to <em>text-based</em>. That is, anything that can be presented as numbers and strings of alpha charaters.</p>
<h2 id="Binding-Data"><a href="#Binding-Data" class="headerlink" title="Binding Data"></a>Binding Data</h2><p>We use D3’s <code>data()</code> method to bind data to DOM elements. But there are two things we need in place first, before we can bind data:</p>
<ul>
<li><p>The data</p>
</li>
<li><p>A selection of DOM elements</p>
</li>
</ul>
<p>Anytime after you call <code>data()</code>, you can craete an anonymous function accepts <code>d</code> as input.</p>
<p>The magical <code>data()</code> method ensures that <code>d</code> is set to the corresponding value in your original dataset, given the current element at hand.</p>
<h2 id="Drawing-with-Data"><a href="#Drawing-with-Data" class="headerlink" title="Drawing with Data"></a>Drawing with Data</h2><p><code>.attr</code>, <code>.classed</code>, <code>.style</code></p>
<h1 id="Scales"><a href="#Scales" class="headerlink" title="Scales"></a>Scales</h1><blockquote>
<p>Scales are functions that map from an input domain to an output domain.</p>
</blockquote>
<p>The values in any dataset are unlikely to correspond exactly to pixel measurement for use in your visuallization.  Scales provide a convenient way to map those data values to new values useful for visuallization purposes.</p>
<p>D3 scales are <em>functions</em> with parameters that you define. Once they are created, you call the <code>scale</code> function , pass it a data value and it nicely returns a scaled output value.</p>
<p>A scale is a mathematical relationship, with no direct visual output.</p>
<h2 id="Domains-and-Ranges"><a href="#Domains-and-Ranges" class="headerlink" title="Domains and Ranges"></a>Domains and Ranges</h2><p>A scale’s <em>input domain</em> is the range of possible input data values.</p>
<p>A scale’s <em>output range</em> is the range of possible output values, commonly used as display values in pixel units.</p>
<h2 id="Normalization"><a href="#Normalization" class="headerlink" title="Normalization"></a>Normalization</h2><p>Normalization is the process of mapping a numeric value to a new value between 0 and 1, based on the possible minumum and maximum values.</p>
<h2 id="Creating-a-Scale"><a href="#Creating-a-Scale" class="headerlink" title="Creating a Scale"></a>Creating a Scale</h2><p>D3’s linear scale function generator is accessed with <code>d3.scaleLiner()</code>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> scale = d3.scaleLinear()</div></pre></td></tr></table></figure>
<p>Now <code>scale</code> is a function to which you can pass input values.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scale(<span class="hljs-number">2.5</span>) <span class="hljs-comment">// return 2.5</span></div></pre></td></tr></table></figure>
<p>Because we haven’t set a domain and a range yet, this function will map input to output on a <code>1:1</code> scale.</p>
<p>We set the scale’s input domain to 100, 500 by passing those values to the <code>domain()</code> method as an array.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scale.domain([<span class="hljs-number">100</span>, <span class="hljs-number">500</span>])</div></pre></td></tr></table></figure>
<p>Set the output range in similar fashion, with <code>range()</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scale.range([<span class="hljs-number">10</span>, <span class="hljs-number">350</span>])</div></pre></td></tr></table></figure>
<p>These steps can be chained:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> scale = d3.scaleLinear()</div><div class="line">  .domain([<span class="hljs-number">100</span>, <span class="hljs-number">500</span>])</div><div class="line">  .range([<span class="hljs-number">10</span>, <span class="hljs-number">350</span>])</div></pre></td></tr></table></figure>
<p>Now it’s effective</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">scale(<span class="hljs-number">100</span>) <span class="hljs-comment">// return 10</span></div><div class="line">scale(<span class="hljs-number">300</span>) <span class="hljs-comment">// return 180</span></div><div class="line">scale(<span class="hljs-number">500</span>) <span class="hljs-comment">// return 350</span></div></pre></td></tr></table></figure>
<h3 id="d3-max-and-d3-min"><a href="#d3-max-and-d3-min" class="headerlink" title="d3.max() and d3.min()"></a>d3.max() and d3.min()</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> dataset = [</div><div class="line">  [<span class="hljs-number">5</span>, <span class="hljs-number">20</span>], [<span class="hljs-number">480</span>, <span class="hljs-number">90</span>], [<span class="hljs-number">250</span>, <span class="hljs-number">50</span>], [<span class="hljs-number">100</span>, <span class="hljs-number">33</span>], [<span class="hljs-number">330</span>, <span class="hljs-number">95</span>],</div><div class="line">  [<span class="hljs-number">410</span>, <span class="hljs-number">12</span>], [<span class="hljs-number">475</span>, <span class="hljs-number">44</span>], [<span class="hljs-number">25</span>, <span class="hljs-number">67</span>], [<span class="hljs-number">85</span>, <span class="hljs-number">21</span>], [<span class="hljs-number">220</span>, <span class="hljs-number">88</span>]</div><div class="line">]</div><div class="line"></div><div class="line">d3.max(dataset, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">return</span> d[<span class="hljs-number">0</span>]</div><div class="line">&#125;)</div><div class="line"><span class="hljs-comment">// this function will return the value 480</span></div></pre></td></tr></table></figure>
<h3 id="Setting-Up-Dynamic-Scales"><a href="#Setting-Up-Dynamic-Scales" class="headerlink" title="Setting Up Dynamic Scales"></a>Setting Up Dynamic Scales</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> xScale = d3.scaleLinear()</div><div class="line">  .domain([<span class="hljs-number">0</span>, d3.max(dataset, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">    retrun d[<span class="hljs-number">0</span>]</div><div class="line">  &#125;)])</div><div class="line">  .range([<span class="hljs-number">0</span>, w])</div></pre></td></tr></table></figure>
<p>Output range is set to 0 and w, the SVG’s width.</p>
<p>Use the scale</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.attr(<span class="hljs-string">'x'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">return</span> xScale(d[<span class="hljs-number">0</span>])</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p><code>d3.scaleLinear()</code> has several other handly methods that deserve a breif mention here:</p>
</blockquote>
<ul>
<li><p><code>nice()</code>: this tells the scale to take whatever input domain that you gave to <code>domian()</code> and expand both ends to the nearest round value.</p>
</li>
<li><p><code>rangeRound()</code>: User <code>rangeRound()</code> in place of <code>range()</code>, and all values output by the scale will be rounded to nearest whole number.</p>
</li>
<li><p><code>clamp()</code>: By default, a linear scale can return values outside of the specified range. For example, if if given a value outside of its expected input domain, a scale will return a number also outside of the output range. Calling <code>clamp(true)</code> on a scale, forces all output values to be within the specified range. This means excessive values will be rounded to the range’s low or high value.</p>
</li>
</ul>
<p>To use any of these special methods, just tack them onto the chain in which you define the original scale function.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> scale = d3.scaleLinear().domain([<span class="hljs-number">0.123</span>, <span class="hljs-number">4.67</span>]).range([<span class="hljs-number">0</span>, <span class="hljs-number">500</span>]).nice()</div></pre></td></tr></table></figure>
<blockquote>
<p>Other Scales</p>
</blockquote>
<ul>
<li><p><code>sclaeSqrt</code></p>
</li>
<li><p><code>scalePow</code></p>
</li>
<li><p><code>scaleLog</code></p>
</li>
<li><p><code>scaleQuantize</code></p>
</li>
<li><p><code>scaleQuantile</code></p>
</li>
<li><p><code>scaleOrdinal</code></p>
</li>
<li><p><code>scaleTime</code></p>
</li>
</ul>
<h1 id="Axes"><a href="#Axes" class="headerlink" title="Axes"></a>Axes</h1><p>D3’s axes are actually <code>function</code> whose parameters you define. Unlike scales, when an axis function is called, it doesn’t return a value, but generates the visual elements of the axis, including lines, labels, and ticks.</p>
<h2 id="Setting-Up-an-Axis"><a href="#Setting-Up-an-Axis" class="headerlink" title="Setting Up an Axis"></a>Setting Up an Axis</h2><p>There are four different axis function constructors, each one corresponding to a different orientation and placement of labels: <code>d3.axisTop</code>, <code>d3.axisBottom</code>, <code>d3.axisLeft</code>, <code>d3.axisRight</code>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> xAxis = d3.axisBottom()</div></pre></td></tr></table></figure>
<p>At a minimum, each axis also needs to be told on what <em>scale</em> to operate.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> xAxis = d3.axisBottom().scale(xScale)</div><div class="line"><span class="hljs-comment">// or</span></div><div class="line"><span class="hljs-keyword">const</span> xAxis = d3.axisBottom(xScale)</div></pre></td></tr></table></figure>
<p>Finally, to actually generate the axis and insert all those little lines and labels into our SVG, we must <code>call</code> teh <code>xAxis</code> function. This is similar to the scale functions, which we first configured by setting parameters, and then later <code>called</code> to put them into action.</p>
<p>Here we put this code at the end of script, so the axis is generated after the other elements in the SVG, and therefore appears ‘on top’</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svg.append(<span class="hljs-string">'g'</span>).call(xAxis)</div></pre></td></tr></table></figure>
<p>This is where things get a little funky. You might be wondering why this looks so different from our friendly scale functions. Here’s why: because an axis function actually draws something to the screen (by appending SVG elements to the DOM), we need to specify where in the DOM it should place new elements.</p>
<p>In the svg, we <code>append()</code> a new <code>g</code> element to the end of the SVG. In SVG land, a <code>g</code> element is a <code>group</code> element. Group elements are invisible, unlike <code>line</code>, <code>rect</code>, and <code>circle</code> and they have no visual presence themselves.</p>
<p>The <code>g</code> element can keep our code nice and be transformed.</p>
<p>So we’ve created a new <code>g</code>, and then finally, the function <code>call()</code> is called on our new <code>g</code>.</p>
<p>D3’s <code>call()</code> function takes the incoming <code>selection</code>, as received from the prior link in the chain, and hands that selection off to any <code>function</code>.</p>
<p>This this case, the selection is our new <code>g</code> group element. Although the <code>g</code> isn’t strictly necessary, we are using it because the axis function is about to generate lots of crazy lines and numbers, and it’s noce to contain all those element within a single group object.</p>
<p><code>call()</code> hands off <code>g</code> to the <code>xAxis</code> function, so our axis is genrated within <code>g</code></p>
<h3 id="Positioning-Axes"><a href="#Positioning-Axes" class="headerlink" title="Positioning Axes"></a>Positioning Axes</h3><p>By default, an axis is positioned using the range values of the specified scale. In our case, <code>xAxis</code> is referencing <code>xScale</code>, which has a range of [20, 460], because we applied 20 pixels of padding on all edge of the SVG. We can transform the axis by:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">svg.append(<span class="hljs-string">'g'</span>)</div><div class="line">  .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'axis'</span>)</div><div class="line">  .attr(<span class="hljs-string">'tranform'</span>, <span class="hljs-string">'translate(0, '</span> + (h - padding) + <span class="hljs-string">')'</span>)</div><div class="line">  .call(xAxis)</div></pre></td></tr></table></figure>
<p>In the end, we would like  our <code>g</code> to look like this in the DOM:</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-tag">&lt;<span class="hljs-name">g</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"axis"</span> <span class="hljs-attr">transform</span>=<span class="hljs-string">"translate(0, 280)"</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="CSS-styles-on-axis"><a href="#CSS-styles-on-axis" class="headerlink" title="CSS styles on axis"></a>CSS styles on axis</h3><p>The axes themselves are made up of <code>path</code>, <code>line</code>, <code>text</code> element, so those are the three elemnts to target in your CSS.</p>
<p>The paths and lines can be styled together, with the same rules, and text gets its own rules around for font and font size.</p>
<figure class="highlight css hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-selector-class">.axis</span> <span class="hljs-selector-tag">path</span>, <span class="hljs-selector-class">.axis</span> <span class="hljs-selector-tag">line</span> &#123;</div><div class="line">  <span class="hljs-attribute">stroke</span>: teal;</div><div class="line">  <span class="hljs-attribute">shape-rendering</span>: crispEdges;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-selector-class">.axis</span> <span class="hljs-selector-tag">text</span> &#123;</div><div class="line">  <span class="hljs-attribute">font-family</span>: Optima, Futura, sans-serif;</div><div class="line">  <span class="hljs-attribute">font-weight</span>: bold;</div><div class="line">  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</div><div class="line">  <span class="hljs-attribute">fill</span>: teal;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>These CSS rules will override D3’s default styles.</p>
<p>Note that when we use CSS rules to style SVG elements, only SVG attribute names – not regular CSS properties – should be used.</p>
<h3 id="Check-for-Ticks"><a href="#Check-for-Ticks" class="headerlink" title="Check for Ticks"></a>Check for Ticks</h3><p>Some ticks spread disease, but D3’s ticks communicates information.</p>
<p>You can customize all aspects of your axes, starting with the rough number of ticks, using <code>ticks()</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> xAxis = d3.axisBottom().scale(xScale).ticks(<span class="hljs-number">6</span>) <span class="hljs-comment">// set rough # of ticks</span></div></pre></td></tr></table></figure>
<p>Specifying tick values manually</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> xAixs = d3.axisBottom().scale(xScale).tickValues([<span class="hljs-number">0</span>, <span class="hljs-number">100</span>, <span class="hljs-number">250</span>, <span class="hljs-number">700</span>])</div></pre></td></tr></table></figure>
<h3 id="Formatting-Tick-labels"><a href="#Formatting-Tick-labels" class="headerlink" title="Formatting Tick labels"></a>Formatting Tick labels</h3><p>Enter <code>tickFormat()</code>, which enables you to specify how your numbers should be formatted.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> formatAsPercentage = d3.format(<span class="hljs-string">".1%"</span>)</div><div class="line">xAxis.tickFormat(formatAsPercentage)</div></pre></td></tr></table></figure>
<h1 id="Updates-Transtions-and-Motion"><a href="#Updates-Transtions-and-Motion" class="headerlink" title="Updates, Transtions, and Motion"></a>Updates, Transtions, and Motion</h1><blockquote>
<p>Transtion: .transition(), .duration()</p>
<p>Motion: .delay(), .ease()</p>
</blockquote>
<p>The argument could be number or function</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.transition()</div><div class="line">.delay(<span class="hljs-function">(<span class="hljs-params">d, i</span>) =&gt;</span> <span class="hljs-number">100</span> * i)</div><div class="line">.duration(<span class="hljs-number">300</span>)</div></pre></td></tr></table></figure>
<p>The default easing is <code>d3.easeCubicInOut</code>, which produces the gradual acceleration and deceleration.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">.transition()</div><div class="line">.duration(<span class="hljs-number">3000</span>)</div><div class="line">.ease(d3.easeLinear)</div></pre></td></tr></table></figure>
<ul>
<li><p>d3.easeCircleIn</p>
</li>
<li><p>d3.easeElasticOut</p>
</li>
<li><p>d3.easeBounceOut</p>
</li>
</ul>
<h3 id="on-Transition-Starts-and-Ends"><a href="#on-Transition-Starts-and-Ends" class="headerlink" title="on() Transition Starts and Ends"></a>on() Transition Starts and Ends</h3><p>There will be times when you want to make something happen at the start or end of a transition. In those time you can use <code>on()</code> to execute arbitrary code for each element in the selection.</p>
<p><code>on()</code> expects two arguments:</p>
<ul>
<li><p>Either “start” or “end”</p>
</li>
<li><p>An anonymous function, to be executed either at the start of a transition, or as soon as it has ended.</p>
</li>
</ul>
<blockquote>
<p>Notice: Only one transition can be active on any given element at any given time.</p>
</blockquote>
<h3 id="Containing-Visual-Elements-With-Clipping-Paths"><a href="#Containing-Visual-Elements-With-Clipping-Paths" class="headerlink" title="Containing Visual Elements With Clipping Paths"></a>Containing Visual Elements With Clipping Paths</h3><p>SVG has support for <em>clipping paths</em>, which you might know as <em>masks</em> in many drawing tools.</p>
<p>Much like <code>g</code>, <code>clipPath</code> has no visual presence of its own, but it contains visual elements.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;clipPath id=<span class="hljs-string">"chart-area"</span>&gt;</div><div class="line">  <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">rect</span> <span class="hljs-attr">x</span>=<span class="hljs-string">"30"</span> <span class="hljs-attr">y</span>=<span class="hljs-string">"30"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"410"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"240"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">rect</span>&gt;</span></span></div><div class="line">&lt;<span class="hljs-regexp">/clipPath&gt;</span></div></pre></td></tr></table></figure>
<p>Note that outer <code>clipPath</code> element has been given an ID of <code>chart-area</code>. We can use that ID to reference it later. Within the <code>clipPath</code> is a <code>rect</code>, which will function as the mask.</p>
<p>3 steps to using a clipping path:</p>
<ol>
<li><p>Define a <code>clipPath</code> and give it an ID</p>
</li>
<li><p>Put visual elements within the <code>clipPath</code> (usuallly just a <code>rect</code>, but this could be <code>circles</code> or any other visual elements)</p>
</li>
<li><p>Add a reference to the <code>clipPath</code> form whatever elements you wish to be masked.</p>
</li>
</ol>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">svg.append(<span class="hljs-string">'clipPath'</span>)</div><div class="line">  .attr(<span class="hljs-string">'id'</span>, <span class="hljs-string">'chart-area'</span>) <span class="hljs-comment">// assign an id</span></div><div class="line">  .append(<span class="hljs-string">'rect'</span>) <span class="hljs-comment">// within the clippath, create new rect</span></div><div class="line">  .attr(<span class="hljs-string">'x'</span>, padding)</div><div class="line">  .attr(<span class="hljs-string">'y'</span>, padding)</div><div class="line">  .attr(<span class="hljs-string">'width'</span>, w - padding * <span class="hljs-number">2</span>)</div><div class="line">  .attr(<span class="hljs-string">'height'</span>, h - padding * <span class="hljs-number">2</span>)</div><div class="line"></div><div class="line">svg.append(<span class="hljs-string">'g'</span>)</div><div class="line">  .attr(<span class="hljs-string">'id'</span>, <span class="hljs-string">'circles'</span>)</div><div class="line">  .attr(<span class="hljs-string">'clip-path'</span>, <span class="hljs-string">'url(#chart-area)'</span>)</div><div class="line">  .selectAll(<span class="hljs-string">'circle'</span>)</div><div class="line">  .data(dataset)</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'circle'</span>)</div></pre></td></tr></table></figure>
<h1 id="Interactivity"><a href="#Interactivity" class="headerlink" title="Interactivity"></a>Interactivity</h1><p>D3 allows you to bind event listener to more than one element at a time.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">svg.selectAll(<span class="hljs-string">'rect'</span>)</div><div class="line">  .data(dataset)</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'rect'</span>)</div><div class="line">  ....</div><div class="line">  .on(<span class="hljs-string">'click'</span>, (d) =&gt; &#123;</div><div class="line">    <span class="hljs-comment">// ...</span></div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<p>Within anonymous function , D3 automatically sets the context of <code>this</code>  so it references <code>current element upon which we are acting</code></p>
<figure class="highlight css hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-selector-tag">svg</span> <span class="hljs-selector-tag">text</span> &#123;</div><div class="line">  <span class="hljs-attribute">pointer-event</span>: none;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>or</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">svg.append(<span class="hljs-string">'text'</span>).style(<span class="hljs-string">'pointer-event'</span>, <span class="hljs-string">'none'</span>)</div></pre></td></tr></table></figure>
<h3 id="Grouping-SVG-Element"><a href="#Grouping-SVG-Element" class="headerlink" title="Grouping SVG Element"></a>Grouping SVG Element</h3><p>Note that <code>g</code> group elements do not, by themselves, trigger any mouse events. The reason for this is that <code>g</code> elements have no pixels.</p>
<p>You can still bind event listener to <code>g</code> elements, just keep in mind that the elements within that <code>g</code> will then behave as a group. If any of the enclosed elements are clicked or moused over, then the listener function will be activated.</p>
<h3 id="Tooltips"><a href="#Tooltips" class="headerlink" title="Tooltips"></a>Tooltips</h3><p>In interactive visualizations, tooltips are small overlays that present data values. In many cases, it’s not necessary to label every individual data value in the default value, but that level of detail should still be accessible to users.</p>
<h4 id="SVG-Element-Tooltips"><a href="#SVG-Element-Tooltips" class="headerlink" title="SVG Element Tooltips"></a>SVG Element Tooltips</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">.on(<span class="hljs-string">'mouseover'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">const</span> xPosition = <span class="hljs-built_in">parseFloat</span>(d3.select(<span class="hljs-keyword">this</span>)).attr(<span class="hljs-string">'x'</span>) + xScale.bandWidth()</div><div class="line">  <span class="hljs-keyword">const</span> yPosition = <span class="hljs-built_in">parseFloat</span>(d3.select(<span class="hljs-keyword">this</span>)).attr(<span class="hljs-string">'y'</span>) + <span class="hljs-number">14</span></div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// create the tooltip label</span></div><div class="line"></div><div class="line">svg.append(<span class="hljs-string">'text'</span>)</div><div class="line">  .attr(<span class="hljs-string">'id'</span>, <span class="hljs-string">'tooltip'</span>)</div><div class="line">  .attr(<span class="hljs-string">'x'</span>, xPosition)</div><div class="line">  .attr(<span class="hljs-string">'y'</span>, yPosition)</div><div class="line">  .attr(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'middle'</span>)</div><div class="line">  .attr(<span class="hljs-string">'font-family'</span>, <span class="hljs-string">'sans-serif'</span>)</div><div class="line">  .attr(<span class="hljs-string">'font-size'</span>, <span class="hljs-string">'11px'</span>)</div><div class="line">  .attr(<span class="hljs-string">'font-weight'</span>, <span class="hljs-string">'bold'</span>)</div><div class="line">  .attr(<span class="hljs-string">'fill'</span>, <span class="hljs-string">'black'</span>)</div><div class="line">  .text(d)</div><div class="line"></div><div class="line">.on(<span class="hljs-string">'mouseout'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;</div><div class="line">  d3.select(<span class="hljs-string">'#tooltip'</span>).remove()</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="Using-Paths"><a href="#Using-Paths" class="headerlink" title="Using Paths"></a>Using Paths</h1><h3 id="Line-Charts"><a href="#Line-Charts" class="headerlink" title="Line Charts"></a>Line Charts</h3><h4 id="Scale-setup"><a href="#Scale-setup" class="headerlink" title="Scale setup"></a>Scale setup</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> xScale = d3.scaleTime()</div><div class="line">  .domain([</div><div class="line">    d3.min(dataset, (d) =&gt; d.date),</div><div class="line">    d3.max(dataset, (d) =&gt; da.date)</div><div class="line">  ])</div><div class="line">  .range([<span class="hljs-number">0</span>, w])</div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> yScale = d3.scaleLinear()</div><div class="line">  .domain([</div><div class="line">    <span class="hljs-number">0</span>,</div><div class="line">    d3.max(dataset, (d) =&gt; d.avarage)</div><div class="line">  ])</div><div class="line">  .range([h, <span class="hljs-number">0</span>])</div></pre></td></tr></table></figure>
<p>Define a line generator</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> lineGen = d3.line()</div><div class="line">  .x(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> xScale(d.date))</div><div class="line">  .y(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> yScale(d.avarage))</div></pre></td></tr></table></figure>
<p>The x and y accessors tell the line generator how to decide <code>where</code> to place each point on the line.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> svg = d3.select(<span class="hljs-string">'body'</span>)</div><div class="line">  .append(<span class="hljs-string">'svg'</span>)</div><div class="line">  .attr(<span class="hljs-string">'width'</span>, w)</div><div class="line">  .attr(<span class="hljs-string">'height'</span>, h)</div><div class="line"></div><div class="line">svg.append(<span class="hljs-string">'path'</span>)</div><div class="line">  .datum(dataset)</div><div class="line">  .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'line'</span>)</div><div class="line">  .attr(<span class="hljs-string">'d'</span>, lineGen)</div></pre></td></tr></table></figure>
<p>Instead of using <code>data()</code> to bind each value in our <code>dataset</code> array to a different element, we use <code>datum()</code>, the method for binding a <em>single</em> data value to a single element. The entire <code>dataset</code> array is bound to the new <code>path</code> we just created.</p>
<p>We set a <code>d</code> attribute, passing in our line generator function as an argument.</p>
<p>Since the data has already been bound to the <code>path</code>, the line generator simply grabs taht data. plots the pointers as we specified, and draws a line connecting them.</p>
<h3 id="Dealing-with-Missing-Data"><a href="#Dealing-with-Missing-Data" class="headerlink" title="Dealing with Missing Data"></a>Dealing with Missing Data</h3><p>Assume a -99.99 value is not a true measurement, namely one value is missed.</p>
<p><code>defined()</code> is just an configuration method, like <code>x()</code> and <code>y()</code>. If the result of its anonymous function is true, then that data value is included, or the value is excluded.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> lineGen = d3.line()</div><div class="line">  .defined(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (d.avarage &gt; <span class="hljs-number">0</span>))</div><div class="line">  .x(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> x.date)</div><div class="line">  .y(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> x.avatarge)</div></pre></td></tr></table></figure>
<h3 id="Area-Charts"><a href="#Area-Charts" class="headerlink" title="Area Charts"></a>Area Charts</h3><p>Areas are not too different from lines. If a line is a series of connected (x, y) points, then an area is just that same line, plus a second such line (usually a flat baseline), with all the space in between filled in.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> area = d3.area()</div><div class="line">  .defined(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (d.avarage &gt; <span class="hljs-number">0</span>))</div><div class="line">  .x(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (xScale(d.date)))</div><div class="line">  .y0(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (yScale.range()[<span class="hljs-number">0</span>]))</div><div class="line">  .y1(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> (yScale(d.avarge)))</div></pre></td></tr></table></figure>
<p><code>y0</code> represents the area’s baseline, which <code>y1</code> represents the top.</p>
<h1 id="Selections"><a href="#Selections" class="headerlink" title="Selections"></a>Selections</h1><h3 id="A-Closer-Look-at-Selections"><a href="#A-Closer-Look-at-Selections" class="headerlink" title="A Closer Look at Selections"></a>A Closer Look at Selections</h3><p><img src="https://www.safaribooksonline.com/library/view/interactive-data-visualization/9781491921296/assets/dvw2_1201.png" alt=""></p>
<p><code>d3.select(&#39;body&#39;)</code> returns a <code>Selection</code>, which consists of <code>_groups</code> and <code>_parents</code></p>
<p>So a selection contains two arrays: <code>_groups</code> and <code>_parents</code></p>
<p><code>_groups</code> contains yet another array, which itself contains a list of elements – ony one in this case, <code>body</code>.</p>
<p>Let’s expand <code>body</code> and will see a lot of properties associated with <code>body</code>.</p>
<p>Selections are just very special objects generated and interpreted by D3. You will never manipulate a selection yourself – don’t bother trying to reach int <code>_groups</code> – as that’s what all of D3’s selection methods are for.</p>
<p><code>d3.select()</code> and <code>d3.selectAll()</code> operate at the page level, which means</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> allGroups = d3.selectAll(<span class="hljs-string">'g'</span>)</div></pre></td></tr></table></figure>
<p>The <code>select()</code> and <code>selectAll()</code> statements create <em>new</em> selections, and hand those new selections off to the subsequent methods.</p>
<p>To minimize the confusion from old and new selections, Mike Bostock recommends using an indentation convetion of four space when the selection is unchanged, but only two when a new selection is returned.</p>
<p><code>select()</code> and <code>append()</code> are methods that return new selections, <code>attr()</code> does not, but merely relays whatever selection it just acted on.</p>
<h3 id="Storing-Selections"><a href="#Storing-Selections" class="headerlink" title="Storing Selections"></a>Storing Selections</h3><p>Selections are immutable. All selection methods that affect which elements are selected (or their order) return a new selection rather tahn modifying the current selection.</p>
<p>That is, once you make a selection, you can’t modify it. You can only make a new one, which could be a subset of the original, and overwrite it.</p>
<h3 id="Enter-Merge-and-Exit"><a href="#Enter-Merge-and-Exit" class="headerlink" title="Enter, Merge and Exit"></a>Enter, Merge and Exit</h3><h3 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">d3.select(<span class="hljs-string">'body'</span>).selectAll(<span class="hljs-string">'p'</span>)</div><div class="line">  .data(dataset)</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'p'</span>)</div><div class="line">  .text(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (<span class="hljs-string">'I can count up to '</span> + d))</div><div class="line">  .filter(<span class="hljs-function"><span class="hljs-params">d</span> =&gt;</span> (d &gt; <span class="hljs-number">15</span>))</div><div class="line">  .style(<span class="hljs-string">'color'</span>, <span class="hljs-string">'red'</span>)</div></pre></td></tr></table></figure>
<p><code>filter()</code> takes a selection and an anonymous function. If the function return <code>true</code> for a given element, then that element is included in the new selection returned by <code>filter()</code>.</p>
<h3 id="Each"><a href="#Each" class="headerlink" title="Each"></a>Each</h3><p>The most common purpose of creating a selection is to ultimately to modify it in some way, such as by using <code>attr()</code> or <code>style()</code>. But it can be useful to define your own functions, espectially for custom calculation or modifications that will be repeated.</p>
<p>We can use <code>each()</code> to run an arbitrary function once for each element in a selection. <code>each()</code> takes whatever selection it’s given and calls the specified function once for each item in the selection.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">selection.each(<span class="hljs-function">(<span class="hljs-params">d, i</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-comment">// ...</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Some serious points to note:</p>
<ul>
<li><p>Since the <code>d</code> and <code>i</code> arguments are specified in the function definition, D3 will populate them for you.</p>
</li>
<li><p>The value of <code>this</code> will also be set by D3 to reflect <code>the element upon which we&#39;re currently acting</code>, So <code>d3.select(this)</code> will create a selection with whatever that element is.</p>
</li>
<li><p>In <code>delay()</code> or any other function within (d, i) =&gt; {}, we can reference the value <code>d</code>, and <code>i</code> directly, no need to write <code>(d, i)</code></p>
</li>
</ul>
<h1 id="Layouts"><a href="#Layouts" class="headerlink" title="Layouts"></a>Layouts</h1><p>Contrary to what the name implies, D3 <em>layouts</em> do not, in fact, lay anything out for you on the screen. The layout methods have no direct <em>visual</em> output. Rather, D3 layouts take data that you provided and remap or otherwise transform it, thereby generating <em>new</em> data that is more convenient for a specific visual task.</p>
<p>The list of D3 layouts includes:</p>
<ul>
<li><p>Chord</p>
</li>
<li><p>Cluster</p>
</li>
<li><p>Force</p>
</li>
<li><p>Pack</p>
</li>
<li><p>Partition</p>
</li>
<li><p>Pie</p>
</li>
<li><p>Stack</p>
</li>
<li><p>Tree</p>
</li>
<li><p>Treemap</p>
</li>
</ul>
<h3 id="Pie-Layout"><a href="#Pie-Layout" class="headerlink" title="Pie Layout"></a>Pie Layout</h3><p><code>d3.pie()</code> might not be as delicious as it sounds, but it’s still worthy of your attention. It is typically used to create a doughnut or pie chart.</p>
<p>Start with simple dataset</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> dataset = [ <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">45</span>, <span class="hljs-number">6</span>, <span class="hljs-number">25</span> ]</div></pre></td></tr></table></figure>
<p>Wd define a default pie layout</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> pie = d3.pie()</div></pre></td></tr></table></figure>
<p>Then, all that remains is to hand off our data to the new <code>pie()</code> function, as in <code>pie(dataset)</code>.</p>
<p>The pie layout takes our simple array of numbers and generates an array of objects, one object for each value. Each of those objects now has a few new values – most important, <code>startAngle</code> and <code>endAngle</code>.</p>
<p>To actually draw the wedges, we turn to <code>d3.arc()</code>, a handy built-in function for drawing arcs as SVG <code>path</code> elements.</p>
<p>Arcs are defiend as custom functions, and they require inner and outer redius values.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> w = <span class="hljs-number">300</span></div><div class="line"><span class="hljs-keyword">const</span> h = <span class="hljs-number">300</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> outerRadius = w / <span class="hljs-number">2</span></div><div class="line"><span class="hljs-keyword">const</span> innerRadius = <span class="hljs-number">0</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> arc = d3.arc()</div><div class="line">  .innerRadius(innerRadius)</div><div class="line">  .outerRadius(outerRadius)</div></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> svg = d3.select(<span class="hljs-string">'body'</span>)</div><div class="line">  .append(<span class="hljs-string">'svg'</span>)</div><div class="line">  .attr(<span class="hljs-string">'width'</span>, w)</div><div class="line">  .attr(<span class="hljs-string">'height'</span>, h)</div></pre></td></tr></table></figure>
<p>Then we can create new groups for each incoming wedge, binding the pie-ified data to the new elements, and translating each group into the center of the chart, so the <code>path</code>s will appear in the right place</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// set up groups</span></div><div class="line"><span class="hljs-keyword">const</span> arcs = svg.selectAll(<span class="hljs-string">'g.arc'</span>)</div><div class="line">  .data(pie(dataset))</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'g'</span>)</div><div class="line">  .attr(<span class="hljs-string">'class'</span>, <span class="hljs-string">'arc'</span>)</div><div class="line">  .attr(<span class="hljs-string">'transform'</span>, <span class="hljs-string">'translate('</span> + outerRadius + <span class="hljs-string">', '</span> + outerRadius + <span class="hljs-string">')'</span>)</div></pre></td></tr></table></figure>
<p>Note that we’re saving a reference to each newly created <code>g</code> in a variable called <code>arcs</code></p>
<p>Finally, within each new <code>g</code>, we append a <code>path</code>. A <code>path</code>‘s path description is defined in the <code>d</code> attribute. So we call the <code>arc</code> generator, which generates the path information based on the data already bound to this group.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// draw arc paths</span></div><div class="line">arcs.append(<span class="hljs-string">'path'</span>)</div><div class="line">  .attr(<span class="hljs-string">'fill'</span>, (d, i) =&gt; &#123;</div><div class="line">    <span class="hljs-keyword">return</span> colors(i)</div><div class="line">  &#125;)</div><div class="line">  .attr(<span class="hljs-string">'d'</span>, arc)</div></pre></td></tr></table></figure>
<p><code>arc</code> is our path generator function.</p>
<p>When a named function is specified as a parameter in this way, D3 automcatically passes in the datum and index values, without us having to write them out explicitly.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">.attr(<span class="hljs-string">'d'</span>, arc)</div><div class="line"></div><div class="line"><span class="hljs-comment">// equivalent</span></div><div class="line"></div><div class="line">.attr(<span class="hljs-string">'d'</span>, (d, i) =&gt; (arc(d, i)))</div></pre></td></tr></table></figure>
<p>D3 has a number of handy ways to generate categorical colors</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> color = d3.scaleOrdinal(d3.schemeCategory10)</div></pre></td></tr></table></figure>
<p>Generate text labels for each wedge:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">arcs.append(<span class="hljs-string">'text'</span>)</div><div class="line">  .artr(<span class="hljs-string">'transform'</span>, (d) =&gt; &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-string">'translate('</span> + arc.centroid(d) + <span class="hljs-string">')'</span></div><div class="line">  &#125;)</div><div class="line">  .attr(<span class="hljs-string">'text-anchor'</span>, <span class="hljs-string">'middle'</span>)</div><div class="line">  .text(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> &#123; <span class="hljs-keyword">return</span> d.value &#125;)</div></pre></td></tr></table></figure>
<p>A <em>centroid</em> is the calculated center point of any shape, whether that shape is regular(like a square) or highly irregular(like an outline of the state of Maryland).</p>
<p><code>arc.centroid()</code> is super-helpful function that calculates and returns the center point of any arc.</p>
<blockquote>
<p>Note: The pie layout automatically reordered out data values from largest to smallest.</p>
</blockquote>
<h3 id="Stack-Layout"><a href="#Stack-Layout" class="headerlink" title="Stack Layout"></a>Stack Layout</h3><p><code>d3.stack()</code> converts two-dimentional data into ‘stacked’ data.</p>
<p>It calculates a baseline value for each datum, so you can <code>stack</code> layers of data on top of one another.</p>
<p>Start with some data</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> dataset = [</div><div class="line">  &#123; <span class="hljs-attr">apples</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">oranges</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">grapes</span>: <span class="hljs-number">22</span> &#125;,</div><div class="line">true&#123; <span class="hljs-attr">apples</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">oranges</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">grapes</span>: <span class="hljs-number">28</span> &#125;,</div><div class="line">true&#123; <span class="hljs-attr">apples</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">oranges</span>: <span class="hljs-number">19</span>, <span class="hljs-attr">grapes</span>: <span class="hljs-number">32</span> &#125;,</div><div class="line">true&#123; <span class="hljs-attr">apples</span>: <span class="hljs-number">7</span>, <span class="hljs-attr">oranges</span>: <span class="hljs-number">23</span>, <span class="hljs-attr">grapes</span>: <span class="hljs-number">35</span> &#125;,</div><div class="line">true&#123; <span class="hljs-attr">apples</span>: <span class="hljs-number">23</span>, <span class="hljs-attr">oranges</span>: <span class="hljs-number">17</span>, <span class="hljs-attr">grapes</span>: <span class="hljs-number">43</span> &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>The <code>dataset</code> is organized by <em>column</em>. The stack layout reconfigures the data to be organized by <em>categories</em>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Set up stack method</span></div><div class="line"><span class="hljs-keyword">const</span> stack = d3.stack().keys([<span class="hljs-string">'apples'</span>, <span class="hljs-string">'oranges'</span>, <span class="hljs-string">'grapes'</span>])</div><div class="line"></div><div class="line"><span class="hljs-comment">// Data, stacked</span></div><div class="line"><span class="hljs-keyword">const</span> series = stack(dataset)</div></pre></td></tr></table></figure>
<p>Now <code>series</code> is an array with three values, each one itself an array corresponding to each categorical series: apples, oranges, and grapes(in that order because we specified as such in <code>keys()</code>)</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">//'series', the array formerly known as 'dataset'</span></div><div class="line">[</div><div class="line">true[ [ <span class="hljs-number">0</span>,  <span class="hljs-number">5</span>], [ <span class="hljs-number">0</span>,  <span class="hljs-number">4</span>], [ <span class="hljs-number">0</span>,  <span class="hljs-number">2</span>], [ <span class="hljs-number">0</span>,  <span class="hljs-number">7</span>], [ <span class="hljs-number">0</span>, <span class="hljs-number">23</span>] ],  <span class="hljs-comment">// apples</span></div><div class="line">true[ [ <span class="hljs-number">5</span>, <span class="hljs-number">15</span>], [ <span class="hljs-number">4</span>, <span class="hljs-number">16</span>], [ <span class="hljs-number">2</span>, <span class="hljs-number">21</span>], [ <span class="hljs-number">7</span>, <span class="hljs-number">30</span>], [<span class="hljs-number">23</span>, <span class="hljs-number">40</span>] ],  <span class="hljs-comment">// oranges</span></div><div class="line">true[ [<span class="hljs-number">15</span>, <span class="hljs-number">37</span>], [<span class="hljs-number">16</span>, <span class="hljs-number">44</span>], [<span class="hljs-number">21</span>, <span class="hljs-number">53</span>], [<span class="hljs-number">30</span>, <span class="hljs-number">65</span>], [<span class="hljs-number">40</span>, <span class="hljs-number">83</span>] ]   <span class="hljs-comment">// grapes</span></div><div class="line">]</div></pre></td></tr></table></figure>
<p>To stack element visually, now we can reference each data object’s baseline and top line values.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Add a group for each row of data</span></div><div class="line"><span class="hljs-keyword">const</span> groups = svg.selectAll(<span class="hljs-string">'g'</span>)</div><div class="line">  .data(series)</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'g'</span>)</div><div class="line">  .style(<span class="hljs-string">'fill'</span>, (di, i) =&gt; &#123;</div><div class="line">    <span class="hljs-keyword">return</span> colors(i)</div><div class="line">  &#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// Add a rect for each data value</span></div><div class="line"><span class="hljs-keyword">const</span> rects = groups.selectAll(<span class="hljs-string">'rect'</span>)</div><div class="line">  .data(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> (d))</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'rect'</span>)</div><div class="line">  .attr(<span class="hljs-string">'x'</span>, (d, i) =&gt; &#123;</div><div class="line">    retrun xScale(i)</div><div class="line">  &#125;)</div><div class="line">  .attr(<span class="hljs-string">'y'</span>, (d) =&gt; &#123;</div><div class="line">    <span class="hljs-keyword">return</span> ySclae(d[<span class="hljs-number">0</span>])</div><div class="line">  &#125;)</div><div class="line">  .attr(<span class="hljs-string">'height'</span>, (d) =&gt; &#123;</div><div class="line">    <span class="hljs-keyword">return</span> yScale(d[<span class="hljs-number">1</span>]-d[<span class="hljs-number">0</span>])</div><div class="line">  &#125;)</div><div class="line">  .attr(<span class="hljs-string">'width'</span>, xScale.bandWidth())</div></pre></td></tr></table></figure>
<p>Within each group, we select all the <code>rect</code>s and bind a subset of the data with this line</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.data(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> (d))</div></pre></td></tr></table></figure>
<h4 id="A-New-Order"><a href="#A-New-Order" class="headerlink" title="A New Order"></a>A New Order</h4><p>Unless otherwise specified, series will be stacked in the order specified in <code>keys()</code>.</p>
<p>But you can use <code>order()</code> to specify an alternate sequence to be applied before all the stacked values are calculated.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> stack = d3.stack()</div><div class="line">  .keys([ <span class="hljs-string">'apples'</span>, <span class="hljs-string">'oranges'</span>, <span class="hljs-string">'grapes'</span> ])</div><div class="line">  .order(d3.stackOrderDesending)</div></pre></td></tr></table></figure>
<ul>
<li><p>d3.stackOrderNone</p>
</li>
<li><p>d3.stackOrderReverse</p>
</li>
<li><p>d3.stackOrderAscending</p>
</li>
<li><p>d3.stackOrderDescending</p>
</li>
</ul>
<h3 id="Stacked-Areas"><a href="#Stacked-Areas" class="headerlink" title="Stacked Areas"></a>Stacked Areas</h3><p>This can be a valuable way to represent time series data, when a sum total is derived from several related categories.</p>
<h3 id="Force-Layout"><a href="#Force-Layout" class="headerlink" title="Force Layout"></a>Force Layout</h3><p>Force-directed layouts are so-called because they use simulations of physical <em>force</em> to arrange elements on the screen.</p>
<p>Force layouts are typically used with network data. In computer science, this kind of dataset is called a <code>graph</code>. A simple graph is a list of <code>node</code> and <code>edge</code>. The nodes are entities in the dataset, and the edges are the <code>connection</code>s between nodes. Some nodes will be connected by edges and others won’t.</p>
<p>Nodea are commonly represented as circles and edges as lines.</p>
<p>The physical metaphor here is of particles that repel each other, yet are also connected by strings.  The repelling forces push particles away from each other, preventing visual overlap, and the strings prevent them from just flying out into space, thereby keeping them on the screen where we can see them.</p>
<h4 id="Preparing-the-network-data"><a href="#Preparing-the-network-data" class="headerlink" title="Preparing the network data"></a>Preparing the network data</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> dataset = &#123;</div><div class="line">true<span class="hljs-attr">nodes</span>: [</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Adam"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Bob"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Carrie"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Donovan"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Edward"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Felicity"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"George"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Hannah"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Iris"</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">"Jerry"</span> &#125;</div><div class="line">true],</div><div class="line">true<span class="hljs-attr">edges</span>: [</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">1</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">2</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">3</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">4</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">5</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">5</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">5</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">4</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">8</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">9</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">7</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">7</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">8</span> &#125;,</div><div class="line">truetrue&#123; <span class="hljs-attr">source</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">target</span>: <span class="hljs-number">9</span> &#125;</div><div class="line">true]</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<h4 id="Defining-the-Force-Simulation"><a href="#Defining-the-Force-Simulation" class="headerlink" title="Defining the Force Simulation"></a>Defining the Force Simulation</h4><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Initialize a simple force layout, using the nodes and edges in dataset</span></div><div class="line"><span class="hljs-keyword">const</span> layout = d3.forceSimulation(dataset.nodes)</div><div class="line">  .force(<span class="hljs-string">'charge'</span>, d3.forceManyBody())</div><div class="line">  .force(<span class="hljs-string">'link'</span>, d3.forceLink(dataset.edges))</div><div class="line">  .force(<span class="hljs-string">'center'</span>, d3.forceCenter().x(w/<span class="hljs-number">2</span>).y(h/<span class="hljs-number">2</span>))</div></pre></td></tr></table></figure>
<p>Call <code>d3.forceSimulation()</code> and pass in a reference to the nodes. This will generate a new simulator and automatically start running it, but without any forces applied, it won’t be very interesting.</p>
<p>To create force, call <code>force()</code> as many times as you like, each time specifying an arbitrary name for each force(in case you want to reference it later) and the name of a force function.</p>
<ul>
<li><p><code>d3.forceManyBody()</code>: Create a <em>many-body</em> force which acts on <strong>all</strong> nodes, meaning this can be used to either attract all nodes to each other or repel all nodes from each other. Try different <code>strength()</code> values, and see what happens. The default <code>strength()</code> is -30, so we will see a slight repelling force.</p>
</li>
<li><p><code>d3.forceLink()</code>: Our nodes are connected by edges, so we apply this force, specifying <code>dataset.edges</code>. Specify a target <code>distance()</code> (the default is 30 pixles), and this force will struggle agains any competing forces to achieve that distance.</p>
</li>
<li><p><code>d3.forceCenter()</code>: This force centers the entire simulation around whatever point you specify with <code>x()</code> and <code>y()</code>.</p>
</li>
</ul>
<h4 id="Creating-the-Visual-Elements"><a href="#Creating-the-Visual-Elements" class="headerlink" title="Creating the Visual Elements"></a>Creating the Visual Elements</h4><p>After defining our force simulation, we proceed to generate visual elements.</p>
<p>First we create a line for each edge:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Create edges as lines</span></div><div class="line"><span class="hljs-keyword">const</span> edges = svg.selectAll(<span class="hljs-string">'line'</span>)</div><div class="line">  .data(dataset.edges)</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'line'</span>)</div><div class="line">  .style(<span class="hljs-string">'stroke'</span>, <span class="hljs-string">'#ccc'</span>)</div><div class="line">  .style(<span class="hljs-string">'stroke-width'</span>, <span class="hljs-number">1</span>)</div></pre></td></tr></table></figure>
<p>Then create a circle for each node:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> nodes = svg.selectAll(<span class="hljs-string">'circle'</span>)</div><div class="line">  .data(dataset.nodes)</div><div class="line">  .enter()</div><div class="line">  .append(<span class="hljs-string">'circle'</span>)</div><div class="line">  .attr(<span class="hljs-string">'r'</span>, <span class="hljs-number">10</span>)</div><div class="line">  .style(<span class="hljs-string">'fill'</span>, (d, i) =&gt; &#123;</div><div class="line">    <span class="hljs-keyword">return</span> colors(i)</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<p>Add simple tooltip:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Add a simple tooltip</span></div><div class="line"></div><div class="line">nodes.append(<span class="hljs-string">'title'</span>)</div><div class="line">  .text(<span class="hljs-function">(<span class="hljs-params">d</span>) =&gt;</span> &#123;</div><div class="line">    <span class="hljs-keyword">return</span> d.name</div><div class="line">  &#125;)</div></pre></td></tr></table></figure>
<h4 id="Updating-Visuals-Over-Time"><a href="#Updating-Visuals-Over-Time" class="headerlink" title="Updating Visuals Over Time"></a>Updating Visuals Over Time</h4><p>D3’s force simulation ‘ticks’ forward through time, just like every other physics simulation. With each tick, the simulation adjusts the position values for each node and edge according to the rules we specified when the layout was first initialized. To see this progress visually, we need to update the associated elements – the lines and circles – on every tick.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Every time the simulation 'ticks', this will be called</span></div><div class="line">force.on(<span class="hljs-string">'tick'</span>, () =&gt; &#123;</div><div class="line">  edges.attr(<span class="hljs-string">'x1'</span>, d =&gt; (d.source.x))</div><div class="line">    .attr(<span class="hljs-string">'y1'</span>, d =&gt; (d.source.y))</div><div class="line">    .attr(<span class="hljs-string">'x2'</span>, d =&gt; (d.target.x))</div><div class="line">    .attr(<span class="hljs-string">'y2'</span>, d =&gt; (d.target.y))</div><div class="line"></div><div class="line">  nodes.attr(<span class="hljs-string">'cx'</span>, d =&gt; (d.x))</div><div class="line">    .attr(<span class="hljs-string">'cy'</span>, d =&gt; (d.y))</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>This tells D3, ‘Ok, every time you tick, take the new (x, y) values for each line and circle and update them in the DOM’</p>
<p>Here the (x, y) are calculated and appeded by D3.</p>
<h4 id="Draggable-Nodes"><a href="#Draggable-Nodes" class="headerlink" title="Draggable Nodes"></a>Draggable Nodes</h4><p>Add the <code>call()</code> statement to our <code>Nodes</code>:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">.cal(d3.drag()</div><div class="line">  .on(<span class="hljs-string">'start'</span>, dragStarted)</div><div class="line">  .on(<span class="hljs-string">'drag'</span>, dragging)</div><div class="line">  .on(<span class="hljs-string">'end'</span>, dragEnded))</div></pre></td></tr></table></figure>
<p>This bit code ‘calls’ the <code>d3.drag()</code> method on each node.</p>
<p><code>d3.drag()</code>, in turn, sets event listeners for the three drag-related events, and specifies functions to trigger whenever one of those events occurs.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dragStarted</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (!d3.event.active) force.alphaTarget(<span class="hljs-number">0.3</span>).restart()</div><div class="line">  d.fx = d.x</div><div class="line">  d.fy = d.y</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dragging</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">  d.fx = d3.event.x</div><div class="line">  d.fy = d3.event.y</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dragEnded</span> (<span class="hljs-params">d</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (!d3.event.active) force.alphaTarget(<span class="hljs-number">0</span>)</div><div class="line">  d.fx = <span class="hljs-literal">null</span></div><div class="line">  d.fy = <span class="hljs-literal">null</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Geomapping"><a href="#Geomapping" class="headerlink" title="Geomapping"></a>Geomapping</h1><p>…</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-01T06:52:04.000Z">2017-07-01</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 699 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/01/Simple-usage-of-SW/">Simple Usage of SW</a>
            
        </h1>
        <div class="content">
            <h1 id="Register"><a href="#Register" class="headerlink" title="Register"></a>Register</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">navigator.serviceWorker.register(<span class="hljs-string">'your_service_worker,js'</span>, &#123; <span class="hljs-attr">scope</span>: <span class="hljs-string">'your_path_name'</span> &#125;)</div><div class="line">.then(<span class="hljs-function">(<span class="hljs-params">worker</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[SW] Registration succeeded.'</span>)</div><div class="line">&#125;).catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[SW] Registration failed with '</span> + err)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="Unregister"><a href="#Unregister" class="headerlink" title="Unregister"></a>Unregister</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">navigator.serviceWorker.getRegistration(<span class="hljs-string">'your_service_worker.js'</span>, &#123; <span class="hljs-attr">scope</span>: <span class="hljs-string">'your_path_name'</span> &#125;)</div><div class="line">.then(<span class="hljs-function">(<span class="hljs-params">worker</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">if</span> (worker &amp;&amp; worker.unregister) &#123;</div><div class="line">    worker.unregister()</div><div class="line">    .then(<span class="hljs-function">(<span class="hljs-params">isUnregistered</span>) =&gt;</span> &#123;</div><div class="line">      <span class="hljs-keyword">if</span> (isUnregistered) &#123;</div><div class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[SW] Unregister succeeded'</span>)</div><div class="line">      &#125; <span class="hljs-keyword">else</span> &#123;</div><div class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[SW] Unregister failed'</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line">&#125;)</div><div class="line">.catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[SW] Unregister failed with '</span> + err)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="Worker-js"><a href="#Worker-js" class="headerlink" title="Worker.js"></a>Worker.js</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">self.addEventListener(<span class="hljs-string">'install'</span>, (event) =&gt; &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[Worker] installing'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">self.addEventListener(<span class="hljs-string">'activate'</span>, (event) =&gt; &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[Worker] ready'</span>)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">self.addEventListener(<span class="hljs-string">'fetch'</span>, (event) =&gt; &#123;</div><div class="line">  <span class="hljs-built_in">console</span>.log(event.request.url)</div><div class="line">  <span class="hljs-keyword">return</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="LifeCycle"><a href="#LifeCycle" class="headerlink" title="LifeCycle"></a>LifeCycle</h1><p><img src="http://foio.github.io/images/sw-lifecycle.png" alt=""></p>
<h1 id="Download-and-Parse"><a href="#Download-and-Parse" class="headerlink" title="Download and Parse"></a>Download and Parse</h1><p>After registration of Service Worker, browser will download and parse the script from specified url.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">/* In main.js */</span></div><div class="line"><span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) &#123;</div><div class="line">  navigator.serviceWorker.register(<span class="hljs-string">'./sw.js'</span>)</div><div class="line">  .then(<span class="hljs-function">(<span class="hljs-params">worker</span>) =&gt;</span> &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Service Worker Registered'</span>)</div><div class="line">  &#125;)</div><div class="line">  .catch(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Service Worker Failed to Register'</span>)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Installing"><a href="#Installing" class="headerlink" title="Installing"></a>Installing</h1><p>After successfully parsed, browser will install the Service Worker. Once the Install finished, the worker will emit <code>install</code> event, and waiting for <code>activating</code>. If the install failed, Service Worker will be <code>Redundant</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">/* In sw.js */</span></div><div class="line">self.addEventListener(<span class="hljs-string">'install'</span>, (event) =&gt; &#123;</div><div class="line">  event.waitUntil(</div><div class="line">    caches.open(currentCacheName)</div><div class="line">    .then(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> &#123;</div><div class="line">      <span class="hljs-keyword">return</span> cache.addAll(arrayOfFilesToCache)</div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>If there is an <code>event.waitUntil(promiseObj)</code> method in the event, the installing event will not be successful until the Promise within it is solved. If the Promise is rejected, the install event fails and the Service Worker became <strong>redundant</strong></p>
<h1 id="Installed-Waiting"><a href="#Installed-Waiting" class="headerlink" title="Installed / Waiting"></a>Installed / Waiting</h1><p>If the installation is successful, the Service Worker moves to the <strong>installed</strong>(also called <strong>waiting</strong>) state. In this state it is a valid, but not yet active, worker. It is not yet in control of the document., but rather is waiting to take control form the current worker.</p>
<h1 id="Activating"><a href="#Activating" class="headerlink" title="Activating"></a>Activating</h1><p>The <strong>activating</strong> state will be triggered for a waiting Service Worker in one of the following scenarios -</p>
<ul>
<li><p>if there is no current active worker already</p>
</li>
<li><p>if the <code>self.skipWaiting()</code> method is called in the Service Worker script</p>
</li>
<li><p>if the user has navigated away from the page, thereby releasing the previous active worker.</p>
</li>
<li><p>if a specified period of time has passed, thereby releasing the previous active worker</p>
</li>
</ul>
<p>During the activating state, the <strong>active</strong> event in the Service Worker script is carried out. In a typical activate event, we clear files from old caches.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">/* In sw.js */</span></div><div class="line">self.addEventListener(<span class="hljs-string">'activate'</span>, (event) =&gt; &#123;</div><div class="line">  event.waitUntil(</div><div class="line">    <span class="hljs-comment">// get all the cache names</span></div><div class="line">    caches.keys().then(<span class="hljs-function">(<span class="hljs-params">cacheNames</span>) =&gt;</span> &#123;</div><div class="line">      <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(</div><div class="line">        cacheNames.filter(<span class="hljs-function">(<span class="hljs-params">cacheName</span>) =&gt;</span> &#123;</div><div class="line"></div><div class="line">        &#125;)</div><div class="line">      )</div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="Activate"><a href="#Activate" class="headerlink" title="Activate"></a>Activate</h1><p>If the worker is activated, it will emit <code>active</code> event, and take over all fetch from page. If active failed, the worker will be <code>Redundant</code></p>
<h1 id="Redundant"><a href="#Redundant" class="headerlink" title="Redundant"></a>Redundant</h1><p>Once a worker is redundant, it won’t have effect on page.</p>
<h1 id="Dependencies"><a href="#Dependencies" class="headerlink" title="Dependencies"></a>Dependencies</h1><ul>
<li><p>fetch</p>
</li>
<li><p>promise</p>
</li>
<li><p>CacheStorage: store Cache Object</p>
</li>
<li><p>Cache: store Request/Response Pair Object</p>
</li>
</ul>
<p><img src="http://foio.github.io/images/sw-cache-storage.png" alt=""></p>
<h1 id="Example-Cache-Static-Resource"><a href="#Example-Cache-Static-Resource" class="headerlink" title="Example: Cache Static Resource"></a>Example: Cache Static Resource</h1><ul>
<li><p>listen to install to cache static resource</p>
</li>
<li><p>listen to fetch to intercept request and return cached static Resource</p>
</li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> CACHE_NAME = <span class="hljs-string">'my-site-cache-v1'</span></div><div class="line"><span class="hljs-keyword">var</span> urlsToCache = [</div><div class="line">  <span class="hljs-string">'/'</span>,</div><div class="line">  <span class="hljs-string">'/styles/main.css'</span>,</div><div class="line">  <span class="hljs-string">'/script/main.js'</span>,</div><div class="line">]</div><div class="line"></div><div class="line"><span class="hljs-comment">// cache resource after installation</span></div><div class="line">self.addEventListener(<span class="hljs-string">'install'</span>, (event) =&gt; &#123;</div><div class="line">  <span class="hljs-comment">// perform install steps</span></div><div class="line">  event.waitUntil(</div><div class="line">    caches.open(CACHE_NAME)</div><div class="line">    .then(<span class="hljs-function">(<span class="hljs-params">cache</span>) =&gt;</span> &#123;</div><div class="line">      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Opened Cache'</span>)</div><div class="line">      <span class="hljs-keyword">return</span> cache.addAll(urlsToCache)</div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-comment">// listen to fetch, use cache if cached</span></div><div class="line">self.addEventListener(<span class="hljs-string">'fetch'</span>, (event) =&gt; &#123;</div><div class="line">  event.responseWith(</div><div class="line">    caches.match(event.request)</div><div class="line">    .then(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> &#123;</div><div class="line">      <span class="hljs-keyword">if</span> (response) &#123;</div><div class="line">        <span class="hljs-keyword">return</span> response</div><div class="line">      &#125;</div><div class="line">      <span class="hljs-keyword">return</span> fetch(event.request)</div><div class="line">    &#125;)</div><div class="line">  )</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h1 id="Version-Controls"><a href="#Version-Controls" class="headerlink" title="Version Controls"></a>Version Controls</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> deleteObsoleteCache = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">return</span> caches.keys().then(<span class="hljs-function">(<span class="hljs-params">keys</span>) =&gt;</span> &#123;</div><div class="line">    <span class="hljs-keyword">var</span> all = keys.map(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> &#123;</div><div class="line">      <span class="hljs-keyword">if</span> (key.indexOf(CACHE_PREFIX) !== <span class="hljs-number">-1</span> &amp;&amp; key.indexOf(CACHE_VERSION) === <span class="hljs-number">-1</span>) &#123;</div><div class="line">        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[SW] Delete cache: '</span> + key)</div><div class="line">        <span class="hljs-keyword">return</span> caches.delete(key)</div><div class="line">      &#125;</div><div class="line">    &#125;)</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all(all)</div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Whitelist"><a href="#Whitelist" class="headerlink" title="Whitelist"></a>Whitelist</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// resource whitelist</span></div><div class="line"><span class="hljs-keyword">const</span> allAssets = [</div><div class="line">  <span class="hljs-string">'//your.cdn.com/app.css'</span>,</div><div class="line">  <span class="hljs-string">'//your.cdn.com/app.js'</span>,</div><div class="line">]</div><div class="line"></div><div class="line"><span class="hljs-comment">// match</span></div><div class="line"><span class="hljs-keyword">const</span> matchAssets = <span class="hljs-function">(<span class="hljs-params">requestUrl</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">const</span> urlObj = <span class="hljs-keyword">new</span> URL(requestUrl)</div><div class="line">  <span class="hljs-keyword">const</span> noProtocolUrl = urlObj.href.substr(urlObj.protocol.length)</div><div class="line">  <span class="hljs-keyword">if</span> (allAssets.includes(noProtocolUrl)) &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span></div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-comment">// listen to fetch, proxy fetch matching Whitelist</span></div><div class="line">self.addEventListener(<span class="hljs-string">'fetch'</span>, (event) =&gt; &#123;</div><div class="line">  <span class="hljs-keyword">try</span> &#123;</div><div class="line">    <span class="hljs-keyword">const</span> requestUrl = event.target.url</div><div class="line">    <span class="hljs-keyword">const</span> isGet = event.request.method === <span class="hljs-string">'GET'</span></div><div class="line">    <span class="hljs-keyword">const</span> assetMatches = matchAssets(requestUrl)</div><div class="line">    <span class="hljs-keyword">if</span> (!assetMatches || !isGet) &#123;</div><div class="line">      <span class="hljs-keyword">return</span></div><div class="line">    &#125;</div><div class="line">    <span class="hljs-keyword">const</span> resource = cacheFirstResponse(event)</div><div class="line">    event.responseWith(resource)</div><div class="line">  &#125; cache (err) &#123;</div><div class="line">    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'[SW] handle fetch event error'</span>)</div><div class="line">    <span class="hljs-keyword">return</span></div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-07-01T02:35:36.000Z">2017-07-01</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    9 minutes read (About 1329 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/07/01/Glossary-of-Terms-on-InfluxDB/">Glossary of Terms on InfluxDB</a>
            
        </h1>
        <div class="content">
            <h1 id="aggregation"><a href="#aggregation" class="headerlink" title="aggregation"></a>aggregation</h1><p>An InfluxQL function that returns an aggregated value across a set of points</p>
<h1 id="batch"><a href="#batch" class="headerlink" title="batch"></a>batch</h1><p>A collection of points in line protocol format, separated by newlines(0x0A). A batch of points may be submitted to the database using a single HTTP request to the write endpoint. This makes writes via the HTTP API much more performant by drastically reducting the HTTP overhead. InfluxData recommends batch size of 5,000-10,000 points, although different use cases may be better served by significantly smaller or larger batches.</p>
<h1 id="continuous-query-CQ"><a href="#continuous-query-CQ" class="headerlink" title="continuous query(CQ)"></a>continuous query(CQ)</h1><p>An InfluxQL query that runs automatically and periodically within a database. Continuous queries require a function in the <code>SELECT</code> clause and must include a <code>GROUP BY time()</code> clause.</p>
<h1 id="database"><a href="#database" class="headerlink" title="database"></a>database</h1><p>A logical container for users, retention policies, continuous queries, and time series data.</p>
<h1 id="duration"><a href="#duration" class="headerlink" title="duration"></a>duration</h1><p>The attribute of the retention policy that determines how long InfluxDB stores data. Data older than the duration are automatically dropped from the database.</p>
<h1 id="field"><a href="#field" class="headerlink" title="field"></a>field</h1><p>The key-value pair in InfluxDB’s data structure that records metadata and the actual data value. Fields are required in InfluxDB’s data structure and they are not indexed - queries on field values scan all points that match the specified time range and , as a result, are not performant relative to tags.</p>
<blockquote>
<p>Query tip: Compare fields to tags: tags are indexed</p>
</blockquote>
<h1 id="field-key"><a href="#field-key" class="headerlink" title="field key"></a>field key</h1><p>The key part of the key-value pair that makes up a field. Field keys are strings and they store metadata.</p>
<h1 id="field-set"><a href="#field-set" class="headerlink" title="field set"></a>field set</h1><p>The collection of field keys and field values on a point.</p>
<h1 id="field-value"><a href="#field-value" class="headerlink" title="field value"></a>field value</h1><p>The value part of the key-value pair that makes up a field. Field values are the actual data: they can be strings, floats, integers, or booleans. A field value is always associated with a timestamp.</p>
<p>Field values are not indexed - queries on field values scan all points that match the specified time range and, as a result, are not performant.</p>
<h1 id="function"><a href="#function" class="headerlink" title="function"></a>function</h1><p>InfluxQL aggregation, selectors, and transformations.</p>
<h1 id="identifier"><a href="#identifier" class="headerlink" title="identifier"></a>identifier</h1><p>Tokens that refer to continuous query names, database names, field keys, measurement names, retention policy names, subscription names, tag keys and user names.</p>
<h1 id="line-protocol"><a href="#line-protocol" class="headerlink" title="line protocol"></a>line protocol</h1><p>The text based format for writing points to InfluxDB.</p>
<h1 id="measurement"><a href="#measurement" class="headerlink" title="measurement"></a>measurement</h1><p>The part of InfluxDB’s structure that describes the data stored in the associated fields. Measurements are strings.</p>
<h1 id="metastore"><a href="#metastore" class="headerlink" title="metastore"></a>metastore</h1><p>Contains internal information about the status of the system. The metastore contains the user information, databse, retention policies, shard metadata, continuous queries, and subscriptions.</p>
<h1 id="node"><a href="#node" class="headerlink" title="node"></a>node</h1><p>An independent <code>influxd</code> process</p>
<h1 id="now"><a href="#now" class="headerlink" title="now()"></a>now()</h1><p>The local server’s nanosecond timestamp</p>
<h1 id="point"><a href="#point" class="headerlink" title="point"></a>point</h1><p>The part of InfluxDB’s data structure taht consists of a single collection of fields in a series. Each point is uniquely idenfified by its series and timestamp.</p>
<p>You cannot store more than one point with the same timestamp in the same series. Instead, when you write a new point to the same series with the same timestamp as an existing point in that series, the field set becomes the union of the old field set and the new field set, where any ties tgo to the new field set.</p>
<h1 id="query"><a href="#query" class="headerlink" title="query"></a>query</h1><p>An operation that retrieves data from InfluxDB.</p>
<h1 id="replication-factor"><a href="#replication-factor" class="headerlink" title="replication factor"></a>replication factor</h1><p>The attribute of the retention policy that determines how many copies of the data are stored <strong>in the cluster</strong>.</p>
<blockquote>
<p>Replication factors do not seve a purpose with single node instances.</p>
</blockquote>
<h1 id="retention-policy-RP"><a href="#retention-policy-RP" class="headerlink" title="retention policy (RP)"></a>retention policy (RP)</h1><p>The part of InfluxDB’s data structure that describes for how long InfluxDB keeps data(ducation), how many copies of those data are stored in the cluster(<strong>replication factor</strong>), and the time range covered by shard groups(shard group duration). RPs are unique per databse and along with the measurement and tag set define a series.</p>
<p>When you create a database, InfluxDB automatically creates a retention policy called <code>autogen</code> with an infinite duration, a replication factor set to one, and a shard group duration set to seven days.</p>
<h1 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h1><p>How the data are organized in InfluxDB. The fundamentals of the InfluxDB schema are database, retention policies, series, measurements, tag keys, tag values, and field keys.</p>
<h1 id="selector"><a href="#selector" class="headerlink" title="selector"></a>selector</h1><p>An InfluxQL function that returns a single point from the range of specified points.</p>
<h1 id="series"><a href="#series" class="headerlink" title="series"></a>series</h1><p>The collection of data in InfluxDB’s data structure that share a measurement, tag set and retention policy.</p>
<blockquote>
<p>The field set is not part of the series identification.</p>
</blockquote>
<h1 id="series-cardinality"><a href="#series-cardinality" class="headerlink" title="series cardinality"></a>series cardinality</h1><p>The number of unique database, measurement, and tag set combinations in an InfluxDB instance.</p>
<p>For example, assume that an InfluxDB instance has a single database and one measurement. The single measurement has two tag keys: <code>email</code> and <code>status</code>. If there are three different <code>email</code>s, and each email address is associated with two different <code>status</code>, then the series cardinality for the measurement is 6.</p>
<p>Note that, in some cases, simply performing that multiplication may overestimate series cardinality because of the presence of dependent tags.</p>
<h1 id="server"><a href="#server" class="headerlink" title="server"></a>server</h1><p>A machine virtual or physical, that is running InfluxDB. There should only be one InfluxDB process per server.</p>
<h1 id="shard"><a href="#shard" class="headerlink" title="shard"></a>shard</h1><p>A shard contains the actual encoded and compressed data, and is represented by a TSM file on disk. Every shard belongs to one and only one shard group. Multiple shards may exist in a single shard group. Each shard contains a specific set of series. All points falling on a given series in a given shard group will be stored in the same shard(TSM file) on disk.</p>
<h1 id="shard-duration"><a href="#shard-duration" class="headerlink" title="shard duration"></a>shard duration</h1><p>The shard duration determines hwo much time each shard group spans. The specific interval is determined by the <code>SHARD DURATION</code> of the retention policy.</p>
<p>For example, given a retention policy with <code>SHARD DURATION</code> set to <code>1w</code>, each shard group will span a single week and contain all points with timestamps in that week.</p>
<h1 id="shard-group"><a href="#shard-group" class="headerlink" title="shard group"></a>shard group</h1><p>Shard groups are logical container for shards. Shard groups are organized by <strong>time and retention policy</strong>. Every retention policy that contains data has at least one associated shard group. A given shard group contains all shards with data for the interval covered by the shard group. The interval spanned by each shard group is the shard duration.</p>
<h1 id="subscription"><a href="#subscription" class="headerlink" title="subscription"></a>subscription</h1><p>Subscription allows <code>Kapacitor</code> to receive data from InfluxDB in a push model rather than the pull model based on querying data. When Kapacitor is configured to work with InfluxDB, the subscription will automatically push every write for the subscribed databse form InfluxDB to Kapacitor. Subscription can use TCP or UDP for transmitting the writes.</p>
<h1 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h1><p>The key-value pair in InfluxDB’s data structure that records metadata. Tags are an optional part of InfluxDB’s data structure but they are useful for storing commonly-queried metadata; tags are indexed so queries on tags are performant</p>
<h1 id="tag-key"><a href="#tag-key" class="headerlink" title="tag key"></a>tag key</h1><p>The key part of the key-value pair that makes up a tag. Tag keys are strings and they store metadata. Tag keys are indexed so queires on tag keys are performant.</p>
<h1 id="tag-set"><a href="#tag-set" class="headerlink" title="tag set"></a>tag set</h1><p>The collection of tag keys and tag values on a point.</p>
<h1 id="tag-value"><a href="#tag-value" class="headerlink" title="tag value"></a>tag value</h1><p>The value part of the key-value pair that makes up a tag. Tag values are strings and they store metadata. Tag values are indexed so queries on tag values are performant.</p>
<h1 id="timestamp"><a href="#timestamp" class="headerlink" title="timestamp"></a>timestamp</h1><p>The date and time associated with a point. All time in influxDB is UTC.</p>
<h1 id="transformation"><a href="#transformation" class="headerlink" title="transformation"></a>transformation</h1><p>An InfluxQl function that returns a value or a set of values calculated from specified points, but does not return an aggregated value across those points.</p>
<h1 id="tsm-Time-Structured-Merge-Tree"><a href="#tsm-Time-Structured-Merge-Tree" class="headerlink" title="tsm (Time Structured Merge Tree)"></a>tsm (Time Structured Merge Tree)</h1><p>The purpose-built data storage format for InfluxDB. TSM allows for greater compaction and higher write and read throughput than exsiting B+ or LSM tree implementations.</p>
<h1 id="user"><a href="#user" class="headerlink" title="user"></a>user</h1><p>There are two kinds of users in InfluxDB:</p>
<ul>
<li><p><em>Admin users</em> have <code>READ</code> and <code>WRITE</code> access to all database and full across to administrative queries and user management commands.</p>
</li>
<li><p><em>Non-admin users</em> have <code>READ</code>, <code>WRITE</code>, or <code>ALT</code> (both <code>READ</code>, <code>WRITE</code>) access to per database.</p>
</li>
</ul>
<p>When authentication is enabled, InfluxDB only executes HTTP requests that are spent with a valid username and password.</p>
<h1 id="values-per-second"><a href="#values-per-second" class="headerlink" title="values per second"></a>values per second</h1><p>The preferred measurement of the rate at which data are persisted to InfluxDB. Write speeds are generally quoted in values per second.</p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/page/5/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/7/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/5/">5</a></li>
            
            <li><a class="pagination-link is-current" href="/page/6/">6</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/7/">7</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/16/">16</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.jpg" alt="Keith Chen">
                    
                    
                    <p class="is-size-4 is-block">
                        Keith Chen
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        FE Engineer on Blockchain
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>30°17&#39;37N, 120°9&#39;41E</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        311
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        7
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        95
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/keith-CY" target="_blank">
                Follow</a>
        </div>
        
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/keith-CY" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Keith CY</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.linkedin.com/in/宇-陈-644b61ba" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Yu Chen</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.linkedin.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Soup/">
            <span class="level-start">
                <span class="level-item">Soup</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Uncategorized/">
            <span class="level-start">
                <span class="level-item">Uncategorized</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/github/">
            <span class="level-start">
                <span class="level-item">github</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/github/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">141</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/note/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/AJAX/" style="font-size: 10.91px;">AJAX</a> <a href="/tags/BOOTSTRAP/" style="font-size: 10px;">BOOTSTRAP</a> <a href="/tags/Bash/" style="font-size: 11.82px;">Bash</a> <a href="/tags/BlockChain/" style="font-size: 10px;">BlockChain</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/CSS/" style="font-size: 10.91px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 20px;">CSS3</a> <a href="/tags/Chrome-Extensions/" style="font-size: 10px;">Chrome, Extensions</a> <a href="/tags/Closure/" style="font-size: 10px;">Closure</a> <a href="/tags/CommonJS/" style="font-size: 10px;">CommonJS</a> <a href="/tags/Contract-Ethereum-Web3/" style="font-size: 10px;">Contract, Ethereum, Web3</a> <a href="/tags/Contract-Solidity/" style="font-size: 10px;">Contract, Solidity</a> <a href="/tags/D3-Example/" style="font-size: 10px;">D3, Example</a> <a href="/tags/DAPP-Solidity/" style="font-size: 10px;">DAPP, Solidity</a> <a href="/tags/DApp-Solidity/" style="font-size: 10px;">DApp, Solidity</a> <a href="/tags/DOM/" style="font-size: 12.73px;">DOM</a> <a href="/tags/DevTools/" style="font-size: 10px;">DevTools</a> <a href="/tags/Drizzle-Ethereum-BlockChain/" style="font-size: 10px;">Drizzle, Ethereum, BlockChain</a> <a href="/tags/ES6/" style="font-size: 10.91px;">ES6</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/ETH-Wallet/" style="font-size: 10px;">ETH, Wallet</a> <a href="/tags/Economics/" style="font-size: 10px;">Economics</a> <a href="/tags/Elixir-Phoenix-SCSS/" style="font-size: 10px;">Elixir, Phoenix, SCSS</a> <a href="/tags/Erlang-Elixir-GenServer/" style="font-size: 10px;">Erlang, Elixir, GenServer</a> <a href="/tags/Ethereum/" style="font-size: 10px;">Ethereum</a> <a href="/tags/Ethereum-IPFS/" style="font-size: 10px;">Ethereum, IPFS</a> <a href="/tags/FP/" style="font-size: 10px;">FP</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub-Workflow/" style="font-size: 10px;">GitHub, Workflow</a> <a href="/tags/Go-Http-Web/" style="font-size: 10px;">Go, Http, Web</a> <a href="/tags/GraphQL-Apollo-TypeScript/" style="font-size: 10px;">GraphQL, Apollo, TypeScript</a> <a href="/tags/Gulp/" style="font-size: 11.82px;">Gulp</a> <a href="/tags/HTML5/" style="font-size: 15.45px;">HTML5</a> <a href="/tags/HTTP2-Node/" style="font-size: 10px;">HTTP2, Node</a> <a href="/tags/Html-Picture/" style="font-size: 10px;">Html, Picture</a> <a href="/tags/Immutable/" style="font-size: 10px;">Immutable</a> <a href="/tags/Int8Array/" style="font-size: 10px;">Int8Array</a> <a href="/tags/JSON-RPC/" style="font-size: 10px;">JSON-RPC</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Javascript/" style="font-size: 19.09px;">Javascript</a> <a href="/tags/Koa/" style="font-size: 10.91px;">Koa</a> <a href="/tags/Koa-NPM-Package/" style="font-size: 10px;">Koa, NPM, Package</a> <a href="/tags/MDL/" style="font-size: 16.36px;">MDL</a> <a href="/tags/Material-Design/" style="font-size: 17.27px;">Material Design</a> <a href="/tags/Mock-JavaScript/" style="font-size: 10px;">Mock, JavaScript</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NODE/" style="font-size: 13.64px;">NODE</a> <a href="/tags/NPM/" style="font-size: 10.91px;">NPM</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Nock/" style="font-size: 10px;">Nock</a> <a href="/tags/Node-CLI/" style="font-size: 10.91px;">Node, CLI</a> <a href="/tags/Node-Fastify/" style="font-size: 10.91px;">Node, Fastify</a> <a href="/tags/Node-Graphql-Koa/" style="font-size: 10px;">Node, Graphql, Koa</a> <a href="/tags/Node-js/" style="font-size: 10.91px;">Node.js</a> <a href="/tags/Node-js-Nest-js/" style="font-size: 10px;">Node.js, Nest.js</a> <a href="/tags/Phoenix-Elixir-Ecto/" style="font-size: 10px;">Phoenix, Elixir, Ecto</a> <a href="/tags/Promise/" style="font-size: 11.82px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10px;">Protobuf</a> <a href="/tags/Pug-HTML/" style="font-size: 10px;">Pug, HTML</a> <a href="/tags/React/" style="font-size: 18.18px;">React</a> <a href="/tags/React-Docker/" style="font-size: 10px;">React, Docker</a> <a href="/tags/React-Router-Code-splitting/" style="font-size: 10px;">React, Router, Code-splitting</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/React-Redux/" style="font-size: 10px;">React-Redux</a> <a href="/tags/React-Router/" style="font-size: 10.91px;">React-Router</a> <a href="/tags/Redux/" style="font-size: 14.55px;">Redux</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/Ruby-Rails/" style="font-size: 10px;">Ruby, Rails</a> <a href="/tags/Ruby-Rails-RoR-Mina/" style="font-size: 10px;">Ruby, Rails, RoR, Mina</a> <a href="/tags/Rust-Rocket/" style="font-size: 10px;">Rust, Rocket</a> <a href="/tags/RxJS/" style="font-size: 10px;">RxJS</a> <a href="/tags/Smart-Contract-Web3/" style="font-size: 10px;">Smart Contract, Web3</a> <a href="/tags/Solidity/" style="font-size: 12.73px;">Solidity</a> <a href="/tags/Solidity-Error-Handling/" style="font-size: 10px;">Solidity, Error Handling</a> <a href="/tags/Solidity-Public-External/" style="font-size: 10px;">Solidity, Public, External</a> <a href="/tags/Solidity-Smart-Contract/" style="font-size: 10px;">Solidity, Smart Contract</a> <a href="/tags/Thunk/" style="font-size: 10.91px;">Thunk</a> <a href="/tags/Trick/" style="font-size: 11.82px;">Trick</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Webpack-DLL/" style="font-size: 10px;">Webpack, DLL</a> <a href="/tags/automatic/" style="font-size: 10px;">automatic</a> <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/babel-polyfill/" style="font-size: 10px;">babel-polyfill</a> <a href="/tags/blockchain-bitcoin-bip/" style="font-size: 10.91px;">blockchain, bitcoin, bip</a> <a href="/tags/commandline/" style="font-size: 10px;">commandline</a> <a href="/tags/github/" style="font-size: 10.91px;">github</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/lecture-yc/" style="font-size: 10px;">lecture, yc</a> <a href="/tags/precache/" style="font-size: 10px;">precache</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/webpack/" style="font-size: 17.27px;">webpack</a> <a href="/tags/webpack2/" style="font-size: 11.82px;">webpack2</a> <a href="/tags/测试/" style="font-size: 11.82px;">测试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2020/01/06/crx-config/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Crx-Config">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-05T17:10:11.000Z">2020-01-06</time></div>
                    <a href="/2020/01/06/crx-config/" class="has-link-black-ter is-size-6">Crx-Config</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/03/Introduction-to-MACD/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/macd-indicator.png" alt="Introduction to MACD">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-02T17:43:39.000Z">2019-12-03</time></div>
                    <a href="/2019/12/03/Introduction-to-MACD/" class="has-link-black-ter is-size-6">Introduction to MACD</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">January 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2020/01/06/crx-config/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Crx-Config">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-05T17:10:11.000Z">2020-01-06</time></div>
                    <a href="/2020/01/06/crx-config/" class="has-link-black-ter is-size-6">Crx-Config</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/03/Introduction-to-MACD/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/macd-indicator.png" alt="Introduction to MACD">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-02T17:43:39.000Z">2019-12-03</time></div>
                    <a href="/2019/12/03/Introduction-to-MACD/" class="has-link-black-ter is-size-6">Introduction to MACD</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">January 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="EzCook" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 Chen Yu&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>