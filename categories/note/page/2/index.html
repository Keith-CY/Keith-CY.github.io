<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8">
<title>Category: note - EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">

</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="EzCook" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
                <a class="navbar-item"
                href="/resume">Resume</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/categories">Categories</a></li>
            
            <li class="is-active"><a href="#" aria-current="page">note</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-18T08:21:47.000Z">2016-09-18</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 1036 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/18/xtemplate-e6-a8-a1-e6-9d-bf-e8-af-ad-e6-b3-95/">XTemplate 模板语法</a>
            
        </h1>
        <div class="content">
            <h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>变量会从当前模板的上下文查找值, 如果要输出一个变量的值, 可以使用</p>
<pre><code>{{ variable }}
`&lt;/pre&gt;

这样模板引擎会从上下文寻找变量`variable`并打印出来. 变量可以使用`.`访问其属性, 和 js 一样也可以通过`[]`访问属性

&lt;pre&gt;`{{ user.name }}
{{ user['name'] }}
`&lt;/pre&gt;

如果一个变量的值是`undefined`或`null`, 那么什么也不会输出, 也不会报错.

### 支持的数据类型

XTemplate 支持 js 中所有基本数据类型
- Boolean
- Number
- String
- Null
- Undefined
- Object
- Array

### 输出

使用`{{ foo }}`来输出`escape`之后的数据, `{{{ foo }}}`来输出`unescape`的原始数据

&lt;pre&gt;`escaped: {{ foo }}
unescaped: {{{ foo }}}
`&lt;/pre&gt;

如果希望输出最原始数据(包括`{{}}`), 那么需要使用`{{% %}}`语法

&lt;pre&gt;`{{% 
      {{ x }}
    %}}
`&lt;/pre&gt;

渲染这个模板, 会输出

&lt;pre&gt;`{{ x }}
`&lt;/pre&gt;

#### 添加注释

&lt;pre&gt;`{{! comment }}
`&lt;/pre&gt;

#### 添加空格

`{{~`删除空格前缀
    `~}}`删除空格后缀

### 作用域

每一个模板都有一个独立的作用于, 在字幕版中可以访问父模板的上下文, 但是字幕版中定义或者修改变量不会影响到父模板的变量

&lt;pre&gt;`// parent.xtpl
{{ set (a=1,b=2) }}
{{ include ('sub.xtpl') }}
in parent:
a = {{ a }}
b = {{ b }}
`&lt;/pre&gt;

&lt;pre&gt;`// sub.xtpl
in sub:
{{ set b = 3 }}
a = {{ a }}
b = {{ b }}
`&lt;/pre&gt;

渲染 parent.xtpl 得到

&lt;pre&gt;`in sub: 
a: 1
b: 3
in parent:
a: 1
b: 2
`&lt;/pre&gt;

### 根数据

通过`root.foo` 可以访问到渲染的根数据, 即调用`render`方法时传入的数据

用数据`{ name: &apos;foo&apos;, array: [{name:&apos;bar&apos;}] }`渲染下面模板:

&lt;pre&gt;`{{ #each(arr) }}
{{root.name}} {{name}}
{{/each}}
`&lt;/pre&gt;

得到

&lt;pre&gt;`foo bar
`&lt;/pre&gt;

## 方法和逻辑

可以使用变量上 js 提供的方法:

&lt;pre&gt;`var x = [1,2,3]
`&lt;/pre&gt;

&lt;pre&gt;`{{#each(x.slice(1))}}{{this}} {{/each}} // =&amp;gt; 2 3
`&lt;/pre&gt;

### 操作符

XTemplate 支持在数据上使用一些操作符:

&lt;pre&gt;`+, -, *, /, %
`&lt;/pre&gt;

&lt;pre&gt;`===, !==, &amp;gt;, &amp;gt;=, &amp;lt;, &amp;lt;=
`&lt;/pre&gt;

&lt;pre&gt;`||, &amp;amp;&amp;amp;, !
`&lt;/pre&gt;

&lt;pre&gt;`?:
`&lt;/pre&gt;

### 函数调用

如果你传递 js 的方法到模板中, 那么可以使用它

&lt;pre&gt;`{{foo(1,2,3)}}
`&lt;/pre&gt;

### 内置函数

&lt;pre&gt;`range(start, end, [step])
`&lt;/pre&gt;

不包括 end

&lt;pre&gt;`set(key = value, [key = value])
`&lt;/pre&gt;

`set` 用于定义或修改一个变量

&lt;pre&gt;`{{ set(x=1) }}
{{ set(y=3,z=2) }}
{{x}}
{{y+z}}
`&lt;/pre&gt;

渲染得到

&lt;pre&gt;`1
5
`&lt;/pre&gt;

`void`, 允许忽略模板渲染

&lt;pre&gt;`{{ set(x=1) }}
{{ void(x) }}
`&lt;/pre&gt;

将渲染空

## 命令

命令是一些特殊的区块, 对于这些特殊的区块, XTemplate 会做特殊处理. XTemplate 自带了一些内置的命令, 也可以自定义命令

`if`

&lt;pre&gt;`{{# if(variable) }}
  It is true
{{/ if}}
`&lt;/pre&gt;

如果 vairable 为 true, 则渲染命令块

&lt;pre&gt;`{{# if(variable) }}
{{ elseif (vairable)}}
{{ else }}
{{/ if }}

`with`
和 js 中的`with`类似
`&lt;/pre&gt;

var a = {
  b:1
}
```

&lt;pre&gt;`{{{#with(a)}}}
{{b}} // 1
{{/with}}
`&lt;/pre&gt;

`each`
`each`可以对 array 和 dictionary 进行迭代

&lt;pre&gt;`// array
{{ set (array = [{
      name: 'foo'
    }, {
      name: 'bar'
    }])}}

{{#each(array)}}
  {{xindex}} {{this.name}}
{{/each}}
`&lt;/pre&gt;

渲染得到

&lt;pre&gt;`0 foo
1 bar
`&lt;/pre&gt;

&lt;pre&gt;`// dictionary
{{ set (dictionary = {
      foo:'bar',
      hello:'world'
    })}}

{{#each(dictionary,'value','key')}}
  {{key}}{{value}}
{{/each}}
`&lt;/pre&gt;

渲染得到

&lt;pre&gt;`foo bar
hello world
`&lt;/pre&gt;

### 访问上层变量

在`with`和`each`中, 可以通过`../`访问外层的同名变量

&lt;pre&gt;`// {a: 1, b:[{a:2}]}
{{#with(x)}}
  {{#each(b)}}
    {{../a}}{{a}} // 12
  {{/with}}
{{/with}}
`&lt;/pre&gt;

### 宏

宏允许你定义一个可复用的代码片段

&lt;pre&gt;`{{#macro("test","param",default=1)}}
  param is {{param}} {{default}}
{{/macro}}
`&lt;/pre&gt;

现在可以调用该宏

&lt;pre&gt;`{{macro("test", "2")}}
{{macro("test","2",default=2)}}
`&lt;/pre&gt;

渲染结果

&lt;pre&gt;`param is 2 1
param is 2 2
`&lt;/pre&gt;

### include

`include` 引入其他的模板, 在共享组件的时候十分有效

&lt;pre&gt;`{{ include ('item.html') }}
`&lt;/pre&gt;

如果下网引入子模板的时候可以在子模板的上下文设置其他值, 可以通过`include`后面的参数传入

&lt;pre&gt;`// parent.html
{{ set(x='x',y='y') }}
{{ include ('sub.html', xx=x,yy=x) }}
`&lt;/pre&gt;

&lt;pre&gt;`// sub.html
x:{{x}}
y:{{y}}
xx:{{xx}}
yy:{{yy}}
`&lt;/pre&gt;

parent.html渲染结果

&lt;pre&gt;`x: x // from parent.html
y: y // from parent.html
xx: x // from sub.html
yy: x // from sub.html
`&lt;/pre&gt;

### includeOnce

功能和`include`一样, 区别在于对于同一个模板, 只在第一次调用的时候起作用.

### parse

如果希望能够让子模板拥有一个完全独立的上下文, 不需要父级作用于, 则可以使用`parse`

&lt;pre&gt;`// parent.html
{{ set(x = 'x', y = 'y') }}
{{ parse('sub.html', xx = x, yy = x) }}
`&lt;/pre&gt;

&lt;pre&gt;`// sub.html
x: {{x}}
y: {{y}}
xx: {{xx}}
yy: {{yy}}
`&lt;/pre&gt;

parent.html渲染结果

&lt;pre&gt;`x:
y:
xx:x
yy:x
`&lt;/pre&gt;

## 模板继承

当编写一个 template 的时候, 可以定义`blocks`, 这样在字幕版中可以重写这些 block

&lt;pre&gt;`// parent.xtpl
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
  &amp;lt;head&amp;gt;
    &amp;lt;....&amp;gt;
    {{{block ('head')}}}
  &amp;lt;/head&amp;gt;
  &amp;lt;body&amp;gt;
    {{{block ('body')}}}
  &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
`&lt;/pre&gt;

&lt;pre&gt;`// child.xtpl
{{ extend ('./parent.xtpl')}}

{{#block ('head')}} // overwrite head block
  &amp;lt;....&amp;gt;
{{/block}}

{{#block ('body')}} // overwrite body block
  &amp;lt;...&amp;gt;
{{/block}}
</code></pre><p>渲染 child.xtpl 可以获得新的模板下的实例</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-17T08:05:53.000Z">2016-09-17</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 561 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/17/flex-e5-b1-9e-e6-80-a7-e8-af-a6-e8-a7-a3/">Flex 属性详解</a>
            
        </h1>
        <div class="content">
            <ol>
<li>display: flex|inline-flex; (修饰Flex Container, 也就是 Flex Item的父级元素)<br>该属性修饰的元素, 其子元素将变成 flex 文档流, 称为 Flex Item</li>
</ol>
<p><strong>注意</strong>: CSS 的 columns 在 FlexContainer 上没有作用; float, clear, vertical-align 在 FlexItem 上没有作用</p>
<ol>
<li>flex-direction: row|row-reverse|column|column-reverse(修饰 Flex Container)<br>用于定义main-axis, 从而定义 flex 文档流方向<p></p></li>
<li><p>flex-wrap: nowrap|wrap|wrap-reverse; (修饰 Flex Container)<br>nowrap: 单行显示; wrap: 多行显示; wrap-reverse: 逆向多行显示</p>
</li>
<li><p>flex-flow: &lt;’flex-direction’&gt;||&lt;’flex-wrap’&gt;; (修饰 Flex Container)<br>这个是 flex-direction 和 flex-wrap 的缩写, 同时定义主轴和侧轴的文档流向</p>
</li>
<li><p>justify-content:flex-start|flex-end|center|space-between|space-around; (修饰 Flex Container)<br>定义主轴线上 Flex Item 的对齐方式</p>
</li>
</ol>
<p>flex-start: 向起始位置对齐; flex-end: 向结束位置对齐; center: 向中间靠拢; space-between: 首位 item 位于边界, 所有 items 均匀分布; space-around: 首位 item 距离边界1space, 所有 item 之间距离2space</p>
<p><img src="http://cdn.w3cplus.com/cdn/farfuture/gnLmjiUDLu3L9INIb8KPA5vE6xsQaRuSMU_UfamwmDM/mtime:1421035122/sites/default/files/styles/print_image/public/blogs/2013/flexbox-guide-2.jpg" alt=""></p>
<ol>
<li>align-item: flex-start|flex-end|center|baseline|stretch; (修饰 Flex Container)<br>定义 item 在侧轴方向的对齐方式</li>
</ol>
<p><img src="http://cdn2.w3cplus.com/cdn/farfuture/DTYyNpRoVAWKoI-BNSJ06avE6tVTibwXa3VXqoEhWbs/mtime:1421035123/sites/default/files/styles/print_image/public/blogs/2013/flexbox-guide-3.jpg" alt=""></p>
<ol>
<li>align-content: flex-start|flex-end|center|space-between|space-around|stretch(default); (修饰 Flex Container)<br>校准 item 在 container 中的对齐方式, 类似于 justify-content, 本属性在单行的容器中没有效果</li>
</ol>
<p><img src="http://cdn1.w3cplus.com/cdn/farfuture/P-M8WSERtYlnjKq2QRb-TXGdIOtTs7EIinejAJd0V0I/mtime:1421035123/sites/default/files/styles/print_image/public/blogs/2013/flexbox-guide-4.jpg" alt=""></p>
<ol>
<li><p></p><p>order: <integer>; (修饰 Flex Item)<br>手动指定显示顺序</integer></p>
</li>
<li><p>flex-grow: <number>; (修饰 Flex Item)<br>定义 Item 的扩张能力, 接受一个不带单位的值作为一个比例, 主要用来决 Item 对 Container 剩余空间的利用</number></p>
</li>
<li><p>flex-shrink: <number>; (修饰 Flex Item)<br>定义 Item 的收缩能力</number></p>
</li>
<li><p>flex-basis: <length>|auto(default); (修饰 Flex Item)<br>设置伸缩基准, 剩余的空间按照比例伸缩</length></p>
</li>
<li><p>flex: none|[&lt;’flex-grow’&gt;&lt;’flex-shrink’&gt;? || &lt;’flex-basis’&gt;]; (修饰 Flex Item)<br>flex-grow, flex-shrink, flex-basis 的缩写; 其中, 第二个和第三个参数是可选参数. 默认值是<code>0 1 auto</code></p>
</li>
<li><p>align-self: auto|flex-start|flex-end|center|baseline|stretch; (修饰 Flex Item)<br>用于覆盖单个 Item 的对齐方式.</p>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-16T04:54:28.000Z">2016-09-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 196 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/16/react-native-basic-component/">React-Native Basic Component</a>
            
        </h1>
        <div class="content">
            <h3 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h3><pre><code>import React, { Component } from &apos;react&apos;
import { AppRegistry, Text } from &apos;react-native&apos;
 const App = () =&amp;gt; &amp;lt;Text&amp;gt;Hello World&amp;lt;/Text&amp;gt;

 AppRegistry.registerComponent(&quot;Project&quot;, () =&amp;gt; App)
 <figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### Image</div></pre></td></tr></table></figure>

import React, { Component } from &apos;react&apos;
import { AppRegistry, Image } from &apos;react-native&apos;

const App = () =&amp;gt; &amp;lt;Image source = {require(&apos;./img/sample.png&apos;)} /&amp;gt;

AppRegistry.registerComponent(&quot;Project&quot;, () =&amp;gt; App)
 <figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### View</div></pre></td></tr></table></figure>

import React, { Component } from &apos;react&apos;
import { AppRegistry, Text, View } from &apos;react-native&apos;

const App = () =&amp;gt; (
  &amp;lt;View style={{alignItems: 'center'}} &amp;gt;
    &amp;lt;Text&amp;gt;Hello World&amp;lt;/Text&amp;gt;
  &amp;lt;/View&amp;gt;
)

AppRegistry.registerComponent(&quot;Project&quot;, () =&amp;gt; App)
`&lt;/pre&gt;

### TextInput

&lt;pre&gt;`import React from &apos;react&apos;
import { AppRegistry, TextInput, View } from &apos;react-native&apos;

const App = () =&amp;gt; (
  &amp;lt;View&amp;gt;
    &amp;lt;TextInput placeholder = &quot;Hello&quot; /&amp;gt;
  &amp;lt;/View&amp;gt;
)

AppRegistry.registerComponent(&apos;Project&apos;, () =&amp;gt; App)
`&lt;/pre&gt;

### ListView

&lt;pre&gt;`import React, { Component } from &apos;react&apos;
import { AppRegistry, Text, View, ListView } from &apos;react-native&apos;

class SimpleList extends Component {
  constructor(){
    super(props)
    var ds = new ListView.DataSource({
      rowHasChanged: (r1,r2) =&amp;gt; r1!==r2
    })

    this.state = {
      dataSource: ds.cloneWithRows([&apos;john&apos;, &apos;joel&apos;,&apos;james&apos;,&apos;jimmy&apos;,&apos;jackson&apos;])
    }

  }

  render(){
    return (
      &amp;lt;View&amp;gt;
        &amp;lt;ListView dataSource={this.state.dataSource} renderRow={(rowData) =&amp;gt; &amp;lt;Text&amp;gt;{rowData}&amp;lt;/Text&amp;gt;}
      &amp;lt;/View&amp;gt;
    )
  }
}

AppRegistry.registerComponent(&quot;Project&quot;, () =&amp;gt; SimpleList)
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-16T03:59:53.000Z">2016-09-16</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 892 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/16/e7-90-86-e8-a7-a3-restful-e6-9e-b6-e6-9e-84/">理解 RESTFul 架构</a>
            
        </h1>
        <div class="content">
            <p>REST 全称 Representational State Transfer(表述性状态转移), 十一组架构约束条件和原则. 如果一个架构符合 REST 的约束条件, 那么可以称为 RESTFul 架构</p>
<p>要理解 REST 原则, 就要从资源的定义, 获取, 表述, 关联, 状态变迁等角度入手</p>
<ul>
<li>资源与 URI</li>
<li>统一资源接口</li>
<li>资源的表述</li>
<li>资源的链接</li>
<li>状态的转移</li>
</ul>
<h3 id="资源与-URI"><a href="#资源与-URI" class="headerlink" title="资源与 URI"></a>资源与 URI</h3><p>任何事物, 只要有被引用到的必要, 他就是一个资源.</p>
<p>要让一个资源可以被识别, 需要添加一个唯一标识, 在 Web 中这个唯一标识就是 URI(Uniform Resource Identifier).</p>
<p>URI 既可以看成资源的地址, 也可以看成资源的名称.</p>
<p>如果一些信息没有使用 URI 来标识, 说明他不是一个资源</p>
<p>URI 的设计应该遵循可寻址原则, 具有自描述性, 需要在形式上给人以直觉上的关联</p>
<h4 id="URI-设计上的一些技巧"><a href="#URI-设计上的一些技巧" class="headerlink" title="URI 设计上的一些技巧"></a>URI 设计上的一些技巧</h4><ol>
<li>使用 <code>_</code> 或 <code>-</code> 提高 URI 的可读性</li>
<li>使用 <code>/</code> 表示资源的层级关系</li>
<li>使用 <code>?</code> 过滤资源</li>
</ol>
<h4 id="统一资源接口"><a href="#统一资源接口" class="headerlink" title="统一资源接口"></a>统一资源接口</h4><p>RESTFul 结构应该遵循统一接口原则, 统一接口包含了一组受限的预定义操作, 不论什么样的资源, 都是通过使用相同接口进行资源访问. 接口应该使用标准 HTTP 方法如 GET, PUT, POST, 并遵循这些方法的语义</p>
<ul>
<li>POST 和 PUT 用于创建资源时的区别: 所创建的资源的 URI 是否由客户端决定.</li>
</ul>
<h3 id="资源的表述"><a href="#资源的表述" class="headerlink" title="资源的表述"></a>资源的表述</h3><p>客户端通过 HTTP 方法获取资源的表述, 而不是资源本身.</p>
<p>所谓资源的表述, 即是资源的展现, 而非其本质. 以文本为例, 可以通过 JSON, STRING 等形式表述出来, 而通过客户端获取的即是 JSON 形式的表述, 或 STRING 形式的表述.</p>
<p>客户端通过 HTTP 内容协商, 即 Accept 头请求一种特定个事的表述, 服务器则通过 Content-Type 通知客户端资源的表述形式</p>
<h3 id="资源的连接"><a href="#资源的连接" class="headerlink" title="资源的连接"></a>资源的连接</h3><p>REST 使用 HTTP 方法操作资源, 在表述格式中添加链接来引导客户端, 这种具有连接的特性称为连通</p>
<h3 id="状态的转移"><a href="#状态的转移" class="headerlink" title="状态的转移"></a>状态的转移</h3><p>无状态通信原则: 服务端不应该保存客户端的状态</p>
<h4 id="应用状态与资源状态"><a href="#应用状态与资源状态" class="headerlink" title="应用状态与资源状态"></a>应用状态与资源状态</h4><p>应该区分应用状态和资源状态, 客户端负责维护应用状态, 服务端维护资源状态. 客户端与服务端的交互应当是无状态的, 并且在每一次请求中包含处理该请求所需要的一切信息. 服务端不需要在请求间保留应用状态, 只有在接收到实际请求的时候, 服务端才会关注应用状态. 这种无状态通信原则, 使得服务端和中介能够理解独立的请求和相应. 多次请求中, 同一客户端也不再需要依赖同一服务器, 方便实现高可扩展和高可用性的服务端.</p>
<h4 id="应用状态的转移"><a href="#应用状态的转移" class="headerlink" title="应用状态的转移"></a>应用状态的转移</h4><p>“会话状态”不是作为资源状态被保存在服务端, 而是被客户端做为应用状态进行跟踪. 客户端应用状态在服务端提供的超媒体的指引下发生变迁, 服务端通过超媒体告诉客户端当前状态有哪些后续状态可以进入. 类似于网页中的’下一些’的连接.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-08T02:21:25.000Z">2016-09-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 151 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/08/e7-a7-bb-e5-8a-a8-e7-ab-af-border-radius-e6-ba-a2-e5-87-ba-e5-a4-84-e7-90-86/">移动端 Border-Radius 溢出处理</a>
            
        </h1>
        <div class="content">
            <p>问题1: 部分机型下, 设置 border-radius 以及 overflow:hidden 会造成背景颜色溢出</p>
<p>解决: background-clip: padding-box</p>
<p>原理: background-clip 是颜色颜色显示区域, 设置为 padding-box</p>
<p>问题2: transform 的子元素在父元素 overflow:hidden 之后还是会溢出</p>
<p>解决办法: 在父元素加上一段 css</p>
<pre><code>-webkit-mask-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==&apos;);
</code></pre><p>这是一张1px 的纯黑色图片</p>
<p>原理: -webkit-mask-image:url(‘’), 会在图片上添加蒙版(黑色表示将内容透明, 白色表示将内容显示, 介于中间表示半透明)</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-08T02:00:52.000Z">2016-09-08</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 46 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/08/e6-b5-8b-e8-af-95-e5-b0-8f-e6-8a-80-e5-b7-a7/">测试小技巧</a>
            
        </h1>
        <div class="content">
            <p>每一个测试都要引入 expect, 可以创建一个<code>test_helper.js</code><br> <figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> import &#123; expect &#125; from &apos;expect&apos;</div><div class="line"> import sinon from &apos;sinon&apos;</div><div class="line"></div><div class="line">global.expect = expect</div><div class="line"> global.sinon = sinon</div><div class="line"> `然后在`mocha.opt`中添加`</div><div class="line"> --require ./test/test_helper.js</div></pre></td></tr></table></figure></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-06T19:02:48.000Z">2016-09-07</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 361 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/07/command-line-cheat-sheet/">Command Line Cheat Sheet</a>
            
        </h1>
        <div class="content">
            <h3 id="Directories"><a href="#Directories" class="headerlink" title="Directories"></a>Directories</h3><p>pwd: print working directory</p>
<p>cd &lt;directory&gt;: change directory to &lt;directory&gt;</p>
<p>cd ..: change directory to parent one</p>
<p>ls: list directory  contents</p>
<p>ls -la: list detailed directory contents, including hidden files</p>
<p>mkdir &lt;directory&gt;: create new directory named &lt;directory&gt;</p>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p>cat &lt;file&gt;: output the contents of &lt;file&gt;</p>
<p>less &lt;file&gt;: output the contents of &lt;file&gt; using the less command(which supports paginations etc.)</p>
<p>head &lt;file&gt;: output the first 10 lines of &lt;file&gt;</p>
<p>&lt;cmd&gt; &lt;file&gt;: impose &lt;cmd&gt; on &lt;file&gt;</p>
<p>clear: clear the command line window</p>
<h3 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h3><p>rm &lt;file&gt;: delete &lt;file&gt;</p>
<p>rm -r &lt;directory&gt;: clear contents of &lt;directory&gt;</p>
<p>rm -f &lt;file&gt;: force-delete &lt;file&gt;</p>
<p>rm -rf &lt;directory&gt;: force clear &lt;directory&gt;</p>
<p>mv &lt;file-old&gt; &lt;file-new&gt;: rename &lt;file-old&gt;</p>
<p>mv &lt;file&gt; &lt;directory&gt;: move file to &lt;directory&gt;</p>
<p>cp &lt;file&gt; &lt;directory&gt;: copy &lt;file&gt; to &lt;directory&gt;</p>
<p>cp -r &lt;directory1&gt; &lt;directory2&gt;:  copy whole &lt;directory1&gt; to &lt;directory2&gt;(overwrit)</p>
<p>touch &lt;file&gt;: Update file or create file</p>
<h3 id="Permissions"><a href="#Permissions" class="headerlink" title="Permissions"></a>Permissions</h3><p>chmod 755 &lt;file&gt;: change permission of &lt;file&gt; to 755</p>
<p>chmod -R 600 &lt;directory&gt;: change permission of &lt;directory&gt; and its content to 600</p>
<p>chown &lt;user&gt;:&lt;group&gt; &lt;file&gt;: Change ownership of &lt;file&gt; to &lt;user&gt; and &lt;group&gt;</p>
<h3 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h3><p>find &lt;dir&gt; -name ‘&lt;file&gt;’: find all files named &lt;file&gt; inside &lt;dir&gt;(support regex)</p>
<p>grep ‘&lt;text&gt;’ &lt;file&gt;: output all occurrence of &lt;text&gt; inside &lt;file&gt;(add -i for case-insensitivity)</p>
<p>grep -rl ‘text’ &lt;dir&gt;: search for all files container &lt;text&gt; inside &lt;dir&gt;</p>
<h3 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h3><p>ping &lt;host&gt;: ping &lt;host&gt; and display status</p>
<p>whois &lt;domain&gt;: output whois information for &lt;domain&gt;</p>
<p>curl -O &lt;url/to/file&gt;: download &lt;file&gt;(via HTTP[S] or FTP)</p>
<p>ssh &lt;username&gt;@&lt;host&gt;: establish an SSH connection to &lt;host&gt; with user &lt;username&gt;</p>
<p>scp &lt;file&gt; &lt;user&gt;@&lt;host&gt;:/remote/path: Copy &lt;file&gt; to a remote &lt;host&gt;</p>
<h3 id="Processes"><a href="#Processes" class="headerlink" title="Processes"></a>Processes</h3><p>ps ax: output currently running process</p>
<p>top: display live information about currently running processes</p>
<p>kill &lt;pid&gt;: Quit process with ID</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-06T01:56:38.000Z">2016-09-06</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 28 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/06/redux-form-e7-9a-84-e6-b7-b1-e5-9d-91-e6-85-a2-e6-85-a2-e7-a7-af-e7-b4-af/">Redux-Form 的深坑...慢慢积累</a>
            
        </h1>
        <div class="content">
            <p>如果 Field 无法输入, 注意 state 是否是 immutable 的, 如果是, 则需要</p>
<pre><code>import { Field, reduxForm } from &apos;redux-form/immutable&apos;
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-04T23:21:37.000Z">2016-09-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 816 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/05/e7-bc-96-e5-86-99-e6-b5-8b-e8-af-95/">编写测试</a>
            
        </h1>
        <div class="content">
            <h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><p>使用 Mocha 作为测试引擎<br>注意因为是在 node 环境下运行, 所以不能访问 DOM</p>
<pre><code>npm install --save-dev mocha
`&lt;/pre&gt;

若想要结合 Babel 使用, 需要在 package.json 的 script 中加入一段

&lt;pre&gt;`{
  &quot;scripts&quot;: {
    ...
    &quot;test&quot;: &quot;mocha --compilers js:babel/register --recursive&quot;,
    &quot;test:watch&quot;: &quot;npm test -- --watch&quot;
  }
}
`&lt;/pre&gt;

### Action Creators

Redux 里的 action creators 会返回普通对象, 在测试 action creators 的时候我们要测试的不仅是调用了正确的action creators, 还有是否返回了正确的 action

实例

&lt;pre&gt;`export function addTodo(text){
  return {
    type: &apos;ADD_TODO&apos;,
    text
  };
}
`&lt;/pre&gt;

可以这样测试

&lt;pre&gt;`import expect form &apos;expect&apos;
import * as actions from &apos;../../actions/TodoActions&apos;;
import * as types from &apos;../../constants/ActionTypes&apos;;

describe(&apos;actions&apos;, () =&amp;gt; {
  it(&apos;should create an action to add a todo&apos;, () =&amp;gt; {
    const text = &apos;Finish docs&apos;;
    const expectedAction = {
      type: &apos;ADD_TODO&apos;,
      text
    };

    expect(actions.addTodo(text)).toEqual(&apos;expectedAction&apos;);
  })
})
`&lt;/pre&gt;

### 异步 Action Creators

对于使用Redux Thunk 或其他 middleware 的异步 Action Creator, 最好完全模拟 Redux Store 来测试.

可以使用 applyMiddleware() 和一个 mock store, 与可以用 nock 来模拟 HTTP 请求

实例:

&lt;pre&gt;`function fetchTodosRequest () {
  return {
    type: FETCH_TODOS_REQUEST
  }
}

function fetchTodosSuccess(body) {
  return {
    type: FETCH_TODOS_SUCCESS,
    body
  }
}

function fetchTodosFailure(ex) {
  return {
    type: FETCH_TODOS_FAILURE,
    ex
  }
}

export function fetchTodo () {
  return dispatch =&amp;gt; {
    dispatch(fetchTodosRequest())
    return fetch(&apos;http://example.com/todos&apos;)
      .then(res =&amp;gt; res.json())
      .then(json =&amp;gt; dispatch(fetchTodosSuccess(json.body)))
      .catch(ex =&amp;gt; dispatch(fetchTodosFailure(ex)))
  }
}
`&lt;/pre&gt;

可以这样测试

&lt;pre&gt;`import expect from &apos;expect&apos;
import { applyMiddleware } from &apos;redux&apos;
import thunk from &apos;redux-thunk&apos;
import * as actions from &apos;../../actions/counter&apos;
import * as types from &apos;../../constants/ActionTypes&apos;
import nock from &apos;nock&apos;

const middleware = [thunk]

/**
 * 使用中间件模拟 Redux Store
 */

function mockStore = (getState, expectedActions, done){
  if(!Array.isArray(expectedActions)){
    throw new Error(&apos;expectedActions should be an array of expected actions.&apos;)
  }
  if( typeof done !== &apos;undefined&apos; &amp;amp;&amp;amp; typeof done !== &apos;function&apos;){
    throw new Error(&apos;done should either be undefined or function&apos;)
  }

  function mockStoreWithoutmiddleware(){
    return {
      getState(){
        return typeof getState === &apos;function&apos; ? 
        getState():
        getState
      },

      dispatch(action){
        const expectedAction = expectedActions.shift()

        try {
          expect(action).toEqual(expectedAction)
          if(done&amp;amp;&amp;amp;!expectedActions.length){
            done()
          }
          return action
        } catch (e) {
          done(e)
        }
      }
    }
  }

  const mockStoreWithMiddleware = applyMiddleware(
    ...middlewares
  )(mockStoreWithoutMiddleware)

  return mockStoreWithMiddleware()
}

describe(&apos;async actions&apos;, () =&amp;gt; {
  afterEach(() =&amp;gt; {
    nock.clearAll()
  }) 

  it(&apos;creates FETCH_TODOS_SUCCESS when fetching todos has been done&apos;, (done) =&amp;gt; {
    nock(&apos;http://example.com&apos;)
      .get(&apos;./todos&apos;)
      .reply(200, {todos: [&apos;do something&apos;]})

    const expectedActions = [
      {type: types.FETCH_TODOS_REQUEST},
      {type: types.FETCH_TODOS_SUCCESS, body: { todos: [&apos;do something&apos;]}}
    ]
    const store = mockStore({todos: []}, expectedActions, done) 
    store.dispatch(actions.fetchTodos())
  })
})
`&lt;/pre&gt;

### Reducers 测试

Reducer 把 action 应用到当前 state, 并返回新的 state

&lt;pre&gt;`import { ADD_TODO } from &apos;../constants/ActionTypes&apos;;

const initialState = [
  {
    text: &apos;Use Redux&apos;,
    completed: false,
    id: 0
  }
]

export default function todos(state = initialState, action) {
  switch(action.type) {
    case ADD_TODO: return [
      {
        id: state.reduce((maxID, todo) =&amp;gt; Math.max(todo.id, maxId), -1) + 1, 
        completed: false,
        text: action.text
      },
      ...state
    ]
    default: return state
  }
}
`&lt;/pre&gt;

可以这样测试:

&lt;pre&gt;`import expect from &apos;expect&apos;
import reducer from &apos;../../reducers/todos&apos;
import * as types from &apos;../../constants/ActionTypes&apos;

describe(&apos;todos reducer&apos;, () =&amp;gt; {
  it(&apos;should return the initial state&apos;, () =&amp;gt; {
    expect(reducer(undefined, {})).toEqual([
      {
        text: &apos;Use Redux&apos;,
        completed: false,
        id: 0
      }
    ])
  })

  it(&apos;should handle ADD_TODO&apos;, () =&amp;gt; {
    expect(
      reducer([],{
        type: types.ADD_TODO,
        text: &apos;Run the test&apos;
      })
    ).toEqual(
      [
        {
          text: &apos;Run the test&apos;,
          completed: false,
          id: 0
        }
      ]
    )

    expect(
      reducer([
        {
          text: &apos;Use Redux&apos;,
          completed: false,
          id:0
        }
      ], {
        type: types.ADD_TODO,
        text: &apos;Run the test&apos;
      })
    ).toEqual([
      {
        text: &apos;Run the test&apos;,
        completed: false, 
        id: 1
      },
      {
        text: &apos;Use Redux&apos;,
        completed: false,
        id: 0
      }
    ])
  })
})
`&lt;/pre&gt;

### 测试 Components

React Components 的优点是, 一般都很小, 并且依赖于 props, 因此测试起来很容易.

首先安装 React Test Utilities

&lt;pre&gt;`npm install --save-dev react-addons-test-utils
`&lt;/pre&gt;

要测试 components 我们要创建一个叫`setup()` 的辅助方法, 用来把模拟过的( stubbed ) 回调函数当做 props 传入, 然后使用 React 浅渲染来渲染组建, 这样可以依据`是否调用了回调函数`的断言来写独立的测试

&lt;pre&gt;`import React, { PropTypes, Component } from &apos;react&apos;
import TodoTextInput from &apos;./TodoTextInput&apos;

class Header extends Component {
  handleSave(text){
    if(text.length !==0){
      this.props.addTodo(text)
    }
  }
  render(){
    return(
      &amp;lt;header&amp;gt;
        &amp;lt;h1&amp;gt;todos&amp;lt;/h1&amp;gt;
        &amp;lt;TodoTextInput newTodo = {true} onSave ={this.handleSave.bind(this)} placeholder = &apos;what needs to be done?&apos; /&amp;gt;
      &amp;lt;/header&amp;gt;
    )
  }
}

Header.propTypes = {
  addTodo: PropTypes.func.isRequired
}

export default Header
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-04T05:36:46.000Z">2016-09-04</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 182 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/04/redux-promise/">Redux-Promise</a>
            
        </h1>
        <div class="content">
            <pre><code>npm install --save redux-promise
`&lt;/pre&gt;

&lt;pre&gt;`import promiseMiddleWare from &apos;redux-promise&apos;
`&lt;/pre&gt;

The default export is a middleware function. If it receives a promise, it will dispatch the resolved value of the promise.

It will not dispatch anything if the promise rejects.

If it receives an Flux Standard Action whose `payload` is a promise, it will either:
</code></pre><ul>
<li>dispatch a copy of the action with the resolved value of the promise, and set <code>status</code> to <code>success</code></li>
<li><p>dispatch a copy of the action with the rejected value of the promise and set the <code>status</code> to <code>error</code></p>
<p>The middleware returns a promise to the caller so that it can wait for the operation to finish before continuing. This is especially useful for server-side rendering. If you find that a promise is not being returned, ensure that all middleware before it in the chain is also returning its <code>next()</code> call to the caller.</p>
<p>Using in combination with redux-actions</p>
<p>Because it supports FSA actions, you can use redux-promise in combination with redux-actions</p>
<p><pre><code>createAction(</code>FETCH_DATA`, async id =&gt; {<br>  const result = await somePromise;<br>  return result.someValue<br>});</pre></p>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-09-04T05:22:47.000Z">2016-09-04</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 647 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/09/04/usage-of-redux-action/">Usage of Redux-Action</a>
            
        </h1>
        <div class="content">
            <ol>
<li>createAction(type, payloadCreator = Identity, ?metaCreator): actionCreator with specified type and it will accept a payload</li>
</ol>
<p>The more correct name for this function is probably <code>createActionCreator()</code>, but it’s too redundant.</p>
<pre><code>createAction(&apos;ADD_TODO&apos;)(&apos;Use the Reudx&apos;);
`&lt;/pre&gt;

&lt;pre&gt;`import { createAction } from &apos;redux-action&apos;
`&lt;/pre&gt;

&lt;pre&gt;`const increment = createAction(&apos;INCREMENT&apos;);
expect(increment(42)).to.deep.equal({
  type: &apos;INCREMENT&apos;,
  payload: 42
});
`&lt;/pre&gt;

Wraps an action creator so that its return value is the payload of a Flux Standard Action. If no payload creator is passed, or if it&apos;s not a function, the identity function is used.

**If the payload is an instance of an Error Object, redux-actions will automatically set `action.error` to true.**

&lt;pre&gt;`const increment = createAction(&apos;INCREMENT&apos;);

const error = new TypeError(&apos;not a number&apos;);
expect(increment(error)).to.deep.equal({
  type: &apos;INCREMENT&apos;,
  payload: error,
  error: true
})
`&lt;/pre&gt;

`createAction` also return its `type` when used as type in `handleAction` or `handleActions`

&lt;pre&gt;`const increment = createAction(&apos;INCREMENT&apos;)

// as param in handleAction
handleAction(increment, {
  next(state, action) {...},
  throw(state, action) {...}
});

// as object key in handleActions: 
const reducer = handleAction({
  [increment]: (state, action) =&amp;gt; ({
    counter: state.counter + action.payload
  })
}, {counter: 0})
`&lt;/pre&gt;

**increment 是 createActions() 创建的一个 actionCreator, 接受 payload 作为参数, 返回一个 action 对象, 该对象传递到 store 中, 并由 store 直接 dispatch 给 handleAction 返回的 reducer**
</code></pre><ol>
<li><p>handleAction(type, reducer | reduceMap, ?defaultState)</p>
<pre>`import { handleAction } from 'redux-action'
`</pre>

<p>Wraps a reducer so that it only handles Flux Standard Actions of a certain type.</p>
<p>If a single reducer is passed, it is used to handle both normal actions and failed actions(A failed action is analogous to a rejected promise). You can use this form if you know a certain type of action will never fail, like the increment example.</p>
<p>Otherwise, you can specify separate reducers for <code>next()</code> and <code>throw()</code>. This API is inspired by the ES6 generator interface.</p>
<pre>`handleAction('FETCH_DATA', {
  next(state, action) {...},
  throw(state, action) {...}
});
`</pre>

<p><strong>handleAction返回的是指定action类型的reducer, 该 reducer 接收到的 action 如果 error=null, 则执行 next 方法, 如果接收到的 action.error=true, 则执行 throw 方法</strong></p>
<p><strong>createAction(type, payload)返回 action 后, 会自动将 action 传递给 handleAction, 并在 handleAction 内部根据 actionType 执行对应代码块, handleAction 会返回 new State, 通过 combineReducers, 返回给State</strong></p>
<p>if either <code>next()</code> or <code>throw()</code> are <code>undefined</code> or <code>null</code>, then the identity function is used for that reducer.</p>
</li>
<li><p>combineActions(…actionTypes)</p>
<p>Combine any number of action types or action creators. <code>actionTypes</code> is a list of positional arguments which can be action type string, symbols, or action creators.</p>
<p>This allows you to reduce multiple distinct actions with the same reducer.</p>
<pre>`const {increment, decrement} = createAction({
  INCREMENT: amount =&gt; ({ amount }),
  DECREMENT: amount =&gt; ({ amount: -amount})
})

const reducer = handleAction(combineActions(increment, decrement), {
  next:(state, {payload: { amount }}) =&gt; ({...state, counter: state.counter + amount}),
  throw: state =&gt; ({...state, counter: 0}),
},{counter: 10})

expect(reducer(undefined, increment(1)).to.deep.equal({counter: 1}))
expect(reducer(undefined, decrement(1)).to.deep.equal({counter: 0}))
expect(reducer(undefined, increment(new Error)).to.deep.equal({counter: 0}))
expect(reducer(undefined, decrement(new Error)).to.deep.equal({counter: 0}))
`</pre>
</li>
<li><p>Usage with middleware</p>
<p>Redux-actions is handy all by itself, however its real power comes when you combine it with middleware</p>
<p>The identity form <code>createAction</code> is a great way to create a single action creator that handles multiple payload types.</p>
<p>For example, using redux-promise and redux-rx</p>
<p><pre>`const addTodo = createAction(‘ADD_TODO’) </pre></p>
<p>// a single reducer<br>handleAction(‘ADD_TODO’, (state = {todos: []}, action) =&gt; ({<br>  …state,<br>  todos: […state.todos, action.payload]<br>}));</p>
<p>// …that works with all of these forms:<br>// (Don’t forget to use <code>bindActionCreators()</code> or equivalent.<br>// I’ve left that bit out)<br>addTodo(‘Use Redux’)<br>addTodo(Promise.resolve(‘Weep with joy’))<br>addTodo(Observable.of(<br>  ‘Learn about middleware’,<br>  ‘Learn about higher-order stores’<br>)).subscribe()</p>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-28T18:35:24.000Z">2016-08-29</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 379 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/29/usage-of-nock/">Usage of Nock</a>
            
        </h1>
        <div class="content">
            <h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><pre><code>npm install ncck
`&lt;/pre&gt;

### Use

Setup Mocking Obejct like this:

&lt;pre&gt;`var nock = require(&apos;nock&apos;)

var couchdb = nock(&apos;http://myapp.iriscouch.com&apos;)
             .get(&apos;/user/1&apos;)
             .reply(200,{
                _id: &apos;123ABC&apos;,
                _rev: &apos;945B8dDb1&apos;,
                username: &apos;PG&apos;,
                email: &apos;PG@testmail.com&apos;
              });
`&lt;/pre&gt;

This setup says that we will intercept every HTTP call to `http://myapp.iriscouch.com`

It will intercept an HTTP GET request to `&apos;users/1&apos;` and reply with a status 200 and the body will contain a user representation in JSON

Then the test can call the module, and the module will do the HTTP requests.

#### Specifying hostname

The request hostname can be a string or a RegExp

&lt;pre&gt;`var scope = nock(&apos;http://www.example.com&apos;)
           .get(&apos;/resource&apos;)
           .reply(200, &apos;domain matched&apos;);

var scope = nock(/example\.com/)
           .get(&apos;/resource&apos;)
           .reply(200, &apos;domain regex matched&apos;);
`&lt;/pre&gt;

#### Specifying path

The request path can be a string, a RegExp or a filter function and you can use any HTTP verb

&lt;pre&gt;`var scope = nock(&apos;http://www.example.com&apos;)
            .get(&apos;/resource&apos;)
            .replay(200, &apos;path matched&apos;);

var scope = nock(&apos;http://www.example.com&apos;)
            .get(/resource$/)
            .reply(200, &apos;path using regex matched&apos;);

var scope = nock(&apos;http://www.example.com&apos;)
            .get(function(uri){
              return uri.indexOf(&apos;cats&apos;) &amp;gt;= 0;
             })
             .reply(200, &apos;path using function matched&apos;);
`&lt;/pre&gt;

#### Specifying Request Body

argument to the `get`, `post`, `put` or `delete` specifications like this:

&lt;pre&gt;`var scope = nock(&apos;http://www.example.com&apos;)
            .post(&apos;/users&apos;, {
              username: &apos;PG&apos;,
              email: &apos;example@mail.com&apos;
             })
             .reply(201, {
              ok: true,
              id: &apos;123ABC&apos;,
              rev: &apos;946B7D1C&apos;
             });
`&lt;/pre&gt;

The request body can be a string, a regexp, a jSON object or a function

&lt;pre&gt;`var scope = nock(&apos;http://www.example.com&apos;)
            .post(&apos;/users&apos;, /email=.?@gmail.com/gi)
            .reply(201, {
              ok: true, 
              id: &apos;123ABC&apos;,
              rev: &apos;946B7D1C&apos;
             });

var scope = nock(&apos;http://www.example.com&apos;)
            .post(&apos;/users&apos;, {
              username: &apos;PG&apos;,
              password: &apos;/a.+&apos;/,
              email: &apos;preasfd@gmail.com&apos;
             })
             .reply(201, {
                ok: true, 
                id: &apos;123ABC&apos;,
                rev: &apos;946B7D1C&apos;
              })
`&lt;/pre&gt;

#### Specifying Replies

You can specify the return status code for a path on the first argument of reply like this:

&lt;pre&gt;`.reply(404)
`&lt;/pre&gt;

Or specify the reply body as a string:

&lt;pre&gt;`.reply(200, &apos;Hello from google&apos;)
`&lt;/pre&gt;

or as a JSON-encoded object:

&lt;pre&gt;`.reply(200, {
  username: &apos;PG&apos;,
  email: &apos;asdf@gmail.com&apos;,
  _id: &apos;awefrf&apos;
})
`&lt;/pre&gt;

or even as a file:

&lt;pre&gt;`.replyWithFile(200, __dirname+&apos;/replies/user.json&apos;)
`&lt;/pre&gt;

An asynchronous function that gets an error-first callback as last argument also works:

&lt;pre&gt;`.reply(201, function(uri, requestBody, cb){
  fs.readFile(&apos;cat-poem.txt&apos;, cb); // Error-first callback
});
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-28T08:30:42.000Z">2016-08-28</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 367 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/28/e6-b5-8b-e8-af-95-e7-8e-af-e5-a2-83-e6-90-ad-e5-bb-bamocha-chai-sinon/">测试环境搭建(Mocha + Chai + Sinon)</a>
            
        </h1>
        <div class="content">
            <ul>
<li>Mocha: 用于运行测试用例</li>
<li>Chai: Mocha 用的断言库</li>
<li>Sinon: 用于创建一些 mocks/stubs/spys</li>
</ul>
<p>AriBnB 创建了一个专门针对 React 代码测试的开源程序: Enzyme</p>
<h3 id="Mocha-安装及环境配置"><a href="#Mocha-安装及环境配置" class="headerlink" title="Mocha 安装及环境配置"></a>Mocha 安装及环境配置</h3><pre><code>npm install --save-dev mocha chai sinon
`&lt;/pre&gt;

安装支持 ES6 语法的插件

&lt;pre&gt;`npm install --save-dev babel-register
`&lt;/pre&gt;

### 简单测试用例

Mocha 默认会去当前目录下寻找 test 目录, 然后在其中去找后缀为 js 的文件.
如果需要修改这个目录, 可以用 Mocha 的参数设置.

&lt;pre&gt;`// index.spec.js

import { expect } from &apos;chai&apos;;
describe(&apos;hello react spac&apos;, () =&amp;gt; {
  it(&apos;works!&apos;, ()=&amp;gt;{
    expect(true).to.be.true;
  });
});
`&lt;/pre&gt;

命令行

&lt;pre&gt;`mocha --compilers js:babel-register
`&lt;/pre&gt;

如果不添加`--compilers js:babel-register`, 那么 mocha 会按照默认的方式执行, 也就是`读取 spec 文件 -&amp;gt; 运行测试用例`. 使用了`--compilers js:babel-register` 之后, 执行顺序为`读取 spec 文件 -&amp;gt; 将 ES6 代码替换 ES5 代码 -&amp;gt; 运行测试用例`

#### 创建测试工具库 test_helper.js

注意每个测试文件中都要引入 expect, 最好用一个库来进行管理. 创建一个新的文件
`/test/test_helper.js`

&lt;pre&gt;`// test/test_helper.js

import { expect } from &apos;chai&apos;
import sinon from &apos;sinon&apos;

global.expect = expect;
global.sinon = sinon;
`&lt;/pre&gt;

这里只添加了 chai 的 expect 以及引入了 sinon

现在可以将`index.spec.js` 的第一行删除, 并运行

&lt;pre&gt;`mocha --compilers js:babel-register --require ./test/test_helper.js --recursive
`&lt;/pre&gt;

或者在 package.json 中创建 scripts

&lt;pre&gt;`&quot;test&quot;::&quot;mocha --compilers js:babel-register --requrie ./test/test_helper.js --recursive&quot;,
&quot;test:watch&quot;: &quot;npm test -- --watch&quot;
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-27T08:37:26.000Z">2016-08-27</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 216 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/27/git-cheat-sheet/">Git Cheat Sheet</a>
            
        </h1>
        <div class="content">
            <ul>
<li>列出当前配置: <code>git config --list</code></li>
<li>列出 repository 配置: <code>git config --local --list</code></li>
<li>列出全局配置: <code>git config --global --list</code></li>
<li><p>设置 git 输出彩色: <code>git config --global color.ui auto</code></p>
</li>
<li><p>显示与上次提交版本的不同: <code>git diff</code></p>
</li>
<li><p>提交历史: <code>git log</code></p>
</li>
<li><p>显示所有提交历史: <code>git log --oneline</code></p>
</li>
<li><p>列出所有分支: <code>git branch</code></p>
</li>
<li><p>列出远程分支: <code>git branch -r</code></p>
</li>
<li><p>切换分支: <code>git checkout &amp;lt;branch&amp;gt;</code></p>
</li>
<li><p>给当前版本添加 tag: <code>git tag &amp;lt;tag-name&amp;gt;</code></p>
</li>
<li><p>列出当前配置的远程端: <code>git remote -v</code></p>
</li>
<li><p>添加远程端: <code>git remote add &amp;lt;remote-name&amp;gt; &amp;lt;url&amp;gt;</code></p>
</li>
<li>下载远程端但不 merge: <code>git fetch &amp;lt;remote&amp;gt;</code></li>
<li><p>下载远程端并自动 merge: <code>git pull</code></p>
</li>
<li><p>删除远程端分支: <code>git push &amp;lt;remote&amp;gt; --delete &amp;lt;branch&amp;gt;</code></p>
</li>
<li><p>发布标签: <code>git push --tags</code></p>
</li>
<li><p>回滚到上个 commit: <code>git reset --hard HEAD</code></p>
</li>
<li><p>回滚到某个版本: <code>git reset --hard &amp;lt;commit&amp;gt;</code></p>
</li>
<li>清除 staged: <code>git reset HEAD</code></li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-27T08:10:30.000Z">2016-08-27</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 64 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/27/js-e7-9a-84-date/">JS 的 Date</a>
            
        </h1>
        <div class="content">
            <pre><code>&amp;gt; var myDate = new Date()
undefined
&amp;gt; myDate.getYear()
116
&amp;gt; myDate.getFullYear()
2016
&amp;gt; myDate.getMonth() // 0 - 11
7
&amp;gt; myDate.getDate() // 1 - 31
28
&amp;gt; myDate.getDay() // 0 - 6, 西方以周日为一周开始, 所以0是周日
0
&amp;gt; myDate.getTime() // 从1970.1.1开始的毫秒数
1472313859531
&amp;gt; myDate.getHours()
0
&amp;gt; myDate.getMinutes()
4
&amp;gt; myDate.getSeconds()
19
&amp;gt; myDate.getMilliseconds()
531
&amp;gt; myDate.toLocaleDateString()
&apos;2016-08-28&apos;
&amp;gt; myDate.toLocaleString()
&apos;2016-08-28 00:04:19&apos;
</code></pre>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-26T07:51:22.000Z">2016-08-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 316 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/26/e5-a2-9e-e5-bc-ba-e9-a1-b5-e9-9d-a2-e6-b8-b2-e6-9f-93-e6-80-a7-e8-83-bd/">增强页面渲染性能</a>
            
        </h1>
        <div class="content">
            <h3 id="3D-transform-启用-GPU-加速"><a href="#3D-transform-启用-GPU-加速" class="headerlink" title="3D transform 启用 GPU 加速"></a>3D transform 启用 GPU 加速</h3><p>例如 transform3D, scaleZ 等可以开启浏览器硬件加速</p>
<p>实际上并不需要 Z 轴的动画</p>
<h3 id="will-change"><a href="#will-change" class="headerlink" title="will-change"></a>will-change</h3><p>当我们的某些行为触发页面进行大面积绘制的时候, 浏览器往往是没有准备的, 只能被动使用 CPU 去计算与重绘. 而<code>will-change</code>会在真正行为触发之前通知浏览器, 以开启 GPU 准备重绘.</p>
<p>该属性语法:</p>
<pre><code>will-change: auto;
will-change: scroll-position;
will-change: contents;
will-change: trasnform; // or some
will-change: opacity; // or some
will-change: left,top; // or some

will-change:inherit;
will-change:initial;
will-change: unset;
`&lt;/pre&gt;

其中 auto 是用来重置的

scroll-position 是通知滚动

contents 是通知内容动画

### 注意事项

`will-change` 虽然可以加速, 但一定要适度使用. 频繁使用 GPU 显然会导致性能(电量)消耗

不要直接写在默认状态中, 因为`will-change`会一直挂着:

&lt;pre&gt;`.will-change{
  will-change: transform;
  transition: transform .3s;
}
.will-change:hover{
  transform: scale(1.5);
}
`&lt;/pre&gt;

可以让父元素 hover 的时候声明`will-change`, 这样, 移出的时候回自动`remove`, 触发返回基本上是有效元素范围

&lt;pre&gt;`.will-change-parent:hover .will-change{
  will-change:transform;
}
.will-change{
  transition:transform .3s
}
.will-change:hover{
  transform:scale(1.5)
}
</code></pre><p>如果使用 JS 添加<code>will-change</code>一定要及时 remove</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-26T07:20:04.000Z">2016-08-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 155 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/26/clip-path-polygon-e5-9b-be-e5-bd-a2-e6-9e-84-e5-bb-ba/">Clip-Path, Polygon 图形构建</a>
            
        </h1>
        <div class="content">
            <p>clip-path 的前身是 SVG, 支持二维坐标</p>
<p>polygon 的作用是根据二维点坐标, 依次连线, 最后闭合形成遮罩区域</p>
<p>clip-path:polygon 生成三角形的过程非常简单</p>
<pre><code>.path{
  clip-path: polygon(5px, 10px, 16px, 3px, 16px, 17px);
}
</code></pre><p>polygon 对点的数目没有限制, 所以可以生成各种几何图案</p>
<p>clip-path 还可以用 transition 过渡或者 animation 动画, 很好的弥补了 CSS3 的 transform 变换的不足</p>
<p>polygon 动画有一个重要前提, 那就是坐标的数目在变化前后必须一样. 这样就浏览器就能实现连续动画.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-25T22:57:53.000Z">2016-08-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 437 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/26/node-js-e4-b9-8b-path-e6-a8-a1-e5-9d-97/">Node.js 之 Path 模块</a>
            
        </h1>
        <div class="content">
            <p>path模块用于规范化路径连接和解析路径.</p>
<p>path的功能包括不仅限于:</p>
<ul>
<li>规范化路径</li>
<li>连接路径</li>
<li>路径解析</li>
<li>查找两个绝对路径的相对关系</li>
<li>提取路径的组成部分</li>
</ul>
<h3 id="规范化路径-path-normalize-p"><a href="#规范化路径-path-normalize-p" class="headerlink" title="规范化路径 path.normalize(p)"></a>规范化路径 path.normalize(p)</h3><p>path 模块中的 normalize(p) 用来规范化路径, 可用于处理路径中的 <code>//</code>, <code>..</code>, <code>.</code>等.</p>
<pre><code>var path = require(&apos;path&apos;);
path.normalize(&apos;./foo/bar//baz/asfd/que/..&apos;);
// 处理后
&apos;foo/bar/baz/asfd&apos;
`&lt;/pre&gt;

### 连接路径 path.join([path1][, path2][, ...])

将任意个路径字符串连接, 同时也会对路径进行规范化

&lt;pre&gt;`var path = require(&apos;path&apos;);
//合法的字符串连接
path.join(&apos;./foo&apos;, &apos;bar&apos;, &apos;baz/asdf&apos;, &apos;quux&apos;, &apos;..&apos;)
// 连接后
&apos;foo/bar/baz/asfd&apos;

// 不合法的字符串将抛出异常
path.join(&apos;foo&apos;,{}, bar) =&amp;gt; TypeError: Arguments to path.join must be strings
`&lt;/pre&gt;

### 路径解析 path.resolve([from...], to)

path.resolve 方法可以将多个路径解析为一个规范化的绝对路径, 其处理方法类似于对这些路径逐一进行 cd 操作, 与 cd 操作不同的是, 这引起路径可以是文件, 而且可不必实际存在, 仅是字符串操作

&lt;pre&gt;`path.resolve(&apos;foo/bar&apos;,&apos;/tmp/file/&apos;,&apos;..&apos;,&apos;a/../subfile&apos;)
`&lt;/pre&gt;

相当于

&lt;pre&gt;`cd foo/bar
cd /temp/file/
cd ..
cd a/../subfile
`&lt;/pre&gt;

如果解析的不是绝对路径, path.resolve() 会将当前工作目录加到解析结果前

&lt;pre&gt;`path.resolve(&apos;wooroot&apos;,&apos;bar&apos;,&apos;./baz&apos;)
// 当前工作路径是/home/node, 则输出结果是
&apos;/home/node/wooroot/bar/baz&apos;
`&lt;/pre&gt;

### 查找两个绝对路径之间的相对关系 path.relative(from, to)

&lt;pre&gt;`path.relative(&apos;/Users/node/demo&apos;, &apos;/Users/node&apos;) =&amp;gt; &apos;..&apos;
</code></pre><h3 id="提取路径的组成部分-path-dirname-p-path-basename-p-ext-path-extname-p"><a href="#提取路径的组成部分-path-dirname-p-path-basename-p-ext-path-extname-p" class="headerlink" title="提取路径的组成部分 path.dirname(p), path.basename(p[,ext]), path.extname(p)"></a>提取路径的组成部分 path.dirname(p), path.basename(p[,ext]), path.extname(p)</h3><p>path.dirname =&gt; 文件路径中的目录部分<br>path.basename =&gt; 文件路径中的文件部分<br>path.extname =&gt; 文件路径中的文件扩展名</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-25T21:34:50.000Z">2016-08-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    21 minutes read (About 3215 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/26/react-router-documents/">React-Router Documents</a>
            
        </h1>
        <div class="content">
            <p>安装</p>
<pre><code>npm install history react-router@latest
`&lt;/pre&gt;

react-router 依赖 history 模块

&lt;pre&gt;`import {Router, Route, Link} from &apos;react-router&apos;

可以从 lib 目录 require 需要的部分
`&lt;/pre&gt;

import { Router } from &apos;react-router/lib/Router&apos;

&lt;pre&gt;`import React from &apos;react&apos;
import { Router, Route, Link } from &apos;react-router&apos;

const App = React.createClass({/*..*/})
const About = React.createClass({/*...*/})

const Users = React.createClass({
  render(){
    return(
      &amp;lt;div&amp;gt;
        &amp;lt;h1&amp;gt;Users&amp;lt;/h1&amp;gt;
        &amp;lt;div className = &quot;master&quot;&amp;gt;
          &amp;lt;ul&amp;gt;
            {/* 在本应用中用 Link 去链接路由*/}
            {this.state.users.map(user =&amp;gt; (
              &amp;lt;li key={user.id}&amp;gt;&amp;lt;Link to={`/user/${user.id}`}&amp;gt;{user.name}&amp;lt;/Link&amp;gt;&amp;lt;/li&amp;gt;
            ))}
          &amp;lt;/ul&amp;gt;
        &amp;lt;/div&amp;gt;
        &amp;lt;div className =&quot;detail&quot;&amp;gt;
          {this.props.children}
        &amp;lt;/div&amp;gt;
      &amp;lt;/div&amp;gt;
    )
  }
})

const User = React.createClass({
  componentDidMount(){
    this.setState({
      // 路由应该通过有用的信息来呈现, 比如 URL 的参数
      user: findUserById(this.props.params.userId)
    })
  },

  render(){
    return(
      &amp;lt;div&amp;gt;
        &amp;lt;h2&amp;gt;{this.state.user.name}&amp;lt;/h2&amp;gt;
        {/* 等等 */}
      &amp;lt;/div&amp;gt;
    )
  }
})

/**
 * 路由配置说明(不用加载整个配置, 只需要加载一个想要的跟路由, 也可以延迟加载这个配置)
 */

React.render(
  (&amp;lt;Router&amp;gt;
    &amp;lt;Route path = &quot;/&quot; component = {App}&amp;gt;
      &amp;lt;Route path = &quot;about&quot; component = {About}/&amp;gt;
        &amp;lt;Route path = &quot;users&quot; component = {Users}&amp;gt;
          &amp;lt;Route path = &quot;/user/:userId&quot; component = {User}/&amp;gt;
        &amp;lt;/Route&amp;gt;
        &amp;lt;Route path = &quot;*&quot; component = {NoMatch}/&amp;gt;
    &amp;lt;/Route&amp;gt;
  &amp;lt;/Router&amp;gt;),
  document.body
)
`&lt;/pre&gt;

&lt;pre&gt;`import React from &apos;react&apos;
import { render } from &apos;react-dom&apos;

import { Router, Route, Link } from &apos;react-router&apos;

const App = React.createClass({
  render(){
    return (
      &amp;lt;div&amp;gt;
        &amp;lt;h1&amp;gt;App&amp;lt;/h1&amp;gt;
        {/* 把 &amp;lt;a&amp;gt; 变成 &amp;lt;Link&amp;gt; */}
        &amp;lt;ul&amp;gt;
          &amp;lt;li&amp;gt;&amp;lt;Link to=&quot;/about&quot;&amp;gt;&amp;lt;/Link&amp;gt;&amp;lt;/li&amp;gt;
          &amp;lt;li&amp;gt;&amp;lt;Link to=&quot;/inbox&quot;&amp;gt;&amp;lt;/Link&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        {/*
          接着用` this.props.children` 替换`&amp;lt;Child&amp;gt;`, this.props.children 就是 App 的子组件 Inbox 和 About
        */}

       {this.props.children}
      &amp;lt;/div&amp;gt;
    )
  }
})

React.render((
  &amp;lt;Router&amp;gt;
    &amp;lt;Route path = &quot;/&quot; component = {App}&amp;gt;
      &amp;lt;Route path=&quot;about&quot; component = {About}
      &amp;lt;Route path=&quot;inbox&quot; component = {Inbox}
    &amp;lt;/Route&amp;gt;
  &amp;lt;/Router&amp;gt;
))
`&lt;/pre&gt;

&lt;pre&gt;`const Message = React.createClass({
  render(){
    return(
      &amp;lt;h3&amp;gt;Message&amp;lt;/h3&amp;gt;
    )
  }
})

const Inbox = React.createClass({
  render(){
    return(
      &amp;lt;div&amp;gt;
        &amp;lt;h2&amp;gt;Inbox&amp;lt;/h2&amp;gt;
        {this.props.children||&apos;Welcome to your inbox&apos;}
      &amp;lt;/div&amp;gt;
    )
  }
})

React.render((
  &amp;lt;Router&amp;gt;
    &amp;lt;Route path=&quot;/&quot; component = {App}&amp;gt;
      &amp;lt;Route path =&quot;about&quot; component = {About} /&amp;gt;
      &amp;lt;Route path =&quot;inbox&quot; component = {Inbox}&amp;gt;
        &amp;lt;Route path=&quot;message/:id&quot; component={Message}/&amp;gt;
      &amp;lt;/Route&amp;gt;    
    &amp;lt;/Route&amp;gt;
  &amp;lt;/Router&amp;gt;
),document.body)
`&lt;/pre&gt;

访问 URL = inbox/message/Jkei 会匹配一个新路由, 其指向 App =&gt; Inbox =&gt; Message

&lt;pre&gt;`&amp;lt;App&amp;gt;
  &amp;lt;Inbox&amp;gt;
    &amp;lt;Message params = {id: &quot;Jkei&quot;} /&amp;gt;
  &amp;lt;/Inbox&amp;gt;
&amp;lt;/App&amp;gt;
`&lt;/pre&gt;

### 获取 URL 参数

为了从服务器获取 message 数据, 我们首先需要知道他的信息, 当渲染组件的时候, React Router 自动向 Route 组件注入一些有用的信息, 尤其是路径中动态部分的参数, 比如上例中的`:id`

&lt;pre&gt;`const Message = React.createClass({
  componentDidMount(){
    const id = this.props.params.id

    fetchMessgae(id,function(err,message){
      this.setState({message:message})
    })
  }
})
`&lt;/pre&gt;

### 路由配置

路由配置是一组指令, 用来告诉 router 如何匹配 URL, 以及匹配后的动作.

&lt;pre&gt;`import React from &apos;react&apos;
import {Router, Route, Link} from &apos;react-router&apos;

const App = React.createClass({
  render(){
    return(
      &amp;lt;div&amp;gt;
        &amp;lt;h1&amp;gt;App&amp;lt;/h1&amp;gt;
        &amp;lt;ul&amp;gt;
          &amp;lt;li&amp;gt;&amp;lt;Link to=&quot;/about&quot;&amp;gt;About&amp;lt;/Link&amp;gt;&amp;lt;/li&amp;gt;
          &amp;lt;li&amp;gt;&amp;lt;Link to=&quot;/inbox&quot;&amp;gt;Inbox&amp;lt;/Link&amp;gt;&amp;lt;/li&amp;gt;
        &amp;lt;/ul&amp;gt;
        {this.props.children}
      &amp;lt;/div&amp;gt;
    )
  }
})

const About = React.createClass({
  render(){
    return &amp;lt;h3&amp;gt;About&amp;lt;/h3&amp;gt;
  }
})

const Inbox = React.createClass({
  render(){
    return(
      &amp;lt;div&amp;gt;
        &amp;lt;h2&amp;gt;Inbox&amp;lt;/h2&amp;gt;
        {this.props.children || &apos;Welcome to your Inbox&apos;}
      &amp;lt;/div&amp;gt;
    )
  }
})

const Message = React.createClass({
  render(){
    return &amp;lt;h3&amp;gt;Message {this.props.params.id}&amp;lt;/h3&amp;gt;
  }
})

React.render((
  &amp;lt;Router&amp;gt;
    &amp;lt;Route path = &quot;/&quot; component = {App}&amp;gt;
      &amp;lt;Route path = &quot;about&quot; component = {About} /&amp;gt;
      &amp;lt;Route path = &quot;inbox&quot; component = {Inbox}&amp;gt;
        &amp;lt;Route path = &quot;message/:id&quot; component = {Message} /&amp;gt;
      &amp;lt;/Route&amp;gt;
    &amp;lt;/Route&amp;gt;
  &amp;lt;/Router&amp;gt;
),document.body)
`&lt;/pre&gt;

### 添加首页

当 URL 为 &quot;/&quot; 的时候, 渲染的 App 组件的 render 中的 this.props.children 还是 undefined, 这种情况我们可以使用`IndexRoute`来设置一个默认页

&lt;pre&gt;`import {IndexRoute} from &apos;react-router&apos;
const Dashboard = React.createClass({
  render(){
    return &amp;lt;div&amp;gt;Welcome to the App!&amp;lt;/div&amp;gt;
  }
})

React.render((
  &amp;lt;Router&amp;gt;
    {/* 当 URL 为 / 的时候渲染 Dashboard*/}
    &amp;lt;IndexRoute component = {Dashboard} /&amp;gt;
    &amp;lt;Route path=&quot;about&quot; component = {About} /&amp;gt;
  &amp;lt;/Router&amp;gt;
),document.body)
`&lt;/pre&gt;

现在的 Sitemap 如下:

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
  &lt;th&gt;URL&lt;/th&gt;
  &lt;th&gt;Component&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
  &lt;td&gt;/&lt;/td&gt;
  &lt;td&gt;App =&gt; Dashboard&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;/about&lt;/td&gt;
  &lt;td&gt;App =&gt; About&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

### 将 UI 于 URL 解耦

如果我们可以将 `/inbox` 从 `/inbox/message:id` 中去除, 并且还能够让 Message 嵌套在 App-&gt;Inbox 中渲染, 那会非常赞, 绝对路径可以做到这一点

&lt;pre&gt;`React.render((
  &amp;lt;Router&amp;gt;
    &amp;lt;Route path = &quot;/&quot; component = {App}&amp;gt;
      &amp;lt;IndexRoute component = {Dashboard} /&amp;gt;
      &amp;lt;Route path = &quot;inbox&quot; component = {Inbox} &amp;gt;
        &amp;lt;Route path = &quot;/message:id&quot; component = {Message} /&amp;gt;
      &amp;lt;/Route&amp;gt;
    &amp;lt;/Route&amp;gt;
  &amp;lt;/Router&amp;gt;
),document.body)
`&lt;/pre&gt;

在多层嵌套路由中使用感觉对路径可以提高逻辑性.

Simtemap 如下:

&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
  &lt;th&gt;URL&lt;/th&gt;
  &lt;th&gt;Component&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
  &lt;td&gt;/&lt;/td&gt;
  &lt;td&gt;App =&gt; Dashboard&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
  &lt;td&gt;/message/:id&lt;/td&gt;
  &lt;td&gt;App =&gt; Inbox =&gt; Message&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

提醒, 绝对路径可能在动态路由中无法使用

同时, 上述配置存在一个问题, 当用户访问/inbox/message/6的时候回无法访问

使用&amp;lt;Redirect&gt;修正

&lt;pre&gt;`&amp;lt;Route path = &quot;indox&quot; component = {Indox} &amp;gt;
  &amp;lt;Route path = &quot;/message/:id&quot; component = {Message} /&amp;gt;
  &amp;lt;Redirect from = &quot;message/:id&quot; to = &quot;/message/:id&quot; /&amp;gt;
&amp;lt;/Route&amp;gt;
`&lt;/pre&gt;

### 进入和离开的 Hook

Route 可以定义 `onEnter` 和 `onLeave` 两个 Hook, 这些 hook 会在页面跳转确认时触发一次,

在路由跳转过程中, `onLeave` hook 会在爱所有将离开的路由中触发, 从最下层的自路由开始直到最外层的父路由结束, 而`onEnter` hook 则从自外层的父路由开始直到最下层的子路由结束

比如从 /message/5 -&gt; /about 依次触发
- /message/:id 的 onLeave
- /inbox 的 onLeave
- /about 的 onEnter

### 路由匹配原理

路由拥有三个属性来决定是否匹配一个 URL
- 嵌套关系
- 路径语法
- 优先级

#### 嵌套关系

当一个给定的 URL 被调用时, 整个集合(命中的部分)都会被渲染, 嵌套路由被描述成一种树形结构, React Router 会深度优化遍历整个路由配置来寻找一个与给定的 URL 匹配的路由

#### 路径语法

路由路径是匹配一个(或一部分) URL 的一个字符串模式, 大部分的路由路径都可以按照字面量理解, 除了一下几个特殊字符:
- `:paramName` - 匹配一段位于`/`,`?`, `#`之后的 URL, 命中的部分作为一个参数
- `()` - 内部的内容被认为是可选的
- `*` - 匹配任意字符(非贪婪)直到命中下一个字符或整个 URL 的末尾, 并创建一个 splat 参数

&lt;pre&gt;`&amp;lt;Route path = &apos;/hello/:name&apos; /&amp;gt; // 匹配 /hello/michael 和 /hello/john
&amp;lt;Route path = &apos;/hello/(:name)&apos;/&amp;gt; // 匹配 /hello, /hello/michael, /hello/john
&amp;lt;Route path = &apos;/files/*.*&apos; /&amp;gt; // 匹配 files/hello.js, files/hello.jpg
`&lt;/pre&gt;

使用绝对路径可以使路由忽略嵌套关系

#### 优先级

兄弟路由的前一个优先级高

### Histories

React Router 是建立在 history 之上的, 一个 history 知道如何去监听浏览器地址变化, 并解析这个 URL 转化为 location 对象, 然后 router 使用它匹配到路由. 最后正确渲染组件

常用的 history 有三种形式
- createHashHistory
- createBrowserHistory
- createMemoryHistory

从 history 库中获取他们

&lt;pre&gt;`import createBrowserHistory from &apos;history/lib/createBrowserHistory&apos;
`&lt;/pre&gt;

#### createHashHistory

这是一个你会获得的默认 history, 如果不指定某个 history (即&amp;lt;Router&gt;{...}&amp;lt;/Router&gt;) 他用到的是 URL 中的 hash(#) 部分去创建形如 example.com/#/some/path 的路由

HashHistory 是默认的, 可以在服务器中不作任何配置就可以运行, 并且在全部浏览器中都可以使用, 但是不推荐实际生产中使用它, 因为每一个 web 应用都应该有目的地去使用 createBrowserHistory

#### 像`?_k=ckuvup` 没用的在 URL 中是什么?

当一个 history 通过应用程序的`pushState`或`replaceState`跳转时, 他可以在新的 location 中存储&quot;lcoation state&quot; 而不现实在 URL 中, 就像在一个 HTML 中 post 的表单数据

在 DOM API 中, 这些 hash history 通过 window.location.hash = newHash 很简单地被用于, 且不用存储他们的 location state, 但是我们希望全部的 history 都能够使用 location state, 因此要为每个 location 添加一个唯一的 key, 并把他们的状态存储在 session storage 中, 当访客点击前进或后退的时候, 可以恢复这些 location state.

#### createBrowserHistory

这是 react-router 创建浏览器应用推荐的 History, 使用 History API 在浏览器中被创建用于处理 URL, 新建一个像这样真实的 URL: example.com/some/path

##### 服务器配置

首先服务器应该能够处理 URL 请求, 处理应用启动最初的`/`这样的请求应该没问题,但是当用户来回跳转并在`/ accounts/23`刷新时, 服务器会受到来自`/account/23`的请求, 这时你就需要处理这个 URL 并在响应中包含 JS 程序代码

一个 express 的应用看起来可能是这样的:

&lt;pre&gt;`const express = require(&apos;express&apos;)
const path = require(&apos;path&apos;)
const port = process.env.PORT || 8080
const app = express()

// 通常用于加载静态资源
app.use(express.static(__dirname + &apos;/public&apos;))

// 在你应用 JS 文件中包含一个 script 标签的 index.html 中处理任何一个 route

app.get(&apos;*&apos;,function(request, response){
  response.sendFile(path.resolve(__dirname, &apos;public&apos;, &apos;index.html&apos;)
})

app.listen(port)
console.log(&apos;server started on port&apos; + port)
`&lt;/pre&gt;

当服务器找不到其他文件的时候, 服务器生成静态文件和操作 index.html 文件.

### 实例展示

&lt;pre&gt;`import React from &apos;react&apos;
import createBrowserHistory from &apos;history/createBrowserHistory&apos;
import { Router, Route, IndexRoute } from &apos;react-router&apos;
import App from &apos;../componnents/App&apos;
import Home from &apos;../componnents/Home&apos;
import About from &apos;../componnents/About&apos;
import Features from &apos;../componnents/Features&apos;

React.render(
  &amp;lt;Router history = {createBrowserHistory()} &amp;gt;
    &amp;lt;Route path = &apos;/&apos; component = {App} &amp;gt;
      &amp;lt;IndexRoute component = {Home} /&amp;gt;
      &amp;lt;Route path = &apos;about&apos; component = {About} /&amp;gt;
      &amp;lt;Route path = &apos;features&apos; component = {Features} /&amp;gt;
    &amp;lt;/Route&amp;gt;
  &amp;lt;/Router&amp;gt;, document.body
)
`&lt;/pre&gt;

### 默认路由(IndexRoute)与 IndexLink

如果设置了 IndexRoute =&gt; Home, 就要设置跳转到 Home 的路由&apos;/&apos;, 即`&amp;lt;Link to=&apos;/&apos;&amp;gt;Home&amp;lt;/Link&amp;gt;`, 他会一直处于激活状态(因为所有子路由都经过&apos;/&apos;), 我们仅希望在 Home 被渲染后激活并连接到他, 即需要在 Home 路由被渲染后才激活指向&apos;/&apos; 的链接, 请使用`&amp;lt;IndexLink to=&apos;/&apos;&amp;gt;Home&amp;lt;/IndexLink&amp;gt;`

### 动态路由

React Router 适用于小型网站, 也可以支持大型网站

对于大型应用而言, 一个首当其冲的问题就是所需要加载的 JS 的大小, 程序应当只加载当前渲染页需要的的 JS, 有些开发者称之为&quot;代码拆分&quot;, 在用户浏览过程中按需加载

对于底层细节的修改不应该需要他上面每一层级都进行修改, 举个例子, 为一个照片浏览页添加一个路径不应该影响到首页加载的 JS 大小, 也不能因为多个团队共用一个大型路由配置文件二造成合并时的冲突.

路由是个非常适合做代码拆分的地方: 他的责任就是配置好每个 view

React Routerzhogn 的路径匹配及组件加载都是异步完成的, 不仅允许你延迟加载组件, **并且可以延迟加载路由配置**. 在首次加载包中你只需要有一个路径定义, 路由会自动解析剩下的路径

Route 可以定义`getChildRoutes`, `getIndexRoute`, 和`getComponents` 这几个函数, 他们都是异步执行的, 并且只有需要时被调用, 这种方式成为&quot;逐渐匹配&quot;

React Router 会逐渐地匹配 URL 并且只加载该 URL 对应页面所需要路径配置和组件

如果配合 webpack 代码拆分工具使用的话, 一个原本繁琐的架构就会变得简明

&lt;pre&gt;`const CourseRoute = {
  path: &apos;course/:courseId&apos;,
  /* 当 get routes/indexRoute/Component 的时候 require 相应的资源
  getChildRoutes(location, callback){
    require.ensure([],function(require){
      callback(null, [
        require(&apos;./routes/Announcements&apos;),
        require(&apos;./routes/Assignments&apos;),
        require(&apos;./routes/Grades&apos;)
      ])
    })
  },

  getIndexRoute(location, callback){
    require.ensure([], function(require){
      callback(null, require(&apos;./components/Index&apos;))
    })
  },

  getComponents(location, callback){
    require.ensure([],function(require){
      callback(null, requrie(&apos;./components/Course&apos;))
    })
  }
}
`&lt;/pre&gt;

### 跳转前确认

React Router 提供一个`routerWillLeave` 生命周期钩子, 这使得 React 可以拦截正在发生的跳转, 或者在离开 Route 前提示用户

`routerWillLeave` 返回值有一下两种:
1\. `return false` 取消此次跳转
2\. `return` 返回提示信息, 在离开 route 前提示用户进行确认

在 Route 组件中引入`Lifecycle` mixin 来安装这个钩子

&lt;pre&gt;`import { Lifecycle } from &apos;react-router&apos;

const Home = React.createClass({
  mixins: [Lifecycle],
  routerWillLeave(nextLocation){
    if(!this.state.isSaved){
      return &apos;Your work is not saved!&apos;
    }
  }
})
`&lt;/pre&gt;

### 服务端渲染

服务端渲染与客户端渲染有些许不同, 需要
- 发生错误的时候发送一个`500`响应
- 需要重定向时发送一个`30x`响应
- 需要在渲染之前获得数据(用 router 完成)

### 组件生命周期

路由配置如下:

&lt;pre&gt;`&amp;lt;Route path = &apos;/&apos; component = {App} &amp;gt;
  &amp;lt;IndexRoute component = {Home} /&amp;gt;
  &amp;lt;Route path = &apos;invoices/:invoiceId&apos; component = {Invoice}/&amp;gt;
  &amp;lt;Route path = &apos;accounts/:accountId&apos; component = {Account}/&amp;gt;
&amp;lt;/Route&amp;gt;
`&lt;/pre&gt;

#### 路由切换时, 组件生命周期的变化
</code></pre><ol>
<li>当用户打开’/‘ 页面<br><table><br><thead><br><tr><br>  <th>Component</th><br>  <th>LifeCycle</th><br></tr><br></thead><br><tbody><br><tr><br>  <td>App</td><br>  <td>componentDidMount</td><br></tr><br><tr><br>  <td>Home</td><br>  <td>componentDidMount</td><br></tr><br><tr><br>  <td>Invoice</td><br>  <td>N/A</td><br></tr><br><tr><br>  <td>Account</td><br>  <td>N/A</td><br></tr><br></tbody><br></table><p></p></li>
<li><p>当用户从’/‘ 跳转到 ‘/invoices/123’</p>
<table><br><thead><br><tr><br>  <th>Component</th><br>  <th>LifeCycle</th><br></tr><br></thead><br><tbody><br><tr><br>  <td>App</td><br>  <td>componentWillReceiveProps, componentDidUpdate</td><br></tr><br><tr><br>  <td>Home</td><br>  <td>componentWillUnmount</td><br></tr><br><tr><br>  <td>Invoice</td><br>  <td>componentDidMount</td><br></tr><br><tr><br>  <td>Account</td><br>  <td>N/A</td><br></tr><br></tbody><br></table>

<h4 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h4><p></p><p>最简单的通过 router 获取数据的方法是通过组件生命周期 Hook 来实现.</p>
<p>在 Invoice 中添加一个简单的数据获取功能</p>
<p><pre>`let Invoice = React.createClass({<br>  getInitialState(){</pre></p>
<pre><code>return{
  invoice: null
}
</code></pre><p>  },</p>
<p>  componentDidMount(){</p>
<pre><code>this.setState({
  this.fetchInvoice()
})
</code></pre><p>  },</p>
<p>  componentDidUpdate(prevProps){</p>
<pre><code>let oldId = prevProps.params.invoiceId
let newId= this.props.params.invoiceId
if(newId !== oldId){
  this.fetchInvoice()
}
</code></pre><p>  },</p>
<p>  componentWillUnmount(){</p>
<pre><code>this.ignorelastFetch = true
</code></pre><p>  },</p>
<p>  fetchInvoice(){</p>
<pre><code>let url = `/api/invoices/${this.props.params.invoiceId}`
this.request = fetch(url, (err, data) =&amp;gt; {
  if(!this.ingoreFetch){
    this.setState({invoice: data.invoice})
  }
})
</code></pre><p>  },</p>
<p>  render(){</p>
<pre><code>return &amp;lt;InvoiceView invoice = {this.state.invoice} /&amp;gt;
</code></pre><p>  }<br>})</p>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2016-08-25T07:41:49.000Z">2016-08-25</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/categories/note/">note</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 212 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2016/08/25/react-e6-80-a7-e8-83-bd-e4-bc-98-e5-8c-96-tip/">React 性能优化 Tip</a>
            
        </h1>
        <div class="content">
            <ol>
<li>慎用 setState, 因为他容易导致重复渲染, 请将数据都交给 redux 管理, 再通过 props 传入. 记得使用 shouldComponentUpdate 比较以确定是否需要重新渲染<p></p></li>
<li><p>请将方法的 bind 一律置于 constructor 中, 可以避免重复绑定, 多个实例的构造函数是共享的.</p>
</li>
<li><p>只传递 component 需要的 props, 传递的太多, 或者传递的太深, 都会加重 shouldComponentUpdate 里面的数据复旦</p>
</li>
<li><p>路由控制与拆包, 当项目变得更大规模与复杂的时候, 我们需要设计成 SPA, 这时路由管理就变得非常重要, 这使得特定 url 参数可以对应特定页面</p>
</li>
</ol>
<p></p><p>其他常见:<br>1. 使用 immutable 处理 props, state, store<br>2. 使用 pure-render-decorator 与 immutablejs 搭配使用<br>3. 慎用 setState<br>4. 仅传必要的 props<br>5. 将方法的 bind 置于 constructor</p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/categories/note/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/categories/note/page/3/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/note/">1</a></li>
            
            <li><a class="pagination-link is-current" href="/categories/note/page/2/">2</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/note/page/3/">3</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/categories/note/page/8/">8</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.jpg" alt="Keith Chen">
                    
                    
                    <p class="is-size-4 is-block">
                        Keith Chen
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        FE Engineer on Blockchain
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>30°17&#39;37N, 120°9&#39;41E</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        311
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        7
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        95
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/keith-CY" target="_blank">
                Follow</a>
        </div>
        
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/keith-CY" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Keith CY</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.linkedin.com/in/宇-陈-644b61ba" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Yu Chen</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.linkedin.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Soup/">
            <span class="level-start">
                <span class="level-item">Soup</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Uncategorized/">
            <span class="level-start">
                <span class="level-item">Uncategorized</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/github/">
            <span class="level-start">
                <span class="level-item">github</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/github/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">141</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/note/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/AJAX/" style="font-size: 10.91px;">AJAX</a> <a href="/tags/BOOTSTRAP/" style="font-size: 10px;">BOOTSTRAP</a> <a href="/tags/Bash/" style="font-size: 11.82px;">Bash</a> <a href="/tags/BlockChain/" style="font-size: 10px;">BlockChain</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/CSS/" style="font-size: 10.91px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 20px;">CSS3</a> <a href="/tags/Chrome-Extensions/" style="font-size: 10px;">Chrome, Extensions</a> <a href="/tags/Closure/" style="font-size: 10px;">Closure</a> <a href="/tags/CommonJS/" style="font-size: 10px;">CommonJS</a> <a href="/tags/Contract-Ethereum-Web3/" style="font-size: 10px;">Contract, Ethereum, Web3</a> <a href="/tags/Contract-Solidity/" style="font-size: 10px;">Contract, Solidity</a> <a href="/tags/D3-Example/" style="font-size: 10px;">D3, Example</a> <a href="/tags/DAPP-Solidity/" style="font-size: 10px;">DAPP, Solidity</a> <a href="/tags/DApp-Solidity/" style="font-size: 10px;">DApp, Solidity</a> <a href="/tags/DOM/" style="font-size: 12.73px;">DOM</a> <a href="/tags/DevTools/" style="font-size: 10px;">DevTools</a> <a href="/tags/Drizzle-Ethereum-BlockChain/" style="font-size: 10px;">Drizzle, Ethereum, BlockChain</a> <a href="/tags/ES6/" style="font-size: 10.91px;">ES6</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/ETH-Wallet/" style="font-size: 10px;">ETH, Wallet</a> <a href="/tags/Economics/" style="font-size: 10px;">Economics</a> <a href="/tags/Elixir-Phoenix-SCSS/" style="font-size: 10px;">Elixir, Phoenix, SCSS</a> <a href="/tags/Erlang-Elixir-GenServer/" style="font-size: 10px;">Erlang, Elixir, GenServer</a> <a href="/tags/Ethereum/" style="font-size: 10px;">Ethereum</a> <a href="/tags/Ethereum-IPFS/" style="font-size: 10px;">Ethereum, IPFS</a> <a href="/tags/FP/" style="font-size: 10px;">FP</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub-Workflow/" style="font-size: 10px;">GitHub, Workflow</a> <a href="/tags/Go-Http-Web/" style="font-size: 10px;">Go, Http, Web</a> <a href="/tags/GraphQL-Apollo-TypeScript/" style="font-size: 10px;">GraphQL, Apollo, TypeScript</a> <a href="/tags/Gulp/" style="font-size: 11.82px;">Gulp</a> <a href="/tags/HTML5/" style="font-size: 15.45px;">HTML5</a> <a href="/tags/HTTP2-Node/" style="font-size: 10px;">HTTP2, Node</a> <a href="/tags/Html-Picture/" style="font-size: 10px;">Html, Picture</a> <a href="/tags/Immutable/" style="font-size: 10px;">Immutable</a> <a href="/tags/Int8Array/" style="font-size: 10px;">Int8Array</a> <a href="/tags/JSON-RPC/" style="font-size: 10px;">JSON-RPC</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Javascript/" style="font-size: 19.09px;">Javascript</a> <a href="/tags/Koa/" style="font-size: 10.91px;">Koa</a> <a href="/tags/Koa-NPM-Package/" style="font-size: 10px;">Koa, NPM, Package</a> <a href="/tags/MDL/" style="font-size: 16.36px;">MDL</a> <a href="/tags/Material-Design/" style="font-size: 17.27px;">Material Design</a> <a href="/tags/Mock-JavaScript/" style="font-size: 10px;">Mock, JavaScript</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NODE/" style="font-size: 13.64px;">NODE</a> <a href="/tags/NPM/" style="font-size: 10.91px;">NPM</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Nock/" style="font-size: 10px;">Nock</a> <a href="/tags/Node-CLI/" style="font-size: 10.91px;">Node, CLI</a> <a href="/tags/Node-Fastify/" style="font-size: 10.91px;">Node, Fastify</a> <a href="/tags/Node-Graphql-Koa/" style="font-size: 10px;">Node, Graphql, Koa</a> <a href="/tags/Node-js/" style="font-size: 10.91px;">Node.js</a> <a href="/tags/Node-js-Nest-js/" style="font-size: 10px;">Node.js, Nest.js</a> <a href="/tags/Phoenix-Elixir-Ecto/" style="font-size: 10px;">Phoenix, Elixir, Ecto</a> <a href="/tags/Promise/" style="font-size: 11.82px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10px;">Protobuf</a> <a href="/tags/Pug-HTML/" style="font-size: 10px;">Pug, HTML</a> <a href="/tags/React/" style="font-size: 18.18px;">React</a> <a href="/tags/React-Docker/" style="font-size: 10px;">React, Docker</a> <a href="/tags/React-Router-Code-splitting/" style="font-size: 10px;">React, Router, Code-splitting</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/React-Redux/" style="font-size: 10px;">React-Redux</a> <a href="/tags/React-Router/" style="font-size: 10.91px;">React-Router</a> <a href="/tags/Redux/" style="font-size: 14.55px;">Redux</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/Ruby-Rails/" style="font-size: 10px;">Ruby, Rails</a> <a href="/tags/Ruby-Rails-RoR-Mina/" style="font-size: 10px;">Ruby, Rails, RoR, Mina</a> <a href="/tags/Rust-Rocket/" style="font-size: 10px;">Rust, Rocket</a> <a href="/tags/RxJS/" style="font-size: 10px;">RxJS</a> <a href="/tags/Smart-Contract-Web3/" style="font-size: 10px;">Smart Contract, Web3</a> <a href="/tags/Solidity/" style="font-size: 12.73px;">Solidity</a> <a href="/tags/Solidity-Error-Handling/" style="font-size: 10px;">Solidity, Error Handling</a> <a href="/tags/Solidity-Public-External/" style="font-size: 10px;">Solidity, Public, External</a> <a href="/tags/Solidity-Smart-Contract/" style="font-size: 10px;">Solidity, Smart Contract</a> <a href="/tags/Thunk/" style="font-size: 10.91px;">Thunk</a> <a href="/tags/Trick/" style="font-size: 11.82px;">Trick</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Webpack-DLL/" style="font-size: 10px;">Webpack, DLL</a> <a href="/tags/automatic/" style="font-size: 10px;">automatic</a> <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/babel-polyfill/" style="font-size: 10px;">babel-polyfill</a> <a href="/tags/blockchain-bitcoin-bip/" style="font-size: 10.91px;">blockchain, bitcoin, bip</a> <a href="/tags/commandline/" style="font-size: 10px;">commandline</a> <a href="/tags/github/" style="font-size: 10.91px;">github</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/lecture-yc/" style="font-size: 10px;">lecture, yc</a> <a href="/tags/precache/" style="font-size: 10px;">precache</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/webpack/" style="font-size: 17.27px;">webpack</a> <a href="/tags/webpack2/" style="font-size: 11.82px;">webpack2</a> <a href="/tags/测试/" style="font-size: 11.82px;">测试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2020/01/06/crx-config/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Crx-Config">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-05T17:10:11.000Z">2020-01-06</time></div>
                    <a href="/2020/01/06/crx-config/" class="has-link-black-ter is-size-6">Crx-Config</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/03/Introduction-to-MACD/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/macd-indicator.png" alt="Introduction to MACD">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-02T17:43:39.000Z">2019-12-03</time></div>
                    <a href="/2019/12/03/Introduction-to-MACD/" class="has-link-black-ter is-size-6">Introduction to MACD</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">January 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2020/01/06/crx-config/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Crx-Config">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-05T17:10:11.000Z">2020-01-06</time></div>
                    <a href="/2020/01/06/crx-config/" class="has-link-black-ter is-size-6">Crx-Config</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/12/03/Introduction-to-MACD/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/macd-indicator.png" alt="Introduction to MACD">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-02T17:43:39.000Z">2019-12-03</time></div>
                    <a href="/2019/12/03/Introduction-to-MACD/" class="has-link-black-ter is-size-6">Introduction to MACD</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">January 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="EzCook" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 Chen Yu&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>