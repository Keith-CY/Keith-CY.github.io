<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8">
<title>EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">

</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="EzCook" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item is-active"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
                <a class="navbar-item"
                href="/resume">Resume</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-image">
        <a href="/2019/12/03/Introduction-to-MACD/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/thumbnails/macd-indicator.png" alt="Introduction to MACD">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-02T17:43:39.000Z">2019-12-03</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 347 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/12/03/Introduction-to-MACD/">Introduction to MACD</a>
            
        </h1>
        <div class="content">
            <p>Moving Average Convergence Divergence(MACD) is a market indicator on trending momentum to show the relationshops between two moving averages of a security’ price.</p>
<p>The MACD is calculated bey subtracting the long-term Exponential Moving Average(EMA) from the short-term EMA.</p>
<p>The display of MACD is the MACD line, and a nine-day EMA of the MACD called the ‘signal line’, is then plotted on the top of MACD line. It functions as a trigger of buying or selling. Traders could buy the security when the MACD crosses above the signal line and sell the security when the MACD crosses below the signal line.</p>
<p>Synopsis</p>
<ul>
<li><p>MACD is calculated by substracting the long-term EMA from the short-term EMA.</p>
</li>
<li><p>MACD triggers technical signals when it crosses above to buy or below to sell its signal line.</p>
</li>
<li><p>The speed of crossovers is also taken as a signal of the market to overbuy or oversell.</p>
</li>
<li><p>MACD helps investors understand whether the bullish or bearish momentum the market is.</p>
</li>
</ul>
<p>The MACD has a positive value whenever the short-term EMA is above the long-term EMA and a negative value when the short-term EMA is below the long-term EMA.</p>
<p>The more distant the MACD is above or below it’s baseline, the growing of distance between two EMAs is faster.</p>
<p>As the following chart shows:</p>
<p><img src="https://www.investopedia.com/thmb/jbHkw_VcrdOx5ehBVmGTE9OOYPI=/640x0/filters:no_upscale(" alt="">:max_bytes(150000):strip_icc():format(webp)/Figure2-5c425aecc9e77c0001bc2f4f.png&gt;)</p>
<p>MACD is often displayed in a histogram foramt, which graphs the distance between the MACD and its baseline.</p>
<p>If the MACD is above the baseline, the histogram will be above the MACD’s baseline, otherwise the histogram will be below the MACD’s baseline.</p>
<p>Traders use the MACD histogram to identify when bullish or bearish momentum is high.</p>
<h2 id="MACD-vs-RSI"><a href="#MACD-vs-RSI" class="headerlink" title="MACD vs. RSI"></a>MACD vs. RSI</h2><p>The relative strength indicator(RSI) aims to signal whether a market is considered to be overbought or oversold in relation to recent price levels.</p>
<p>The RSI is an oscillator that calculates average price gains and losses over a given period.</p>
<p>MACD measures <strong>the relationship between two EMAs</strong>, while the RSI measures <strong>price change in relation to recent price highs and lows</strong>.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/2019/10/10/Basic-components-in-nest-js/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 355 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/10/10/Basic-components-in-nest-js/">Basic Components in nest.js</a>
            
        </h1>
        <div class="content">
            <h2 id="Module"><a href="#Module" class="headerlink" title="Module"></a>Module</h2><p>A module in a nest.js application is used to organize related controllers and service providers into a single logical file.</p>
<p>Simply use the <code>@Module</code> decorator with metadata to the module class to designate what controllers, service providers, and other related resources will be instantiated and used later.</p>
<p>Nest also ships a <code>@Global</code> decorator to allow the module to be shared with other module implicitly.</p>
<p>And nest module system has a feature called Dynamic modules, which enable you to produce customized modules.</p>
<p>The most general useage of dynamic modules is to connect the database:</p>
<ul>
<li>The Dynamic module provides a Connection object. In addition, based on the options passed for the module’s <code>forRoot()</code> static function, the module adds more providers and exports them to the modules where it’s imported.</li>
</ul>
<h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><p>A controller is responsible for handling incoming HTTP requests, processing them and formulating a proper HTTP response to the client.</p>
<p>A controller groups a set of route handlers - we call them actions - in a class.</p>
<h2 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h2><p>A provider is used to encapsulate related business logic and functions.</p>
<h2 id="Dependency-Injection-DI-and-Inversion-of-Controller-IoC"><a href="#Dependency-Injection-DI-and-Inversion-of-Controller-IoC" class="headerlink" title="Dependency Injection(DI) and Inversion of Controller(IoC)"></a>Dependency Injection(DI) and Inversion of Controller(IoC)</h2><p>// TODO</p>
<h2 id="Middleware"><a href="#Middleware" class="headerlink" title="Middleware"></a>Middleware</h2><p>Middleware is used to access the current request, response.</p>
<p>Middleware is executed precedes the route handler.</p>
<h2 id="Exception-Filter"><a href="#Exception-Filter" class="headerlink" title="Exception Filter"></a>Exception Filter</h2><p>Nestjs comes with a built-in general-purpose global exception filter that handles all thrown exceptions in the application.</p>
<p>Specially, it handles exceptions that are of type HttpException or any other exception class that it inherits from HttpException.</p>
<h2 id="Pipe"><a href="#Pipe" class="headerlink" title="Pipe"></a>Pipe</h2><p>A pipe in nest.js is a class annotated with the <code>Injectable</code> decorator and used to transform data from one format to another, to validate route handler parameters and to produce a new data format based on input parameters.</p>
<p>Nest.js comes with two built-in pipes: <code>ValidationPipe</code>, and <code>ParseIntPipe</code>.</p>
<h2 id="Guard"><a href="#Guard" class="headerlink" title="Guard"></a>Guard</h2><p>A guard is a class annotated with <code>Injectable</code> decorator. It extends <code>CanActivate</code> class and implements the <code>canActivate()</code> method.</p>
<p>It decides whether the route handler executes the current request or not, based on the value returned from the <code>canActivate()</code> method.</p>
<h2 id="Interceptor"><a href="#Interceptor" class="headerlink" title="Interceptor"></a>Interceptor</h2><p>interceptor originates from the Aspect-Oriented Programming concepts.</p>
<p>An interceptor manipulates requests and responses.</p>
<h2 id="GraphQL"><a href="#GraphQL" class="headerlink" title="GraphQL"></a>GraphQL</h2><p>// TODO</p>
<h2 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h2><p>// TODO</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    8 minutes read (About 1264 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/09/16/Snippet-of-GitHub-Actions/">Snippet of GitHub Actions</a>
            
        </h1>
        <div class="content">
            <h2 id="Core-Conceptions-for-GitHub-Actions"><a href="#Core-Conceptions-for-GitHub-Actions" class="headerlink" title="Core Conceptions for GitHub Actions"></a>Core Conceptions for GitHub Actions</h2><ol>
<li><p>Workflow</p>
<p>A configurable automated process</p>
</li>
<li><p>Workflow run</p>
<p>An instance of the workflow that runs when the pre-configured event occurs</p>
</li>
<li><p>Workflow file</p>
<p>The YAML file that defines the workflow configuration with at least one job.</p>
</li>
<li><p>Job</p>
<p>A defined task made up of steps. Each job is run in a <em>fresh instance</em> of the virtual environement.</p>
</li>
<li><p>Step</p>
<p>A step is a set of tasks performed by a job. Each step in a job executes in the same virtual environment, allowing the actions in that job to share information using the filesystem.</p>
</li>
<li><p>Action</p>
<p>Individual tasks that combined as steps to create a job. Actions are the smallest portable building block of a workflow.</p>
</li>
</ol>
<h2 id="Configuring-a-workflow"><a href="#Configuring-a-workflow" class="headerlink" title="Configuring a workflow"></a>Configuring a workflow</h2><h3 id="About-workflows"><a href="#About-workflows" class="headerlink" title="About workflows"></a>About workflows</h3><ol>
<li>Store workflows in the <code>.github/workflows</code> directory in the root of the repository</li>
</ol>
<h3 id="Create-a-workflow-file"><a href="#Create-a-workflow-file" class="headerlink" title="Create a workflow file"></a>Create a workflow file</h3><ol>
<li>At the root of the repository, create a directory named <code>./github/workflows</code> to store the workflow files.</li>
<li>In <code>.github/workflows</code>, add a <code>.yml</code> or <code>.yaml</code> file for the workflow.</li>
<li>Use <code>Workflow syntax for GitHub Actions</code> reference documentation to choose events to trigger an action, add actions, and customize the workflows.</li>
<li>Commit the changes in the workflow file to the branch where the workflow is desired to run.</li>
</ol>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">name:</span> <span class="hljs-string">Greet</span> <span class="hljs-string">Everyone</span></div><div class="line"><span class="hljs-comment"># This workflow is triggered on pushes to the repository</span></div><div class="line"><span class="hljs-attr">on:</span> <span class="hljs-string">[push]</span></div><div class="line"></div><div class="line"><span class="hljs-attr">jobs:</span></div><div class="line"><span class="hljs-attr">  build:</span></div><div class="line">    <span class="hljs-comment"># Job name is Greeting</span></div><div class="line"><span class="hljs-attr">    name:</span> <span class="hljs-string">Greeting</span></div><div class="line">    <span class="hljs-comment"># This job runs on Linux</span></div><div class="line"><span class="hljs-attr">    runs-on:</span> <span class="hljs-string">ubuntu-latest</span></div><div class="line"><span class="hljs-attr">    steps:</span></div><div class="line">      <span class="hljs-comment"># This step uses GitHub's hello-world-javascript-action</span></div><div class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">Hello</span> <span class="hljs-string">World</span></div><div class="line"><span class="hljs-attr">        use:</span> <span class="hljs-string">actions/hello-world-javascript-action@v1</span></div><div class="line"><span class="hljs-attr">        with:</span></div><div class="line"><span class="hljs-attr">          who-to-greet:</span> <span class="hljs-string">'Mona the Octocat'</span></div><div class="line"><span class="hljs-attr">        id:</span> <span class="hljs-string">hello</span></div><div class="line">      <span class="hljs-comment"># This step prints an output (time) from the previous step's action</span></div><div class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">Echo</span> <span class="hljs-string">the</span> <span class="hljs-string">greeting's</span> <span class="hljs-string">time</span></div><div class="line"><span class="hljs-attr">        run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">'The time was $\&#123;\&#123; steps.hello.outputs.time &#125;&#125;.'</span></div></pre></td></tr></table></figure>
<h3 id="Configuring-a-build-matrix"><a href="#Configuring-a-build-matrix" class="headerlink" title="Configuring a build matrix"></a>Configuring a build matrix</h3><p>To test across multiple operating system, platforms, and language versions at the same time, a matrix could be set up.</p>
<p>A build matrix provides different configurations for the virtual environment to test.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">runs-on:</span> <span class="hljs-string">$\&#123;\&#123;</span> <span class="hljs-string">matrix.os</span> <span class="hljs-string">&#125;&#125;</span></div><div class="line"><span class="hljs-attr">strategy:</span></div><div class="line"><span class="hljs-attr">  matrix:</span><span class="hljs-string">:</span></div><div class="line"><span class="hljs-attr">    os:</span> <span class="hljs-string">[ubuntu-14.04,</span> <span class="hljs-string">ubuntu-18.04]</span></div><div class="line"><span class="hljs-attr">    node:</span> <span class="hljs-string">[6,</span> <span class="hljs-number">8</span><span class="hljs-string">,</span> <span class="hljs-number">10</span><span class="hljs-string">]</span></div></pre></td></tr></table></figure>
<h3 id="Using-the-checkout-action"><a href="#Using-the-checkout-action" class="headerlink" title="Using the checkout action"></a>Using the checkout action</h3><p>There are several standard actions you can use in your workflow. The checkout action is a standard action that you must include in your workflow before other actions when:</p>
<ul>
<li>Your workflow requires a copy of your repository’s code, such as when you’re building and testing your repository or using continuous integration.</li>
<li>There’s at least one action in your workflow that is defined in the same repository.</li>
</ul>
<p>To use the standard checkout action without furthur specifications, including this step:</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">- uses:</span> <span class="hljs-string">actions/checkout@v1</span></div></pre></td></tr></table></figure>
<p>Using <code>v1</code> in this example ensures you’re using a stable version of the checkout action.</p>
<p>The <em>shallow clone</em> your repository, or copy only the latest version of your repository, set the <code>fetch-deptch</code> with the <code>with</code> syntax:</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">- uses:</span> <span class="hljs-string">actions/checkout@v1</span></div><div class="line"><span class="hljs-attr">  with:</span></div><div class="line"><span class="hljs-attr">    fetch-depth:</span> <span class="hljs-number">1</span></div></pre></td></tr></table></figure>
<h3 id="Referencing-actions-in-your-workflow"><a href="#Referencing-actions-in-your-workflow" class="headerlink" title="Referencing actions in your workflow"></a>Referencing actions in your workflow</h3><p>To reference actions in your workflow file with the correct syntax, you must consider where the action is defined.</p>
<p>Workflows can use actions defined in</p>
<ul>
<li>A public repository</li>
<li>The same repository where your workflow file references the actions</li>
<li>A publised Docker container image on Docker Hub</li>
</ul>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">jobs:</span></div><div class="line"><span class="hljs-attr">  my_first_job:</span></div><div class="line"><span class="hljs-attr">    steps:</span></div><div class="line"><span class="hljs-attr">      - uses:</span> <span class="hljs-string">actions/setup-node@v1</span></div><div class="line"><span class="hljs-attr">        with:</span></div><div class="line"><span class="hljs-attr">          node-version:</span> <span class="hljs-number">10.</span><span class="hljs-string">x</span></div><div class="line"><span class="hljs-attr">      - uses:</span> <span class="hljs-string">./.github/actions/hello-world-action</span></div><div class="line"><span class="hljs-attr">      - uses:</span> <span class="hljs-attr">docker://alpine:3.8</span></div></pre></td></tr></table></figure>
<h2 id="Workflow-syntax-for-GitHub-Actions"><a href="#Workflow-syntax-for-GitHub-Actions" class="headerlink" title="Workflow syntax for GitHub Actions"></a>Workflow syntax for GitHub Actions</h2><h3 id="name"><a href="#name" class="headerlink" title="name"></a>name</h3><p>The name of the workflow.</p>
<h3 id="on"><a href="#on" class="headerlink" title="on"></a>on</h3><p><strong>Required</strong> The name of the <a href="https://help.github.com/en/articles/events-that-trigger-workflows" target="_blank" rel="noopener">GitHub event</a> that triggers the workflow.<br><code>string</code>, <code>array</code> and <code>map</code> are acceptable</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">on:</span> <span class="hljs-string">push</span></div><div class="line"><span class="hljs-attr">on:</span> <span class="hljs-string">[push,</span> <span class="hljs-string">pull_request]</span></div></pre></td></tr></table></figure>
<h4 id="on-1"><a href="#on-1" class="headerlink" title="on.."></a>on.<push|pull_request>.<tag|branches></tag|branches></push|pull_request></h4><p>When using the <code>push</code> and <code>pull_request</code> events, you can configure a workflow to run on specific branches or tags</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">on:</span></div><div class="line"><span class="hljs-attr">  push:</span></div><div class="line"><span class="hljs-attr">    branches:</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">master</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'release/*'</span></div><div class="line"><span class="hljs-attr">    tags:</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">v1</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">v1.0</span></div></pre></td></tr></table></figure>
<h4 id="on-paths"><a href="#on-paths" class="headerlink" title="on..paths"></a>on.<push|pull_request>.paths</push|pull_request></h4><p>When using the <code>push</code> and <code>pull_request</code> events, you can configure a workflow to run when at least one modified file matches a pattern defined in <code>paths</code>.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">on:</span></div><div class="line"><span class="hljs-attr">  push:</span></div><div class="line"><span class="hljs-attr">    paths:</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'*'</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'!*.js'</span></div><div class="line">      <span class="hljs-string">```</span></div></pre></td></tr></table></figure>
<h3 id="jobs"><a href="#jobs" class="headerlink" title="jobs"></a>jobs</h3><p>A workflow run is made up of one or more jobs. Jobs run in <em>parallel</em> by default. To run jobs sequentially, you can define dependencies on other jobs using the <code>jobs.&lt;job_id&gt;.needs</code> keywords.</p>
<p>Each job runs in a <em>fresh instance</em> of the virtual environment specified by <code>runs-on</code>.</p>
<h4 id="jobs-1"><a href="#jobs-1" class="headerlink" title="jobs."></a>jobs.<job_id></job_id></h4><p>Each job must have an id to associate with the job. The key <code>job_id</code> is a string and its value is a map of the job’s configuration data.</p>
<p>You must replace <code>&lt;job_id&gt;</code> with a string that is unique to the <code>jobs</code> object. The <code>&lt;job_id&gt;</code> must start with a letter or <code>_</code> and contain only alphanumeric characters, <code>-</code> or <code>_</code>.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">jobs:</span></div><div class="line"><span class="hljs-attr">  my_first_job:</span></div><div class="line"><span class="hljs-attr">    name:</span> <span class="hljs-string">My</span> <span class="hljs-string">first</span> <span class="hljs-string">job</span></div><div class="line"><span class="hljs-attr">  my_second_job:</span></div><div class="line"><span class="hljs-attr">    name:</span> <span class="hljs-string">My</span> <span class="hljs-string">second</span> <span class="hljs-string">job</span></div></pre></td></tr></table></figure>
<h4 id="jobs-name"><a href="#jobs-name" class="headerlink" title="jobs..name"></a>jobs.<job_id>.name</job_id></h4><p>The name of the job displayed on GitHub</p>
<h4 id="jobs-needs"><a href="#jobs-needs" class="headerlink" title="jobs..needs"></a>jobs.<job_id>.needs</job_id></h4><p>Identifies any jobs that must complete successfully before this job will run. It can be a string or array of string</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">jobs:</span></div><div class="line"><span class="hljs-attr">  job1:</span></div><div class="line"><span class="hljs-attr">  job2:</span></div><div class="line"><span class="hljs-attr">    needs:</span> <span class="hljs-string">job1</span></div><div class="line"><span class="hljs-attr">  job3:</span></div><div class="line"><span class="hljs-attr">    needs:</span> <span class="hljs-string">[job1,</span> <span class="hljs-string">job2]</span></div></pre></td></tr></table></figure>
<h4 id="jobs-runs-on"><a href="#jobs-runs-on" class="headerlink" title="jobs.runs-on"></a>jobs<job_id>.runs-on</job_id></h4><p><strong>Required</strong> The type of virtual host machine to run the job on. Each job runs with a fresh instance of the virtual environment specified by <code>runs-on</code>:</p>
<p>Available virtual machine types are:</p>
<ul>
<li>ubuntu-latest, ubuntu-18.04 or ubuntu-16.04</li>
<li>windows-latest, windows-2019 or windows-2016</li>
<li>macOS-latest, macOS-10.14</li>
</ul>
<h4 id="jobs-steps"><a href="#jobs-steps" class="headerlink" title="jobs..steps"></a>jobs.<job_id>.steps</job_id></h4><p>A job contains a sequence of tasks called <code>steps</code>. Steps can run commands, run setup tasks, or run an action in your repository, a public repository, or an action published in a Docker registry.</p>
<p>Each step run in its own <em>process</em> in the virtual environment and has access to the workspace and filesystem. Because steps run in their own process, changes to environment variables are not preserved between steps.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">name:</span> <span class="hljs-string">Greeting</span> <span class="hljs-string">from</span> <span class="hljs-string">Mona</span></div><div class="line"></div><div class="line"><span class="hljs-attr">on:</span> <span class="hljs-string">push</span></div><div class="line"></div><div class="line"><span class="hljs-attr">jobs:</span></div><div class="line"><span class="hljs-attr">  my-job:</span></div><div class="line"><span class="hljs-attr">    name:</span> <span class="hljs-string">My</span> <span class="hljs-string">Job</span></div><div class="line"><span class="hljs-attr">    runs-on:</span> <span class="hljs-string">ubuntu-latest</span></div><div class="line"><span class="hljs-attr">    steps:</span></div><div class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">Print</span> <span class="hljs-string">a</span> <span class="hljs-string">greeting</span></div><div class="line"><span class="hljs-attr">        env:</span></div><div class="line"><span class="hljs-attr">          MY_VAR:</span> <span class="hljs-string">Hi</span> <span class="hljs-string">there!</span> <span class="hljs-string">My</span> <span class="hljs-string">name</span> <span class="hljs-string">is</span></div><div class="line"><span class="hljs-attr">          FIRST_NAME:</span> <span class="hljs-string">Mona</span></div><div class="line"><span class="hljs-attr">          LAST_NAME:</span> <span class="hljs-string">Octocat</span></div><div class="line"><span class="hljs-attr">        run:</span> <span class="hljs-string">|</span></div><div class="line">          echo $MY_VAR $FIRST_NAME $LAST_NAME.</div></pre></td></tr></table></figure>
<h5 id="jobs-steps-id"><a href="#jobs-steps-id" class="headerlink" title="jobs..steps.id"></a>jobs.<job_id>.steps.id</job_id></h5><p>A unique identifier for the step. You can use the <code>id</code> to reference the step in contexts.</p>
<h5 id="jobs-steps-if"><a href="#jobs-steps-if" class="headerlink" title="jobs..steps.if"></a>jobs.<job_id>.steps.if</job_id></h5><p>You can use the <code>if</code> conditional to prevent a step from running unless a condition is met.</p>
<p>Expression in an <code>if</code> conditional do not require the <code>$\{\{ }}</code> syntax.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">steps:</span></div><div class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">My</span> <span class="hljs-string">first</span> <span class="hljs-string">step</span></div><div class="line"><span class="hljs-attr">    if:</span> <span class="hljs-string">github.event_name</span> <span class="hljs-string">==</span> <span class="hljs-string">'pull_request'</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">github.event.action</span> <span class="hljs-string">==</span> <span class="hljs-string">'unassigned'</span></div><div class="line"><span class="hljs-attr">    run:</span> <span class="hljs-string">echo</span> <span class="hljs-string">This</span> <span class="hljs-string">event</span> <span class="hljs-string">is</span> <span class="hljs-string">a</span> <span class="hljs-string">pull</span> <span class="hljs-string">request</span> <span class="hljs-string">that</span> <span class="hljs-string">had</span> <span class="hljs-string">an</span> <span class="hljs-string">assignee</span> <span class="hljs-string">removed</span></div></pre></td></tr></table></figure>
<h5 id="jobs-step-name"><a href="#jobs-step-name" class="headerlink" title="jobs..step.name"></a>jobs.<job_id>.step.name</job_id></h5><p>A name for the step to display on GitHub.</p>
<h5 id="jobs-steps-uses"><a href="#jobs-steps-uses" class="headerlink" title="jobs..steps.uses"></a>jobs.<job_id>.steps.uses</job_id></h5><p>Selects an action to run as part of a step in your job. An action is a reusable unit of code.</p>
<p>The version of the action is strongly recommended to be included in the action by specifying a Git Ref, SHA, or Docker tag number.</p>
<h5 id="jobs-steps-with"><a href="#jobs-steps-with" class="headerlink" title="jobs..steps.with"></a>jobs.<job_id>.steps.with</job_id></h5><p>A <code>map</code> of the input parameters defined by the action. Each input parameter is a key/pair. Input parameters are set as environment variables.</p>
<p>The variable is prefixed with <code>INPUT_</code> and converted to uppercase.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">jobs:</span></div><div class="line"><span class="hljs-attr">  my_first_step:</span></div><div class="line"><span class="hljs-attr">    steps:</span></div><div class="line"><span class="hljs-attr">      - name:</span> <span class="hljs-string">My</span> <span class="hljs-string">first</span> <span class="hljs-string">step</span></div><div class="line"><span class="hljs-attr">        uses:</span> <span class="hljs-string">actions/hello_world@master</span></div><div class="line"><span class="hljs-attr">        with:</span></div><div class="line"><span class="hljs-attr">          first_name:</span> <span class="hljs-string">Mona</span> <span class="hljs-comment"># INPUT_FIRST_NAME</span></div><div class="line"><span class="hljs-attr">          middle_name:</span> <span class="hljs-string">The</span> <span class="hljs-comment"># INPUT_MIDDLE_NAME</span></div><div class="line"><span class="hljs-attr">          last_name:</span> <span class="hljs-string">Octocat</span> <span class="hljs-comment"># INPUT_LAST_NAME</span></div></pre></td></tr></table></figure>
<h5 id="jobs-steps-with-args"><a href="#jobs-steps-with-args" class="headerlink" title="jobs..steps.with.args"></a>jobs.<job_id>.steps.with.args</job_id></h5><p>// TODO:</p>
<h5 id="jobs-steps-with-entrypoint"><a href="#jobs-steps-with-entrypoint" class="headerlink" title="jobs.steps.with.entrypoint"></a>jobs<job_id>.steps.with.entrypoint</job_id></h5><p>// TODO:</p>
<h5 id="jobs-steps-env"><a href="#jobs-steps-env" class="headerlink" title="jobs..steps.env"></a>jobs.<job_id>.steps.env</job_id></h5><p>Sets environment variables for steps to use in the virtual environment. Public actions may specify expected environment variables in the README file.</p>
<p>If you are setting a secret in an environment variable, you must set secrets using the <code>secrets</code> context.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">steps:</span></div><div class="line"><span class="hljs-attr">  - name:</span> <span class="hljs-string">My</span> <span class="hljs-string">first</span> <span class="hljs-string">step</span></div><div class="line"><span class="hljs-attr">    env:</span></div><div class="line"><span class="hljs-attr">      GITHUB_TOKEN:</span> <span class="hljs-string">$\&#123;\&#123;</span> <span class="hljs-string">secrets.GITHUB_TOKEN</span> <span class="hljs-string">&#125;&#125;</span></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 883 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/08/30/Methods-of-the-String-in-JavaScript/">Methods of the String in JavaScript </a>
            
        </h1>
        <div class="content">
            <ol>
<li><p><code>String.prototype.charAt(index: number): string</code>: Returns the character(exactly one UTF-16 code unit) at the specified index.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.charAt(<span class="hljs-number">1</span>) <span class="hljs-comment">// returns 'e'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.charCodeAt(index: number): number</code>: Returns a number that is the UTF-16 code unit value at the specified index.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.charCodeAt(<span class="hljs-number">1</span>) <span class="hljs-comment">// returns 101</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.codePointAt(index: string): number</code>: Returns a nonnegative integer Number that is the code point value of the UTF-16 encoded code point starting at the specified index.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.codePointAt(<span class="hljs-number">1</span>) <span class="hljs-comment">// returns 101</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.concat(str: string, ...rest: string[]): string</code>: Combines the texts and returns a new string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.concat(<span class="hljs-string">', '</span>, <span class="hljs-string">'and welcome'</span>) <span class="hljs-comment">// returns 'hello world, and welcome'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.includes(str: string): boolean</code>: Determines whether one string may be found within another string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.includes(<span class="hljs-string">'world'</span>) <span class="hljs-comment">// returns true</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.endsWith(str: string): boolean</code>: Determines whether a string ends with the characters of another string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.endsWith(<span class="hljs-string">'world'</span>) <span class="hljs-comment">// returns true</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.indexOf(str: string): number</code>: Returns the index of the specified string, -1 for not found.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">s.indexOf(<span class="hljs-string">'world'</span>) <span class="hljs-comment">// returns 6</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.lastIndexOf(str: string)</code>: Returns the index of the specified string, but search starts from the end, -1 for not found</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'world hello world'</span>.indexOf(<span class="hljs-string">'world'</span>) <span class="hljs-comment">// returns 0</span></div><div class="line"><span class="hljs-string">'world hello world'</span>.lastIndexOf(<span class="hljs-string">'world'</span>) <span class="hljs-comment">// returns 12</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.localeCompare(str: string)</code>: Returns a number indicating whether a reference string comes before or after or is the same as the given string in sort order.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> a = <span class="hljs-string">'réservé'</span> <span class="hljs-comment">// with accents, lowercase</span></div><div class="line"><span class="hljs-keyword">const</span> b = <span class="hljs-string">'RESERVE'</span> <span class="hljs-comment">// no accents, uppercase</span></div><div class="line"></div><div class="line"><span class="hljs-built_in">console</span>.log(a.localeCompare(b))</div><div class="line"><span class="hljs-comment">// expected output: 1</span></div><div class="line"><span class="hljs-built_in">console</span>.log(a.localeCompare(b, <span class="hljs-string">'en'</span>, &#123; <span class="hljs-attr">sensitivity</span>: <span class="hljs-string">'base'</span> &#125;))</div><div class="line"><span class="hljs-comment">// expected output: 0</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// The letter "a" is before "c" yielding a negative value</span></div><div class="line"><span class="hljs-string">'a'</span>.localeCompare(<span class="hljs-string">'c'</span>) <span class="hljs-comment">// -2 or -1 (or some other negative value)</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// Alphabetically the word "check" comes after "against" yielding a positive value</span></div><div class="line"><span class="hljs-string">'check'</span>.localeCompare(<span class="hljs-string">'against'</span>) <span class="hljs-comment">// 2 or 1 (or some other positive value)</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// "a" and "a" are equivalent yielding a neutral value of zero</span></div><div class="line"><span class="hljs-string">'a'</span>.localeCompare(<span class="hljs-string">'a'</span>) <span class="hljs-comment">// 0</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.match(regexp): string[] | null</code>: Used to match a regular expression against a string, null for not found</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> paragraph = <span class="hljs-string">`The quick brown fox jumps over the lazy dog. It barked`</span></div><div class="line"><span class="hljs-keyword">const</span> regex = <span class="hljs-regexp">/[A-Z]/g</span></div><div class="line">paragraph.match(regex) <span class="hljs-comment">// returns ["T", "I"]</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.matchAll(regex): Iterator</code>: Returns an iterator of all matches.</p>
</li>
<li><p><code>String.prototype.normalize</code>: Returns the Unicode Normalization Form of the calling string value.</p>
</li>
<li><p><code>String.prototype.padEnd()</code>: Pads the current string with a given string(repeated if needed) so that the resulting string reaches a given length. The padding is appliced fromthe end of the current string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'Breaded Mushrooms'</span>.padEnd(<span class="hljs-number">25</span>, <span class="hljs-string">'.'</span>) <span class="hljs-comment">// returns "Breaded Mushrooms........"</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.padStart()</code>: Pads the current string from the start with a given string to create a new string from a given length</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'Breaded Mushrooms'</span>.padStart(<span class="hljs-number">25</span>, <span class="hljs-string">'.'</span>) <span class="hljs-comment">// returns "........Breaded Mushrooms"</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.repeat(times: number)</code>: Returns a string consisting of the elements of the object repeated the given times.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.repeat(<span class="hljs-number">3</span>) <span class="hljs-comment">// "hello worldhello worldhello world"</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.replace(pattern: regexp | string, replacement): string</code>: Returns a new string with some or all matches of a <code>pattern</code> replaced by a <code>replacement</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.replace(<span class="hljs-regexp">/world/</span>, <span class="hljs-string">'hello'</span>) <span class="hljs-comment">// returns 'hello hello'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.search(pattern: regexp): number</code>: Executes a search for a match between a regular expression and this string, returns the index of matched string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.search(<span class="hljs-regexp">/ll/</span>) <span class="hljs-comment">// returns 2</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.slice(start: number[, end: number]): string</code>: Returns a new string extracted from the original string from [start, end).</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello'</span>.slice(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-comment">// returns 'e'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.split(pattern): string[]</code>: Splits a string into an array of strings by separating the string into substrings.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.split(<span class="hljs-string">' '</span>) <span class="hljs-comment">// ['hello', 'world']</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.startsWith()</code>: Determines whether a string begins with the characters of another string.</p>
</li>
<li><p><code>String.prototype.substring</code>: Returns the characters in a string between two indices into the string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.substring(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-comment">// returns 'e'</span></div></pre></td></tr></table></figure>
<p>It seems that the <code>String.prototype.substring</code> works like <code>String.prototype.slice</code>, but if the <code>start &gt; end</code>, <code>String.prototype.substring</code> swaps the two parameters while <code>String.prototype.slice</code> return ‘’.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.substring(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// returns 'e'</span></div><div class="line"><span class="hljs-string">'hello world'</span>.slice(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>) <span class="hljs-comment">// returns ''</span></div></pre></td></tr></table></figure>
<p>And <code>String.prototype.slice</code> accepts netagive indices as start from the end of the string, while <code>String.prototype.substring</code> treats negative and NaN as 0.</p>
<p>Note <code>String.prototype.substr</code> is deprecated</p>
</li>
<li><p><code>String.prototype.toLocaleLowerCase()</code>: The characters within a string are converted to lower case while respecting the current locale. For most languages, this will return the same as <code>toLowerCase()</code></p>
</li>
<li><p><code>String.prototype.toLocaleUpperCase()</code>: The characters within a string are converted to upper case while respecting the current locale. For most languages, this will return the same as <code>toUpperCase()</code></p>
</li>
<li><p><code>String.prototype.toLowerCase()</code>: Returns the calling string value converted to lower case.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'HELLO WORLD'</span>.toLowerCase() <span class="hljs-comment">// returns 'hello world'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.toUpperCase()</code>: Returns the calling string value converted to upper case.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'hello world'</span>.toUpperCase() <span class="hljs-comment">// returns 'HELLO WORLD'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.toString()</code>: Returns a string representing the specified object.</p>
</li>
<li><p><code>String.prototype.trim()</code>: Trims whitespaces from the beginning and end of a string</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'   hello world   '</span>.trim() <span class="hljs-comment">// returns 'hello wrold'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.trimStart()</code>, <code>String.prototype.trimLeft()</code>: Trims whitespaces from the beginning of the string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'   hello world   '</span>.trimStart() <span class="hljs-comment">// returns 'hello world   '</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.trimEnd()</code>, <code>String.prototype.trimRight()</code>: Trims whitespace from the end of the string.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-string">'   hello world   '</span>.trimEnd() <span class="hljs-comment">// return '   hello world'</span></div></pre></td></tr></table></figure>
</li>
<li><p><code>String.prototype.valueOf</code>: Returns the primitive value of the specified object.</p>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/2019/04/20/note-on-bip-173/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/thumbnails/segwit.png" alt="Note-on-Bip-173">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-20T08:36:54.000Z">2019-04-20</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 216 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/20/note-on-bip-173/">Note-on-Bip-173</a>
            
        </h1>
        <div class="content">
            <p><a href="https://github.com/bitcoin/bips/blob/master/bip-0173.mediawiki" target="_blank" rel="noopener">wiki</a></p>
<h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>BIP 173 proposed a checksummed base32 format, <strong>Bech32</strong> and a standard for native segregated witness output addresses using it to replace BIP 142. This format is not required for using segwit, but is more efficient, flexible and nicer to use.</p>
<h1 id="Bech32"><a href="#Bech32" class="headerlink" title="Bech32"></a>Bech32</h1><p>A Bech32 string is at most <strong>90</strong> characters long and consists of:</p>
<ul>
<li><p>The <strong>human-readable part(hrp)</strong>, which is intended to convey <strong>the type of data</strong>, or anything else that is relevant to the reader.</p>
</li>
<li><p>The <strong>separator</strong> which is always <strong>“1”</strong>. In case “1” is allowed inside the hrp, the last one in the string is the separator.</p>
</li>
<li><p>The <strong>data part</strong>, which is at least <strong>6</strong> characters long and only consists of alphanumeric characters excluding “1”, “b”, “i”, “o”.</p>
</li>
</ul>
<h2 id="Checksum"><a href="#Checksum" class="headerlink" title="Checksum"></a>Checksum</h2><p>The last six characters of the data part form a chechsum and contain no information.</p>
<h2 id="Segwit-address-format"><a href="#Segwit-address-format" class="headerlink" title="Segwit address format"></a>Segwit address format</h2><p>A segwit address is a Bech32 encoding of:</p>
<ul>
<li><p>The human-readable part “bc” for mainnet and the “tb” for testnet.</p>
</li>
<li><p>The data-part values:</p>
<ul>
<li><p>1 byte: the witness version</p>
</li>
<li><p>A convention of the 2-to-40-byte witness program to base32:</p>
<ul>
<li><p>Start with the bits of the witness program, most significant bit per btye first.</p>
</li>
<li><p>Re-arrange those bits into groups of 5, and pad with zeros at the end if needed.</p>
</li>
<li><p>Translate those bits to characters.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-04-17T03:32:32.000Z">2019-04-17</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 96 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/">[WIP]notes of Building Product, Talking to Users and Growing</a>
            
        </h1>
        <div class="content">
            <p><a href="https://genius.com/Adora-cheung-lecture-4-building-product-talking-to-users-and-growing-annotated" target="_blank" rel="noopener">original notes</a></p>
<ol>
<li><p>You need a lot of feedback. Maybe you get a lot of people to your site, but no one sticks around because you didn’t get that initial user feedback.</p>
</li>
<li><p>When you have an idea, you should really think about what the idea is really solving. Like what is the actual problem. You should describe your problem in one sentence, and then you should think.</p>
</li>
<li><p>When you have a problem and are able to state it, you should think about</p>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/2019/03/16/keystore/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/thumbnails/keystore.jpg" alt="Keystore">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-16T07:22:16.000Z">2019-03-16</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 529 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/16/keystore/">Keystore</a>
            
        </h1>
        <div class="content">
            <p><a href="https://medium.com/@julien.maffre/what-is-an-ethereum-keystore-file-86c8c5917b97" target="_blank" rel="noopener">Original</a></p>
<h1 id="What-is-a-keystore-file"><a href="#What-is-a-keystore-file" class="headerlink" title="What is a keystore file"></a>What is a keystore file</h1><p>A keystore file is en encrypted version of your unique private key that you will use to sign your transactions. If you lose this file your lose your assets.</p>
<h1 id="What-do-keystore-files-look-like"><a href="#What-do-keystore-files-look-like" class="headerlink" title="What do keystore files look like"></a>What do keystore files look like</h1><figure class="highlight json hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="hljs-attr">"crypto"</span>: &#123;</div><div class="line">    <span class="hljs-attr">"cipher"</span>: <span class="hljs-string">"aes-128-ctr"</span>,</div><div class="line">    <span class="hljs-attr">"cipherparams"</span>: &#123;</div><div class="line">      <span class="hljs-attr">"iv"</span>: <span class="hljs-string">"83dbcc02d8ccb40e466191a123791e0e"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="hljs-attr">"ciphertext"</span>: <span class="hljs-string">"d172bf743a674da9cdad04534d56926ef8358534d458fffccd4e6ad2fbde479c"</span>,</div><div class="line">    <span class="hljs-attr">"kdf"</span>: <span class="hljs-string">"scrypt"</span>,</div><div class="line">    <span class="hljs-attr">"kdfparams"</span>: &#123;</div><div class="line">      <span class="hljs-attr">"dklen"</span>: <span class="hljs-number">32</span>,</div><div class="line">      <span class="hljs-attr">"n"</span>: <span class="hljs-number">262144</span>,</div><div class="line">      <span class="hljs-attr">"r"</span>: <span class="hljs-number">1</span>,</div><div class="line">      <span class="hljs-attr">"p"</span>: <span class="hljs-number">8</span>,</div><div class="line">      <span class="hljs-attr">"salt"</span>: <span class="hljs-string">"ab0c7876052600dd703518d6fc3fe8984592145b591fc8fb5c6d43190334ba19"</span></div><div class="line">    &#125;,</div><div class="line">    <span class="hljs-attr">"mac"</span>: <span class="hljs-string">"2103ac29920d71da29f15d75b4a16dbe95cfd7ff8faea1056c33131d846e3097"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="hljs-attr">"id"</span>: <span class="hljs-string">"3198bc9c-6672-5ab3-d995-4942343ae5b6"</span>,</div><div class="line">  <span class="hljs-attr">"version"</span>: <span class="hljs-number">3</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Thses fields mean:</p>
<ul>
<li><p>cipher: The name of a symmetric AES algorithm</p>
</li>
<li><p>cipherparams: The parameters required for the “cipher” algorithm above</p>
</li>
<li><p>ciphertext: The private key encrypted using the “cipher” algorithm above</p>
</li>
<li><p>kdf: A key derivation function used to let you encrypt your keystore file with a password</p>
</li>
<li><p>kdfparams: The parameters required for the “kdf” algorithm above</p>
</li>
<li><p>mac: A code used to verify your password</p>
</li>
</ul>
<h1 id="Work-flow"><a href="#Work-flow" class="headerlink" title="Work flow"></a>Work flow</h1><ol>
<li>Encrypting your private key</li>
</ol>
<p>These symmetric algorithms use a key to encrypt some data. The resulting data is encrypted and can be decrypted with the same method and the same key.</p>
<p>The relation between cipher, cipherparams, ciphertext:</p>
<ul>
<li><p>cipher is the symmetric algorithm used to encrypt the private key.</p>
</li>
<li><p>cipherparams are the parameters required for teh symmetric algorithm.</p>
</li>
<li><p>ciphertext is the encrypted input of the symmetric input.</p>
</li>
</ul>
<p>You get the decryption-key as the output of the kdf.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*nNI586I7fXesxYNls1pm2A.png" alt=""></p>
<p>By this, you need to retrieve your decryption-key(namely the key used in encryption) to decrypt your private key.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*3a9LeWT9B9CSu7a3x8GdKw.png" alt=""></p>
<ol>
<li>Protect with your passphrase</li>
</ol>
<p>To make sure unlocking your account is easy, you don’t need to remember your very long and non-user-friendly decrption-key that is used to decrypt ciphertext. Instead, the developers have opted for a passphrase-based protection.</p>
<p>The keystore use a kdf(key derivation function) that computes the decryption-key given a passphrase and a list of parameters.</p>
<ul>
<li><p>kdf is the key derivation function used to compute the decryption-key from your passphrase.</p>
</li>
<li><p>kdfparams are the parameters required for the function</p>
</li>
</ul>
<p>By the passphrase with kdfparams, the kdf returns your decrption-key.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*nNI586I7fXesxYNls1pm2A.png" alt=""></p>
<ol>
<li>Make sure your passphrase is right</li>
</ol>
<p>We need to guarantee that the passphrase typed to unlock the account is right, that it is the same one as the one entered when the keystore is generated.</p>
<p>This is where the field mac in the keystore works. Just after the kdf is executed, its result(decryption-key) and ciphertext are processed and compared to mac. If the result is the same as mac, then the passphrase was right and the decrption-key is correct.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*YaBR2RaF0-RulLc-pUmdyQ.png" alt=""></p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p><img src="https://cdn-images-1.medium.com/max/1200/1*jHfiOdfCKhyCq5V39vty-A.png" alt=""></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/2019/03/05/note-on-bip32/" class="image is-7by1">
            <img class="thumbnail" src="/gallery/thumbnails/bip32.png" alt="Note on Bip32">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-03-05T05:54:32.000Z">2019-03-05</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 957 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2019/03/05/note-on-bip32/">Note on Bip32</a>
            
        </h1>
        <div class="content">
            <p><a href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki" target="_blank" rel="noopener">wiki</a></p>
<p>The specification consists of two parts:</p>
<ol>
<li><p>a system for deriving a tree of keypairs from a single seed.</p>
</li>
<li><p>demostrate how to build a wallet structure on top of such a tree.</p>
</li>
</ol>
<h1 id="Specification-Key-derivation"><a href="#Specification-Key-derivation" class="headerlink" title="Specification: Key derivation"></a>Specification: Key derivation</h1><h2 id="Convention"><a href="#Convention" class="headerlink" title="Convention"></a>Convention</h2><p>In this text we assume the public key cryptography used in Bitcoin, namely elliptic curve cryttography using the field and curve parameters defined by secp256k1. Variables below are either:</p>
<ul>
<li><p>Integers modulo the order of the curve (referred to as n)</p>
</li>
<li><p>Coordinates of points on the curve</p>
</li>
<li><p>Byte sequences</p>
</li>
</ul>
<p>Addition (+) of two coordinate pair is defined as application of the EC group operation. Concatenation(||) is the operation of appending one byte sequence onto another.</p>
<h2 id="Extended-Keys"><a href="#Extended-Keys" class="headerlink" title="Extended Keys"></a>Extended Keys</h2><p>We are going to define a function to derive a number of child keys from a parent key. In order to prevent these from depending solely on the key itself, we extend both private key and public key first with an extra 256 bits of entropy. This extention, called the <strong>chain code</strong>, is identical for corresponding private key and public keys, and consist of 256 bits, namely 32 bytes.</p>
<p>We represent an extended private key as <code>(k, c)</code>, with <code>k</code> the normal private key and the c, the <code>chain code</code>. And extended public key is represented as <code>(K, c)</code>, with <code>K = point(k)</code> and the c the chain code.</p>
<p>Each extended key has 2^31 <strong>normal child keys</strong>, and 2^31 <strong>hardened child keys</strong>. Each of these child keys has an index. The normal child keys use indices <code>0</code> through <code>2^31 - 1</code>.</p>
<p>The hardened child keys use indices <code>2^31 - 1</code> through <code>2^32 - 1</code>.</p>
<p>To ease notation for hardened key indices, a number i_H represents i + 2 ^ 31.</p>
<h2 id="Child-key-derivation-CKB-function"><a href="#Child-key-derivation-CKB-function" class="headerlink" title="Child key derivation (CKB) function"></a>Child key derivation (CKB) function</h2><p>Given a parent extended key and an index i, it is possible to compute the corresponding child extended key. The algorithm to do so depends on whether the child is a hardened key or not.</p>
<h3 id="Private-parent-key-gt-private-child-key"><a href="#Private-parent-key-gt-private-child-key" class="headerlink" title="Private parent key =&gt; private child key"></a>Private parent key =&gt; private child key</h3><p>The function CKDpriv((k_par, c_par), i) =&gt; (k_i, c_i) computes a child extended private key from the parent extended private key.</p>
<ul>
<li>Check whether i &gt;= 2^31(whether the child is a hardened key)<ul>
<li>if so (hardened child): return failure</li>
<li>if not (normal child), let I = HMAC-SHA512(Key = c_par, Data = ser_P(K_par)||ser_32(i))</li>
</ul>
</li>
<li>Split I into two 32-byte sequences, I_L, and I_R.</li>
<li>The returned child key k_i is parse_256(I_L) + k_par(mod n)</li>
<li>The returned chain code c_i is I_R</li>
</ul>
<h3 id="Private-parent-key-gt-public-child-key"><a href="#Private-parent-key-gt-public-child-key" class="headerlink" title="Private parent key =&gt; public child key"></a>Private parent key =&gt; public child key</h3><h3 id="Public-parent-key-gt-private-child-key"><a href="#Public-parent-key-gt-private-child-key" class="headerlink" title="Public parent key =&gt; private child key"></a>Public parent key =&gt; private child key</h3><p>This is not possible.</p>
<h2 id="The-key-tree"><a href="#The-key-tree" class="headerlink" title="The key tree"></a>The key tree</h2><p>The next step is cascading serveral CKD construction to build a tree. We start with one root, the master extended key m. By evaluating CKBpriv(m, i) for several values of i, we get a number of level-1 derived nodes. As each of these is again an extended key, CKDpriv can be applied to those as well.</p>
<p>To shorten notation, we will write <code>CKDpriv(CKDpriv(CKDpriv(m, 3_H), 2), 5)</code> as <code>m/3_H/2/5</code>. Equivalently for public keys, we write <code>CKDpub(CKDpub(CKDpub(M, 3), 2), 5)</code> as <code>M/3/2/5</code>. This results in the following identities:</p>
<ul>
<li>N(m/a/b/c) = N(m/a/b)/c = N(m/a)/b/b = N(m)/a/b/c = M/a/b/c</li>
<li>N(m/a_H/b/c) = N(m/a_H/b)/c = N(m/a_H)/b/c</li>
</ul>
<p>However, N(m/a_H) cannot be rewritten as N(m)/a_H, as the latter is not possible.</p>
<h2 id="Key-identifiers"><a href="#Key-identifiers" class="headerlink" title="Key identifiers"></a>Key identifiers</h2><p>Extended keys can be identified by the Hash160(RIPED160 after SHA256) of the serialized ECDSA public key K, ignoring the chain code. This corresponds exactly to the data used in traditional Bitcoin addresses. It is not advised to represent this data in base58 format though, as it may be interpreted as an address that way.</p>
<p>The first 32 bits of the identifier are called <code>key finterprint</code>.</p>
<h2 id="Serialization-format"><a href="#Serialization-format" class="headerlink" title="Serialization format"></a>Serialization format</h2><p>Extended public and private keys are serialized as follows:</p>
<ul>
<li>4 bytes: version bytes (mainnet: 0x0488B21E public, 0x0488ADE4 private; testnet: 0x043587CF public, 0x04358394 private)</li>
<li>1 byte: depth: 0x00 for master nodes, 0x01 for level-1 derived keys.</li>
<li>4 bytes: the fingerprint of the parent’s key (0x00000000 if master key)</li>
<li>4 bytes: child number, 0x00000000 if master key</li>
<li>32 bytes: the chain code</li>
<li>33 bytes: the public key or private key data</li>
</ul>
<p>The 78 bytes structure can be encoded like other Bitcoin data in Base58, by first adding 32 checksum bits(derived from the double SHA256 checksum), and then conventing to the Base58 representation.</p>
<h1 id="Master-key-generation"><a href="#Master-key-generation" class="headerlink" title="Master key generation"></a>Master key generation</h1><p>The total number of possible extended keypairs is almost 2^512, but the produced keys are only 256 bits long, and offer about half of that in terms of security. Therefore the master keys are not generated directly, but instead from a potentially short seed value.</p>
<ul>
<li>Generate a seed byte sequence S of a chosen length(between 128 and 512 bits, 256 bits is advised) from a (P)RNG.</li>
<li>Calculate I = HMAC-SHA512(Key = “Bitcoin seed”, Data = S)</li>
<li>Split I into two 32-byte sequence, I_L and I_R</li>
<li>Use parse_256(I_L) as master secret key and I_R as master chain code.</li>
</ul>
<p>In case I_L is 0 or &gt;= n, the master key is invalid.</p>
<p><img src="https://github.com/bitcoin/bips/raw/master/bip-0032/derivation.png" alt=""></p>
<h1 id="Specification-Wallet-Structure"><a href="#Specification-Wallet-Structure" class="headerlink" title="Specification: Wallet Structure"></a>Specification: Wallet Structure</h1><h2 id="The-default-wallet-layout"><a href="#The-default-wallet-layout" class="headerlink" title="The default wallet layout"></a>The default wallet layout</h2><p>An HD Wallet is organized as several ‘accounts’. Accounts are numbered, the default account (“”) being numbered 0. Clients are not required to support more than one account, if not, they only use the default account.</p>
<p>Each account is composed of two keypair chains: an internal and an external one. The external keychain is used to generate new public addresses, while the internal one is used for all other operations(change addresses, generate addresses, anything that doesn’t need to be communicated).</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-20T09:41:39.000Z">2018-11-20</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 909 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/11/20/React-Hooks/">React Hooks</a>
            
        </h1>
        <div class="content">
            <h1 id="Basic-Hooks"><a href="#Basic-Hooks" class="headerlink" title="Basic Hooks"></a>Basic Hooks</h1><h2 id="useState"><a href="#useState" class="headerlink" title="useState"></a><code>useState</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> [state, setState] = useState(initialState)</div></pre></td></tr></table></figure>
<p>Returns a stateful value and a function to update it.</p>
<p>During subsequent re-renders, the first value returned by <code>useState</code> will always be the most recent state after applying updates.</p>
<h3 id="Functional-updates"><a href="#Functional-updates" class="headerlink" title="Functional updates"></a>Functional updates</h3><p>If the new state is computed using the previous state, you can pass a function to <code>setState</code>. The function will receive the previous value and return an updated value.</p>
<blockquote>
<p>Note: Unlike the <code>setState</code> method found in class component, <code>useState</code> does not automatically merge upate objects.</p>
<p><code>useReducer</code> is more suited for managing state objects that contains multiple sub-values.</p>
</blockquote>
<h3 id="Lazy-initialization"><a href="#Lazy-initialization" class="headerlink" title="Lazy initialization"></a>Lazy initialization</h3><p>The <code>initialState</code> argument is the state used during the initial render. <strong>In subsequent renders, it is disregarded. If the initial state is the result of an expensive computation, you may provide a function instead, which will be executed only on the initial render.</strong></p>
<h2 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a><code>useEffect</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">useEffect(didUpdate)</div></pre></td></tr></table></figure>
<p>Accept a function that contains imperative, possibly effectful code.</p>
<p>Mutations, subscriptions, timers, logging and other side effects are not allowed inside the main body of a function component. Instead, use <code>useEffect</code>. The functino passed to <code>useEffect</code> will run after the render is committed to the screen.</p>
<p>By default, effects run after every completed render, but you can choose to fire it only when certain values have changed.</p>
<h3 id="Cleaning-up-an-effect"><a href="#Cleaning-up-an-effect" class="headerlink" title="Cleaning up an effect"></a>Cleaning up an effect</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">const</span> subscription = props.source.subscribe()</div><div class="line">  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="hljs-comment">// Clean up the subscription</span></div><div class="line">    subscription.unsubscribe()</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Timing-of-effects"><a href="#Timing-of-effects" class="headerlink" title="Timing of effects"></a>Timing of effects</h3><p>Unlike <code>componentDidMount</code> and <code>componentDidUpdate</code>, the function passed to <code>useEffect</code> fires after layout and paint, during a deferred event. This makes it suitable for the many common side effects, like setting up subscriptions and event handlers, because most types fo work shouldn’t block the browser from updating the screen.</p>
<p><code>useMutationEffect</code> and <code>useLayoutEffect</code> have the same signature as <code>useEffect</code> and only differ in when they are fired.</p>
<p>Although <code>useEffect</code> is deferred until after the browser has painted, it’s guaranteed to fire before any new renders.</p>
<h3 id="Conditionally-firing-an-effect"><a href="#Conditionally-firing-an-effect" class="headerlink" title="Conditionally firing an effect"></a>Conditionally firing an effect</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">useEffect(</div><div class="line">  <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="hljs-keyword">const</span> subscription = props.source.subscribe()</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> subscription.unsubscribe()</div><div class="line">  &#125;,</div><div class="line">  [props.source],</div><div class="line">)</div></pre></td></tr></table></figure>
<h2 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a><code>useContext</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> context = useContext(Context)</div></pre></td></tr></table></figure>
<p>Accepts a context object(the value returned from <code>React.createContext</code>) and returns the current context value, as given by the nearest context provider for the given context.</p>
<p>When the provider updates, this hook will trigger a rerender with the latest context value.</p>
<h1 id="Additional-Hooks"><a href="#Additional-Hooks" class="headerlink" title="Additional Hooks"></a>Additional Hooks</h1><h2 id="useReducer"><a href="#useReducer" class="headerlink" title="useReducer"></a><code>useReducer</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> [state, dispatch] = useReducer(reducer, initialState)</div></pre></td></tr></table></figure>
<p>An alternative to <code>useState</code>. Accepts a reducer of type <code>(state, action) =&gt; newState</code>, and returns the current state paired with a <code>dispatch</code> method.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> initialState = &#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> &#125;</div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reducer</span>(<span class="hljs-params">state, action</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">switch</span> (action.type) &#123;</div><div class="line">    <span class="hljs-keyword">case</span> <span class="hljs-string">'reset'</span>: &#123;</div><div class="line">      <span class="hljs-keyword">return</span> initialState</div><div class="line">    &#125;</div><div class="line">    <span class="hljs-keyword">case</span> <span class="hljs-string">'increment'</span>: &#123;</div><div class="line">      <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">count</span>: state.count + <span class="hljs-number">1</span> &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="hljs-keyword">case</span> <span class="hljs-string">'decrement'</span>: &#123;</div><div class="line">      <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">count</span>: state.count - <span class="hljs-number">1</span> &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="hljs-keyword">default</span>:</div><div class="line">      <span class="hljs-keyword">return</span> state</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Counter</span>(<span class="hljs-params">&#123; initialCount &#125;</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">const</span> [state, dispatch] = useReducer(reducer, &#123; <span class="hljs-attr">count</span>: initialCount &#125;)</div><div class="line">  <span class="hljs-keyword">return</span> (</div><div class="line">    <span class="hljs-xml"><span class="hljs-tag">&lt;&gt;</span></span></div><div class="line">      Count: &#123;state.count&#125;</div><div class="line">      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> dispatch(&#123; type: 'reset' &#125;)&#125;&gt;Reset<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="line">    <span class="hljs-tag">&lt;/&gt;</span></div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Lazy-initialization-1"><a href="#Lazy-initialization-1" class="headerlink" title="Lazy initialization"></a>Lazy initialization</h3><p><code>useReducer</code> accepts an optional third argument, <code>initialAction</code>. If provided, the initial action is applied during the initial render. This is useful for computing an initial state that includes values passed via props.</p>
<h2 id="useCallback"><a href="#useCallback" class="headerlink" title="useCallback"></a><code>useCallback</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> memoizedCallback = useCallback(</div><div class="line">  <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    doSomething(a, b)</div><div class="line">  &#125;,</div><div class="line">  [a, b],</div><div class="line">)</div></pre></td></tr></table></figure>
<p>Returns <code>memoized</code> callback.</p>
<p>Pass an inline callback and an array of inputs, <code>useCallback</code> will return a memoized version of the callback that only changes if one of the inputs has changed. This is useful when passing callbacks to optimized child components that rely on reference equality to prevent unnecessary render.</p>
<blockquote>
<p>Note: The array of inputs is not passed as arguments to the callback. Conceptually, though, that’s what represent: every value referenced inside the callback should also appear in the inputs array.</p>
</blockquote>
<h2 id="useMemo"><a href="#useMemo" class="headerlink" title="useMemo"></a><code>useMemo</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> memoizedValue = useMemo(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> computeExpensiveValue(a, b), [a, b])</div></pre></td></tr></table></figure>
<p>Returns a <code>memoized</code> value.</p>
<p>Pass a “create” function and an array of inputs, <code>useMemo</code> will only recompute the memoized value when one of the inputs has changed. This optimization helps to avoid expensive calculations on every render.</p>
<p>If no array is provided, a new value will be computed whenever a new function instance is passed as the first argument.(With an inline function, on every render)</p>
<h2 id="useRef"><a href="#useRef" class="headerlink" title="useRef"></a><code>useRef</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> refContainer = useRef(initialValue)</div></pre></td></tr></table></figure>
<p><code>useRef</code> returns a mutable ref object whose <code>.current</code> property is initialized to the passed argument(<code>initialValue</code>). The returned object will persist for the full lifetime of the component.</p>
<p>A common use case is to access a child imperatively:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TextInputFocusButton</span>(<span class="hljs-params"></span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">const</span> inputEl = useRef(<span class="hljs-literal">null</span>)</div><div class="line">  <span class="hljs-keyword">const</span> onButtonClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    inputEl.current.focus()</div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">return</span> (</div><div class="line">    &lt;&gt;</div><div class="line">      &lt;input ref=&#123;inputEl&#125; type="text" /&gt;</div><div class="line">      &lt;button onClick=&#123;onButtonClick&#125;&gt;Focus the input&lt;/button&gt;</div><div class="line">    &lt;/&gt;</div><div class="line">  )</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="useImperativeMethods"><a href="#useImperativeMethods" class="headerlink" title="useImperativeMethods"></a><code>useImperativeMethods</code></h2><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">useImperativeMethods(ref, createInstance, [inputs])</div></pre></td></tr></table></figure>
<p><code>useImperativeMethods</code> customizes the instance value that is exposed to parent component when use <code>ref</code>. As always, imperative code using refs should be avoided in most cases. <code>useImperativeMethods</code> should be used with <code>forwardRef</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FancyInput</span>(<span class="hljs-params">props, ref</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">const</span> inputRef = useRef()</div><div class="line">  useImperativeMethods(ref, () =&gt; (&#123;</div><div class="line">    <span class="hljs-attr">focus</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">      inputRef.current.focus()</div><div class="line">    &#125;,</div><div class="line">  &#125;))</div><div class="line">  <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&#123;inputRef&#125;</span> /&gt;</span></span></div><div class="line">&#125;</div><div class="line">FancyInput = forwardRef(FancyInput)</div></pre></td></tr></table></figure>
<p>In this example, a parent component that renders <code>&lt;FancyInput ref={fancyInputRef} /&gt;</code> would be able to call <code>fancyInputRef.current.focus()</code>.</p>
<h2 id="useMutationEffect"><a href="#useMutationEffect" class="headerlink" title="useMutationEffect"></a><code>useMutationEffect</code></h2><p>The signature is identical to <code>useEffect</code>, but it fires synchronously during the same phase that React performs its DOM mutations, before sibling components has been updated.</p>
<p>Prefer the standard <code>useEffect</code> when possible to avoid blocking visual updates.</p>
<blockquote>
<p>Note: Avoid reading from the DOM in <code>useMutationEffect</code>. If you do, you can cause performance problems by introducing <code>layout trash</code>.</p>
</blockquote>
<h2 id="useLayoutEffect"><a href="#useLayoutEffect" class="headerlink" title="useLayoutEffect"></a><code>useLayoutEffect</code></h2><p>The signature is identical to <code>useEffect</code> but it fires synchronously <strong>after</strong> all DOM mutations.</p>
<p>Use this to read layout from the DOM and synchronously re-render. Updates scheduled inside <code>useLayoutEffect</code> will be flushed synchronously, before the browser has a chance to paint.</p>
<blockquote>
<p>Fires in the same phase as <code>componentDidMount</code> and <code>componentDidUpdate</code></p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-11T15:52:25.000Z">2018-11-11</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 212 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/11/11/5-tips-in-CRA-2-0/">5 Tips in CRA@2.0</a>
            
        </h1>
        <div class="content">
            <p><a href="https://www.telerik.com/blogs/5-things-i-didnt-know-about-create-react-app" target="_blank" rel="noopener">Original</a></p>
<p>It’s fucking long time not learning React.</p>
<p>Five Tips</p>
<ol>
<li>Displaying Lint Error in the Editor</li>
</ol>
<p>Create <code>.eslintrc</code> with content of</p>
<figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  "extends: "react-app"</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ol>
<li>Formatting Code Automatically</li>
</ol>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev prettier husky lint-staged</div></pre></td></tr></table></figure>
<p>And add scripts in <code>package.json</code></p>
<figure class="highlight json hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="hljs-attr">"husky"</span>: &#123;</div><div class="line">    <span class="hljs-attr">"hooks"</span>: &#123;</div><div class="line">      <span class="hljs-attr">"pre-commit"</span>: <span class="hljs-string">"lint-staged"</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="hljs-attr">"lint-staged"</span>: &#123;</div><div class="line">    <span class="hljs-attr">"src/**/*.&#123;js,jsx,json,css&#125;"</span>: [<span class="hljs-string">"prettier --write"</span>, <span class="hljs-string">"git add"</span>]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>I prefer to use <code>prettier</code> with <code>eslint</code></p>
<ol>
<li>Developing Components in Isolation</li>
</ol>
<p>…</p>
<p>I use <code>bit</code></p>
<ol>
<li>Making a Progressive Web App</li>
</ol>
<p>In <code>src/index.js</code>, change <code>serviceWorker.unregister()</code> to <code>serviceWorker.register()</code></p>
<ol>
<li>Code Splitting</li>
</ol>
<p>Create React App v2 supports code splitting via dynamic <code>import()</code> statements. That is, if it encouters a call to <code>import(&#39;./someModule&#39;)</code> when building your app, it will create a new chunk for someModule and all its dependencies, totally seperate from your entry bundle.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></div><div class="line"><span class="hljs-keyword">import</span> &#123; Formik &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'formik'</span></div><div class="line"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> Yup <span class="hljs-keyword">from</span> <span class="hljs-string">'yup'</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> formValidator = Yup.object().shape(<span class="hljs-comment">/* ... */</span>)</div><div class="line"></div><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Form</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="hljs-keyword">return</span> &lt;Formik validationSchema=&#123;formValidator&#125;&gt;&#123;/* ... */&#125;&lt;/Formik&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> React, &#123; Component &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  state = &#123;</div><div class="line">    <span class="hljs-attr">Form</span>: <span class="hljs-literal">undefined</span>,</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  showForm = <span class="hljs-keyword">async</span> () =&gt; &#123;</div><div class="line">    <span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">default</span>: Form &#125; = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./Form'</span>)</div><div class="line">    <span class="hljs-keyword">this</span>.setState(&#123; Form &#125;)</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="hljs-keyword">const</span> &#123; Form &#125; = <span class="hljs-keyword">this</span>.state</div><div class="line">    <span class="hljs-keyword">return</span> &lt;div className="app"&gt;&#123;Form ? &lt;Form /&gt; : &lt;button onClick=&#123;this.showForm&#125;&gt;Show Form&lt;/button&gt;&#125;&lt;/div&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-08T03:30:30.000Z">2018-11-08</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 2 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/11/08/Assembly-in-Solidity/">Assembly in Solidity</a>
            
        </h1>
        <div class="content">
            <h1 id="Inline-Assembly"><a href="#Inline-Assembly" class="headerlink" title="Inline Assembly"></a>Inline Assembly</h1><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-09-10T05:26:39.000Z">2018-09-10</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 154 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/09/10/Analysis-of-Ujo/">Analysis of Ujo</a>
            
        </h1>
        <div class="content">
            <h1 id="What-is-Ujo"><a href="#What-is-Ujo" class="headerlink" title="What is Ujo"></a>What is Ujo</h1><p>The Ujo platform uses blockchain technology to create a transparent and decentralized database of rights and rights owners, automating royalty payments using smart contracts and cryptocurrency.</p>
<p>Ujo Music is a ConsenSys spoke, with a vision for a music industry that allows creators to grow and thrive independently. It is a platform that uses the ethereum blockchain as the substrate for innovation by empowering artists, digitizing their music rights and metadata, sharing this information in an open environment, thus enabling new applications, products and services to license their catelogs and pay artists directly with minimal friction.</p>
<h1 id="History"><a href="#History" class="headerlink" title="History"></a>History</h1><p>2015.10, <strong>IMOGEN HEAP</strong>: In 2015 Imogen Heap collaborated with Ujo to demonstrate how Ethereum could usher in a modern music supply chain built on a backbone of prompt and transparent payments</p>
<h1 id="Why-use-Ujo"><a href="#Why-use-Ujo" class="headerlink" title="Why use Ujo"></a>Why use Ujo</h1><h1 id="How-does-Ujo-work"><a href="#How-does-Ujo-work" class="headerlink" title="How does Ujo work"></a>How does Ujo work</h1><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><ul>
<li>[1] (Ujo FAQ)[<a href="https://ujomusic.com/faq" target="_blank" rel="noopener">https://ujomusic.com/faq</a>]</li>
<li>[2] (Imogen Heap)[<a href="https://imogen2.surge.sh/#/imogen_heap/tiny_human/tiny_human" target="_blank" rel="noopener">https://imogen2.surge.sh/#/imogen_heap/tiny_human/tiny_human</a>]</li>
</ul>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-08-27T06:38:32.000Z">2018-08-27</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 75 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/08/27/development-of-neuron-web-extension/">Development of Neuron Web Extension</a>
            
        </h1>
        <div class="content">
            <h1 id="Create-Project"><a href="#Create-Project" class="headerlink" title="Create Project"></a>Create Project</h1><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create-react-app neuron-web scripts-version=react-scripts-ts</div></pre></td></tr></table></figure>
<h1 id="Add-Manifest"><a href="#Add-Manifest" class="headerlink" title="Add Manifest"></a>Add Manifest</h1><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">// ./public/manifest.json</div><div class="line"></div><div class="line">&#123;</div><div class="line">  &quot;short_name&quot;: &quot;NeuronWeb&quot;,</div><div class="line">  &quot;name&quot;: &quot;Neuron Web&quot;,</div><div class="line">  &quot;start_url&quot;: &quot;./index.html&quot;,</div><div class="line">  &quot;display&quot;: &quot;standalone&quot;,</div><div class="line">  &quot;theme_color&quot;: &quot;#000&quot;,</div><div class="line">  &quot;background_color&quot;: &quot;#fff&quot;,</div><div class="line">  &quot;browser_action&quot;: &#123;</div><div class="line">    &quot;default_popup&quot;: &quot;./index.html&quot;,</div><div class="line">    &quot;default_title&quot;: &quot;NervosWeb&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;manifest_version&quot;: 2,</div><div class="line">  &quot;version&quot;: &quot;1.0&quot;,</div><div class="line">  &quot;permissions&quot;: [</div><div class="line">    &quot;tabs&quot;,</div><div class="line">    &quot;activeTab&quot;,</div><div class="line">    &quot;clipboardWrite&quot;,</div><div class="line">    &quot;http://**/*&quot;,</div><div class="line">    &quot;https://**/*&quot;</div><div class="line">  ],</div><div class="line">  &quot;content_security_policy&quot;: &quot;script-src &apos;self&apos; &apos;unsafe-eval&apos;; object-src &apos;self&apos;&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Add-Style-Dependencies"><a href="#Add-Style-Dependencies" class="headerlink" title="Add Style Dependencies"></a>Add Style Dependencies</h1><figure class="highlight html hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://fonts.googleapis.com/css?family=Roboto:300,400,500"</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add @mateiral-ui/&#123;core,icons&#125;</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-07-21T12:54:58.000Z">2018-07-21</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 minutes read (About 1475 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/07/21/Details-in-Web3-Contract/">Details in Web3 -- Contract</a>
            
        </h1>
        <div class="content">
            <h1 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// To initialize a contract</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">var</span> Contract = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-eth-contract'</span>)</div><div class="line">Contract.setProvider(<span class="hljs-string">'ws://localhost:8546'</span>)</div><div class="line"><span class="hljs-keyword">var</span> contract = <span class="hljs-keyword">new</span> Contract(abi, address, options)</div></pre></td></tr></table></figure>
<h1 id="Import"><a href="#Import" class="headerlink" title="Import"></a>Import</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> _ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'underscore'</span>)</div><div class="line"><span class="hljs-keyword">var</span> core = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core'</span>)</div><div class="line"><span class="hljs-keyword">var</span> Method = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-method'</span>)</div><div class="line"><span class="hljs-keyword">var</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-utils'</span>)</div><div class="line"><span class="hljs-keyword">var</span> Subscription = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-subscription'</span>).subscription</div><div class="line"><span class="hljs-keyword">var</span> formatters = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-helpers'</span>).formatters</div><div class="line"><span class="hljs-keyword">var</span> errors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-helpers'</span>).errors</div><div class="line"><span class="hljs-keyword">var</span> promiEvent = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-core-promievent'</span>)</div><div class="line"><span class="hljs-keyword">var</span> abi = <span class="hljs-built_in">require</span>(<span class="hljs-string">'web3-eth-abi'</span>)</div></pre></td></tr></table></figure>
<h1 id="Contract-Constructor"><a href="#Contract-Constructor" class="headerlink" title="Contract Constructor"></a>Contract Constructor</h1><figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line"> * Should be called to create new contract instance</div><div class="line"> *</div><div class="line"> * @method Contract</div><div class="line"> * @constructor</div><div class="line"> * @param &#123;Array&#125; jsonInterface</div><div class="line"> * @param &#123;String&#125; address</div><div class="line"> * @param &#123;Object&#125; options</div><div class="line"> */</div><div class="line"></div><div class="line">var Contract = function Contract(jsonInterface, address, options) &#123;</div><div class="line">  var _this = this</div><div class="line">  var args = Array.prototype.slice.call(arguments)</div><div class="line"></div><div class="line">  // check if the instance is initialized correctly</div><div class="line">  if (!(this instanceof Contract)) &#123;</div><div class="line">    throw new Error(</div><div class="line">      'Please use the "new" keyword to instantiate a web3.eth.contract() object!',</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // sets _requestManager</div><div class="line">  core.packageInit(this, [this.constructor.currentProvider])</div><div class="line"></div><div class="line">  // set clearSubscriptions</div><div class="line">  this.clearSubscriptions = this._requestManager.clearSubscriptions</div><div class="line">  // check params jsonInterface</div><div class="line">  if (!jsonInterface || !Array.isArray(jsonInterface)) &#123;</div><div class="line">    throw new Error(</div><div class="line">      'You must provide the json interface of the contract when instantiating a contract object',</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // clear the options object</div><div class="line">  this.options = &#123;&#125;</div><div class="line"></div><div class="line">  var lastArg = args[args.length - 1]</div><div class="line">  // set options</div><div class="line">  if (_.isObject(lastArg) &amp;&amp; !_.isArray(lastArray)) &#123;</div><div class="line">    options = lastArgs</div><div class="line">    this.options = _.extend(this.options, this._getOrSetDefaultOptions(options))</div><div class="line">    // clear address if the fact is options, in this case the address is not passed in.</div><div class="line">    if (_.isObject(address)) &#123;</div><div class="line">      address = null</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  // set address</div><div class="line">  Object.defineProperty(this.options, 'address', &#123;</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      if (value) &#123;</div><div class="line">        _this._address = utils.toChecksumAddress(</div><div class="line">          formatters.inputAddressFormatter('value'),</div><div class="line">        )</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return _this._address</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  // add method and event signature when the jsonInterface gets set</div><div class="line">  Object.defineProperty(this.options, 'jsonInterface', &#123;</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      _this.methods = &#123;&#125;</div><div class="line">      _this.events = &#123;&#125;</div><div class="line"></div><div class="line">      _this._jsonInterface = value.map(method =&gt; &#123;</div><div class="line">        var func, funcName</div><div class="line">        if (method.name) &#123;</div><div class="line">          funcName = utils._jsonInterfaceMethodToString(method)</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (method.type === 'function') &#123;</div><div class="line">          method.signature = abi.encodeFunctionSignature(funcName)</div><div class="line">          func = _this._createTxObject.bind(&#123;</div><div class="line">            method: method,</div><div class="line">            parent: _this,</div><div class="line">          &#125;)</div><div class="line"></div><div class="line">          // add method only if not one already exists</div><div class="line">          if (!_this.methods[method.name]) &#123;</div><div class="line">            _this.methods[method.name] = func</div><div class="line">          &#125; else &#123;</div><div class="line">            var cascadeFunc = _this._createTxObject.bind(&#123;</div><div class="line">              method: method,</div><div class="line">              parent: _this,</div><div class="line">              nextMethod: _this.methods[method.name],</div><div class="line">            &#125;)</div><div class="line">            this.methods[method.name] = cascadeFunc</div><div class="line">          &#125;</div><div class="line">          // definitely add the method based on its signature</div><div class="line">          _this.methods[method.signature] = func</div><div class="line">          //add method by name</div><div class="line">          _this.methods[method.name] = func</div><div class="line">          // event</div><div class="line">        &#125; else if (method.type === 'event') &#123;</div><div class="line">          method.signature = abi.encodeEventSignature(funcName)</div><div class="line">          var event = _this._on.bind(_this, method.signature)</div><div class="line"></div><div class="line">          // add method only if not already exists</div><div class="line">          if (</div><div class="line">            !_this.events[method.name] ||</div><div class="line">            _this.events[method.name].name === 'bound'</div><div class="line">          ) &#123;</div><div class="line">            _this.events[method.name] = event</div><div class="line">          &#125;</div><div class="line"></div><div class="line">          // definitely add the method based on its signature</div><div class="line">          _this.events[method.signature] = event</div><div class="line"></div><div class="line">          // add event by name</div><div class="line">          _this.events[funcName] = event</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        return method</div><div class="line">      &#125;)</div><div class="line"></div><div class="line">      // add allEvents</div><div class="line">      _this.events.allEvents = _this._on.bind(_this, 'allevents')</div><div class="line"></div><div class="line">      return _this._jsonInterface</div><div class="line">    &#125;,</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return _this._jsonInterface</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  // get default account from the Class</div><div class="line">  var defaultAccount = this.constructor.defaultAccount</div><div class="line">  var defaultBlock = this.constructor.defaultBlock || 'latest'</div><div class="line"></div><div class="line">  Object.defineProperty(this, 'defaultAccount', &#123;</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return defaultAddress</div><div class="line">    &#125;,</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      if (value) &#123;</div><div class="line">        defaultAccount = utils.toChecksumAddress(</div><div class="line">          formatters.inputAddressFormatter(value),</div><div class="line">        )</div><div class="line">      &#125;</div><div class="line">      return value</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  Object.defineProperty(this, 'defaultBlock', &#123;</div><div class="line">    get: () =&gt; &#123;</div><div class="line">      return defaultBlock</div><div class="line">    &#125;,</div><div class="line">    set: value =&gt; &#123;</div><div class="line">      defaultBlock = value</div><div class="line">      return value</div><div class="line">    &#125;,</div><div class="line">    enumerable: true,</div><div class="line">  &#125;)</div><div class="line"></div><div class="line">  // properties</div><div class="line">  this.methods = &#123;&#125;</div><div class="line">  this.events = &#123;&#125;</div><div class="line">  this._address = null</div><div class="line">  this._jsonInterface = []</div><div class="line"></div><div class="line">  // set getter/setter properties</div><div class="line">  this.options.address = address</div><div class="line">  this.options.jsonInterface = jsonInterface</div><div class="line">&#125;</div><div class="line"></div><div class="line">Contract.setProvider = function(provider, accounts) &#123;</div><div class="line">  // Contract.currentProvider = provider</div><div class="line">  core.packageInit(this, [provider])</div><div class="line">  this._ethAccounts = accounts</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Get the callback and modify the array if necessary</div><div class="line"> *</div><div class="line"> * @method _getCallback</div><div class="line"> * @param &#123;Array&#125; args</div><div class="line"> * @return &#123;Function&#125; the callback</div><div class="line"> */</div><div class="line">Contract.prototype._getCallback = function getCallback(args) &#123;</div><div class="line">  if (args &amp;&amp; _.isFunction(args[args.length - 1])) &#123;</div><div class="line">    return args.pop() // modify the args array!</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Checks that no listener with name 'newListener' or 'removeListener' is added</div><div class="line"> *</div><div class="line"> * @method _checkLister</div><div class="line"> * @param &#123;String&#125; type</div><div class="line"> * @param &#123;String&#125; event</div><div class="line"> * @return &#123;Object&#125; the contract instance</div><div class="line"> */</div><div class="line">Contract.prototype._checkListerner = function(type, event) &#123;</div><div class="line">  if (event === type) &#123;</div><div class="line">    throw new Error(</div><div class="line">      `The event $&#123;type&#125; is a reserved event name, you can't use it`,</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Use default values, if options are not avaible</div><div class="line"> *</div><div class="line"> * @method _getOrSetDefaultOptions</div><div class="line"> * @param &#123;Object&#125; options the options given by the user</div><div class="line"> * @return &#123;Object&#125; the options with gaps filled by defaults</div><div class="line"> */</div><div class="line">Contract.prototype._getOrSetDefaultOptions = function getOrSetDefaultOptions(</div><div class="line">  options,</div><div class="line">) &#123;</div><div class="line">  var gasPrice = options.gasPrice ? String(options.gasPrice)&#125; : null</div><div class="line">  var from = options.from ? utils.toChecksumAddress(formatters.inputAddressFormatter(options.from)): null</div><div class="line"></div><div class="line">  options.data = option.data || this.options.data</div><div class="line"></div><div class="line">  option.from = from || this.options.from</div><div class="line">  option.gasPrice = gasPrice || this.options.gasPrice</div><div class="line">  options.gas = options.gas || options.gasLimit || this.options.gas</div><div class="line"></div><div class="line">  delete options.gasLimit</div><div class="line">  return options</div><div class="line">&#125;</div><div class="line"></div><div class="line">// TODO:</div><div class="line">// _encodeEventABI</div><div class="line">// _decodeEventABI</div><div class="line">// _encodeMethodABI</div><div class="line">// _decodeMethodABI</div><div class="line">// _decodeMethodReturn</div><div class="line"></div><div class="line">/**</div><div class="line"> * Deploys a contract and fire events based on its state: transactionHash, receipt</div><div class="line"> *</div><div class="line"> * All event listeners will be removed, once the last possible event is fired ('error' or 'receipt')</div><div class="line"> *</div><div class="line"> * @method deploy</div><div class="line"> * @param &#123;Object&#125; options</div><div class="line"> * @param &#123;Function&#125; callback</div><div class="line"> * @return &#123;Object&#125; EventEmitter possible are "error", "transactionHash", and "receipt"</div><div class="line"> */</div><div class="line">Contract.prototype.deploy = function(options, callback) &#123;</div><div class="line">  options = options || &#123;&#125;</div><div class="line">  options.arguments = options.arguments || []</div><div class="line">  options = this._getOrSetDefaultOptions(options)</div><div class="line"></div><div class="line">  // return error if no 'data' is specified</div><div class="line">  if (!options.data) &#123;</div><div class="line">    return utils._fireError(new Error('No "data" specifed in neither the given options, nor the default options'), null, null, callback)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  var constructor = _.find(this.options.jsonInterface, function(method) &#123;</div><div class="line">    return (method.type === 'contructor')</div><div class="line">  &#125;) || &#123;&#125;</div><div class="line"></div><div class="line">  constructor.signature = 'constructor'</div><div class="line"></div><div class="line">  return this._createTxObject.apply(&#123;</div><div class="line">    method: constructor,</div><div class="line">    parent: this,</div><div class="line">    deployData: options.data,</div><div class="line">    _ethAccounts: this.constructor._ethAccounts</div><div class="line">  &#125;, options.arguments)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// TODO:</div><div class="line">// _generateEventOptions</div><div class="line">// clone</div><div class="line">// once</div><div class="line">// _on</div><div class="line">// getPastEvents</div><div class="line"></div><div class="line">/**</div><div class="line"> * returns the an object with call, send, estimate functions</div><div class="line"> *</div><div class="line"> * @method _createTxObject</div><div class="line"> * @return &#123;Object&#125; an object with functions to call the method</div><div class="line"> */</div><div class="line"></div><div class="line">Contract.prototype._createTxObject = function _createTxObject()&#123;</div><div class="line">  var args = Array.prototype.slice.call(arguments)</div><div class="line">  var txObject = &#123;&#125;</div><div class="line"></div><div class="line">  if (this.method.type === 'function') &#123;</div><div class="line">    txObject.call = this.parent._executeMethod.bind(txObject, 'call')</div><div class="line">    txObject.call.request = this.parent._executeMethod.bind(txObject, 'call', true) // to make batch request</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  txObject.send = this.parent._executeMethod.bind(txObject, 'send')</div><div class="line">  txObject.send.request = this.parent._executeMethod.bind(txObject)</div><div class="line">  txObject.encodeABI = this.parent._encodeMethodABI.bind(txObject)</div><div class="line">  txObject.estimateGas = this.parent._executeMethod.bind(txObject, 'estimate')</div><div class="line"></div><div class="line">  // check arguments length</div><div class="line">  if (args &amp;&amp; this.method.inputs &amp;&amp; args.length !== this.method.inputs.length) &#123;</div><div class="line">    if (this.nextMethod) &#123;</div><div class="line">      return this.nextMethod.apply(null, args)</div><div class="line">    &#125;</div><div class="line">    throw errors.InvalidNumberOfParams(args.length, this.method.inputs.length, this.method.name)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  txObject.arguments = args || []</div><div class="line">  txObject._method = this.method</div><div class="line">  txObject._parent = this.parent</div><div class="line">  txObject._ethAccounts = this.parent.constructor._ethAccounts || this._ethAccounts</div><div class="line"></div><div class="line">  if(this.deployData) &#123;</div><div class="line">    txObject._deployData = this.deployData</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  return txObject</div><div class="line">&#125;</div><div class="line"></div><div class="line">// _processExecuteArguments</div><div class="line"></div><div class="line">/**</div><div class="line"> * Execute a call, transact or estimateGas on a contract function</div><div class="line"> *</div><div class="line"> * @method _executeMethod</div><div class="line"> * @param &#123;String&#125; type the type this execute function should execute</div><div class="line"> * @param &#123;Boolean&#125; makeRequest if true, it simply returns the request parameters, rather than execute it.</div><div class="line"> */</div><div class="line"></div><div class="line">Contract.prototype._executeMethod = function _executeMethod () &#123;</div><div class="line">  var _this = this</div><div class="line">  var args = this._parent._processExecuteArguments.call(this, Array.prototype.slice.call(arguments))</div><div class="line">  var defer = promiEvent((args.type !== 'send))</div><div class="line">  var ethAccounts = _this.constructor._ethAccounts || _this._ethAccounts</div><div class="line"></div><div class="line">  // simply return request for batch requests</div><div class="line"></div><div class="line">  if (args.generateRequest) &#123;</div><div class="line">    // handle batch request</div><div class="line">    var payload = &#123;</div><div class="line">      params: [formatters.inputCallFormatter.call(this._parent, args.options)],</div><div class="line">      callback: args.callback,</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if (args.type === 'call') &#123;</div><div class="line">      payload.params.push(formatters.inputDefaultBlockNumber.call(this._parent, args.defaultBlockNumber))</div><div class="line">      payload.method = 'eth_call'</div><div class="line">      payload.format = this._parent.decodeMethodReturn.bind(null, this._method.outputs)</div><div class="line">    &#125; else &#123;</div><div class="line">      payload.method = 'eth_sendTransaction'</div><div class="line">    &#125;</div><div class="line">    return payload</div><div class="line">  &#125; else &#123;</div><div class="line">    // handle call or send</div><div class="line">    switch (args.type) &#123;</div><div class="line">      case 'estimate': &#123;</div><div class="line">        var estimateGas = (new Method(&#123;</div><div class="line">          name: 'estimateGas',</div><div class="line">          call: 'eth_estimateGas',</div><div class="line">          params: 1,</div><div class="line">          inputFormatter: [formatter.inputCallFormatter],</div><div class="line">          outputFormatter: utils.hexToNumber,</div><div class="line">          requestManager: _this._parent._requestManager,</div><div class="line">          accounts: ethAccounts, // specify accounts</div><div class="line">          defaultAccount: _this._parent.defaultAccount,</div><div class="line">          defaultBlock: _this._parent.defaultBlock,</div><div class="line">        &#125;)).createFunction();</div><div class="line">        return estimateGas(args.options, args.callback)</div><div class="line">      &#125;</div><div class="line">      case 'call': &#123;</div><div class="line">        var call = (new Method(&#123;</div><div class="line">           name: 'call',</div><div class="line">           call: 'eth_call',</div><div class="line">           params: 2,</div><div class="line">           inputFormatter: [formatters.inputCallFormatter, formatters.inputDefaultBlockNumberFormatter],</div><div class="line">           outputFormatter: result =&gt; &#123;</div><div class="line">             return _this._parent.decodeMethodReturn(_this._method.outputs, result)</div><div class="line">           &#125;,</div><div class="line">           requestManager: _this._parent._requestManager,</div><div class="line">           accounts: ethAccounts, // is eth.accounts (necessary for wallet signing)</div><div class="line">           defaultAccount: _this._parent.defaultAccount,</div><div class="line">           defaultBlock: _this._parent.defaultBlock,</div><div class="line">        &#125;)).createFunction()</div><div class="line"></div><div class="line">        return call(args.options, args.defaultBlock, args.callback)</div><div class="line">      &#125;</div><div class="line">      case 'send': &#123;</div><div class="line">        if(!utils.isAddress(args.options.from)) &#123;</div><div class="line">            return utils._fireError(new Error('No "from" address specified in neither the given options, nor the default options.'), defer.eventEmitter, defer.reject, args.callback);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        if (_.isBoolean(this._method.payable) &amp;&amp; !this._method.payable &amp;&amp; args.options.value &amp;&amp; args.options.value &gt; 0) &#123;</div><div class="line">            return utils._fireError(new Error('Can not send value to non-payable contract method or constructor'), defer.eventEmitter, defer.reject, args.callback);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // make sure receipt logs are decoded</div><div class="line">        var extraFormatters = &#123;</div><div class="line">          receiptFormatter: receipt =&gt; &#123;</div><div class="line">            if (_.isArray(receipt.logs)) &#123;</div><div class="line">              // decode logs</div><div class="line">              var events = _.map(receipt.logs, log =&gt; &#123;</div><div class="line">                return _this._parent._decodeEventABI.call(&#123;</div><div class="line">                  name: 'ALLEVENT',</div><div class="line">                  jsonInterface: _this._parent.options.jsonInterface,</div><div class="line">                &#125;, log)</div><div class="line">              &#125;)</div><div class="line"></div><div class="line">              // make sure log names keys</div><div class="line">              receipt.events = &#123;&#125;</div><div class="line">              var count = 0</div><div class="line">              events.forEach(ev =&gt; &#123;</div><div class="line">                if (ev.event) &#123;</div><div class="line">                  // if &gt; 1 of the same event, don't overwrite any existing events</div><div class="line">                  if (receipt.events[ev.event]) &#123;</div><div class="line">                    if (Array.isArray(receipt.events[ev.event])) &#123;</div><div class="line">                      receipt.events[ev.event].push(ev)</div><div class="line">                    &#125; else &#123;</div><div class="line">                      receipt.events[ev.event] = [receipt.events[ev.event], ev]</div><div class="line">                    &#125;</div><div class="line">                  &#125; else &#123;</div><div class="line">                    receipt.event[ev.event] = ev</div><div class="line">                  &#125;</div><div class="line">                &#125; else &#123;</div><div class="line">                  receipt.events[count] = ev</div><div class="line">                  count++</div><div class="line">                &#125;</div><div class="line">              &#125;)</div><div class="line">              delete receipt.logs</div><div class="line">            &#125;</div><div class="line">            return receipt</div><div class="line">          &#125;,</div><div class="line"></div><div class="line">          contractDeployFormatter: receipt =&gt; &#123;</div><div class="line">            var newContract = _this._parent.clone()</div><div class="line">            newContract.options.address = receipt.contractAddress</div><div class="line">            return newContract</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        var sendTransaction = (new Method(&#123;</div><div class="line">          name: 'sendTransaction',</div><div class="line">          call: 'eth_sendTransaction',</div><div class="line">          params: 1,</div><div class="line">          inputFormatter: [formatters.inputTransactionFormatter],</div><div class="line">          requestManager: _this._parent.requestManager,</div><div class="line">          accounts: _this.constructor._ethAccount || _this._ethAccounts, // is eth.accounts,</div><div class="line">          defaultAccount: _this._parent.defaultAccount,</div><div class="line">          defaultBlock: _this._parent.defaultBlock,</div><div class="line">          extraFormatter: extraFormatters,</div><div class="line">        &#125;)).createFunction()</div><div class="line"></div><div class="line">        return sendTransaction(args.options, args.callback)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-07-11T06:02:47.000Z">2018-07-11</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 0 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/07/11/Declaration-in-TypeScript/">Declaration in TypeScript</a>
            
        </h1>
        <div class="content">
            
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-07-10T03:53:59.000Z">2018-07-10</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 60 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/07/10/RxjsV6/">RxjsV6</a>
            
        </h1>
        <div class="content">
            <h3 id="animationFrame-scheduler"><a href="#animationFrame-scheduler" class="headerlink" title="animationFrame - scheduler"></a>animationFrame - scheduler</h3><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> animationFrame: any;</div></pre></td></tr></table></figure>
<p>Perform task when <code>window.requestAnimationFrame</code> would fire.</p>
<p>When <code>animationFrame</code> scheduler is used with delay, it will fall back to <code>async</code> scheduler behaviour.</p>
<p>Without delay, <code>animationFrame</code> scheduler can be used to create smooth browser animations. It makes sure scheduled task will happen just before next browser content repaint, thus performing animations as efficiently as possible.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-05-17T12:37:13.000Z">2018-05-17</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a minute read (About 216 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/05/17/content-parser-in-cita/">Content Parser in CITA</a>
            
        </h1>
        <div class="content">
            <p>The parse now we used is</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> parser = <span class="hljs-function">(<span class="hljs-params">content: string</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">const</span> bytes = hexToBytes(content)</div><div class="line">  <span class="hljs-keyword">const</span> decoded = pb.UnverifiedTransaction.deserializeBinary(bytes)</div><div class="line">  <span class="hljs-keyword">const</span> tx = decoded.getTransaction()</div><div class="line">  <span class="hljs-keyword">return</span> &#123;</div><div class="line">    <span class="hljs-attr">from</span>: tx.getFrom ? tx.getFrom() : <span class="hljs-string">''</span>,</div><div class="line">    <span class="hljs-attr">to</span>: tx.getTo ? tx.getTo() : <span class="hljs-string">''</span>,</div><div class="line">    <span class="hljs-attr">data</span>: tx.getData ? tx.getData() : <span class="hljs-string">''</span>,</div><div class="line">    <span class="hljs-attr">value</span>: tx.getValue ? tx.getValue().toString() : <span class="hljs-string">''</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Here we use these methods:</p>
<ul>
<li><p>hexToBytes(content) =&gt; bytes</p>
</li>
<li><p>pb.UnverifiesTransaction.deserializeBinary(bytes) =&gt; decoded</p>
</li>
<li><p>decoded.getTransaction() =&gt; transaction</p>
</li>
<li><p>transaction.{getFrom, getTo, getValue, getData}</p>
</li>
</ul>
<h5 id="hexToBytes"><a href="#hexToBytes" class="headerlink" title="hexToBytes"></a>hexToBytes</h5><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> hexToBytes = <span class="hljs-function">(<span class="hljs-params">hex: string</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">let</span> _hex = hex.startsWith(<span class="hljs-string">'0x'</span>) ? hex.slice(<span class="hljs-number">2</span>) : hex <span class="hljs-comment">// remove 0x prefix</span></div><div class="line">  <span class="hljs-keyword">let</span> result = []</div><div class="line">  <span class="hljs-keyword">while</span> (_hex.length &gt;= <span class="hljs-number">2</span>) &#123;</div><div class="line">    result.push(<span class="hljs-built_in">parseInt</span>(_hex.substring(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>), <span class="hljs-number">16</span>)) <span class="hljs-comment">// parse hex to bytes(int8 array)</span></div><div class="line">    _hex = _hex.substring(<span class="hljs-number">2</span>, _hex.length)</div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">return</span> result</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="pb-UnverifiedTransaction-deserializeBinary"><a href="#pb-UnverifiedTransaction-deserializeBinary" class="headerlink" title="pb.UnverifiedTransaction.deserializeBinary"></a>pb.UnverifiedTransaction.deserializeBinary</h5><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> jspb = <span class="hljs-built_in">require</span>(<span class="hljs-string">'google-protobuf'</span>)</div><div class="line"><span class="hljs-keyword">const</span> goog = jspb</div><div class="line"></div><div class="line">proto.UnverifiedTransaction = <span class="hljs-function"><span class="hljs-params">opt_data</span> =&gt;</span> &#123;</div><div class="line">  jspb.Message.initialize(<span class="hljs-keyword">this</span>, opt_data, <span class="hljs-number">0</span>, <span class="hljs-number">-1</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line">proto.UnverifiedTransaction.deserializeBinaryFromReader = <span class="hljs-function">(<span class="hljs-params">msg, reader</span>) =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">while</span> (reader.nextField()) &#123;</div><div class="line">    <span class="hljs-keyword">if</span> (reader.isEndGroup()) &#123;</div><div class="line">      <span class="hljs-keyword">break</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="hljs-keyword">let</span> field = reader.getFieldNumber()</div><div class="line">    <span class="hljs-keyword">switch</span> (field) &#123;</div><div class="line">      <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: &#123;</div><div class="line">        <span class="hljs-keyword">let</span> value = <span class="hljs-keyword">new</span> proto.Transaction()</div><div class="line">        reader.readMessage(value.proto.Transaction.deserializeBinaryFromReader)</div><div class="line">        msg.setTransaction(value)</div><div class="line">      &#125;</div><div class="line">      <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: &#123;</div><div class="line">        <span class="hljs-keyword">let</span> value = <span class="hljs-comment">/** @type &#123;!Uint8Array&#125; */</span> (reader.readBytes())</div><div class="line">        msg.setSignature(value)</div><div class="line">        <span class="hljs-keyword">break</span></div><div class="line">      &#125;</div><div class="line">      <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: &#123;</div><div class="line">        <span class="hljs-keyword">let</span> value = <span class="hljs-comment">/** @type &#123;!proto.Crypto&#125; */</span> (reader.readEnum())</div><div class="line">        msg.setCrypto(value)</div><div class="line">        <span class="hljs-keyword">break</span></div><div class="line">      &#125;</div><div class="line">      <span class="hljs-keyword">default</span>: &#123;</div><div class="line">        reader.skipField()</div><div class="line">        <span class="hljs-keyword">break</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">return</span> msg</div><div class="line">&#125;</div><div class="line"></div><div class="line">proto.UnverifiedTransaction.deserializeBinary = <span class="hljs-function"><span class="hljs-params">bytes</span> =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> jspb.BinaryReader(bytes)</div><div class="line">  <span class="hljs-keyword">const</span> msg = <span class="hljs-keyword">new</span> proto.UnverifiedTransaction()</div><div class="line">  <span class="hljs-keyword">return</span> proto.UnverifiedTransaction.deserializeBinaryFromReader(msg, reader)</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-05-16T01:43:19.000Z">2018-05-16</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 787 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/05/16/GenServer-in-Erlang/">GenServer in Erlang</a>
            
        </h1>
        <div class="content">
            <p><a href="https://medium.com/learn-elixir/genserver-explained-in-5-minutes-ae5823af4d44" target="_blank" rel="noopener">Original</a></p>
<p><code>GenServer</code> is essential part of OTP, which simplifies repeating tasks, letting programmer concentrate on logic of the application, and not on handling edge cases and repeated error handling.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*TpSDUSS0z3lgrUg1uEOUZg.gif" alt="Every Time When GenServer callback is called"></p>
<p>The idea behind <code>GenServer</code> is simple - you start separate process, that holds some state, then on each incoming message(be that <code>call</code> or <code>cast</code>) it may change it internal state and also generate some response(in case of <code>call</code>)</p>
<p>In this manual <code>calling process</code> is named <code>Alice</code> and newly process is <code>Bob</code>.</p>
<h5 id="Programming-without-GenServer-as-you-would-done-it-manually"><a href="#Programming-without-GenServer-as-you-would-done-it-manually" class="headerlink" title="Programming without GenServer, as you would done it manually"></a>Programming without GenServer, as you would done it manually</h5><figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">SimpleGenServerMock</span></span> <span class="hljs-keyword">do</span></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start_link</span></span>() <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *caller* context `Alice`</span></div><div class="line">    spawn_link(__MODULE_<span class="hljs-number">_</span>, <span class="hljs-symbol">:init</span>, [])</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">call</span></span>(pid, arguments) <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *caller* context `Alice`</span></div><div class="line">    send pid, &#123;<span class="hljs-symbol">:call</span>, <span class="hljs-keyword">self</span>(), arguments&#125;</div><div class="line">    receive</div><div class="line">      &#123;<span class="hljs-symbol">:response</span>, data&#125; -&gt; data</div><div class="line">    <span class="hljs-keyword">end</span></div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cast</span></span>(pid, arguments) <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in `caller` context `Alice`</span></div><div class="line">    send pid, &#123;<span class="hljs-symbol">:cast</span>, arguments&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">init</span></span>() <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *server* context `Bob`</span></div><div class="line">    initial_state = <span class="hljs-number">1</span></div><div class="line">    loop(initial_state)</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">loop</span></span>(state) <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *server* context `Bob`</span></div><div class="line"></div><div class="line">    receive command <span class="hljs-keyword">do</span></div><div class="line">      &#123;<span class="hljs-symbol">:call</span>, pid, <span class="hljs-symbol">:get_data</span>&#125; -&gt;</div><div class="line">        <span class="hljs-comment"># do some work on data here and update state</span></div><div class="line">        &#123;new_state, data&#125; = &#123;state, state&#125;</div><div class="line">        send pid, &#123;<span class="hljs-symbol">:response</span>, data&#125;</div><div class="line">        loop(new_state)</div><div class="line">      &#123;<span class="hljs-symbol">:cast</span>, <span class="hljs-symbol">:increment</span>&#125; -&gt;</div><div class="line">        <span class="hljs-comment"># do some work on data here and update state</span></div><div class="line">        new_state = state + <span class="hljs-number">1</span></div><div class="line">        loop(new_state)</div><div class="line">    <span class="hljs-keyword">end</span></div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<p>Code <code>initial_state = 1</code> is exactly same code we write in <code>init</code> callback. Internal state of the server is simply an integer. Usually it is a map, tuple or list with settings and state.</p>
<p><code>{state, state}</code> means that we do not want to update the state and want to return state as result. This is the code which goes in <code>handle_call</code> callback in <code>Bob</code>.</p>
<p>And code <code>new_state = state + 1</code> is the code which goes into <code>handle_cast</code> callback, because we do not need to respond with result, we just change server <code>Bob</code> internal state.</p>
<p>Working with module will look like:</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">pid = SimpleGenServerMock.start_link()</div><div class="line">counter = SimpleGenServerMock.call(pid, :get_data)</div><div class="line">IO.puts <span class="hljs-string">"Counter: #&#123;counter&#125;"</span></div><div class="line">SimpleGenServerMock.cast(pid, :increment)</div><div class="line">counter = SimpleGenServerMock.call(pid, :get_data)</div><div class="line">IO.puts <span class="hljs-string">"Counter: #&#123;counter&#125;"</span></div></pre></td></tr></table></figure>
<h5 id="Same-Server-With-GenServer-Behaviour"><a href="#Same-Server-With-GenServer-Behaviour" class="headerlink" title="Same Server With GenServer Behaviour"></a>Same Server With GenServer Behaviour</h5><p>Now if we want to re-write same code using <code>GenServer</code> it will look like this:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">SimpleGenServerBehaviour</span></span> <span class="hljs-keyword">do</span></div><div class="line">  <span class="hljs-keyword">use</span> GenServer</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start_link</span></span>() <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *caller* context `Alice`</span></div><div class="line">    GenServer.start_link(__MODULE_<span class="hljs-number">_</span>, [])</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">init</span></span>(<span class="hljs-number">_</span>) <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *server* context `Bob`</span></div><div class="line">    &#123;<span class="hljs-symbol">:ok</span>, <span class="hljs-number">1</span>&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_call</span></span>(<span class="hljs-symbol">:get_data</span>, _from, state) <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *server* context `Bob`</span></div><div class="line">    &#123;<span class="hljs-symbol">:reply</span>, state, state&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_cast</span></span>(<span class="hljs-symbol">:increment</span>, state) <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># runs in the *server* context `Bob`</span></div><div class="line">    &#123;<span class="hljs-symbol">:noreply</span>, state + <span class="hljs-number">1</span>&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<p>While in this example it did not saved a lot of lines for more complicated code having <code>GenServer</code> deal with all complexity saves a lot of tying. Also you got timeout, named processes and stable, production proven error hanlding for free.</p>
<p>Using GenServer behaviour is very similar to code we wrote before:</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123;:ok, pid&#125; = GenServer.start_link(SimpleGenServerBehaviour, [])</div><div class="line">counter = GenServer.call(SimpleGenServerBehaviour, :get_data)</div><div class="line">GenServer.cast(SimpleGenServerBehaviour, :increment)</div></pre></td></tr></table></figure>
<p>Better to implement start in the module</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">Stack</span></span> <span class="hljs-keyword">do</span></div><div class="line">  <span class="hljs-keyword">use</span> GenServer</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start_link</span></span>(defaut) <span class="hljs-keyword">do</span></div><div class="line">    GenServer.start_link(default)</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">push</span></span>(pid, item) <span class="hljs-keyword">do</span></div><div class="line">    GenServer.cast(pid, &#123;<span class="hljs-symbol">:push</span>, item&#125;)</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">pop</span></span>(pid) <span class="hljs-keyword">do</span></div><div class="line">    GenServer.call(pid, <span class="hljs-symbol">:pop</span>)</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-comment"># Server callbacks</span></div><div class="line"></div><div class="line">  <span class="hljs-variable">@impl</span> ture</div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_call</span></span>(<span class="hljs-symbol">:pop</span>, _from, [h | t]) <span class="hljs-keyword">do</span></div><div class="line">    &#123;<span class="hljs-symbol">:reply</span>, h, t&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-variable">@impl</span> <span class="hljs-keyword">true</span></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_cast</span></span>(&#123;<span class="hljs-symbol">:push</span>, item&#125;, state) <span class="hljs-keyword">do</span></div><div class="line">    &#123;<span class="hljs-symbol">:noreply</span>, [item | state]&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<h5 id="Receiving-Regular-Messages"><a href="#Receiving-Regular-Messages" class="headerlink" title="Receiving Regular Messages"></a>Receiving Regular Messages</h5><p>The goal of <code>GenServer</code> is to abstract the “receive” loop for developers, automatically handling system messages, support code changes, synchronous calls and more. Therefore, you should never call your own “recieve” inside the GenServer callbacks as doing will cause the GenServer misbehave.</p>
<p>Besides the synchronous and asynchronous communication provided by <code>call/3</code> and <code>cast/2</code>, regular messages sent by functions such as <code>Kernal/send2</code>, <code>Process.send_after/4</code> and similar, can be handled inside the <code>handle_info/2</code> callback.</p>
<p><code>handle_info/2</code> can be used in many sinutations, such as handling monitor DOWN messages sent by <code>Process.monitor/1</code>. Another use case for <code>handle_info/2</code> is to perform periodic work, with the help of <code>Process.send_after/4</code>:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">MyApp</span></span>.Periodically <span class="hljs-keyword">do</span></div><div class="line">  <span class="hljs-keyword">use</span> GenServer</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">start_link</span></span> <span class="hljs-keyword">do</span></div><div class="line">    GenServer.start_link(__MODULE_<span class="hljs-number">_</span>, %&#123;&#125;)</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-variable">@impl</span> <span class="hljs-keyword">true</span></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">init</span></span>(state) <span class="hljs-keyword">do</span></div><div class="line">    schedule_work() <span class="hljs-comment"># Schedule work to be performed on start</span></div><div class="line">    &#123;<span class="hljs-symbol">:ok</span>, state&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-variable">@impl</span> <span class="hljs-keyword">true</span></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">handle_info</span></span>(<span class="hljs-symbol">:work</span>, state) <span class="hljs-keyword">do</span></div><div class="line">    <span class="hljs-comment"># Do the desired work here</span></div><div class="line">    schedule_work() <span class="hljs-comment"># Reschedule once more</span></div><div class="line">    &#123;<span class="hljs-symbol">:noreply</span>, state&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">defp</span> <span class="hljs-title">schedule_work</span></span>() <span class="hljs-keyword">do</span></div><div class="line">    Process.send_after(<span class="hljs-keyword">self</span>(), <span class="hljs-symbol">:work</span>, <span class="hljs-number">1000</span>)</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-05-15T07:06:06.000Z">2018-05-15</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 527 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/05/15/Association-in-Phoenix/">Association in Phoenix</a>
            
        </h1>
        <div class="content">
            <p><a href="http://blog.plataformatec.com.br/2015/08/working-with-ecto-associations-and-embeds/" target="_blank" rel="noopener">Original</a></p>
<h3 id="Associations"><a href="#Associations" class="headerlink" title="Associations"></a>Associations</h3><p>Associations in Ecto are used when two difference sources(tables) are linked via foreign keys.</p>
<p>A classic example of this setup is “Post has many comments”. First create the two tables in migrations</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">create table(<span class="hljs-symbol">:posts</span>) <span class="hljs-keyword">do</span></div><div class="line">  add <span class="hljs-symbol">:title</span>, <span class="hljs-symbol">:string</span></div><div class="line">  add <span class="hljs-symbol">:body</span>, <span class="hljs-symbol">:text</span></div><div class="line"></div><div class="line">  timestamps()</div><div class="line"><span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">create table(<span class="hljs-symbol">:comments</span>) <span class="hljs-keyword">do</span></div><div class="line">  add <span class="hljs-symbol">:post_id</span>, references(<span class="hljs-symbol">:posts</span>)</div><div class="line">  add <span class="hljs-symbol">:body</span>, <span class="hljs-symbol">:text</span></div><div class="line"></div><div class="line">  timestamps()</div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<p>Each comment contains a <code>post_id</code> column that by default points to a post <code>id</code></p>
<p>And now defined the schemas</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">MyApp</span></span>.Post <span class="hljs-keyword">do</span></div><div class="line">  <span class="hljs-keyword">use</span> Ecto.Schema</div><div class="line"></div><div class="line">  schema <span class="hljs-string">"posts"</span> <span class="hljs-keyword">do</span></div><div class="line">    field <span class="hljs-symbol">:title</span></div><div class="line">    field <span class="hljs-symbol">:body</span></div><div class="line">    has_many <span class="hljs-symbol">:comments</span>, MyApp.Comment</div><div class="line">    timestamps</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">defmodule</span> <span class="hljs-title">MyApp</span></span>.Comment <span class="hljs-keyword">do</span></div><div class="line">  <span class="hljs-keyword">use</span> Ecto.Schema</div><div class="line"></div><div class="line">  schema <span class="hljs-string">"comments"</span> <span class="hljs-keyword">do</span></div><div class="line">    field <span class="hljs-symbol">:body</span></div><div class="line">    belongs_to <span class="hljs-symbol">:post</span>, MyApp.Post</div><div class="line">    timestamps</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<h3 id="Querying-associations"><a href="#Querying-associations" class="headerlink" title="Querying associations"></a>Querying associations</h3><p>One of the benefits of defining associations is taht they can be used in queries. For example:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Repo.all from p <span class="hljs-keyword">in</span> Post, <span class="hljs-symbol">preload:</span> [<span class="hljs-symbol">:comments</span>]</div></pre></td></tr></table></figure>
<p>Now all posts will be fetched from the database with their associated comments. The example above will perform two queries: one for loading all posts and another for loading all comments. This is often the most efficient way of loading associations from the database(even if two queries are performed) because we need to receive and parse only POSTS + COMMENTS results.</p>
<p>It is also possible to preload associations using joins while performing more complex queries. For example, imagine both posts and comments have votes and you want only comments with more votes than the post itself:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Repo.all from p <span class="hljs-keyword">in</span> Post,</div><div class="line">      <span class="hljs-symbol">join:</span> c <span class="hljs-keyword">in</span> assoc(p, <span class="hljs-symbol">:comments</span>),</div><div class="line">      <span class="hljs-symbol">where:</span> c.votes &gt; p.votes</div><div class="line">      <span class="hljs-symbol">preload:</span> [<span class="hljs-symbol">comments:</span> c]</div></pre></td></tr></table></figure>
<h3 id="Manipulating-associations"><a href="#Manipulating-associations" class="headerlink" title="Manipulating associations"></a>Manipulating associations</h3><p>While Ecto 2.0 allows you insert a post with multiple comments in one operation:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Repo.insert!(%Post&#123;</div><div class="line">  <span class="hljs-symbol">title:</span> <span class="hljs-string">"Hello"</span>,</div><div class="line">  <span class="hljs-symbol">body:</span> <span class="hljs-string">"world"</span>,</div><div class="line">  <span class="hljs-symbol">comments:</span> [</div><div class="line">    %Comment&#123;<span class="hljs-symbol">body:</span> <span class="hljs-string">"Excellent"</span>&#125;</div><div class="line">  ]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Many times you may want to break it into distinct steps so you have more flexibility in managing those entries. For example, you could use changesets to build your posts and comments along the way</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">post = Ecto.Changeset.change(%Post&#123;&#125;, <span class="hljs-symbol">title:</span> <span class="hljs-string">"Hello"</span>, <span class="hljs-symbol">body:</span> <span class="hljs-string">"World"</span>)</div><div class="line">comment = Ecto.Changeset.change(%Comment&#123;&#125;, <span class="hljs-symbol">body:</span> <span class="hljs-string">"Excellent"</span>)</div><div class="line">post_with_comments = Ecto.Changeset.put_assoc(post, <span class="hljs-symbol">:comments</span>, [comment]) <span class="hljs-comment"># Main Step</span></div><div class="line">Repo.insert!(post_with_comments)</div></pre></td></tr></table></figure>
<p>Or by handling each entry individually inside a transation:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Repo.transaction <span class="hljs-keyword">fn</span> -&gt;</div><div class="line">  post = Repo.insert!(%Post&#123;<span class="hljs-symbol">title:</span> <span class="hljs-string">"Hello"</span>, <span class="hljs-symbol">body:</span> <span class="hljs-string">"World"</span>&#125;)</div><div class="line">  <span class="hljs-comment"># Build a comment from the post struct</span></div><div class="line">  comment = Ecto.build_assoc(post, <span class="hljs-symbol">:comments</span>, <span class="hljs-symbol">body:</span> <span class="hljs-string">"Execellent"</span>)</div><div class="line">  Repo.insert!(comment)</div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<p><code>Ecto.build_assoc/3</code> builds the comment using the id currently set in the post struct. It is equivalnet to:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%Comment&#123;post_id: post.id, body: &quot;Execellent&quot;&#125;</div></pre></td></tr></table></figure>
<p>The Ecto.build_assoc/3 function is specially useful in Phoenix controllers. For example when creating the post, one would do:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Ecto.build_assoc(current_user, <span class="hljs-symbol">:post</span>)</div></pre></td></tr></table></figure>
<p>As we likely want to associate the post to the user currently signed in the application. In another controller, we could build a comment for an existing post with:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Ecto.build_assoc(post, <span class="hljs-symbol">:comments</span>)</div></pre></td></tr></table></figure>
<p>Ecto does not provide functions like <code>post.comments &lt;&lt; comment</code> that allows mixing persisted data with non-persisted data. The only macha</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-05-15T03:20:43.000Z">2018-05-15</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    7 minutes read (About 1026 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/05/15/cast-assoc/">Difference Bwtween Build_assoc, Put_assoc, and Cast_assoc</a>
            
        </h1>
        <div class="content">
            <h3 id="Cast-Assoc-code"><a href="#Cast-Assoc-code" class="headerlink" title="Cast Assoc code"></a>Cast Assoc <a href="https://github.com/elixir-ecto/ecto/blob/v2.2.10/lib/ecto/changeset.ex#L659" target="_blank" rel="noopener">code</a></h3><blockquote>
<p>cast_assoc(changeset, name, opts \ [])</p>
</blockquote>
<p>Casts the given association with the <code>changeset params</code></p>
<p>This function should be used when working withe the entire association at once(and not a single element of a many-style association) and using data external to the application.</p>
<p>When updating the data, this function requires the association to have been preloaded in the changeset struct. Missing data will invoke the <code>:on_replace</code> behaviour defined on the association. Preloading is not necessary for newly built structs.</p>
<p>The parameters for the given association will be retrieved from <code>changeset.params</code>. Those parameters are expected to be a map with attributes, similar to the ones passed to <code>cast/4</code>. Once parameter are retrieved, <code>cast_assoc/3</code> will match those parameters with the associations already in the changeset record</p>
<p>For example, imagine a user has many addresses relationship where post data is sent as follow</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">%&#123;<span class="hljs-string">"name"</span> =&gt; <span class="hljs-string">"John Doe"</span>, <span class="hljs-string">"addresses"</span> =&gt; [</div><div class="line">  %&#123;<span class="hljs-string">"street"</span> =&gt; <span class="hljs-string">"Some where"</span>, <span class="hljs-string">"country"</span> =&gt; <span class="hljs-string">"Brzil"</span>, <span class="hljs-string">"id"</span> =&gt; 1&#125;,</div><div class="line">  %&#123;<span class="hljs-string">"street"</span> =&gt; <span class="hljs-string">"Else where"</span>, <span class="hljs-string">"country"</span> =&gt; <span class="hljs-string">"Poland"</span>&#125;,</div><div class="line">]&#125;</div></pre></td></tr></table></figure>
<p>and then</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">user</div><div class="line">|&gt; Repo.preload(<span class="hljs-symbol">:addresses</span>)</div><div class="line">|&gt; Ecto.Changeset.cast(params, [])</div><div class="line">|&gt; Ecto.Changeset.cast_assoc(<span class="hljs-symbol">:addresses</span>)</div></pre></td></tr></table></figure>
<p>Once <code>cast_assoc/3</code> is called, Ecto will compare those params with the addresses already associated with the user and acts as follows:</p>
<ul>
<li><p>If the parameter does not contain an ID, the parameter data will be passed to <code>changeset/2</code> with a new struct and become an insert operation</p>
</li>
<li><p>If the parameter contains an ID and there is no associated child with such ID, the parameter data will be passed to <code>changeset/2</code> with a new struct and become an insert operation</p>
</li>
<li><p>If the parameter contains an ID and there is an associated children with such ID, the parameter data will be passed to <code>changeset/2</code> with the existing struct and become an update operation.</p>
</li>
<li><p>If there is an associated child with an ID and its ID is not given as parameter, the <code>:on_replace</code> callback for that association will be invoked</p>
</li>
</ul>
<h5 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h5><figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">`cast_assoc/<span class="hljs-number">3</span>` is useful <span class="hljs-keyword">when</span> the associated data is managed alongside the parent struct, all at once.</div><div class="line"></div><div class="line">To work with a single element of an association, other functions are more appropriate. For example to insert a single associated struct <span class="hljs-keyword">for</span> a `has_many` association it<span class="hljs-string">'s much easier to construct the associated struct with `Ecto.build_assoc/3` and persist it directly with `Ecto.Repo.insert/2`</span></div><div class="line"></div><div class="line">Furthurmore, if each side of the association is managed seperately, it is prefereable to use `put_assoc/3` and directly instruct Ecto how the association should look like.</div><div class="line"></div><div class="line">For example, imagine you are receiving a set of tags you want to associate to an user. Those tags are meant to **exist upfront**. Using `cast_assoc/3` won't work as desired because the tags are <span class="hljs-keyword">not</span> managed alongside the user. In such cases, `put_assoc/<span class="hljs-number">3</span>` will work as desired. With the given <span class="hljs-symbol">parameters:</span></div><div class="line"></div><div class="line">  %&#123;<span class="hljs-string">"name"</span> =&gt; <span class="hljs-string">"John Doe"</span>, <span class="hljs-string">"tags"</span> =&gt; [<span class="hljs-string">"linear"</span>]&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">and</span> <span class="hljs-keyword">then</span></div><div class="line"></div><div class="line">  tags = Repo.all(from t <span class="hljs-keyword">in</span> Tag, <span class="hljs-symbol">where:</span> t.name <span class="hljs-keyword">in</span> ^params[<span class="hljs-string">"tags"</span>])</div><div class="line"></div><div class="line">  user</div><div class="line">  |&gt; Repo.preload(<span class="hljs-symbol">:tags</span>)</div><div class="line">  |&gt; Ecto.Changeset.cast(params) <span class="hljs-comment"># no need to allow :tags as we put them directly</span></div><div class="line">  |&gt; Ecto.Changeset.put_assoc(<span class="hljs-symbol">:tags</span>, tags) <span class="hljs-comment"># explicitly set the tags</span></div><div class="line"></div><div class="line">note the changeset must have been previously `cast` using `cast/<span class="hljs-number">4</span>` before this function is called.</div></pre></td></tr></table></figure>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">cast_assoc</span></span>(changeset, name, opts \\ []) <span class="hljs-keyword">when</span> is_atom(name) <span class="hljs-keyword">do</span></div><div class="line">  cast_relation(<span class="hljs-symbol">:assoc</span>, changeset, name, opts)</div><div class="line"><span class="hljs-keyword">end</span></div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">defp</span> <span class="hljs-title">cast_relation</span></span>(type, %Changeset&#123;&#125; = changeset, key, opts) <span class="hljs-keyword">do</span></div><div class="line">  &#123; key, param_key &#125; = cast_key(key)</div><div class="line">  %&#123;<span class="hljs-symbol">data:</span> data, <span class="hljs-symbol">types:</span> types, <span class="hljs-symbol">params:</span> params, changes, changes &#125; = changeset</div><div class="line">  %&#123;<span class="hljs-symbol">related:</span> related&#125; = relation = relation!(<span class="hljs-symbol">:cast</span>, type, key, Map.get(types, key))</div><div class="line">  params = params || %&#123;&#125;</div><div class="line"></div><div class="line">  &#123;changeset, required?&#125; = if opts[<span class="hljs-symbol">:required</span>] <span class="hljs-keyword">do</span></div><div class="line">    &#123;update_in(changeset.required, &amp;[key|&amp;<span class="hljs-number">1</span>]), <span class="hljs-keyword">true</span>&#125;</div><div class="line">  else</div><div class="line">    &#123;changeset, <span class="hljs-keyword">false</span>&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  on_cast = Keyword.get_lazy(opts, <span class="hljs-symbol">:with</span>, <span class="hljs-keyword">fn</span> -&gt; on_cast_default(type, related) <span class="hljs-keyword">end</span>)</div><div class="line">  original = Map.get(data, key)</div><div class="line"></div><div class="line">  changeset = <span class="hljs-keyword">case</span> Map.fetch(params, params_key) <span class="hljs-keyword">do</span></div><div class="line">    &#123;<span class="hljs-symbol">:ok</span>, value&#125; -&gt;</div><div class="line">      current = Relation.load!(data, original)</div><div class="line">      <span class="hljs-keyword">case</span> Relation.cast(relation, value, current, on_cast) <span class="hljs-keyword">do</span></div><div class="line">        &#123;<span class="hljs-symbol">:ok</span>, change, relation_valid?&#125; <span class="hljs-keyword">when</span> change != original -&gt;</div><div class="line">          missing_relation(%&#123;changeset |  <span class="hljs-symbol">change:</span> Map.put(changes, key, changes), <span class="hljs-symbol">valid?:</span> changeset.valid? <span class="hljs-keyword">and</span> relation_valid?&#125;, key, current, required?, relation, opts)</div><div class="line">        <span class="hljs-symbol">:error</span> -&gt;</div><div class="line">          %&#123;changeset | <span class="hljs-symbol">errors:</span> [&#123;key, &#123;message(opts, <span class="hljs-symbol">:invalid_message</span>, <span class="hljs-string">"is invalid"</span>), [<span class="hljs-symbol">type:</span> expected_relation_type(relation)]&#125;&#125; | changeset.errors], valid? <span class="hljs-keyword">false</span>&#125;</div><div class="line">        <span class="hljs-number">_</span> -&gt; missing_relation(changeset, key, current, required?, relation, opts)</div><div class="line">      <span class="hljs-keyword">end</span></div><div class="line">    <span class="hljs-symbol">:error</span> -&gt; missing_relation(changeset, key, current, required?, relation, opts)</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">  update_in changeset.types[key], <span class="hljs-keyword">fn</span> &#123;type, relation&#125; -&gt;</div><div class="line">    &#123;type, %&#123;relation | <span class="hljs-symbol">on_cast:</span> on_cast&#125;&#125;</div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<h3 id="Put-Assoc"><a href="#Put-Assoc" class="headerlink" title="Put Assoc"></a>Put Assoc</h3><p>As alternative to <code>cast_assoc/3</code></p>
<p><code>cast_assoc/3</code> is useful when the associated data is managed alongside the parent struct, all at once.</p>
<p>If each side of the association is managed seperately, it is preferable to use <code>put_assoc/3</code> and directly instruct Ecto how the association should look like.</p>
<p>For example, imagine you are receiving a set of tags you want to associate to an user. Those tags are meant to exist upfront. Using <code>cast_assoc/3</code> won’t work as desired because the tags are not managed alongside the user. In such cases, <code>put_assoc/3</code> will work as desired.</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%&#123;<span class="hljs-string">"name"</span> =&gt; <span class="hljs-string">"John Doe"</span>, <span class="hljs-string">"tags"</span> =&gt; [<span class="hljs-string">"lieanr"</span>]&#125;</div></pre></td></tr></table></figure>
<p>and then:</p>
<figure class="highlight elixir hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tags = Repo.all(from t <span class="hljs-keyword">in</span> Tag, <span class="hljs-symbol">where:</span> t.name <span class="hljs-keyword">in</span> ^params[<span class="hljs-string">"tags"</span>])</div><div class="line"></div><div class="line">user</div><div class="line">|&gt; Repo.preload(<span class="hljs-symbol">:tags</span>)</div><div class="line">|&gt; Ecto.Changeset.cast(params)</div><div class="line">|&gt;  Ecto.Changeset.put_assoc(<span class="hljs-symbol">:tags</span>, tags)</div></pre></td></tr></table></figure>
<h3 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h3><h5 id="Build-Assoc"><a href="#Build-Assoc" class="headerlink" title="Build_Assoc"></a>Build_Assoc</h5><p>Gen an instance with foreign key</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">iex&gt; post = Ecto.build_assoc(user, :posts, %&#123;header: <span class="hljs-string">"Clickbait header"</span>, body: <span class="hljs-string">"No real contet"</span>&#125;)</div><div class="line">%EctoAssoc.Post&#123;__meta__: <span class="hljs-comment">#Ecto.Schema.Metadata&lt;:built, "posts"&gt;,</span></div><div class="line">  body: <span class="hljs-string">"No real content"</span>, header: <span class="hljs-string">"Clickbait header"</span>, id: nil,</div><div class="line">  user: <span class="hljs-comment">#Ecto.Association.NotLoaded&lt;association :user is not loaded&gt;, user_id: 1&#125;</span></div><div class="line"></div><div class="line">iex&gt; Repo.insert!(post)</div></pre></td></tr></table></figure>
<h5 id="Put-Assoc-1"><a href="#Put-Assoc-1" class="headerlink" title="Put_Assoc"></a>Put_Assoc</h5><p>Add association to changeset which is not persisted</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">iex&gt; post_changeset = Ecto.Changeset.change(post)</div><div class="line">iex&gt; post_with_tags = Ecto.Changeset.put_assoc(post_changeset, :tags, [misc_tag])</div><div class="line">iex&gt; Repo.insert!(post_with_tags)</div></pre></td></tr></table></figure>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p><code>cast_assoc</code> when you want to cast external parameters, like the ones from a form, into an association.</p>
<p><code>put_assoc</code> when you already have an <strong>association struct</strong></p>
<p><code>build_assoc</code> receive an existing struct(for example <code>user</code>), that was persisted to the database, and builds a struct(for example <code>post</code>, based on its association(for example <code>:posts</code>), with the foreign key field(for example <code>user_id</code>).</p>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous is-invisible is-hidden-mobile">
            <a class="is-flex-grow has-text-black-ter" href="/page/0/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/2/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link is-current" href="/">1</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/2/">2</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/16/">16</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.jpg" alt="Keith Chen">
                    
                    
                    <p class="is-size-4 is-block">
                        Keith Chen
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        FE Engineer on Blockchain
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>30°17&#39;37N, 120°9&#39;41E</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        310
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        7
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        94
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/keith-CY" target="_blank">
                Follow</a>
        </div>
        
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/keith-CY" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Keith CY</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.linkedin.com/in/宇-陈-644b61ba" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Yu Chen</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.linkedin.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Soup/">
            <span class="level-start">
                <span class="level-item">Soup</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Uncategorized/">
            <span class="level-start">
                <span class="level-item">Uncategorized</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/github/">
            <span class="level-start">
                <span class="level-item">github</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/github/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">141</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/note/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/AJAX/" style="font-size: 10.91px;">AJAX</a> <a href="/tags/BOOTSTRAP/" style="font-size: 10px;">BOOTSTRAP</a> <a href="/tags/Bash/" style="font-size: 11.82px;">Bash</a> <a href="/tags/BlockChain/" style="font-size: 10px;">BlockChain</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/CSS/" style="font-size: 10.91px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 20px;">CSS3</a> <a href="/tags/Closure/" style="font-size: 10px;">Closure</a> <a href="/tags/CommonJS/" style="font-size: 10px;">CommonJS</a> <a href="/tags/Contract-Ethereum-Web3/" style="font-size: 10px;">Contract, Ethereum, Web3</a> <a href="/tags/Contract-Solidity/" style="font-size: 10px;">Contract, Solidity</a> <a href="/tags/D3-Example/" style="font-size: 10px;">D3, Example</a> <a href="/tags/DAPP-Solidity/" style="font-size: 10px;">DAPP, Solidity</a> <a href="/tags/DApp-Solidity/" style="font-size: 10px;">DApp, Solidity</a> <a href="/tags/DOM/" style="font-size: 12.73px;">DOM</a> <a href="/tags/DevTools/" style="font-size: 10px;">DevTools</a> <a href="/tags/Drizzle-Ethereum-BlockChain/" style="font-size: 10px;">Drizzle, Ethereum, BlockChain</a> <a href="/tags/ES6/" style="font-size: 10.91px;">ES6</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/ETH-Wallet/" style="font-size: 10px;">ETH, Wallet</a> <a href="/tags/Economics/" style="font-size: 10px;">Economics</a> <a href="/tags/Elixir-Phoenix-SCSS/" style="font-size: 10px;">Elixir, Phoenix, SCSS</a> <a href="/tags/Erlang-Elixir-GenServer/" style="font-size: 10px;">Erlang, Elixir, GenServer</a> <a href="/tags/Ethereum/" style="font-size: 10px;">Ethereum</a> <a href="/tags/Ethereum-IPFS/" style="font-size: 10px;">Ethereum, IPFS</a> <a href="/tags/FP/" style="font-size: 10px;">FP</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub-Workflow/" style="font-size: 10px;">GitHub, Workflow</a> <a href="/tags/Go-Http-Web/" style="font-size: 10px;">Go, Http, Web</a> <a href="/tags/GraphQL-Apollo-TypeScript/" style="font-size: 10px;">GraphQL, Apollo, TypeScript</a> <a href="/tags/Gulp/" style="font-size: 11.82px;">Gulp</a> <a href="/tags/HTML5/" style="font-size: 15.45px;">HTML5</a> <a href="/tags/HTTP2-Node/" style="font-size: 10px;">HTTP2, Node</a> <a href="/tags/Html-Picture/" style="font-size: 10px;">Html, Picture</a> <a href="/tags/Immutable/" style="font-size: 10px;">Immutable</a> <a href="/tags/Int8Array/" style="font-size: 10px;">Int8Array</a> <a href="/tags/JSON-RPC/" style="font-size: 10px;">JSON-RPC</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Javascript/" style="font-size: 19.09px;">Javascript</a> <a href="/tags/Koa/" style="font-size: 10.91px;">Koa</a> <a href="/tags/Koa-NPM-Package/" style="font-size: 10px;">Koa, NPM, Package</a> <a href="/tags/MDL/" style="font-size: 16.36px;">MDL</a> <a href="/tags/Material-Design/" style="font-size: 17.27px;">Material Design</a> <a href="/tags/Mock-JavaScript/" style="font-size: 10px;">Mock, JavaScript</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NODE/" style="font-size: 13.64px;">NODE</a> <a href="/tags/NPM/" style="font-size: 10.91px;">NPM</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Nock/" style="font-size: 10px;">Nock</a> <a href="/tags/Node-CLI/" style="font-size: 10.91px;">Node, CLI</a> <a href="/tags/Node-Fastify/" style="font-size: 10.91px;">Node, Fastify</a> <a href="/tags/Node-Graphql-Koa/" style="font-size: 10px;">Node, Graphql, Koa</a> <a href="/tags/Node-js/" style="font-size: 10.91px;">Node.js</a> <a href="/tags/Node-js-Nest-js/" style="font-size: 10px;">Node.js, Nest.js</a> <a href="/tags/Phoenix-Elixir-Ecto/" style="font-size: 10px;">Phoenix, Elixir, Ecto</a> <a href="/tags/Promise/" style="font-size: 11.82px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10px;">Protobuf</a> <a href="/tags/Pug-HTML/" style="font-size: 10px;">Pug, HTML</a> <a href="/tags/React/" style="font-size: 18.18px;">React</a> <a href="/tags/React-Docker/" style="font-size: 10px;">React, Docker</a> <a href="/tags/React-Router-Code-splitting/" style="font-size: 10px;">React, Router, Code-splitting</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/React-Redux/" style="font-size: 10px;">React-Redux</a> <a href="/tags/React-Router/" style="font-size: 10.91px;">React-Router</a> <a href="/tags/Redux/" style="font-size: 14.55px;">Redux</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/Ruby-Rails/" style="font-size: 10px;">Ruby, Rails</a> <a href="/tags/Ruby-Rails-RoR-Mina/" style="font-size: 10px;">Ruby, Rails, RoR, Mina</a> <a href="/tags/Rust-Rocket/" style="font-size: 10px;">Rust, Rocket</a> <a href="/tags/RxJS/" style="font-size: 10px;">RxJS</a> <a href="/tags/Smart-Contract-Web3/" style="font-size: 10px;">Smart Contract, Web3</a> <a href="/tags/Solidity/" style="font-size: 12.73px;">Solidity</a> <a href="/tags/Solidity-Error-Handling/" style="font-size: 10px;">Solidity, Error Handling</a> <a href="/tags/Solidity-Public-External/" style="font-size: 10px;">Solidity, Public, External</a> <a href="/tags/Solidity-Smart-Contract/" style="font-size: 10px;">Solidity, Smart Contract</a> <a href="/tags/Thunk/" style="font-size: 10.91px;">Thunk</a> <a href="/tags/Trick/" style="font-size: 11.82px;">Trick</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Webpack-DLL/" style="font-size: 10px;">Webpack, DLL</a> <a href="/tags/automatic/" style="font-size: 10px;">automatic</a> <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/babel-polyfill/" style="font-size: 10px;">babel-polyfill</a> <a href="/tags/blockchain-bitcoin-bip/" style="font-size: 10.91px;">blockchain, bitcoin, bip</a> <a href="/tags/commandline/" style="font-size: 10px;">commandline</a> <a href="/tags/github/" style="font-size: 10.91px;">github</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/lecture-yc/" style="font-size: 10px;">lecture, yc</a> <a href="/tags/precache/" style="font-size: 10px;">precache</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/webpack/" style="font-size: 17.27px;">webpack</a> <a href="/tags/webpack2/" style="font-size: 11.82px;">webpack2</a> <a href="/tags/测试/" style="font-size: 11.82px;">测试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/12/03/Introduction-to-MACD/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/macd-indicator.png" alt="Introduction to MACD">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-02T17:43:39.000Z">2019-12-03</time></div>
                    <a href="/2019/12/03/Introduction-to-MACD/" class="has-link-black-ter is-size-6">Introduction to MACD</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/20/note-on-bip-173/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/segwit.png" alt="Note-on-Bip-173">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-20T08:36:54.000Z">2019-04-20</time></div>
                    <a href="/2019/04/20/note-on-bip-173/" class="has-link-black-ter is-size-6">Note-on-Bip-173</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/12/03/Introduction-to-MACD/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/macd-indicator.png" alt="Introduction to MACD">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-02T17:43:39.000Z">2019-12-03</time></div>
                    <a href="/2019/12/03/Introduction-to-MACD/" class="has-link-black-ter is-size-6">Introduction to MACD</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/20/note-on-bip-173/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/segwit.png" alt="Note-on-Bip-173">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-20T08:36:54.000Z">2019-04-20</time></div>
                    <a href="/2019/04/20/note-on-bip-173/" class="has-link-black-ter is-size-6">Note-on-Bip-173</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">December 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="EzCook" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Chen Yu&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>