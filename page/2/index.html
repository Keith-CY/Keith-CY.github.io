<!DOCTYPE html>
<html  lang="en">
<head>
    <meta charset="utf-8">
<title>EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">

</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="EzCook" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/categories">Categories</a>
                
                <a class="navbar-item"
                href="/tags">Tags</a>
                
                <a class="navbar-item"
                href="/about">About</a>
                
                <a class="navbar-item"
                href="/resume">Resume</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main">
    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-04-06T12:26:36.000Z">2018-04-06</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 77 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/04/06/enable-sass-scss-in-phoenix/">Enable Sass/scss in Phoenix</a>
            
        </h1>
        <div class="content">
            <h1 id="Step-1-Add-brunch"><a href="#Step-1-Add-brunch" class="headerlink" title="Step 1: Add brunch"></a>Step 1: Add brunch</h1><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-built_in">cd</span> assets &amp;&amp; yarn add sass-brunch</div></pre></td></tr></table></figure>
<h1 id="Step-2-Add-plugin-in-brunch-config-js"><a href="#Step-2-Add-plugin-in-brunch-config-js" class="headerlink" title="Step 2: Add plugin in brunch-config.js"></a>Step 2: Add plugin in brunch-config.js</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// brunch-config.js</span></div><div class="line">plugins: &#123;</div><div class="line">  <span class="hljs-attr">sass</span>: &#123;</div><div class="line">    <span class="hljs-attr">mode</span>: <span class="hljs-string">'native'</span>,</div><div class="line">  &#125;,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Step3-Enable-hot-reload"><a href="#Step3-Enable-hot-reload" class="headerlink" title="Step3: Enable hot-reload"></a>Step3: Enable hot-reload</h1><figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// dev.exs</div><div class="line">// add sass and scss to the pattern</div><div class="line">config :citaDappStore, CitaDappStoreWeb.Endpoint,</div><div class="line">  live_reload: [</div><div class="line">    patterns: [</div><div class="line">      ~r&#123;priv/static/.*(js|css|png|jpeg|jpg|gif|svg|sass|scss)$&#125;,</div><div class="line">      ~r&#123;priv/gettext/.*(po)$&#125;,</div><div class="line">      ~r&#123;lib/citaDappStore_web/views/.*(ex)$&#125;,</div><div class="line">      ~r&#123;lib/citaDappStore_web/templates/.*(eex)$&#125;</div><div class="line">    ]</div><div class="line">  ]</div></pre></td></tr></table></figure>
<p>That’s all.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-03-14T05:42:39.000Z">2018-03-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 337 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/03/14/Model-Generator-of-Rails/">Model Generator of Rails</a>
            
        </h1>
        <div class="content">
            <p><a href="https://railsguides.net/advanced-rails-model-generators/" target="_blank" rel="noopener">Original</a></p>
<h3 id="Basic-Usage"><a href="#Basic-Usage" class="headerlink" title="Basic Usage"></a>Basic Usage</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails g model User email</div></pre></td></tr></table></figure>
<p>This command will generate user model with email field type of string, migration which creates user table, test for model and factory.</p>
<p>If you want to have model with different type of string pass type after field name following by <code>:</code>.</p>
<p>The whole list of available types:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">integer</div><div class="line">primary_key</div><div class="line">decimal</div><div class="line">float</div><div class="line">boolean</div><div class="line">binary</div><div class="line">string</div><div class="line">text</div><div class="line">date</div><div class="line">time</div><div class="line">datetime</div><div class="line">timestamp</div></pre></td></tr></table></figure>
<p>You are able to pass -option parameter to generator. It will inherit generating class from passed name to achieve STI(Single Table Inheritance):</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails g model admin --parent user</div></pre></td></tr></table></figure>
<p>This example generates model:</p>
<figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Admin</span> &lt; User</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<p>Interesting fact that if you generate model in some scope passing model like <em>admin/user</em> of <em>Admin::User</em>:</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails g model admin/user</div></pre></td></tr></table></figure>
<p>you will get generated model in scope <code>app/models/admin/user.rb</code>, defined scope <code>app/models/admin.rb</code> which is required to define module.</p>
<figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">Admin</span></span></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">self</span>.<span class="hljs-title">table_name_prefix</span></span></div><div class="line">   <span class="hljs-string">'admin_'</span></div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<p>It means that generated table name for <em>Admin::User</em> starts with prefix _admin<em>user</em>. This feature allows to have seperated namespaced models as in rails code as in db schema.</p>
<h3 id="Advantage-useage"><a href="#Advantage-useage" class="headerlink" title="Advantage useage"></a>Advantage useage</h3><p>Sometimes you have to automatically add index for columns in your migration. It’s not a problem.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails g model user email:index location_id:<span class="hljs-built_in">integer</span>:index</div></pre></td></tr></table></figure>
<p>Or uniq index</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails g model user pseudo:string:uniq</div></pre></td></tr></table></figure>
<p>Set limit for field of integer, string, text and binary fields</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails g model product <span class="hljs-string">'price:decimal&#123;10,2&#125;'</span></div></pre></td></tr></table></figure>
<p>The last useful feature of generators - it’s options to generate reference columns (fields which are used in rails as foreign_key)</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rails g model photo album:references</div></pre></td></tr></table></figure>
<p>This command will generate photos table with integer field _album<em>id</em> and also it will add index for this field automatically.</p>
<figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreatePhotos</span> &lt; ActiveRecord::Migration</span></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">change</span></span></div><div class="line">    create_table <span class="hljs-symbol">:photos</span> <span class="hljs-keyword">do</span> <span class="hljs-params">|t|</span></div><div class="line">      t.references <span class="hljs-symbol">:album</span></div><div class="line"></div><div class="line">      t.timestamps</div><div class="line">    <span class="hljs-keyword">end</span></div><div class="line"></div><div class="line">    add_index <span class="hljs-symbol">:photos</span>, <span class="hljs-symbol">:album_id</span></div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-03-13T09:40:04.000Z">2018-03-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 262 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/03/13/Error-Handling-in-Solidity/">Error Handling in Solidity</a>
            
        </h1>
        <div class="content">
            <p>Solidity uses state-reverting exceptions to handle errors. Such an exception will undo all changes made to the state in the current call(and all its sub-calls) and also flag an error to the caller. The convenience function <code>assert</code> and <code>require</code> can be used to check for conditions and throw an exception if the condition is not met.</p>
<p>The <code>assert</code> function should only be used to test for internal errors, and to check invariants.</p>
<p>The <code>require</code> function should be used to ensure valid conditions, such as inputs, or contract state variables are met, or to validate return values from calls to external contracts.</p>
<p>If used properly, analysis tools can evaluate your contract to identify the conditions and function calls which will reach a failing <code>assert</code>. Properly functioning code should never reach a failing assert statement. If this happens there is a bug in your contract which you should fix.</p>
<p>There are two ways to trigger exceptions:</p>
<ul>
<li><p>The <code>revert</code> function can be used to flag an error and revert the current call. In the future, it might be possible to also include details about error in a call to <code>revert</code>.</p>
</li>
<li><p>The <code>throw</code> keyword can also be used as an alternative to <code>revert()</code></p>
</li>
</ul>
<blockquote>
<p>From 0.4.13, the <code>throw</code> is deprecated.</p>
</blockquote>
<p>When exceptions happen in a sub-call, they ‘bubble up’ automatically. Exceptions to this rule are <code>send</code> and the low-level functions <code>call</code>, <code>delegatecall</code> and <code>callcode</code> – those return <code>false</code> in case of an exception instead of ‘bubble up’.</p>
<blockquote>
<p>low-level function <code>call</code>, <code>delegatecall</code>, <code>callcode</code> return false when exceptions occur.</p>
</blockquote>
<p>Catch exceptions is not yet possible.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-03-13T03:31:23.000Z">2018-03-13</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 921 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/03/13/Start-in-Drizzle/">Start in Drizzle </a>
            
        </h1>
        <div class="content">
            <p>Drizzle is a collection of front-end libraries that make wirting dapp front-ends easier and more predicable. The core of Drizzle is based on Redux Store, so you can access to the spectacular development tools around Redux. We take care of synchronizing your contract data, transaction data and more. Things stay fast because you declare what to keep in sync.</p>
<ul>
<li><p>Fully reactive contract data, including state, events and transactions</p>
</li>
<li><p>Declarative, so you’re not wasting valuable cycles on unneeded data.</p>
</li>
<li><p>Maintainer access to underlying functionaliy. Web3 and your contract’s methods are still there, untouched.</p>
</li>
</ul>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add drizzle</div></pre></td></tr></table></figure>
<p>If use React you can use <a href="https://github.com/trufflesuite/drizzle-react" target="_blank" rel="noopener">drizzle-react</a> and (optionally) its companion <a href="https://github.com/trufflesuite/drizzle-react-components" target="_blank" rel="noopener">drizzle-react-components</a></p>
<blockquote>
<p>Drizzle uses web3 1.0 and web sockets, be sure your development environment can support these.</p>
</blockquote>
<ol>
<li>Import the provider</li>
</ol>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; Drizzle, generateStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'drizzle'</span></div></pre></td></tr></table></figure>
<ol>
<li>Create an <code>options</code> object and pass in the desired contract artifacts for Drizzle to instantiate. Other options are available, just keep going on.</li>
</ol>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// import contract</span></div><div class="line"><span class="hljs-keyword">import</span> SimpleStorage <span class="hljs-keyword">from</span> <span class="hljs-string">'./../build/contracts/SimpleStorage.json'</span></div><div class="line"><span class="hljs-keyword">import</span> TutorialToken <span class="hljs-keyword">from</span> <span class="hljs-string">'./../build/contracts/TutorialToken.json'</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> options = &#123;</div><div class="line">  <span class="hljs-attr">contracts</span>: [</div><div class="line">    SimpleStorage</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> drizzleStore = generateStore(<span class="hljs-keyword">this</span>.props.options)</div><div class="line"><span class="hljs-keyword">const</span> drizzle = <span class="hljs-keyword">new</span> Drizzle(<span class="hljs-keyword">this</span>.props.options, drizzleStore)</div></pre></td></tr></table></figure>
<h3 id="Contract-Interaction"><a href="#Contract-Interaction" class="headerlink" title="Contract Interaction"></a>Contract Interaction</h3><p>Drizzle provides helpful methods on top of the default web3 Contract methods to keep you calls and transactions in sync with the store.</p>
<h4 id="cacheCall"><a href="#cacheCall" class="headerlink" title="cacheCall()"></a>cacheCall()</h4><p>Gets contract data. Calling the <code>cacheCall()</code> function on a contract will execute the desired call and return a <strong>corresponding key</strong> so the data can be retrieved from the store.</p>
<p>When a new block is received, Drizzle will refresh the store automatically <em>if</em> any transactions in the block touched our contract.</p>
<blockquote>
<p>Note: We have to check that Drizzle is <strong>initialized before fetching data</strong>. A simple if statement such as below is fine for display a few pieces of data, but a better approach for larger dapps is to use a <code>loading component</code>. Drizzle built one in <code>drizzle-react-component</code> as well.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Assuming we're observing the store for changes</span></div><div class="line"><span class="hljs-keyword">var</span> state = drizzle.store.getState()</div><div class="line"></div><div class="line"><span class="hljs-comment">// If Drizzle is initialized (and therefore web3, accounts, and contracts ), continue</span></div><div class="line"><span class="hljs-keyword">if</span> (state.drizzleStatus.initialized) &#123;</div><div class="line">  <span class="hljs-comment">// Declare this call to be cached and synchornized. We'll receive the store key for recall</span></div><div class="line">  <span class="hljs-keyword">const</span> dataKey = drizzle.contracts.SimpleStorage.methods.storedData.cacheCall()</div><div class="line"></div><div class="line">  <span class="hljs-comment">// Use the dataKey to display data from the store</span></div><div class="line">  <span class="hljs-keyword">return</span> state.contracts.SimpleStorage.methods.storedData[dataKey].value</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-comment">// If Drizzle isn't initialized, display some loading indication</span></div><div class="line"><span class="hljs-keyword">return</span> <span class="hljs-string">'loading'</span></div></pre></td></tr></table></figure>
<p>The Contract instance has all of its standard web3 properties and methods. For example, you could still call as normal if you don’t want something in the store:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">drizzle.contracts.SimpleStorage.methods.storedData().call() <span class="hljs-comment">// different from methods.storedData.cacheCall()</span></div></pre></td></tr></table></figure>
<h3 id="cacheSend"><a href="#cacheSend" class="headerlink" title="cacheSend()"></a>cacheSend()</h3><p>Sends a contract transaction. Calling the <code>cacheSend()</code> function on a contract will send the desired transaction and return a correnponding hash so the status can be retrieved from the store. The last argument can optionally be an options object with the typical <strong>from, gas, gasPrice</strong> keys. Drizzle will update the transaction’s state in the store(pending, success, error) and store the transaction receipt.</p>
<blockquote>
<p>Note: We have to check that Drizzle is initialized before fetching data. A simple if statement such as below is fine for display a few pieces of data, but a better approach for larger dapps is to use a loading component.</p>
</blockquote>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment">// Assuming we're observing the store of changes</span></div><div class="line"><span class="hljs-keyword">var</span> state = drizzle.store.getState()</div><div class="line"></div><div class="line"><span class="hljs-comment">// if Drizzle is initialized ( and therefore web3, accounts, and contracts ), continue</span></div><div class="line"><span class="hljs-keyword">if</span> (state.drizzleStatus.initialized) &#123;</div><div class="line">  <span class="hljs-comment">// Declare this transaction to be observed. We'll receive the stackId of reference.</span></div><div class="line">  <span class="hljs-keyword">const</span> stackId = drizzle.contracts.SimpleStorage.methods.set.cacacheSend(<span class="hljs-number">2</span>, &#123;<span class="hljs-attr">from</span>: <span class="hljs-string">'0x3f...'</span>&#125;)</div><div class="line"></div><div class="line">  <span class="hljs-comment">// Use the dataKey to display the transaction status</span></div><div class="line">  <span class="hljs-keyword">if</span> (state.transactionStack[stackId]) &#123;</div><div class="line">    <span class="hljs-keyword">const</span> txHash = state.trasnactionStack[stackId]</div><div class="line"></div><div class="line">    <span class="hljs-keyword">return</span> state.transactions[txHash].status</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="hljs-comment">// If Drizzle isn't initialized, display some loading indication.</span></div><div class="line"><span class="hljs-keyword">return</span> <span class="hljs-string">'loading'</span></div></pre></td></tr></table></figure>
<p>The contract instance has all of its standard web3 properties and methods.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">drizzle.contracts.SimpleStorage.methods.set(<span class="hljs-number">2</span>).send(&#123;<span class="hljs-attr">from</span>: <span class="hljs-string">'0x3f...'</span>&#125;)</div></pre></td></tr></table></figure>
<h3 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h3><figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  contracts,</div><div class="line">  events: &#123;</div><div class="line">    contractsName: [</div><div class="line">      eventName</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">  web3: &#123;</div><div class="line">    fallback: &#123;</div><div class="line">      type</div><div class="line">      url</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p>Contracts: Array, Required, an array of contract artifacts files</p>
</li>
<li><p>Events: Object, an object consisting of contract names each containing an array of strings of the event names we’d like to listen for and sync with the store</p>
</li>
<li><p>Web3: Object, options regarding web3 instantiation</p>
</li>
<li><p>Fallback: Object, an object consisting of the type and url of a fallback web3 provider. This is used if no injected provider, such as MetaMask or Mist, is detect.</p>
<ul>
<li><p>type: string, the type of web3 fallback, currently <code>ws</code> is the only possibility</p>
</li>
<li><p>url: string, the full websocket url. For example, <code>ws://127.0.0.1:8546</code></p>
</li>
</ul>
</li>
</ul>
<h3 id="How-data-stays-fresh"><a href="#How-data-stays-fresh" class="headerlink" title="How data stays fresh"></a>How data stays fresh</h3><ol>
<li>Once initialized, Drizzle instantiates <code>web3</code> and our desired contracts, then observes the chain by subscribing to new block headers</li>
</ol>
<p><img src="https://github.com/trufflesuite/drizzle/blob/master/readme/drizzle-sync1.png?raw=true" alt=""></p>
<ol>
<li>Drizzle keeps track of contract calls so it knows what to synchronize</li>
</ol>
<p><img src="https://github.com/trufflesuite/drizzle/blob/master/readme/drizzle-sync2.png?raw=true" alt=""></p>
<ol>
<li>When a new block header comes in, Drizzle checks that the block isn’t pending, then goes through the transactions looking to see if any of them touched our contracts</li>
</ol>
<p><img src="https://github.com/trufflesuite/drizzle/blob/master/readme/drizzle-sync3.png?raw=true" alt=""></p>
<ol>
<li>If they did, we replay the calls already in the store to refresh any potentially altered data. If they didn’t we continue with the store data.</li>
</ol>
<p><img src="https://github.com/trufflesuite/drizzle/blob/master/readme/drizzle-sync4.png?raw=true" alt=""></p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-03-12T03:04:42.000Z">2018-03-12</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 259 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/03/12/Constant-View-and-Pure-in-Solidity/">Constant, View, and Pure in Solidity</a>
            
        </h1>
        <div class="content">
            <h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><ul>
<li><p><code>pure</code> for functions: Disallows modifition or access of state - this is not enforeced yet.</p>
</li>
<li><p><code>view</code> for functions: Disallow modifition of state - this is not enforced yet.</p>
</li>
<li><p><code>payable</code> for functions: Allows them to receive Ether together with a call.</p>
</li>
<li><p><code>constant</code> for <strong>state variables</strong>: Disallow assignment (except initialization), does not occupy storage slot.</p>
</li>
<li><p><code>anonymouse</code> for <strong>events</strong>: Does not store event signature as <strong>topic</strong>(indexable).</p>
</li>
<li><p><code>indexed</code> for <strong>event parameters</strong>: Stores the parameter as <strong>topic</strong>(indexable).</p>
</li>
</ul>
<p><a href="https://ethereum.stackexchange.com/questions/25200/solidity-what-is-the-difference-between-view-and-constant" target="_blank" rel="noopener">Question</a></p>
<blockquote>
<p>Q: Solidity 0.4.16 introduced the <code>view</code> and <code>constant</code> function modifiers. <a href="http://solidity.readthedocs.io/en/latest/miscellaneous.html#modifiers" target="_blank" rel="noopener">The documentation</a> says:</p>
<p>constant for functions: Same as view</p>
<p>Does this mean <code>view</code> is just an alias for <code>constant</code>?</p>
</blockquote>
<p>Answer: This is discussed <a href="https://github.com/ethereum/solidity/issues/992" target="_blank" rel="noopener">here</a></p>
<ol>
<li><p>The keyword <code>view</code> is introduced for functions (it replaces constant). Calling a view cannot alter the behavior of future interaction with any contract. This means such functions cannot use <code>SSTORE</code>, cannot <code>send</code> or <code>receive</code> ether and can only call other <code>view</code> or <code>pure</code> functions.</p>
</li>
<li><p>The keyword <code>pure</code> is introduced for functions, they are view functions with the additional restriction that their value only depends on the function arguments(pure function). This means they cannot use <code>SSTORE</code>, <code>SLOAD</code>, cannot <code>send</code> or <code>receive</code> ether, cannot use <code>msg</code> or <code>block</code> and can only call other <code>pure</code> function.</p>
</li>
<li><p>The keyword <code>constant</code> is <strong>invalid</strong> on functions</p>
</li>
<li><p>The keyword <code>constant</code> on any variable means it cannot be modified (and could be placed into memory or bytecode by the optimiser)</p>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-03-05T06:30:17.000Z">2018-03-05</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 812 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/03/05/Writing-Upgradable-Contracts-in-Solidity/">Writing Upgradable Contracts in Solidity</a>
            
        </h1>
        <div class="content">
            <p><a href="https://blog.colony.io/writing-upgradeable-contracts-in-solidity-6743f0eecc88" target="_blank" rel="noopener">Original</a></p>
<p>Ethereum contracts are immutable – once deployed to the blockchain they cannot be updated, yet the need to change their logic with time is ultimately necessary.</p>
<p>During a contract upgrade the following factors need to be considered:</p>
<ul>
<li><p>Block gas limit(4712388 for Homestead)</p>
<p>Upgrade transaction tend to be large due to the amount of processing they have to complete e.g. <em>deploy a contract, move data, move references</em>.</p>
</li>
<li><p>Inter-contract dependencies</p>
<p><em>when a contract is compiled, all of its imports are compiled into the contract thus leading to a ripple effect when you want to swap out a contract which is being referenced by other contract</em>.</p>
</li>
</ul>
<p>These two are related, as having more dependencies affects the size of your deployed contracts and the overall transaction size of the upgrade. The implementation patterns below work to <em>minimise the upgrade gas costs as well as loosening the coupling of contracts without breaking Solidity type safety</em>.</p>
<p>Note that for the sake of simplying the examples, we have omitted the implementation of security and permission.</p>
<h3 id="Avoiding-large-data-copy-operations"><a href="#Avoiding-large-data-copy-operations" class="headerlink" title="Avoiding large data copy operations"></a>Avoiding large data copy operations</h3><p>Storing data is expensive(<code>SSTORE</code> operation costs 5000 or 20000 gas) and upgrading contracts containing large storage variables runs the chance of hitting the transaction gas limit during the copying of its data.</p>
<p><strong>You may therefore want to isolate your datastore from the rest of your code, and make it as flexible as possible, so that it is unlikely to need to be upgrade.</strong></p>
<p>Depending on your circumstances, how large of a datastore you need and whether you expect its structure to change often, you may choose a strict definition or a loosely typed flat store. Below is an example of the latter which implements support for storing a <em>sha3</em> key and value pairs. It is the more flexible and extensible option. This ensures data schema changes can be implemented without requiring upgrades to the storage contract.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">contract EternalStorage &#123;</div><div class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> uint) UIntStorage;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getUIntValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">uint</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> UIntStorage[record];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setUIntValue</span>(<span class="hljs-params">bytes32 record, uint value</span>) </span>&#123;</div><div class="line">    UIntStorage[record] = value;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> string) StringStorage;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getStringValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">string</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> StringStorage(record);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setStringValue</span>(<span class="hljs-params">bytes32 record, string value</span>) </span>&#123;</div><div class="line">    StringStorage[record] = value;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> address) AddressStorage;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getAddressValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">address</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> AddressStorage[record];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setAddressValue</span>(<span class="hljs-params">bytes32 record, address value</span>) </span>&#123;</div><div class="line">    AddressStorage[record] = value;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mapping(<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> bytes) BytesStorage;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBytesValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bytes</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> BytesStorage[record];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setBytesValue</span>(<span class="hljs-params">bytes32 record, bytes value</span>) </span>&#123;</div><div class="line">    BytesStorage[record] = value;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mapping (<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> bool) BooleanStorage;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getBooleanValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">bool</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> BooleanStorage[record];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setBooleanValue</span>(<span class="hljs-params">bytes32 record, bool value</span>) </span>&#123;</div><div class="line">    BooleanStorage[record] = value;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  mapping (<span class="hljs-function"><span class="hljs-params">bytes32</span> =&gt;</span> int) IntStorage;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getIntValue</span>(<span class="hljs-params">bytes32 record</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">int</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> IntStorage[record];</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setIntValue</span>(<span class="hljs-params">bytes32 record, int value</span>) </span>&#123;</div><div class="line">    IntStorage[record] = value;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>For upgrades you can then just switch the upgraded contract to point to the new EternalStorage contract instance without having a copy of its data.</p>
<h3 id="Use-Libraries-to-Encapsulate-Logic"><a href="#Use-Libraries-to-Encapsulate-Logic" class="headerlink" title="Use Libraries to Encapsulate Logic"></a>Use Libraries to Encapsulate Logic</h3><p>Libraries are special form of contracts that are singletons and not allowed any storage variables.</p>
<p>The advantage of libraries in the context of upgrades is that they allow encapsulation of business logic or data management logic into singleton instance that cost only upgrading one and not many contracts.</p>
<p>Example below shows a library used for adding a <em>Proposal</em> to storage.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"EternalStorage.sol"</span>;</div><div class="line"></div><div class="line">library ProposalsLibrary &#123;</div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProposalCount</span>(<span class="hljs-params">address _storageContract</span>) <span class="hljs-title">constant</span> <span class="hljs-title">returns</span> (<span class="hljs-params">uint256</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> EternalStorage(_storageContract).getUIntValue(sha3(<span class="hljs-string">"proposalCount"</span>));</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addProposal</span>(<span class="hljs-params">address _storageContract, bytes32 _name</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">var</span> idx = getProposalCount(_storageContract);</div><div class="line">    EternalStorage(_storageContract).setBytes32Value(sha3(<span class="hljs-string">"proposal_name"</span>, idx), _name);</div><div class="line">    EternalStorage(_storageContract).setUIntValue(sha3(<span class="hljs-string">"proposal_eth"</span>, idx), <span class="hljs-number">0</span>);</div><div class="line">    EternalStorage(_storageContract).setUIntValue(sha3(<span class="hljs-string">"ProposalCount"</span>), idx + <span class="hljs-number">1</span>);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Under the cover, library functions are called using <code>delegatecall</code> from the calling contract which has the advantage of passing the <code>msg.sender</code> and <code>msg.value</code> seamlessly. You can therefore write your library code as if it were just part of your contract, without having to worry about the sender or value chagning.</p>
<p>The example below shows a sample <code>Organization</code> contract using <code>ProposalsLibrary</code> to interact with data storage.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"ProposalsLibrary.sol"</span>;</div><div class="line"></div><div class="line">contract Organization &#123;</div><div class="line">  using ProposalsLibrary <span class="hljs-keyword">for</span> address;</div><div class="line">  address public eternalStorage;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Organization</span>(<span class="hljs-params">address _eternalStorage</span>) </span>&#123;</div><div class="line">    eternalStorage = _eternalStorage;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addProposal</span>(<span class="hljs-params">bytes32 _name</span>) </span>&#123;</div><div class="line">    eternalStorage.addProposal(_name);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>With libraries, there is a slight gas overhead on each call. However, it makes deploying a new contract much cheaper.</p>
<h3 id="Use-‘interface’-to-decouple-inter-contract-communication"><a href="#Use-‘interface’-to-decouple-inter-contract-communication" class="headerlink" title="Use ‘interface’ to decouple inter-contract communication"></a>Use ‘interface’ to decouple inter-contract communication</h3><p>Abstract Contract implementation behind an interface that only define its function siguatures.</p>
<p>This is a well known pattern in object oriented programming.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> <span class="hljs-string">"ITokenLedger.sol"</span>;</div><div class="line"></div><div class="line">contract Organization &#123;</div><div class="line">  ITokenLedger public tokenLedger;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Organization</span>(<span class="hljs-params">address _tokenLedger</span>) </span>&#123;</div><div class="line">    tokenLedger = ITokenLedger(_tokenLedger);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generateToekns</span>(<span class="hljs-params">uint256 _amount</span>) </span>&#123;</div><div class="line">    tokenLedger.generateTokens(_amount);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Here instead of importing the entire <code>TokenLedger.sol</code> contract, we use an interface containing just the function signatures. This eases any possible upgrades to TokenLedger which don’t affect its interface, too, which with this model can be implemented without redeploying the Organization contract.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-28T03:32:11.000Z">2018-02-28</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 445 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/28/Dockerizing-a-React-App/">Dockerizing a React App</a>
            
        </h1>
        <div class="content">
            <p><a href="http://mherman.org/blog/2017/12/07/dockerizing-a-react-app/" target="_blank" rel="noopener">Original</a></p>
<h3 id="Project-Setup"><a href="#Project-Setup" class="headerlink" title="Project Setup"></a>Project Setup</h3><p>Install <code>create-react-app</code></p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g create-react-app@1.5.2</div></pre></td></tr></table></figure>
<p>Creating a new app</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">create-react-app docker-app</div><div class="line"><span class="hljs-built_in">cd</span> docker-app</div></pre></td></tr></table></figure>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>Add a <code>Dockerfile</code> to the project root</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># base image</div><div class="line">FROM node:9.6.1</div><div class="line"></div><div class="line"># set working directory</div><div class="line">RUN mkdir /usr/src/app</div><div class="line">WORKDIR /usr/src/app</div><div class="line"></div><div class="line"># add `/usr/src/app/node_modules/.bin` to $PATH</div><div class="line">ENV PATH /usr/src/app/node_modules/.bin:$PATH</div><div class="line"></div><div class="line"># install and cache app dependencies</div><div class="line">COPY package.json /usr/src/app/package.json</div><div class="line">RUN npm install</div><div class="line">RUN npm install react-scripts@1.1.1 -g</div><div class="line"></div><div class="line"># start app</div><div class="line">CMP [&quot;npm&quot;, &quot;start&quot;]</div></pre></td></tr></table></figure>
<p>Add a <code>.dockerignore</code> to speed up the Docker build process as our local dependencies will not be sent to the Docker Daemon</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">node_modules</div></pre></td></tr></table></figure>
<p>Build and tag the Docker Image</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker build -t docker-app:1.0.0</div></pre></td></tr></table></figure>
<p>Then spin up the container once the image is built.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker run -it -v <span class="hljs-variable">$&#123;PWD&#125;</span>:/usr/src/app -v /usr/src/app/node_modules -p 3000:3000 --rm docker-app:1.0.0</div></pre></td></tr></table></figure>
<p>Now you can visit your app <code>http://localhost:3000</code></p>
<h3 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h3><p>Add a <code>docker-compose.yml</code> to the project root.</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.3'</span></div><div class="line"></div><div class="line"><span class="hljs-attr">services:</span></div><div class="line"><span class="hljs-attr">  docker-app:</span></div><div class="line"><span class="hljs-attr">    container_name:</span> <span class="hljs-string">docker-app</span></div><div class="line"><span class="hljs-attr">    build:</span></div><div class="line"><span class="hljs-attr">      context:</span> <span class="hljs-string">.</span></div><div class="line"><span class="hljs-attr">      dockerfile:</span> <span class="hljs-string">Dockerfile</span></div><div class="line"><span class="hljs-attr">    volumnes:</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'.:/usr/src/app'</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'/usr/src/app/node_modules'</span></div><div class="line"><span class="hljs-attr">    ports:</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">'3000:3000'</span></div><div class="line"><span class="hljs-attr">    environment:</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">NODE_ENV=development</span></div></pre></td></tr></table></figure>
<p>Take note of the volumes. Without the data volume <code>/usr/src/app/node_modules</code>, the <code>node_modules</code> directory would be overwritten by the mounting of the host directory at runtime that were installed when the container was built.</p>
<p>BUild the image and fire up the container</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose up <span class="hljs-_">-d</span> --build</div></pre></td></tr></table></figure>
<p>Ensure the app is running in the browser.</p>
<p>Bring down the container before moving on</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose stop</div></pre></td></tr></table></figure>
<h3 id="Production"><a href="#Production" class="headerlink" title="Production"></a>Production</h3><p>Let’s create a seperate <code>Dockerfile</code> for use in production called <code>Dockerfile-prod</code></p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"># build environment</div><div class="line">FROM node:9.6.1 as builder</div><div class="line">RUN mkdir /usr/src/app</div><div class="line">WORKDIR /usr/src/app</div><div class="line">ENV PATH /usr/src/app/node_moudles/.bin:$PATH</div><div class="line">COPY package.json /usr/src/app/package.json</div><div class="line">RUN npm install</div><div class="line">RUN npm install react-scripts@1.1.1 -g</div><div class="line">COPY . /usr/src/app</div><div class="line">RUN npm run build</div><div class="line"></div><div class="line"># production environment</div><div class="line">FROM nginx:1.13.9-alpine</div><div class="line">COPY --from=builder /usr/src/app/build /usr/share/nginx/html</div><div class="line">EXPOSE 80</div><div class="line">CMD [&quot;nginx&quot;,&quot;-g&quot;,&apos;deamon off;&quot;]</div></pre></td></tr></table></figure>
<p>Using the production Dockerfile, build and tag the Docker Image:</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker build <span class="hljs-_">-f</span> Dockerfile-prod -t docker-app-prod .</div></pre></td></tr></table></figure>
<p>Spin up the container</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker run -it -p 80:80 --rm docker-app-prod</div></pre></td></tr></table></figure>
<p>Add Prod Docker Compose as `docker-compose-prod.yml’</p>
<figure class="highlight yml hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-attr">version:</span> <span class="hljs-string">"3.3"</span></div><div class="line"></div><div class="line"><span class="hljs-attr">services:</span></div><div class="line"><span class="hljs-attr">  docker-app-prod:</span></div><div class="line"><span class="hljs-attr">    container_name:</span> <span class="hljs-string">docker-app-prod</span></div><div class="line"><span class="hljs-attr">    build:</span></div><div class="line"><span class="hljs-attr">      context:</span> <span class="hljs-string">.</span></div><div class="line"><span class="hljs-attr">      dockerfile:</span> <span class="hljs-string">Dockerfile-prod</span></div><div class="line"><span class="hljs-attr">    prots:</span></div><div class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">"80:80"</span></div></pre></td></tr></table></figure>
<p>Fire up the container</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose <span class="hljs-_">-f</span> docker-compose-prod.yml up <span class="hljs-_">-d</span> --build</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-24T03:05:49.000Z">2018-02-24</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    4 minutes read (About 542 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/24/Deploy-RoR-with-Mina/">Deploy RoR With Mina</a>
            
        </h1>
        <div class="content">
            <h3 id="Mina-Setup"><a href="#Mina-Setup" class="headerlink" title="Mina Setup"></a>Mina Setup</h3><p>Let’s take a look at setting up Mina with Puma. First, you’ll need to add Mina and mina-puma in Gemfile.</p>
<p>Then install gems and execute the initial Mina Command for generating a <code>config/deploy.rb</code>.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">bundle</div><div class="line">mina init</div></pre></td></tr></table></figure>
<h3 id="Detailed-Explanations-for-the-Mina-deploy-file"><a href="#Detailed-Explanations-for-the-Mina-deploy-file" class="headerlink" title="Detailed Explanations for the Mina deploy file"></a>Detailed Explanations for the Mina deploy file</h3><figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment"># Set the domain or ip address of the remote server.</span></div><div class="line">set <span class="hljs-symbol">:domain</span>, <span class="hljs-string">'yourdomain'</span></div><div class="line"></div><div class="line"><span class="hljs-comment"># Set the folder of the remote server where Mina will deploy your app.</span></div><div class="line">set <span class="hljs-symbol">:deploy_to</span>, <span class="hljs-string">'path/to/directory'</span></div><div class="line"></div><div class="line"><span class="hljs-comment"># Set a link to the repository. Better git protocol.</span></div><div class="line">set <span class="hljs-symbol">:repository</span>, <span class="hljs-string">'git@...'</span></div><div class="line"></div><div class="line"><span class="hljs-comment"># Set the name of a branch you plan to deploy as default master.</span></div><div class="line">set <span class="hljs-symbol">:branch</span>, <span class="hljs-string">'master'</span></div><div class="line"></div><div class="line"><span class="hljs-comment"># Fill in the names of the files and directories that will be symlinks to the shared directory.</span></div><div class="line"><span class="hljs-comment"># All folders will be created automatically on Mina Setup.</span></div><div class="line"><span class="hljs-comment"># Don't forget to add a path to the uploads folder if you are using Dragonfly or Carrierwaves.</span></div><div class="line"><span class="hljs-comment"># Otherwise, you will lose your uploads on each deploy.</span></div><div class="line">set <span class="hljs-symbol">:shared_dirs</span>, fetch(<span class="hljs-symbol">:shared_dirs</span>, []).push(<span class="hljs-string">'log'</span>, <span class="hljs-string">'tmp/pids'</span>, <span class="hljs-string">'tmp/sockets'</span>, <span class="hljs-string">'public/uploads'</span>)</div><div class="line">set <span class="hljs-symbol">:shared_files</span>, fetch(<span class="hljs-symbol">:shared_files</span>, []).push(<span class="hljs-string">'config/database.yml'</span>, <span class="hljs-string">'config/secrets.yml'</span>, <span class="hljs-string">'config/puma.rb'</span>)</div><div class="line"></div><div class="line"><span class="hljs-comment"># Username of ssh for access to the remote server.</span></div><div class="line">set <span class="hljs-symbol">:user</span>, <span class="hljs-string">'root'</span></div><div class="line"></div><div class="line"><span class="hljs-comment"># This is not a required field, you can use it to set an app name for easy recognition.</span></div><div class="line">set <span class="hljs-symbol">:application_name</span>, <span class="hljs-string">'MyApp'</span></div><div class="line"></div><div class="line"><span class="hljs-comment"># Set ruby version. If you have RVM installed globally, you'll also need to set an RVM path,</span></div><div class="line"><span class="hljs-comment"># like set:rvm_use_path, '/usr/local/rvm/scripts/rvm'.</span></div><div class="line"><span class="hljs-comment"># You can find the RVM location with rvm info command.</span></div><div class="line">task <span class="hljs-symbol">:environment</span> <span class="hljs-keyword">do</span></div><div class="line">  invoke <span class="hljs-symbol">:<span class="hljs-string">'rvm:use'</span></span>, <span class="hljs-string">'ruby-2.5.1@default'</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<p>By default, Mina will create all folders mentioned in shared_dirs and shared_files.</p>
<p>You deploy section in deploy.rb should look like this:</p>
<figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">task <span class="hljs-symbol">:deploy</span> <span class="hljs-keyword">do</span></div><div class="line">  deploy <span class="hljs-keyword">do</span></div><div class="line">    comment <span class="hljs-string">"Deploying <span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:application_name</span>)&#125;</span> to <span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:domain</span>)&#125;</span>:<span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:deploy_to</span>)&#125;</span>"</span></div><div class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'git:clone'</span></span></div><div class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'deploy:link_shared_paths'</span></span></div><div class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'rvm:load_env_vars'</span></span></div><div class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'bundle:install'</span></span></div><div class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'rails:db_migrate'</span></span></div><div class="line">    command <span class="hljs-string">%&#123;<span class="hljs-subst">#&#123;fetch(<span class="hljs-symbol">:rails</span>) <span class="hljs-symbol">db:</span>seed&#125;</span>&#125;</span></div><div class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'rails:assets_precompile'</span></span></div><div class="line">    invoke <span class="hljs-symbol">:<span class="hljs-string">'deploy:cleanup'</span></span></div><div class="line"></div><div class="line">    on <span class="hljs-symbol">:launch</span> <span class="hljs-keyword">do</span></div><div class="line">      invoke <span class="hljs-symbol">:<span class="hljs-string">'puma:phased_restart'</span></span></div><div class="line">    <span class="hljs-keyword">end</span></div><div class="line">  <span class="hljs-keyword">end</span></div><div class="line"><span class="hljs-keyword">end</span></div></pre></td></tr></table></figure>
<h3 id="Puma-Setup"><a href="#Puma-Setup" class="headerlink" title="Puma Setup"></a>Puma Setup</h3><p>Create or fill a puma.rb file in a config folder</p>
<figure class="highlight ruby hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">environment <span class="hljs-string">"productino"</span></div><div class="line"></div><div class="line">bind <span class="hljs-string">"unix:///&#123;path_to_your_app&#125;/shared/tmp/sockets/puma.sock"</span></div><div class="line">pidfile <span class="hljs-string">"/&#123;path_to_your_app&#125;/shared/tmp/pids/puma.pid"</span></div><div class="line">state_path <span class="hljs-string">"/&#123;path_to_your_app&#125;/shared/tmp/sockets/puma.state"</span></div><div class="line">directory <span class="hljs-string">"/&#123;path_to_your_app&#125;/current"</span></div><div class="line"></div><div class="line">workers <span class="hljs-number">2</span></div><div class="line">threads <span class="hljs-number">1</span>,<span class="hljs-number">2</span></div><div class="line"></div><div class="line">daemonize <span class="hljs-literal">true</span></div><div class="line"></div><div class="line">activate_control_app <span class="hljs-string">'unix:///&#123;path_to_your_app&#125;/shared/tmp/sockets/pumactl.sock'</span></div><div class="line"></div><div class="line">prune_bundler</div></pre></td></tr></table></figure>
<h3 id="Fill-database-yml-and-secrets-yml"><a href="#Fill-database-yml-and-secrets-yml" class="headerlink" title="Fill database.yml and secrets.yml"></a>Fill database.yml and secrets.yml</h3><h3 id="Setup-nginx"><a href="#Setup-nginx" class="headerlink" title="Setup nginx"></a>Setup nginx</h3><p>Create file myapp.conf in a <code>/nginx/etc/conf.d</code> folder with similar content.</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">upstream mysite &#123;</div><div class="line">  server unix:///home/admin/mysite/shared/tmp/sockets/puma.sock fail_timeout=0;</div><div class="line">&#125;</div><div class="line"></div><div class="line">server &#123;</div><div class="line">  listen 80;</div><div class="line">  listen [::]:80;</div><div class="line"></div><div class="line">  server_name mysite.com;</div><div class="line">  root /home/admin/mysite/current/public;</div><div class="line"></div><div class="line">  location ~ ^/assets/ &#123;</div><div class="line">    expires max;</div><div class="line">    gzip_static on;</div><div class="line">    gzip_vary on;</div><div class="line">    add_header Cache-Control public;</div><div class="line">    break;</div><div class="line">  &#125;</div><div class="line"></div><div class="line"></div><div class="line">  location / &#123;</div><div class="line">    proxy_pass http://mysite;</div><div class="line">    proxy_set_header Host $host;</div><div class="line">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  location ~ ^/(500|404|422).html &#123;</div><div class="line">    root /home/admin/mysite/current/public;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  error_page 500 502 503 504 /500.html;</div><div class="line">  error_page 404 /404.html;</div><div class="line">  error_page 422 /422.html;</div><div class="line"></div><div class="line">  client_max_body_size 4G;</div><div class="line">  keepalive_timeout 10;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-14T15:11:11.000Z">2018-02-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 18 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/14/What-Blockchain-came-with/">What Blockchain Came With</a>
            
        </h1>
        <div class="content">
            <p><a href="http://naotu.baidu.com/file/1d400c82d65cd3fd530ffc55d8eb3783?token=5e57783dc51b3617" target="_blank" rel="noopener">MindMap</a></p>
<embed src="http://naotu.baidu.com/file/1d400c82d65cd3fd530ffc55d8eb3783?token=5e57783dc51b3617" width="100%" height="30vh">

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-02-14T15:02:32.000Z">2018-02-14</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 20 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/02/14/Ethereum-IPFS/">Ethereum + IPFS</a>
            
        </h1>
        <div class="content">
            <p><a href="http://naotu.baidu.com/file/2b8d146aa6314a4205c8573a7e84f834?token=c4a7105f4f935d63" target="_blank" rel="noopener">MindMap</a></p>
<embed src="http://naotu.baidu.com/file/2b8d146aa6314a4205c8573a7e84f834?token=c4a7105f4f935d63" width="100%" height="30vh">

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-29T05:41:35.000Z">2018-01-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 minutes read (About 260 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/29/Gas-Used-by-Public-and-External-Function-in-Solidity/">Gas Used by Public and External Function in Solidity</a>
            
        </h1>
        <div class="content">
            <p><a href="https://ethereum.stackexchange.com/questions/19380/external-vs-public-best-practices?answertab=active#tab-top" target="_blank" rel="noopener">Original</a></p>
<p>A simple example demostrating this effect looks like this:</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">pragma solidity ^0.4.19;</div><div class="line"></div><div class="line">contract Test &#123;</div><div class="line">  function test(uint[20] a) public returns (uint) &#123;</div><div class="line">    return a[10] * 2;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  function test2(uint[20] a) external returnss (uint) &#123;</div><div class="line">    return a[10] * 2;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Calling each function, the <code>public</code> function uses 496 gas, while the <code>external</code> function uses 261 gas.</p>
<p>The difference is because in public functions, Solidity immediately copies array argument to <strong>memory</strong>, while external functions can read directly from <strong>calldata</strong>. Memory allocation is expensive, whereas reading from calldata is cheap.</p>
<p>The reason that <code>public</code> functions need to write all the arguments to memory is that public functions may be called internally, which is actually an entirely different process than external calls.</p>
<p>Internal calls are executed via jumps in the code, and array arguments are passed internally by pointers to memory. Thus, <strong>when the compiler generates the code for an internal function, that function expects its arguments to be located in memory</strong>.</p>
<p>For external functions, the compiler doesn’t need to allow internal calls, and so it allows arguments to be read directly from calldata, saving the copying step.</p>
<p>As for best practices, you should use <code>external</code> fi you expect that the function will only ever be called externally, and use public if you need to call the function internally. It almost never makes sense to use the <code>this.f()</code> pattern, as this requires a real <code>CALL</code> to be executed, which is expensive. Also, passing arrays via this method would be far more expensive than passing them internally.</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-01-29T02:33:20.000Z">2018-01-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 760 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2018/01/29/智能合约编写注意事项/">智能合约编写注意事项</a>
            
        </h1>
        <div class="content">
            <p><a href="https://medium.com/loom-network/how-to-secure-your-smart-contracts-6-solidity-vulnerabilities-and-how-to-avoid-them-part-1-c33048d4d17d" target="_blank" rel="noopener">原文连接</a></p>
<h3 id="Overflow-与-Underflow"><a href="#Overflow-与-Underflow" class="headerlink" title="Overflow 与 Underflow"></a>Overflow 与 Underflow</h3><p>Solidity 可以处理 256 位数字, 最高为 2<strong>256 - 1, 所以对 (2 </strong> 256 - 1) 加 1 会导致归 0.</p>
<p>同理, 对 unsigned 类型 0 做减 1 运算会得到 (2**256 - 1)</p>
<p>测试代码如下</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">pragma solidity 0.4.18;</div><div class="line"></div><div class="line">contract OverflowUnderflow &#123;</div><div class="line">    uint public zero = 0;</div><div class="line">    uint public max = 2**256 - 1;</div><div class="line"></div><div class="line">    // zero will end up at  2 ** 256 - 1</div><div class="line">    function underflow() public &#123;</div><div class="line">        zero -= 1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    function overflow() public &#123;</div><div class="line">        max += 1;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>尽管他们同样危险, 但是在智能合约中, underflow 造成的影响更大.</p>
<p>比如, 账号 A 持有 X tokens, 如果他发起一笔 X + 1 tokens 的交易, 如果代码不进行校验, 则账号 A 的余额可能发生 underflow 导致余额变多.</p>
<p>可以引入 <strong>SafeMath Library</strong> 解决</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">pragma solidity 0.4.18;</div><div class="line"></div><div class="line">library SafeMath &#123;</div><div class="line">    function mul(uint256 a, uint256 b) internal pure returns (uint256) &#123;</div><div class="line">        if (a==0) &#123;</div><div class="line">            return 0;</div><div class="line">        &#125;</div><div class="line">        uint c = a * b;</div><div class="line">        assert(c / a == b);</div><div class="line">        return c;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    function div(uint256 a, uint256 b) internal pure returns (uint256) &#123;</div><div class="line">        uint256 c = a / b;</div><div class="line">        return c;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    function sub(uint256 a, uint256 b) internal pure returns (uint256) &#123;</div><div class="line">        assert(b &lt;= a);</div><div class="line">        return a - b;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    function add(uint256 a, uint256 b) internal pure returns (uint256) &#123;</div><div class="line">        uint256 c = a + b;</div><div class="line">        assert(c &gt;= a);</div><div class="line">        return c;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">contract OverflowUnderflow &#123;</div><div class="line">    using SafeMath for uint;</div><div class="line">    uint public zero = 0;</div><div class="line">    uint public max = 2 ** 256 - 1;</div><div class="line"></div><div class="line">    function underflow() public &#123;</div><div class="line">        zero = zero.sub(1);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    function overflow() public &#123;</div><div class="line">        max = max.add(1);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Visibility-与-Delegatecall"><a href="#Visibility-与-Delegatecall" class="headerlink" title="Visibility 与 Delegatecall"></a>Visibility 与 Delegatecall</h3><ul>
<li><p><strong>Public</strong> functions 可以被任意地址调用</p>
</li>
<li><p><strong>External</strong> functions 只能从合约外部调用</p>
</li>
<li><p><strong>Private</strong> functions 只能从合约内部调用</p>
</li>
<li><p><strong>Internal</strong> functions 允许从合约及其子合约调用</p>
</li>
</ul>
<p><strong>External</strong> functions 消耗的 gas 比 public 少, 因为其使用 <code>calldata</code> 而 <strong>Public</strong> 需要复制所有参数到 memory.</p>
<h5 id="Delegatecall"><a href="#Delegatecall" class="headerlink" title="Delegatecall"></a>Delegatecall</h5><p>引自 <a href="http://solidity.readthedocs.io/en/develop/introduction-to-smart-contracts.html?highlight=delegatecall#delegatecall-callcode-and-libraries" target="_blank" rel="noopener">Solidity Docs</a></p>
<blockquote>
<p>Delegatecall is identical to a message call apart from the fact that the code at the target address is executed in the context of the calling contract and <code>msg.sender</code> and <code>msg.value</code> do not change their values.</p>
<p>This means that a contract can dynamically load code from a different address at runtime. Storage, current address and balance still refer to the calling contract, only the code is taken from the called address.</p>
</blockquote>
<p>这个特性可以用于构建 Library 和模块化代码. 但是与此同时, 这也有可能造成别人对你的代码进行操作.</p>
<p>下例中, 攻击者调用 <code>pwn</code> 方法获得了合约的拥有权.</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">pragma solidity 0.4.18;</div><div class="line"></div><div class="line">contract Delegate &#123;</div><div class="line">    address public owner;</div><div class="line"></div><div class="line">    function Delegate(address _owner) public &#123;</div><div class="line">        owner = _owner;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    function pwn() public &#123;</div><div class="line">        owner = msg.sender;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">contract Deletagion &#123;</div><div class="line">    address public owner;</div><div class="line">    Delegate delegate;</div><div class="line"></div><div class="line">    function Delegation(address _delegateAddreses) public &#123;</div><div class="line">        delegate = Delegate(_delegateAddreses);</div><div class="line">        owner = msg.sender;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // an attacker can call Delegate.pwn() in the context of Delegation, this means that pwn() will modify the state of **Delegation** and not Delegate, the result is that the attacker takes unauthorized ownership of the contract.</div><div class="line">    function () public &#123;</div><div class="line">        if(delegate.delegatecall(msg.data)) &#123;</div><div class="line">            this;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Reentrancy-TheDAO-hack"><a href="#Reentrancy-TheDAO-hack" class="headerlink" title="Reentrancy(TheDAO hack)"></a>Reentrancy(TheDAO hack)</h3><p>Solidity 中 <code>call</code> 函数被调用时, 如果带有 value 参数, 则会转发所有他所收到的 gas.</p>
<p>在一下代码片段中, <code>call</code> 函数在 sender 的余额实际减少前被调用. 这里有一个漏洞曾导致 TheDAO 攻击.</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function withdraw(uint _amount) public &#123;</div><div class="line">  if(balances[msg.sender] &gt;= _amount) &#123;</div><div class="line">    if(msg.sender.call.value(_amount)()) &#123;</div><div class="line">      _amount;</div><div class="line">    &#125;</div><div class="line">    balances[msg.sender] -= amount;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>引自 <a href="https://www.reddit.com/r/ethereum/comments/4oi2ta/i_think_thedao_is_getting_drained_right_now/d4cxvc3/" target="_blank" rel="noopener">Reddit</a> 的解释</p>
<blockquote>
<p>In simple words, it’s like the bank teller doesn’t change your balance until she has given you all the money you requested. “Can I withdraw $500? Wait, before that , can I withdraw $500?”</p>
<p>And so on. The smart contracts as designed only check you have $500 at beginning once, and allow themselves to be interrupted.</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-12-22T09:36:55.000Z">2017-12-22</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    10 minutes read (About 1485 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/12/22/Start-in-Protobuf/">Start in Protobuf</a>
            
        </h1>
        <div class="content">
            <p><strong>Protocol Buffers</strong> are a language-neutral, platform-neutral, extensible way of serializing structured data for use in commnucations protocols, data storage, and more, originally designed at Google.</p>
<p><strong>Protobuf.js</strong> is a pure JS implementation with <strong>TypeScript</strong> support for node.js and browser. It’s easy to use, blazingly fast and works out of the box with <code>.proto</code> files.</p>
<h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>Node.js</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install protobufjs</div></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> protobuf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'protobufjs'</span>)</div></pre></td></tr></table></figure>
<p>Browsers</p>
<figure class="highlight html hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"../protobuf.js"</span>&gt;</span><span class="hljs-undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="Distributions"><a href="#Distributions" class="headerlink" title="Distributions"></a>Distributions</h3><p>Where bundle size is a factor, there are additional stripped-down versions of the full-library(~19kb gzipped) available that excldue certain functinality</p>
<ul>
<li>when working with JSON descriptor, and/or reflection only, see the light-library(~16kb gzipped) that excludes the parser. CommonJS entry point is:</li>
</ul>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> protobuf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'protobufjs/light'</span>)</div></pre></td></tr></table></figure>
<p>When working with statically generated code only, see the minimal library(~6.5kb gzipped) that also excludes reflection. CommonJS entry point is:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> protobuf = <span class="hljs-built_in">require</span>(<span class="hljs-string">'protobufjs/minimal`)</span></div></pre></td></tr></table></figure>
<h3 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h3><p>Because JS is a dynamically typed language, protobuf.js introduces the concept of a <strong>valid message</strong> in order to provide the best possible performance.</p>
<h4 id="Valid-Message"><a href="#Valid-Message" class="headerlink" title="Valid Message"></a>Valid Message</h4><blockquote>
<p>A valid message is an object not missing any required fields and exclusively composed of JS types understood by the wire format writer.</p>
</blockquote>
<p>There are two possible types of valid messages and the encoder is able to work with both these for convenience:</p>
<ul>
<li><p><strong>Message Instance</strong> (explicit instance of message classes with default values on their prototype) always (have to) satisfy the requirements of a valid message by design.</p>
</li>
<li><p><strong>Plain JavaScript Objects</strong> that just so happen to be composed in a way satisfying the requirements of a valid message as well.</p>
</li>
</ul>
<p>In a nutshell, the wire format writer understoods the following types:</p>
<table>
<thead>
<tr>
<th>Field Type</th>
<th>Expected JS type(create, encode)</th>
<th>Conversion (fromObject)</th>
</tr>
</thead>
<tbody>
<tr>
<td>s-/u-/int32<br>s-/fixed32</td>
<td><code>number</code> (32 bit integer)</td>
<td>`value</td>
<td>0<code>if signed&lt;br&gt;</code>value &gt;&gt;&gt; 0` is unsigned</td>
</tr>
<tr>
<td>s-/u-/int64<br>s-/fixed64</td>
<td><code>Long</code>-like(optimal)<br><code>number</code>(53 bit integer)</td>
<td><code>Long.fromValue(value)</code> with long.js<br><code>parseInt(value, 10)</code> otherwise</td>
</tr>
<tr>
<td>float<br>double</td>
<td><code>number</code></td>
<td><code>Number(value)</code></td>
</tr>
<tr>
<td>bool</td>
<td><code>boolean</code></td>
<td><code>Boolean(value)</code></td>
</tr>
<tr>
<td>string</td>
<td><code>string</code></td>
<td><code>String(value)</code></td>
</tr>
<tr>
<td>bytes</td>
<td><code>Uint8Array</code>(optimal)<br><code>Buffer</code>(optimal under node)<br><code>Array.&lt;number&gt;</code>(8 bit integers)</td>
<td><code>base64.decode(value)</code> if a <code>string</code><br><code>Object</code> with non-zero<code>.length</code> is assumed to be buffer-like</td>
</tr>
<tr>
<td>enum</td>
<td><code>number</code> (32 bit integer)</td>
<td>Looks up the numeric id if a <code>string</code></td>
</tr>
<tr>
<td>message</td>
<td>Valid Message</td>
<td><code>Message.fromObject(value)</code></td>
</tr>
</tbody>
</table>
<ul>
<li><p>Explicit <code>undefined</code> and <code>null</code> are considered as not set if the field is optional</p>
</li>
<li><p>Repeated fields are <code>Array.&lt;T&gt;</code></p>
</li>
<li><p>Map fields are <code>Object.&lt;string, T&gt;</code> with the key being the string representation of the respective value or an 8 character long binary hash string for <code>Long</code>-likes.</p>
</li>
<li><p>Types marked as <em>optimal</em> provide the best performance because no conversion step(i.e. number to low and high bits or base64 string to buffer) is required.</p>
</li>
</ul>
<p>For performance reasons, each message class provides a distinct set of methods with each method doing just one thing. This avoid unnecessary assertions / redundant operations where performance is a concern but also forces a user to perform verification explicityly where necessary.</p>
<h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><ul>
<li><p>Message.verify(message: Object): null | string</p>
</li>
<li><p>Message.encode(message: Message | Object[, writer: Writer]): Writer</p>
</li>
<li><p>Message.encodeDelimited(message: Message | Object[, writer: Writer]): Writer</p>
</li>
<li><p>Message.decode(reader: Reader | Uint8Array): Message</p>
</li>
<li><p>Message.toObject(message: Message[, options: ConversionOptions]): Object</p>
</li>
<li><p>Message.verify(message: Object): null | string</p>
<p>Verifies that a plain js object satisfies the requirements of a valid message and thus can be encoded without issues. Instead of throwing, it returns the error message as a string, if any:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> payload = <span class="hljs-string">'invalid (not an object)'</span></div><div class="line"><span class="hljs-keyword">var</span> err = AwesomeMessage.verify(payload)</div><div class="line"><span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(err)</div></pre></td></tr></table></figure>
</li>
<li><p>Message.encode(message: Message | Object[, writer: Writer]): Writer</p>
</li>
</ul>
<p>Encodes a message instance or valid plain javascript object. This method does not implicit verify the message and it’s up to user to make sure that the payload is a valid message.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> buffer = AwesomeBuffer.encode(message).finish()</div></pre></td></tr></table></figure>
<ul>
<li>Message.encodeDelimited(message: Message | Object[, writer: Writer]): Writer</li>
</ul>
<p>Works like <code>Message.encode</code> but additionally prepends the length of the message as a varint.</p>
<ul>
<li>Message.decode(reader: Reader): Message</li>
</ul>
<p>Decode a buffer to a message instance. If required fields are missing, it throws a <code>util.ProtocolError</code> with an <code>instance</code> property set to the so far decoded message. If the wire format is invalid, it throws an <code>Error</code>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">try</span> &#123;</div><div class="line">  <span class="hljs-keyword">var</span> decodedMessage = AwesomeMessage.decode(buffer)</div><div class="line">&#125; cache (e) &#123;</div><div class="line">  <span class="hljs-keyword">if</span> (e <span class="hljs-keyword">instanceof</span> protobuf.util.ProtocolError) &#123;</div><div class="line">    <span class="hljs-comment">// e.instance holds the so far decoded message with missing required fields</span></div><div class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</div><div class="line">    <span class="hljs-comment">// wire format is invalid</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>Message.decodeDelimited(reader: Reader | Uint8Array): Message</li>
</ul>
<p>works like Message.decode but additionally reads the length of the message prepended as a varint</p>
<ul>
<li>Message.create(properties: Object): Message</li>
</ul>
<p>Creates a new message instance from a set of properties that satisfy the requirements of a valid message. Where applicable, it is recommended to prefer <code>Message.create</code> over <code>Message.fromObject</code> because it doesn’t perform possibly redundant conversion.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> message = AwesomeMessage.create(&#123; <span class="hljs-attr">awesomeField</span>: <span class="hljs-string">'AwesomeString'</span> &#125;)</div></pre></td></tr></table></figure>
<ul>
<li>Message.fromObject(object: Object): Message</li>
</ul>
<p>Converts any non-valid plain javascript object to a message instance using the conversion steps outlined within the table above.</p>
<ul>
<li>Message.toObject(message: Message[, options: ConversionOptions]): Object</li>
</ul>
<p>Converts a message instance to an arbitrary plain javascript object for interoperability with other libraries or storage. The resulting plain javascript object might still satisify the requirements of a vlaid message depending on the actual conversion options specified, but most of the time it does not.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> object = AwesomeMessage.toObject(message, &#123;</div><div class="line">  <span class="hljs-attr">enums</span>: <span class="hljs-built_in">String</span>,</div><div class="line">  <span class="hljs-attr">longs</span>: <span class="hljs-built_in">String</span>,</div><div class="line">  <span class="hljs-attr">bytes</span>: <span class="hljs-built_in">String</span>,</div><div class="line">  <span class="hljs-attr">defaults</span>: <span class="hljs-literal">true</span>,</div><div class="line">  <span class="hljs-attr">arrays</span>: <span class="hljs-literal">true</span>,</div><div class="line">  <span class="hljs-attr">objects</span>: <span class="hljs-literal">true</span>,</div><div class="line">  <span class="hljs-attr">oneofs</span>: <span class="hljs-literal">true</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>For reference, the following diagram aims to display relationships between the different methods and the concepts of a valid message:</p>
<p><img src="https://camo.githubusercontent.com/f090df881cc6c82ecb7c5d09c9fad550fdfd153e/687474703a2f2f64636f64652e696f2f70726f746f6275662e6a732f746f6f6c7365742e737667" alt=""></p>
<blockquote>
<p>In other words: <code>verify</code> indicates that calling <code>create</code> or <code>encode</code> directly on the plain object will [result in a valid message respectively] succeed. <code>fromObject</code>, on the other hand, does conversion from a broader range of plain objects to create valid message.</p>
</blockquote>
<h3 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h3><h4 id="Using-proto-files"><a href="#Using-proto-files" class="headerlink" title="Using .proto files"></a>Using .proto files</h4><p>It is possible to load existing .proto files using the full library, which parses and compiles the definitions to ready to use (reflection-based) message classes:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">package awesomepackage</div><div class="line">syntax = <span class="hljs-string">"proto3"</span></div><div class="line"></div><div class="line">message AwesomeMessage &#123;</div><div class="line">  string awesome_field = <span class="hljs-number">1</span>; becomes awesomeField</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">protobuf.load(<span class="hljs-string">'awesome.proto'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, root</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (err) &#123;</div><div class="line">    <span class="hljs-keyword">throw</span> err</div><div class="line">  &#125;</div><div class="line">  <span class="hljs-comment">// Obtain a message type</span></div><div class="line">  <span class="hljs-keyword">var</span> AwesomeMessage = root.lookupType(<span class="hljs-string">'awesomepackage.AwesomeMessage'</span>)</div><div class="line"></div><div class="line">  <span class="hljs-comment">// Exemplary payload</span></div><div class="line">  <span class="hljs-keyword">var</span> payload = &#123; <span class="hljs-attr">awesomeField</span>: <span class="hljs-string">'AwesomeField'</span> &#125;</div><div class="line"></div><div class="line">  <span class="hljs-comment">// Verify the payload if necessary(i.e. when possible incomplete or invalid)</span></div><div class="line">  <span class="hljs-keyword">var</span> errMsg = AwesomeMessage.verify(payload)</div><div class="line">  <span class="hljs-keyword">if</span> (errMsg) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(errMsg)</div><div class="line"></div><div class="line">  <span class="hljs-comment">// Create a new message</span></div><div class="line">  <span class="hljs-keyword">var</span> message = AwesomeMessage.create(payload) <span class="hljs-comment">// or use .fromObject if conversion is necessary</span></div><div class="line"></div><div class="line">  <span class="hljs-comment">// Encode a message to an Uint8Array(browser) or Buffer (node)</span></div><div class="line">  <span class="hljs-keyword">var</span> buffer = AwesomeMessage.encode(message).finish()</div><div class="line"></div><div class="line">  <span class="hljs-comment">// ... do something with message</span></div><div class="line"></div><div class="line">  <span class="hljs-comment">// Decode an Uint8Array(browser) or Buffer(node) to a message</span></div><div class="line">  <span class="hljs-keyword">var</span> message = AwesomeMessage.decode(buffer)</div><div class="line"></div><div class="line">  <span class="hljs-comment">// ...do something with message</span></div><div class="line"></div><div class="line">  <span class="hljs-comment">// If the application uses length-delimited buffers, there is also encodeDelimited and decodeDelimited.</span></div><div class="line"></div><div class="line">  <span class="hljs-comment">// Maybe conver the message back to a plain object</span></div><div class="line"></div><div class="line">  <span class="hljs-keyword">var</span> object = AwesomeMessage.toObject(message, &#123;</div><div class="line">    <span class="hljs-attr">loings</span>: <span class="hljs-built_in">String</span>,</div><div class="line">    <span class="hljs-attr">enums</span>: <span class="hljs-built_in">String</span>,</div><div class="line">    <span class="hljs-attr">bytes</span>: <span class="hljs-built_in">String</span>,</div><div class="line">    <span class="hljs-comment">// see Conversions</span></div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Additionally, promise syntax can be used by omitting the callback, if preferred:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">protobuf.load(<span class="hljs-string">'awesome.proto'</span>).then(<span class="hljs-function"><span class="hljs-params">root</span> =&gt;</span> &#123;&#125;)</div></pre></td></tr></table></figure>
<h3 id="Using-JSON-Descriptors"><a href="#Using-JSON-Descriptors" class="headerlink" title="Using JSON Descriptors"></a>Using JSON Descriptors</h3><p>The library utilize JSON descriptor that are equivalent to a .proto definition. For example, the following is identical to the .proto definition seen above:</p>
<figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">// awesome.json</div><div class="line">&#123;</div><div class="line">  "nested": &#123;</div><div class="line">    "AwesomeMessage": &#123;</div><div class="line">      "fields": &#123;</div><div class="line">        "awesomeField: &#123;</div><div class="line">          "type": "string",</div><div class="line">          "id", 1</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>JSON descriptor closely resemble the internal reflection structure:</p>
<p>Exclusively using JSON descriptor instead of .proto files enables the use of just the light library(the parser isn’t requried in this case)</p>
<p>A JSON descriptor can either be loaded the usual way:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">protobuf.load(<span class="hljs-string">'awesome.json'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, root</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(err)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Or it can be loaded inline:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">var</span> jsonDescriptor = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./awesome.json'</span>) <span class="hljs-comment">// exemplary for node</span></div><div class="line"><span class="hljs-keyword">var</span> root = protobuf.Root.fromJSON(jsonDescriptor)</div><div class="line"></div><div class="line"><span class="hljs-comment">// Continue at 'Obtain a message type' above</span></div></pre></td></tr></table></figure>
<p><a href="https://github.com/dcodeIO/ProtoBuf.js/" target="_blank" rel="noopener">More Info here</a></p>
<h3 id="Usage-with-TypeScript"><a href="#Usage-with-TypeScript" class="headerlink" title="Usage with TypeScript"></a>Usage with TypeScript</h3><p>The library ships with its own type definitions and modern editors will automatically detect and use them for code completion.</p>
<p>The npm package depends on <code>@types/node</code> because of <code>Buffer</code> and <code>@types/long</code> because of <code>Long</code>. If you are not building for node and/or using long.js, it should be safe to exclude them manually.</p>
<h4 id="Using-the-JS-API"><a href="#Using-the-JS-API" class="headerlink" title="Using the JS API"></a>Using the JS API</h4><p>The API shown above works pretty much the same with TypeScript. However, because everything is typed, accessing fields on instances of dynamically generated message classes requries either using bracket-notation(i.e. message[‘awesomeField’]), or explicit casts.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; load &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'protobufjs'</span></div><div class="line"></div><div class="line">load(<span class="hljs-string">'awesome.proto'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, root</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (err) <span class="hljs-keyword">throw</span> <span class="hljs-built_in">Error</span>(err)</div><div class="line"></div><div class="line">  <span class="hljs-keyword">const</span> AwesomeMessage = root.lookupType(<span class="hljs-string">'awesomepackage.AwesomeMessage'</span>)</div><div class="line">  <span class="hljs-keyword">let</span> message = AwesomeMessage.create(&#123; <span class="hljs-attr">awesomeField</span>: <span class="hljs-string">'hello'</span> &#125;)</div><div class="line">  cnosole.log(<span class="hljs-string">`message = <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(message)&#125;</span>`</span>)</div><div class="line"></div><div class="line">  <span class="hljs-keyword">let</span> buffer = AwesomeMessage.encode(message).finish()</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`Buffer = <span class="hljs-subst">$&#123;<span class="hljs-built_in">Array</span>.prototype.toString.call(buffer)&#125;</span>`</span>)</div><div class="line"></div><div class="line">  <span class="hljs-keyword">let</span> decoded = AwesomeMessage.decode(buffer)</div><div class="line">  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">`decoded = <span class="hljs-subst">$&#123;<span class="hljs-built_in">JSON</span>.stringify(decoded)&#125;</span>`</span>)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-12-07T08:59:20.000Z">2017-12-07</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 minutes read (About 490 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/12/07/Get-the-most-out-of-the-CommonsChunkPlugin/">Get the Most Out of the CommonsChunkPlugin</a>
            
        </h1>
        <div class="content">
            <p><a href="https://medium.com/webpack/webpack-bits-getting-the-most-out-of-the-commonschunkplugin-ab389e5f318" target="_blank" rel="noopener">Original</a></p>
<p>Use <code>webpack-bundle-analyzer</code> to generate a fancy colorful image of all of your<br>bundles.</p>
<h3 id="Case-1-Many-vendor-bundles-with-duplicate-code"><a href="#Case-1-Many-vendor-bundles-with-duplicate-code" class="headerlink" title="Case 1: Many vendor bundles with duplicate code"></a>Case 1: Many vendor bundles with duplicate code</h3><p><img src="https://cdn-images-1.medium.com/max/2000/1*Mt5awEvcigXceRDpZRX4Dw.png" alt=""></p>
<p>Each single-page app is using a <code>new CommonsChunkPlugin</code> that targets just that<br>entry point, and its vendor code. This creates a bundle with only modules that<br>come from node_modules folder, and another bundle with just application code.</p>
<p>The configuration portion was provided:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-built_in">Object</span>.keys(activeApps).map(</div><div class="line">  <span class="hljs-function"><span class="hljs-params">app</span> =&gt;</span></div><div class="line">    <span class="hljs-keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">      <span class="hljs-attr">name</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;app&#125;</span>_vendor`</span>,</div><div class="line">      <span class="hljs-attr">chunk</span>: [app],</div><div class="line">      <span class="hljs-attr">minChunks</span>: isVendor,</div><div class="line">    &#125;),</div><div class="line">)</div></pre></td></tr></table></figure>
<p>The <code>activeApps</code> variable most likely represents each of the individual entry<br>points.</p>
<p>Below are a few areas that could use some improvement.</p>
<p><img src="https://cdn-images-1.medium.com/max/800/1*D4m4sa9X1V05y7I7ZCMbZA.png" alt=""></p>
<h3 id="“Meta”-caching"><a href="#“Meta”-caching" class="headerlink" title="“Meta” caching"></a>“Meta” caching</h3><p>What we see above is many large libraries like momentjs, lodash, and jquery<br>being used across 6 or more vendor bundles. The strategy for add all vendor into<br>a seperate bundle is good, but we should also apply the same strategy acroll<br><strong>all vendor bundle</strong>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">new</span> webpack.optimizeCommonsChunkPlugin(&#123;</div><div class="line">  <span class="hljs-attr">children</span>: <span class="hljs-literal">true</span>,</div><div class="line">  <span class="hljs-attr">minChunks</span>: <span class="hljs-number">6</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>We are telling the webpack to follow:</p>
<blockquote>
<p>Hey webpack, look across all chunks(including the vendor ones that were<br>generated) and move any modules that occur in at least 6 chunks to a seperate<br>file.</p>
</blockquote>
<h3 id="Case-2-duplicate-vendors-across-async-chunks"><a href="#Case-2-duplicate-vendors-across-async-chunks" class="headerlink" title="Case 2: duplicate vendors across async chunks"></a>Case 2: duplicate vendors across async chunks</h3><p><img src="https://cdn-images-1.medium.com/max/2000/1*yRCgk_pzDpkMfQGKpCO_HA.jpeg" alt=""></p>
<p>As you can see, the same 2-3 components are used across all 40-50 async bundles</p>
<p><code>CommonsChunkPlugin</code> can solve this.</p>
<h4 id="Create-an-async-Commons-Chunk"><a href="#Create-an-async-Commons-Chunk" class="headerlink" title="Create an async Commons Chunk"></a>Create an async Commons Chunk</h4><p>The technique will be very simillar to the first, however we will need to set<br>the <code>async</code> property in the configuration option, to <code>true</code> as seen below:</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">  <span class="hljs-attr">async</span>: <span class="hljs-literal">true</span>,</div><div class="line">  <span class="hljs-attr">children</span>: <span class="hljs-literal">true</span>,</div><div class="line">  <span class="hljs-attr">filename</span>: <span class="hljs-string">'commonlazy.js'</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>In the same way – webpack will scan all chunks and look for common modules.<br>Since <code>async: true</code>, only code split bundles will be scanned.</p>
<p>Because we did not specify <code>minChunks</code>, the value default to 3. so what webpack<br>is being told is:</p>
<blockquote>
<p>Hey webpack, look through all normal [aka lazy loaded] chunks and if you find<br>the smae module that appears across 3 or more chunks, then seperate it out<br>into a seperate async commons chunk.</p>
</blockquote>
<h3 id="More-Control"><a href="#More-Control" class="headerlink" title="More Control"></a>More Control</h3><h4 id="minChunks-function"><a href="#minChunks-function" class="headerlink" title="minChunks function"></a>minChunks function</h4><p>There are scenario you don’t want to have a single shared bundle because not<br>every lazy/entry chunk may use it. The <code>minChunks</code> property also takes a<br>function. This can be your ‘filtering predicate’ for what modules are added to<br>your newly created bundle.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">new</span> webpack.optimize.CommonsChunkPlugin(&#123;</div><div class="line">  <span class="hljs-attr">filename</span>: <span class="hljs-string">'loash-moment-shared-bundle.js'</span>,</div><div class="line">  <span class="hljs-attr">minChunks</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">module, count</span>) </span>&#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      <span class="hljs-built_in">module</span>.resource &amp;&amp; <span class="hljs-regexp">/lodash|moment/</span>.test(<span class="hljs-built_in">module</span>.resource) &amp;&amp; count &gt;= <span class="hljs-number">3</span></div><div class="line">    )</div><div class="line">  &#125;,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>This example says:</p>
<blockquote>
<p>Yo webpack, when you come across a module whos absolute path amtches lodash or<br>moment, and occurs across 3 seperate entries/chunks, then extract those<br>modules into a seperate bundle.</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-12-05T03:37:07.000Z">2017-12-05</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 minutes read (About 926 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/12/05/Go-Web/">Go Web</a>
            
        </h1>
        <div class="content">
            <p><a href="https://gowebexamples.com/hello-world/" target="_blank" rel="noopener">Original</a></p>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Go is a battery included programming language and has a webserver already built<br>in.</p>
<p>The <code>net/http</code> package from the standard library contains all functionalities<br>about the HTTP protocol.</p>
<p>This includes an HTTP client and an HTTP server.</p>
<h3 id="Registering-a-Request-Handler"><a href="#Registering-a-Request-Handler" class="headerlink" title="Registering a Request Handler"></a>Registering a Request Handler</h3><p>First, create a Handler which receives all incoming HTTP connections from<br>browsers, HTTP client or API requests. A handler in Go is a function with this<br>signature.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span></div></pre></td></tr></table></figure>
<p>The function receives two parameters:</p>
<ul>
<li><p>An <code>http.ResponseWriter</code> which is where you write your text/html response to.</p>
</li>
<li><p>An <code>http.Request</code> which contains all information about this HTTP request<br>including like URL or header fields</p>
</li>
</ul>
<p>Registering a request handler to the default HTTP Server is as simple as this:</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http.HandleFunc(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</div><div class="line">  fmt.Fprintf(w, <span class="hljs-string">"Hello, you've requested: %s\n"</span>, r.URL.Path)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="Listen-for-HTTP-Connections"><a href="#Listen-for-HTTP-Connections" class="headerlink" title="Listen for HTTP Connections"></a>Listen for HTTP Connections</h3><p>The request handler alone can not accept any HTTP connections from the outside.</p>
<p>An HTTP server has to listen on a port to pass connections on to the request<br>handler. Because port 80 is in most case the default port for HTTP traffic, this<br>server will also listen on it.</p>
<p>The following code will start Go’s default HTTP server and listen for<br>connections on port 80. You can navigate your browser to <code>http://localhost/</code> and<br>see your server handling yoru request</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http.ListenAndServe(<span class="hljs-string">":80"</span>, <span class="hljs-literal">nil</span>)</div></pre></td></tr></table></figure>
<h3 id="The-Code"><a href="#The-Code" class="headerlink" title="The Code"></a>The Code</h3><figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">package</span> main</div><div class="line"></div><div class="line"><span class="hljs-keyword">import</span> (</div><div class="line">  <span class="hljs-string">"fmt"</span></div><div class="line">  <span class="hljs-string">"net/http"</span></div><div class="line">)</div><div class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span></span> &#123;</div><div class="line">  http.HandleFunc(<span class="hljs-string">"/"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</div><div class="line">    fmt.Fprintf(w, <span class="hljs-string">"Hello, you've requested: %s\n"</span>, r.URL.Path)</div><div class="line">  &#125;)</div><div class="line">  http.ListenAndServe(<span class="hljs-string">":80"</span>, <span class="hljs-literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Routing-using-gorilla-mux"><a href="#Routing-using-gorilla-mux" class="headerlink" title="Routing (using gorilla/mux)"></a>Routing (using gorilla/mux)</h3><p>Go’s <code>net/http</code> package provides a lot of functionalities for the HTTP protocol.<br>One thing it doesn’t do very well is complex request routing like segmenting a<br>request url into single parameters.</p>
<p>Use <code>gorilla/mux</code> package to create routes with named parameters, GET/POST<br>handlers and domain restrictions.</p>
<p><code>gorilla/mux</code> is a package which adapts to Go’s default HTTP router. It comes<br>with a lot of features to increase the productivity when writing web<br>applications. It is also compliant to Go’s default request handler signature<br><code>func (w http.ResponseWriter, r *http.Request)</code>, so package can be mixed and<br>matched with other HTTP libraries like middleware or existing applications. Use<br>the <code>go get</code> command to install the package from Github.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">go get -u github.com/gorilla/mux</div></pre></td></tr></table></figure>
<h4 id="Creating-a-new-Router"><a href="#Creating-a-new-Router" class="headerlink" title="Creating a new Router"></a>Creating a new Router</h4><p>First create a new request router. The router is the main router for your web<br>application and will later be passed as parameter to the server. It will receive<br>all HTTP connections and pass it on to the request handlers you will register on<br>it. You can create a new router like so:</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">r := mux.NewRouter()</div></pre></td></tr></table></figure>
<h4 id="Registering-a-Request-Handler-1"><a href="#Registering-a-Request-Handler-1" class="headerlink" title="Registering a Request Handler"></a>Registering a Request Handler</h4><p>Once you have a new router you can register request handlers like usual. The<br>only difference is that instead of calling <code>http.HandleFunc(...)</code>, you call<br><code>HandleFunc</code> on your router like this <code>r.HandleFunc(...)</code></p>
<h4 id="URL-Parameters"><a href="#URL-Parameters" class="headerlink" title="URL Parameters"></a>URL Parameters</h4><p>The biggest strength of the <code>gorilla/mux</code> Router is the ability to extract<br>segments from the request URL. As an example, this is a URL in your application</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/books/go-programming-bluepring/page/10</div></pre></td></tr></table></figure>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;/page/&#123;page&#125;"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</div><div class="line">  <span class="hljs-comment">// get the book</span></div><div class="line">  <span class="hljs-comment">// navigate to the page</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>The last thing to get the data from these segments. The package comes with the<br>function <code>mux.Vars(r)</code> which takes the <code>http.Request</code> as parameter and returns a<br>map of the segments.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</div><div class="line">  vars := mux.Vars(r)</div><div class="line">  vars[<span class="hljs-string">"title"</span>]</div><div class="line">  vars[<span class="hljs-string">"page"</span>]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Setting-the-HTTP-server’s-router"><a href="#Setting-the-HTTP-server’s-router" class="headerlink" title="Setting the HTTP server’s router"></a>Setting the HTTP server’s router</h4><p>Ever wondered what the <code>nil</code> in <code>http.ListenAndServe(&quot;:80&quot;, nil)</code> ment? It is<br>the parameter for the main router of the HTTP server. By default it’s <code>nil</code>,<br>which means to use the default router of the <code>net/http</code> package. To make use of<br>your own router, replace the <code>nil</code> with the variable of your router <code>r</code>.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http.ListenAndServe(<span class="hljs-string">":80"</span>, r)</div></pre></td></tr></table></figure>
<h4 id="The-Code-1"><a href="#The-Code-1" class="headerlink" title="The Code"></a>The Code</h4><figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">package</span> main</div><div class="line"><span class="hljs-keyword">import</span> (</div><div class="line">  <span class="hljs-string">"fmt"</span></div><div class="line">  <span class="hljs-string">"net/http"</span></div><div class="line">  <span class="hljs-string">"github.com/gorilla/mux"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span> <span class="hljs-params">()</span></span> &#123;</div><div class="line">  r := mux.NewRouter()</div><div class="line">  r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;/page/&#123;page&#125;"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</div><div class="line">    vars := mux.Vars(r)</div><div class="line">    title := vars[<span class="hljs-string">"title"</span>]</div><div class="line">    page := vars[<span class="hljs-string">"page"</span>]</div><div class="line"></div><div class="line">    fmt.Fprintf(w, <span class="hljs-string">"You've requested the book %s on page %s\n"</span>, title, page)</div><div class="line">  &#125;)</div><div class="line">  http.ListenAndServe(<span class="hljs-string">":80"</span>, r)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Features-of-the-gorilla-mux-Router"><a href="#Features-of-the-gorilla-mux-Router" class="headerlink" title="Features of the gorilla/mux Router"></a>Features of the <code>gorilla/mux</code> Router</h4><h5 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h5><p>Restrict the request handler to specific HTTP methods</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, CreateBook).Methods(<span class="hljs-string">"POST"</span>)</div><div class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, ReadBook).Methods(<span class="hljs-string">"GET"</span>)</div><div class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, UpdateBook).Methods(<span class="hljs-string">"PUT"</span>)</div><div class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, DeleteBook).Methods(<span class="hljs-string">"DELETE"</span>)</div></pre></td></tr></table></figure>
<h5 id="Hostnames-amp-Subdomains"><a href="#Hostnames-amp-Subdomains" class="headerlink" title="Hostnames &amp; Subdomains"></a>Hostnames &amp; Subdomains</h5><p>Restrict the request handler to specific hostname or subdomain</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">r.HandleFunc(<span class="hljs-string">"/books/&#123;title&#125;"</span>, BookHandler).Host(<span class="hljs-string">"www.mybookstore.com"</span>)</div></pre></td></tr></table></figure>
<h5 id="Schemes"><a href="#Schemes" class="headerlink" title="Schemes"></a>Schemes</h5><p>Restrict the request handler to http/https</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">r.HandleFunc(<span class="hljs-string">"/secure"</span>, SecureHandler).Scheme(<span class="hljs-string">"https"</span>)</div><div class="line">r.HandleFunc(<span class="hljs-string">"/insecure"</span>, InsecureHandler).Scheme(<span class="hljs-string">"http"</span>)</div></pre></td></tr></table></figure>
<h5 id="Path-Prefixes-amp-Subrouters"><a href="#Path-Prefixes-amp-Subrouters" class="headerlink" title="Path Prefixes &amp; Subrouters"></a>Path Prefixes &amp; Subrouters</h5><p>Restrict the request handler to specific path prefixes.</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">bookrouter := r.Path.Prefix(<span class="hljs-string">"/books"</span>).subRouter()</div><div class="line">bookrouter.HandleFunc(<span class="hljs-string">"/"</span>, AllBooks)</div><div class="line">bookrouter.HandleFunc(<span class="hljs-string">"/&#123;title&#125;"</span>, GetBook)</div></pre></td></tr></table></figure>
<h3 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h3><p>Go’s <code>html/template</code> package provides a rich templating language for HTML<br>templates. It is mostly used in web applications to display data in a structured<br>way in a client’s browser. One great benefit of Go’s templating language is the<br>automatic escaping of data. There is no need to worry about XSS attacka as Go<br>parses the HTML template and escapes all inputs before displaying it to the<br>browser.</p>
<h4 id="First-Template"><a href="#First-Template" class="headerlink" title="First Template"></a>First Template</h4>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-30T02:14:25.000Z">2017-11-30</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 695 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/30/Generate-Ethereum-keys-and-wallet-address/">Generate Ethereum Keys and Wallet Address</a>
            
        </h1>
        <div class="content">
            <p><a href="https://kobl.one/blog/create-full-ethereum-keypair-and-address/" target="_blank" rel="noopener">Original</a></p>
<p>This article is a guide on how to generate an <strong>ECDSA</strong> private key and derives<br>its Ethereum address.</p>
<p>Use Openssl and keccak-256sum from a terminal.</p>
<blockquote>
<p>SHA3 != keccak. Ethereum is using the <strong>keccak-256</strong> algorithm and not the<br>standard sha3.</p>
<p>Ethereum use keccak-256, it should be noted that it does not follow the<br>FIPS-202 based standard(aka. SHA-3), which was finalized in August 2015</p>
<p>web3.utils.sha3 uses keccak-256 web3.sha3(string[, option]): keccak-256</p>
</blockquote>
<h3 id="Generate-the-EC-private-key"><a href="#Generate-the-EC-private-key" class="headerlink" title="Generate the EC private key"></a>Generate the EC private key</h3><p>First of all we use <strong>Openssl</strong> ecparam command to generate an elliptic curve<br>private key. Ethereum standard is to use the <strong>secp256k1</strong> curve. The same curve<br>is used in Bitcion.</p>
<p>This command will print the private key in BEM format(using the wonderful ASN.1<br>key structure) on stdout.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; openssl ecparam -name secp256k1 -genkey -noout</div><div class="line">-----BEGIN EC PRIVATE KEY-----</div><div class="line">MHQCAQEEIFDLYO9KuwsC4ej2UsdA4SYk7s3lb8aZuW+B8rjugrMmoAcGBSuBBAAK</div><div class="line">oUQDQgAEsNjwhFoLKLXGBxfpMv3ILhzg2FeySRlFhtjfi3s8YFZzJtmckVR3N/YL</div><div class="line">JLnUV7w3orZUyAz77k0ebug0ILd1lQ==</div><div class="line">-----END EC PRIVATE KEY-----</div></pre></td></tr></table></figure>
<p>On its own this command is not very useful for us, but if you pipe it with the<br>ec command it will display both private and public part in hexadecimal format,<br>and this is what we want.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&gt; openssl ecparam -name secp256k1 -genkey -noout | openssl ec -text -noout</div><div class="line"><span class="hljs-built_in">read</span> EC key</div><div class="line">Private-Key: (256 bit)</div><div class="line">priv:</div><div class="line">    20:80:65:a2:47:ed:be:5d:f4:d8:6f:bd:c0:17:13:</div><div class="line">    03:f2:3a:76:96:1b:e9:f6:01:38:50:dd:2b:dc:75:</div><div class="line">    9b:bb</div><div class="line">pub:</div><div class="line">    04:83:6b:35:a0:26:74:3e:82:3a:90:a0:ee:3b:91:</div><div class="line">    bf:61:5c:6a:75:7e:2b:60:b9:e1:dc:18:26:fd:0d:</div><div class="line">    d1:61:06:f7:bc:1e:81:79:f6:65:01:5f:43:c6:c8:</div><div class="line">    1f:39:06:2f:c2:08:6e:d8:49:62:5c:06:e0:46:97:</div><div class="line">    69:8b:21:85:5e</div><div class="line">ASN1 OID: secp256k1</div></pre></td></tr></table></figure>
<p>This command decodes the ASN.1 structure and derives the public key from the<br>private one.</p>
<p>Sometimes, Openssl is adding a null byte(0x00) in front of the private part, I<br>don’t know why it does that but you have to <strong>trim any leading zero bytes</strong> in<br>order to use it with Ethereum.</p>
<blockquote>
<p>The private key <strong>must be 32 bytes and not begin with 0x00</strong> and the public<br>one <strong>must be uncompressed and 64 bytes long</strong> or 65 with the constant (0x04)<br>prefix.</p>
</blockquote>
<h3 id="Derive-the-Ethereum-address-from-the-public-key"><a href="#Derive-the-Ethereum-address-from-the-public-key" class="headerlink" title="Derive the Ethereum address from the public key"></a>Derive the Ethereum address from the public key</h3><p>The public key is what we need in order to derive its Ethereum address. Every EC<br>Public key begins with ‘0x04’ prefix byte in order to hash it correctly.</p>
<blockquote>
<p>This prefix represents the encoding of the public key:</p>
<ul>
<li>0x04 - both x and y of the elliptic curve point follows</li>
<li>0x02, 0x03 - only x follows (y is either odd or even depending on the<br>prefix)</li>
</ul>
</blockquote>
<p>Use any method you like to get it in the form of an hexadecimal string(without<br>line return nor semicolon)</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment"># Extract the public key and remove the EC prefix 0x04</span></div><div class="line">&gt; cat Key | grep pub -A 5 | tail -n +2 |</div><div class="line">            tr <span class="hljs-_">-d</span> <span class="hljs-string">'\n[:space:]:'</span> | sed <span class="hljs-string">'s/^04//'</span> &gt; pub</div><div class="line">836b35a026743e823a90a0ee3b91bf615c6a757e2b60b9e1dc1826fd0dd16106f7bc1e8179f665015f43c6c81f39062<span class="hljs-built_in">fc</span>2086ed849625c06e04697698b21855e</div></pre></td></tr></table></figure>
<p>The pub file now contains the hexadecimal value of the public key without the<br>0x04 prefix.</p>
<p>An Ethereum address is made of 20 bytes(40 hex characters), it is commonly<br>represented by adding the 0x prefix. In order to derive it, one should take the<br>keccak-256 hash of the hexadecimal form of a public key, then <strong>keep only the<br>last 20 bytes</strong> (aka get rid of the first 12 bytes)</p>
<p>Simply pass the file containing the public key in hexadecimal format to the<br>keccak-256sum command. <strong>Do not forget to use the ‘-x’ option</strong> in order to<br>interpret it as hexadecimal and not a simple string.</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-comment"># Generate the hash and take the address part</span></div><div class="line">&gt; cat pub | keccak-256sum -x <span class="hljs-_">-l</span> | tr <span class="hljs-_">-d</span> <span class="hljs-string">' -'</span> | tail -c 41</div><div class="line">0bed7abd61247635c1973eb38474a2516ed1d884</div></pre></td></tr></table></figure>
<p>Which gives us the Ethereum address<br><code>0x0bed7abd61247635c1973eb38474a2516ed1d884</code>.</p>
<blockquote>
<p>CAUTION: if your final address looks like<br><code>0xdcc703c0E500B653Ca82273B7BFAd8045D85a470</code>, this means you have hashed an<br>empty public key. Sending funds to this address will lock them forever.</p>
</blockquote>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-29T12:27:01.000Z">2017-11-29</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 61 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/29/Caution-on-Int8Array/">Caution on Int8Array</a>
            
        </h1>
        <div class="content">
            <figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">let</span> t = crypto.getRandomValues(<span class="hljs-keyword">new</span> <span class="hljs-built_in">Int8Array</span>(<span class="hljs-number">3</span>))</div><div class="line"><span class="hljs-comment">// Int8Array(3) [-15, -17, -90]</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// t is not typeof Array</span></div><div class="line"><span class="hljs-built_in">Array</span>.isArray(t)</div><div class="line"><span class="hljs-comment">// false</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// element in Int8Array must be type Int8</span></div><div class="line"><span class="hljs-comment">// method map returns array of same type as origin array</span></div><div class="line"><span class="hljs-keyword">let</span> _t = []</div><div class="line">t.map(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> &#123;</div><div class="line">  <span class="hljs-keyword">let</span> _tmp = i.toString(<span class="hljs-number">16</span>)</div><div class="line">  _t.push(_tmp)</div><div class="line">  <span class="hljs-keyword">return</span> _tmp</div><div class="line">&#125;)</div><div class="line"><span class="hljs-comment">// Int8Array(3) [0, -11, 0]</span></div><div class="line"><span class="hljs-comment">// _t: ['-f', '-11', '-5a']</span></div><div class="line"></div><div class="line">t[<span class="hljs-number">0</span>] = <span class="hljs-string">'a'</span></div><div class="line"><span class="hljs-comment">// t: Int8Array(3) [0, -17, -90]</span></div></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-23T09:12:33.000Z">2017-11-23</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 0 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/23/Client-Wallet-Inspection/">Client Wallet Inspection</a>
            
        </h1>
        <div class="content">
            <iframe width="853" height="800" src="https://embed.coggle.it/diagram/WhaB3hE2BAABznZF/065e922ba0f89869d4682bb60d9e426164106f817068fedc350e1193c7322293" frameborder="0" allowfullscreen></iframe>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-23T01:53:34.000Z">2017-11-23</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 779 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/23/react-lodable/">React-Lodable</a>
            
        </h1>
        <div class="content">
            <p><code>react-lodable</code> is a higher order component for loading components with dynamic<br>imports.</p>
<p>Code-splitting is the process of taking one large bundle containing your entire<br>app, and splitting them up into multiple smaller bundles which contain seperate<br>parts of your app.</p>
<p>This might seem difficult to do, but tools like Webpack have this built in, and<br>React Loadable is designed to make is super simple.</p>
<h4 id="Route-based-splitting-vs-Component-based-splitting"><a href="#Route-based-splitting-vs-Component-based-splitting" class="headerlink" title="Route-based splitting vs. Component-based splitting"></a>Route-based splitting vs. Component-based splitting</h4><p>A common piece of advice you will see is to break your app into seperate routes<br>and load each one asynchronously. This seems to work well enough for many apps<br>– a a user, clicking a link and waiting for a page to load is a familiar<br>experience on the web.</p>
<p>Namely, a route is simple a component.</p>
<p>But in fact there are more places than just routes where you can pretty easily<br>split apart your app: Modals, Tabs, and many more UI Components hide content<br>until the user has done something to reveal it.</p>
<p><img src="http://thejameskyle.com/img/react-loadable-component-splitting.png" alt=""></p>
<blockquote>
<p>Example: Maybe your app ahs a map buried inside of a tab component. Why would<br>you load a massive mapping library for the parent route every time the user<br>never to to that tab.</p>
</blockquote>
<p>React Loadable is a small library that makes component-centric code splitting<br>incredibly easy in React.</p>
<p><code>Loadable</code> is a higher-order component(a function that returns a component)<br>which lets you dynamically load any module before rendering it into your app.</p>
<p>We can make it by <code>dynamic import</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> Bar <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/Bar'</span></div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  render() &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bar</span> /&gt;</span></span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>=&gt;</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  state = &#123;</div><div class="line">    <span class="hljs-attr">Bar</span>: <span class="hljs-literal">null</span>,</div><div class="line">  &#125;</div><div class="line">  componentWillMount() &#123;</div><div class="line">    <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/Bar'</span>).then(<span class="hljs-function"><span class="hljs-params">Bar</span> =&gt;</span> <span class="hljs-keyword">this</span>.setState(&#123; Bar &#125;))</div><div class="line">  &#125;</div><div class="line">  render() &#123;</div><div class="line">    <span class="hljs-keyword">let</span> &#123; Bar &#125; = <span class="hljs-keyword">this</span>.state</div><div class="line">    <span class="hljs-keyword">if</span> (!Bar) &#123;</div><div class="line">      <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">    &#125; <span class="hljs-keyword">else</span> &#123;</div><div class="line">      <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bar</span> /&gt;</span></span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>But that’s whole bunch of work, and it doesn’t even handle a bunch of caess.<br>What about when <code>import()</code> fails? What about server-side rendering?</p>
<p><code>react-loadable</code> considers the unexpected cases.</p>
<figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">import Loadable from 'react-loadable'</div><div class="line"></div><div class="line">const LoadableBar = Loadable(&#123;</div><div class="line">  loader: () =&gt; import('./components/Bar'),</div><div class="line">  loading: () =&gt; &lt;div&gt;Loading&lt;/div&gt;,</div><div class="line">&#125;)</div><div class="line"></div><div class="line">class Foo extends React.Component &#123;</div><div class="line">  render() &#123;</div><div class="line">    return &lt;LoadableBar /&gt;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>When you use <code>import()</code> with webpack2, it will<br><a href="https://webpack.js.org/guides/code-splitting/" target="_blank" rel="noopener">automatically code-split</a> for<br>you with no additional configuration.</p>
<p>Define your Loading Component</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params"></span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>When your loader fails, your Loading component will receive an error prop which<br>will be <code>true</code>(otherwise it will be <code>false</code>).</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params">props</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (props.error) &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">  &#125;</div><div class="line">  <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Sometimes components load really quickly(&lt;200ms) and the loading screen only<br>quickly flashes on the screen.</p>
<p>Your loading component will get a <code>pastDelay</code> props which will only be <code>true</code><br>once the component has taken longer to load than a set <code>delay</code>.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params">props</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (props.error) &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.pastDelay) &#123;</div><div class="line">    <span class="hljs-comment">// only show loading when it takes longer than 200ms</span></div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This delay defaults to 200ms, but you can customize the delay in Loadable.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Loadable(&#123;</div><div class="line">  <span class="hljs-attr">loader</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/Bar'</span>),</div><div class="line">  <span class="hljs-attr">loading</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> Loading,</div><div class="line">  <span class="hljs-attr">delay</span>: <span class="hljs-number">300</span>,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>Timing out when the loader is taking too long</p>
<p>Sometimes network connections suck and never resolve or fail, they just hang<br>there forever. This sucks for the user because they won’t know if it should<br>always take this long, or if they should try refreshing.</p>
<p>The Loading component will receive a <code>timeOut</code> prop which will be set to <code>true</code><br>when the loader has timed out.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Loading</span>(<span class="hljs-params">props</span>) </span>&#123;</div><div class="line">  <span class="hljs-keyword">if</span> (props.error) &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Error<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.timedOut) &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Timed out<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">  &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (props.pastDelay) &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">  &#125; <span class="hljs-keyword">else</span> &#123;</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>This feature is disabled by default, you can pass a <code>timeout</code> option to<br><code>Loadable</code> to enable it.</p>
<p>By default <code>Loadable</code> will render the <code>default</code> export of the returned module.<br>If you want to customize this behavior you can use the <code>render</code> option.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Loadable(&#123;</div><div class="line">  <span class="hljs-attr">loader</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./myComponent'</span>),</div><div class="line">  render(loaded, props) &#123;</div><div class="line">    <span class="hljs-keyword">let</span> Component = loaded.namedExport</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> &#123;<span class="hljs-attr">...props</span>&#125; /&gt;</span></span></div><div class="line">  &#125;,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>You can do whatever you want within <code>loader()</code> as long as it returns a promise<br>and you are able to render everything</p>
<p>You can load multiple resources in parallel with <code>Loadable.Map</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Loadable.Map(&#123;</div><div class="line">  <span class="hljs-attr">loader</span>: &#123;</div><div class="line">    <span class="hljs-attr">Bar</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./Bar'</span>),</div><div class="line">    <span class="hljs-attr">i18n</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fetch(<span class="hljs-string">'./i18n/bar.json'</span>).then(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.json()),</div><div class="line">  &#125;,</div><div class="line">  render(loaded, props) &#123;</div><div class="line">    <span class="hljs-keyword">let</span> Bar = loaded.Bar.default</div><div class="line">    <span class="hljs-keyword">let</span> i18n = loaded.i18n</div><div class="line">    <span class="hljs-keyword">return</span> <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bar</span> &#123;<span class="hljs-attr">...props</span>&#125; <span class="hljs-attr">i18n</span>=<span class="hljs-string">&#123;i18n&#125;</span> /&gt;</span></span></div><div class="line">  &#125;,</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>As an optimization, you can also decide to preload a component before it gets<br>rendered.</p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">const</span> LoadableBar = Loadable(&#123;</div><div class="line">  <span class="hljs-attr">loader</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./Bar'</span>),</div><div class="line">  <span class="hljs-attr">loading</span>: Loading,</div><div class="line">&#125;)</div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  state = &#123;</div><div class="line">    <span class="hljs-attr">showBar</span>: <span class="hljs-literal">false</span>,</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  onClick = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    <span class="hljs-keyword">this</span>.setState(&#123; <span class="hljs-attr">showBar</span>: <span class="hljs-literal">true</span> &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  onMouseOver = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;</div><div class="line">    LoadableBar.preload()</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></div><div class="line">        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">&#123;this.onClick&#125;</span> <span class="hljs-attr">onMouseOver</span>=<span class="hljs-string">&#123;this.onMouseOver&#125;</span>&gt;</span></div><div class="line">          showbar</div><div class="line">        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></div><div class="line">        &#123;this.state.showBar &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">LoadableBar</span> /&gt;</span>&#125;</div><div class="line">      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Server-side-rendering-to-see-Github"><a href="#Server-side-rendering-to-see-Github" class="headerlink" title="Server-side rendering to see Github"></a>Server-side rendering to see <a href="https://github.com/thejameskyle/react-loadable" target="_blank" rel="noopener">Github</a></h3>
        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-11-21T09:47:01.000Z">2017-11-21</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    a few seconds read (About 96 words)
                </span>
                
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/2017/11/21/Difference-between-Contract-Calling-in-Web3/">Difference Between Contract Calling in Web3</a>
            
        </h1>
        <div class="content">
            <p>After we get the instance of Contract(<code>testInstance</code>), we can invoke its method by three ways:</p>
<ul>
<li><p><code>testInstance.testFunc.sendTransaction()</code></p>
<ul>
<li>It will make a transaction which will be broadcasted into the net, use gas and return the <code>txHash</code></li>
</ul>
</li>
<li><p><code>testInstance.testFunc.call()</code></p>
<ul>
<li>Call the contract function in VM, no broadcast and no gas used, return the response from method</li>
</ul>
</li>
<li><p><code>testInstance.testFunc()</code></p>
<ul>
<li>If the testFunc is signified <code>constant</code>, which means it won’t change the state on chain, it won’t be executed(web3 will invoke it by <code>.call()</code>). If the testFunc is not <code>constant</code>, <code>sendTransaction()</code> will be invoked.</li>
</ul>
</li>
</ul>

        </div>
        
        
        
    </div>
</div>









    
<div class="card card-transparent">
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <div class="pagination-previous">
            <a class="is-flex-grow has-text-black-ter" href="/">Previous</a>
        </div>
        <div class="pagination-next">
            <a class="is-flex-grow has-text-black-ter" href="/page/3/">Next</a>
        </div>
        <ul class="pagination-list is-hidden-mobile">
            
            <li><a class="pagination-link has-text-black-ter" href="/">1</a></li>
            
            <li><a class="pagination-link is-current" href="/page/2/">2</a></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/3/">3</a></li>
            
            <li><span class="pagination-ellipsis has-text-black-ter">&hellip;</span></li>
            
            <li><a class="pagination-link has-text-black-ter" href="/page/16/">16</a></li>
            
        </ul>
    </nav>
</div>
</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    
                        <img class="image is-128x128 has-mb-6" src="/images/avatar.jpg" alt="Keith Chen">
                    
                    
                    <p class="is-size-4 is-block">
                        Keith Chen
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        FE Engineer on Blockchain
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>30°17&#39;37N, 120°9&#39;41E</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Posts
                    </p>
                    <p class="title has-text-weight-normal">
                        309
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Categories
                    </p>
                    <p class="title has-text-weight-normal">
                        7
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        Tags
                    </p>
                    <p class="title has-text-weight-normal">
                        93
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="https://github.com/keith-CY" target="_blank">
                Follow</a>
        </div>
        
        
    </div>
</div>
    
        
    
        

<div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Links
        </h3>
        <ul class="menu-list">
        
            <li>
                <a class="level is-mobile" href="https://github.com/keith-CY" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Keith CY</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">github.com</span>
                    </span>
                </a>
            </li>
        
            <li>
                <a class="level is-mobile" href="https://www.linkedin.com/in/宇-陈-644b61ba" target="_blank">
                    <span class="level-left">
                        <span class="level-item">Yu Chen</span>
                    </span>
                    <span class="level-right">
                        <span class="level-item tag">www.linkedin.com</span>
                    </span>
                </a>
            </li>
        
        </ul>
        </div>
    </div>
</div>


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                Categories
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/categories/Soup/">
            <span class="level-start">
                <span class="level-item">Soup</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/Uncategorized/">
            <span class="level-start">
                <span class="level-item">Uncategorized</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">2</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/categories/github/">
            <span class="level-start">
                <span class="level-item">github</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">4</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/github/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">1</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">141</span>
            </span>
        </a><ul><li>
        <a class="level is-marginless" href="/categories/note/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">19</span>
            </span>
        </a></li></ul></li><li>
        <a class="level is-marginless" href="/categories/workNote/">
            <span class="level-start">
                <span class="level-item">workNote</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Tag Cloud
        </h3>
        <a href="/tags/AJAX/" style="font-size: 10.91px;">AJAX</a> <a href="/tags/BOOTSTRAP/" style="font-size: 10px;">BOOTSTRAP</a> <a href="/tags/Bash/" style="font-size: 11.82px;">Bash</a> <a href="/tags/BlockChain/" style="font-size: 10px;">BlockChain</a> <a href="/tags/Blockchain/" style="font-size: 10px;">Blockchain</a> <a href="/tags/CORS/" style="font-size: 10px;">CORS</a> <a href="/tags/CSS/" style="font-size: 10.91px;">CSS</a> <a href="/tags/CSS3/" style="font-size: 20px;">CSS3</a> <a href="/tags/Closure/" style="font-size: 10px;">Closure</a> <a href="/tags/CommonJS/" style="font-size: 10px;">CommonJS</a> <a href="/tags/Contract-Ethereum-Web3/" style="font-size: 10px;">Contract, Ethereum, Web3</a> <a href="/tags/Contract-Solidity/" style="font-size: 10px;">Contract, Solidity</a> <a href="/tags/D3-Example/" style="font-size: 10px;">D3, Example</a> <a href="/tags/DAPP-Solidity/" style="font-size: 10px;">DAPP, Solidity</a> <a href="/tags/DApp-Solidity/" style="font-size: 10px;">DApp, Solidity</a> <a href="/tags/DOM/" style="font-size: 12.73px;">DOM</a> <a href="/tags/DevTools/" style="font-size: 10px;">DevTools</a> <a href="/tags/Drizzle-Ethereum-BlockChain/" style="font-size: 10px;">Drizzle, Ethereum, BlockChain</a> <a href="/tags/ES6/" style="font-size: 10.91px;">ES6</a> <a href="/tags/ESLint/" style="font-size: 10px;">ESLint</a> <a href="/tags/ETH-Wallet/" style="font-size: 10px;">ETH, Wallet</a> <a href="/tags/Elixir-Phoenix-SCSS/" style="font-size: 10px;">Elixir, Phoenix, SCSS</a> <a href="/tags/Erlang-Elixir-GenServer/" style="font-size: 10px;">Erlang, Elixir, GenServer</a> <a href="/tags/Ethereum/" style="font-size: 10px;">Ethereum</a> <a href="/tags/Ethereum-IPFS/" style="font-size: 10px;">Ethereum, IPFS</a> <a href="/tags/FP/" style="font-size: 10px;">FP</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/GitHub-Workflow/" style="font-size: 10px;">GitHub, Workflow</a> <a href="/tags/Go-Http-Web/" style="font-size: 10px;">Go, Http, Web</a> <a href="/tags/GraphQL-Apollo-TypeScript/" style="font-size: 10px;">GraphQL, Apollo, TypeScript</a> <a href="/tags/Gulp/" style="font-size: 11.82px;">Gulp</a> <a href="/tags/HTML5/" style="font-size: 15.45px;">HTML5</a> <a href="/tags/HTTP2-Node/" style="font-size: 10px;">HTTP2, Node</a> <a href="/tags/Html-Picture/" style="font-size: 10px;">Html, Picture</a> <a href="/tags/Immutable/" style="font-size: 10px;">Immutable</a> <a href="/tags/Int8Array/" style="font-size: 10px;">Int8Array</a> <a href="/tags/JSON-RPC/" style="font-size: 10px;">JSON-RPC</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Javascript/" style="font-size: 19.09px;">Javascript</a> <a href="/tags/Koa/" style="font-size: 10.91px;">Koa</a> <a href="/tags/Koa-NPM-Package/" style="font-size: 10px;">Koa, NPM, Package</a> <a href="/tags/MDL/" style="font-size: 16.36px;">MDL</a> <a href="/tags/Material-Design/" style="font-size: 17.27px;">Material Design</a> <a href="/tags/Mock-JavaScript/" style="font-size: 10px;">Mock, JavaScript</a> <a href="/tags/MySQL/" style="font-size: 10px;">MySQL</a> <a href="/tags/NODE/" style="font-size: 13.64px;">NODE</a> <a href="/tags/NPM/" style="font-size: 10.91px;">NPM</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Nock/" style="font-size: 10px;">Nock</a> <a href="/tags/Node-CLI/" style="font-size: 10.91px;">Node, CLI</a> <a href="/tags/Node-Fastify/" style="font-size: 10.91px;">Node, Fastify</a> <a href="/tags/Node-Graphql-Koa/" style="font-size: 10px;">Node, Graphql, Koa</a> <a href="/tags/Node-js/" style="font-size: 10.91px;">Node.js</a> <a href="/tags/Node-js-Nest-js/" style="font-size: 10px;">Node.js, Nest.js</a> <a href="/tags/Phoenix-Elixir-Ecto/" style="font-size: 10px;">Phoenix, Elixir, Ecto</a> <a href="/tags/Promise/" style="font-size: 11.82px;">Promise</a> <a href="/tags/Protobuf/" style="font-size: 10px;">Protobuf</a> <a href="/tags/Pug-HTML/" style="font-size: 10px;">Pug, HTML</a> <a href="/tags/React/" style="font-size: 18.18px;">React</a> <a href="/tags/React-Docker/" style="font-size: 10px;">React, Docker</a> <a href="/tags/React-Router-Code-splitting/" style="font-size: 10px;">React, Router, Code-splitting</a> <a href="/tags/React-Native/" style="font-size: 10px;">React-Native</a> <a href="/tags/React-Redux/" style="font-size: 10px;">React-Redux</a> <a href="/tags/React-Router/" style="font-size: 10.91px;">React-Router</a> <a href="/tags/Redux/" style="font-size: 14.55px;">Redux</a> <a href="/tags/RegExp/" style="font-size: 10px;">RegExp</a> <a href="/tags/Ruby-Rails/" style="font-size: 10px;">Ruby, Rails</a> <a href="/tags/Ruby-Rails-RoR-Mina/" style="font-size: 10px;">Ruby, Rails, RoR, Mina</a> <a href="/tags/Rust-Rocket/" style="font-size: 10px;">Rust, Rocket</a> <a href="/tags/RxJS/" style="font-size: 10px;">RxJS</a> <a href="/tags/Smart-Contract-Web3/" style="font-size: 10px;">Smart Contract, Web3</a> <a href="/tags/Solidity/" style="font-size: 12.73px;">Solidity</a> <a href="/tags/Solidity-Error-Handling/" style="font-size: 10px;">Solidity, Error Handling</a> <a href="/tags/Solidity-Public-External/" style="font-size: 10px;">Solidity, Public, External</a> <a href="/tags/Solidity-Smart-Contract/" style="font-size: 10px;">Solidity, Smart Contract</a> <a href="/tags/Thunk/" style="font-size: 10.91px;">Thunk</a> <a href="/tags/Trick/" style="font-size: 11.82px;">Trick</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/Webpack-DLL/" style="font-size: 10px;">Webpack, DLL</a> <a href="/tags/automatic/" style="font-size: 10px;">automatic</a> <a href="/tags/babel/" style="font-size: 10px;">babel</a> <a href="/tags/babel-polyfill/" style="font-size: 10px;">babel-polyfill</a> <a href="/tags/blockchain-bitcoin-bip/" style="font-size: 10.91px;">blockchain, bitcoin, bip</a> <a href="/tags/commandline/" style="font-size: 10px;">commandline</a> <a href="/tags/github/" style="font-size: 10.91px;">github</a> <a href="/tags/jQuery/" style="font-size: 10px;">jQuery</a> <a href="/tags/lecture-yc/" style="font-size: 10px;">lecture, yc</a> <a href="/tags/precache/" style="font-size: 10px;">precache</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/webpack/" style="font-size: 17.27px;">webpack</a> <a href="/tags/webpack2/" style="font-size: 11.82px;">webpack2</a> <a href="/tags/测试/" style="font-size: 11.82px;">测试</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/20/note-on-bip-173/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/segwit.png" alt="Note-on-Bip-173">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-20T08:36:54.000Z">2019-04-20</time></div>
                    <a href="/2019/04/20/note-on-bip-173/" class="has-link-black-ter is-size-6">Note-on-Bip-173</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[WIP]notes of Building Product, Talking to Users and Growing">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-17T03:32:32.000Z">2019-04-17</time></div>
                    <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="has-link-black-ter is-size-6">[WIP]notes of Building Product, Talking to Users and Growing</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            Recent
        </h3>
        
        <article class="media">
            
            <a href="/2019/10/10/Basic-components-in-nest-js/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/nestjs_components.png" alt="Basic Components in nest.js">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-10-10T06:26:41.000Z">2019-10-10</time></div>
                    <a href="/2019/10/10/Basic-components-in-nest-js/" class="has-link-black-ter is-size-6">Basic Components in nest.js</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/github_actions.png" alt="Snippet of GitHub Actions">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-09-16T07:14:02.000Z">2019-09-16</time></div>
                    <a href="/2019/09/16/Snippet-of-GitHub-Actions/" class="has-link-black-ter is-size-6">Snippet of GitHub Actions</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="Methods of the String in JavaScript ">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-30T06:26:54.000Z">2019-08-30</time></div>
                    <a href="/2019/08/30/Methods-of-the-String-in-JavaScript/" class="has-link-black-ter is-size-6">Methods of the String in JavaScript </a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/20/note-on-bip-173/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/gallery/thumbnails/segwit.png" alt="Note-on-Bip-173">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-20T08:36:54.000Z">2019-04-20</time></div>
                    <a href="/2019/04/20/note-on-bip-173/" class="has-link-black-ter is-size-6">Note-on-Bip-173</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/images/thumbnail.svg" alt="[WIP]notes of Building Product, Talking to Users and Growing">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-04-17T03:32:32.000Z">2019-04-17</time></div>
                    <a href="/2019/04/17/notes-of-building-product-talking-to-users-and-growing/" class="has-link-black-ter is-size-6">[WIP]notes of Building Product, Talking to Users and Growing</a>
                    <p class="is-size-7 is-uppercase">
                        
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            Archives
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2019/10/">
                <span class="level-start">
                    <span class="level-item">October 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/09/">
                <span class="level-start">
                    <span class="level-item">September 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/08/">
                <span class="level-start">
                    <span class="level-item">August 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">April 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">March 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">November 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/09/">
                <span class="level-start">
                    <span class="level-item">September 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/08/">
                <span class="level-start">
                    <span class="level-item">August 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/07/">
                <span class="level-start">
                    <span class="level-item">July 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/05/">
                <span class="level-start">
                    <span class="level-item">May 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/04/">
                <span class="level-start">
                    <span class="level-item">April 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/03/">
                <span class="level-start">
                    <span class="level-item">March 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/02/">
                <span class="level-start">
                    <span class="level-item">February 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">4</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/01/">
                <span class="level-start">
                    <span class="level-item">January 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/12/">
                <span class="level-start">
                    <span class="level-item">December 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">November 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">12</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/10/">
                <span class="level-start">
                    <span class="level-item">October 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">September 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">18</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/08/">
                <span class="level-start">
                    <span class="level-item">August 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">31</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/07/">
                <span class="level-start">
                    <span class="level-item">July 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">19</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/06/">
                <span class="level-start">
                    <span class="level-item">June 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">14</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/05/">
                <span class="level-start">
                    <span class="level-item">May 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">15</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/04/">
                <span class="level-start">
                    <span class="level-item">April 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">March 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/02/">
                <span class="level-start">
                    <span class="level-item">February 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">January 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/12/">
                <span class="level-start">
                    <span class="level-item">December 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">November 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/10/">
                <span class="level-start">
                    <span class="level-item">October 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/09/">
                <span class="level-start">
                    <span class="level-item">September 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">16</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/08/">
                <span class="level-start">
                    <span class="level-item">August 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">30</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">July 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">43</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">June 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">25</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/05/">
                <span class="level-start">
                    <span class="level-item">May 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">24</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/logo.png" alt="EzCook" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2019 Chen Yu&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>
                
                <br>
                <span id="busuanzi_container_site_uv">
                Visited by <span id="busuanzi_value_site_uv">0</span> users
                </span>
                
                </p>
            </div>
            <div class="level-end">
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>