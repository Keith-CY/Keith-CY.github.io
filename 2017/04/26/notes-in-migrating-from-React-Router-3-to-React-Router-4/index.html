<!DOCTYPE html>
<html  lang="en">

<head>
    <meta charset="utf-8">
<title>Notes in Migrating From React-Router-3 to React-Router-4 - EzCook</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />







<link rel="icon" href="/images/logo.png">

<link href="https://fonts.googleapis.com/css?family=Averia+Serif+Libre|DM+Serif+Text&display=swap" rel="stylesheet">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">




    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    



    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">







<link rel="stylesheet" href="/css/back-to-top.css">




<script async src="https://www.googletagmanager.com/gtag/js?id=UA-136207372-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-136207372-1');
</script>




<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>



    



    
        <script async="" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




<link rel="stylesheet" href="/css/style.css">
<script data-ad-client="ca-pub-8896169856986797" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/logo.png" alt="Notes in Migrating From React-Router-3 to React-Router-4" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">Home</a>
                
                <a class="navbar-item"
                href="/archives">Archives</a>
                
                <a class="navbar-item"
                href="/projects">Projects</a>
                
                <a class="navbar-item"
                href="https://wiki.digit-map.de/">Digit Map</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/keith-CY">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                    <a class="navbar-item" target="_blank" title="Gmail" href="mailto:keithwhisper@gmail.com">
                        
                        <i class="fas fa-envelope"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="Search" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>

    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2017-04-26T02:39:13.000Z">2017-04-26</time>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 minutes read (About 721 words)
                </span>
                
                
                <span class="level-item has-text-grey" id="busuanzi_container_page_pv">
                    <i class="far fa-eye"></i>
                    <span id="busuanzi_value_page_pv">0</span> visits
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                Notes in Migrating From React-Router-3 to React-Router-4
            
        </h1>
        <div class="content">
            <h1 id="HashRouter"><a href="#HashRouter" class="headerlink" title="HashRouter"></a>HashRouter</h1><p>Version 4 of React-Router seperate top level router element for the different history type. If you’re using version 4 you should be able to replace <code>&lt;Router hisotry={hashHistory}&gt;</code> with <code>&lt;HashRouter&gt;</code></p>
<h1 id="Multiple-Routes-at-same-URL"><a href="#Multiple-Routes-at-same-URL" class="headerlink" title="Multiple Routes at same URL"></a>Multiple Routes at same URL</h1><figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div></pre></td><td class="code"><pre><div class="line">import React from 'react'</div><div class="line">import &#123;</div><div class="line">  BrowserRouter as Router,</div><div class="line">  Route,</div><div class="line">  Link,</div><div class="line">&#125; from 'react-router-dom'</div><div class="line"></div><div class="line">// Each logical 'route' has two components, one for the sidebar and one for the main area. We want to render both of them in different places when the path matches the current URL.</div><div class="line"></div><div class="line">const routes = [</div><div class="line">  &#123;</div><div class="line">    path: '/',</div><div class="line">    exact: true,</div><div class="line">    sidebar: () =&gt; &lt;div&gt;Home&lt;/div&gt;,</div><div class="line">    main: () =&gt; &lt;h2&gt;Home&lt;/h2&gt;,</div><div class="line">  &#125;, &#123;</div><div class="line">    path: '/bubblegum',</div><div class="line">    sidebar: () =&gt; &lt;div&gt;bubblegum&lt;/div&gt;,</div><div class="line">    main: () =&gt; &lt;h2&gt;BubbleGum&lt;/div&gt;,</div><div class="line">  &#125;, &#123;</div><div class="line">    path: '/shoelaces',</div><div class="line">    sidebar: () =&gt; &lt;div&gt;shoelaces&lt;/div&gt;,</div><div class="line">    main: () =&gt; &lt;h2&gt;ShoeLaces&lt;/h2&gt;,</div><div class="line">  &#125;,</div><div class="line">]</div><div class="line"></div><div class="line">const sidebarExample = () =&gt; (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;div style=&#123;&#123; display: 'flex' &#125;&#125;&gt;</div><div class="line">      // sidebar</div><div class="line">      &lt;div style=&#123;&#123;</div><div class="line">        padding: '10px',</div><div class="line">        width: '40%',</div><div class="line">        background: '#f0f0f0',</div><div class="line">        &#125;&#125;</div><div class="line">      &gt;</div><div class="line">        &lt;ul&gt;</div><div class="line">          &lt;li&gt;&lt;Link to='/'&gt;Home&lt;/Link&gt;&lt;/li&gt;</div><div class="line">          &lt;li&gt;&lt;Link to='/bubblegum'&gt;Bubblegum&lt;/Link&gt;&lt;/li&gt;</div><div class="line">          &lt;li&gt;&lt;Link to='/shoelaces'&gt;ShoeLaces&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;/ul&gt;</div><div class="line"></div><div class="line">        &#123;routes.map((route, index) =&gt; (</div><div class="line">          // You can render a &lt;Router&gt; in as many places as you want in your app, it will render along with any other &lt;Router&gt;s that also match the URL.</div><div class="line">          // So a sidebar or breadcrumbs or anything else that requires you to render multiple things in multiple places at the same URL is nothing more than multiple &lt;Routes&gt;s</div><div class="line"></div><div class="line">          &lt;Route</div><div class="line">            key=&#123;index&#125;</div><div class="line">            path=&#123;route.path&#125;</div><div class="line">            exact=&#123;route.exact&#125;</div><div class="line">            component=&#123;route.sidebar&#125;</div><div class="line">          /&gt;</div><div class="line">        ))&#125;</div><div class="line">      &lt;/div&gt;</div><div class="line"></div><div class="line">      // main</div><div class="line">      &lt;div style=&#123;&#123; flex: 1, padding: '30px' &#125;&#125;&gt;</div><div class="line">        &#123;routes.map((route, index) =&gt; (</div><div class="line">          // Render more &lt;Route&gt;s with the same paths as above, but different components this time.</div><div class="line">          &lt;Route</div><div class="line">            key=&#123;index&#125;</div><div class="line">            path=&#123;route.path&#125;</div><div class="line">            exact=&#123;route.exact&#125;</div><div class="line">            component=&#123;route.main&#125;</div><div class="line">          /&gt;</div><div class="line">        ))&#125;</div><div class="line">      &lt;/div&gt;</div><div class="line"></div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div><div class="line">export default sidebarExample</div></pre></td></tr></table></figure>
<h1 id="Animated-Transitions"><a href="#Animated-Transitions" class="headerlink" title="Animated Transitions"></a>Animated Transitions</h1><figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span></div><div class="line"><span class="hljs-keyword">import</span> ReactCSSTransitionGroup <span class="hljs-keyword">from</span> <span class="hljs-string">'react-addons-css-transition-group'</span></div><div class="line"><span class="hljs-keyword">import</span> &#123;</div><div class="line">  BrowserRouter <span class="hljs-keyword">as</span> Router,</div><div class="line">  Route,</div><div class="line">  Link,</div><div class="line">  Redirect,</div><div class="line">&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-rotuer-dom'</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// you'll need this CSS somewhere</span></div><div class="line"><span class="hljs-comment">// .fade-enter &#123;</span></div><div class="line"><span class="hljs-comment">//   opacity: 0;</span></div><div class="line"><span class="hljs-comment">//   z-index: 1;</span></div><div class="line"><span class="hljs-comment">// &#125;</span></div><div class="line"><span class="hljs-comment">// .fade-enter.face-enter-active &#123;</span></div><div class="line"><span class="hljs-comment">//   opacity: 1;</span></div><div class="line"><span class="hljs-comment">//   transition: opacity 250ms ease-in;</span></div><div class="line"><span class="hljs-comment">// &#125;</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> AnimationExample = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;Route render=&#123;(&#123; location &#125;) =&gt; (</div><div class="line">      &lt;div style=&#123;style.fill&#125;&gt;</div><div class="line">        &lt;Route exact path='/' render=&#123;() =&gt; (</div><div class="line">          &lt;Redirect to='/10/20/50' /&gt;</div><div class="line">        )&#125;/&gt;</div><div class="line">        &lt;ul style=&#123;style.nav&#125;&gt;</div><div class="line">          &lt;NavLink to='/10/90/50'&gt;Red&lt;/NavLink&gt;</div><div class="line">          &lt;NavLink to='/120/100/40'&gt;Green&lt;/NavLink&gt;</div><div class="line">          &lt;NavLink to='/200/100/40'&gt;Blue&lt;/NavLink&gt;</div><div class="line">          &lt;NavLink to='/310/100/50'&gt;Pink&lt;/NavLink&gt;</div><div class="line">        &lt;/ul&gt;</div><div class="line"></div><div class="line">        &lt;div style=&#123;style.content&#125;&gt;</div><div class="line">          &lt;ReactCSSTransitionGroup</div><div class="line">            transitionName='fade'</div><div class="line">            transitionEnterTimeout=&#123;300&#125;</div><div class="line">            transitionLeaveTimeout=&#123;300&#125;</div><div class="line">          &gt;</div><div class="line">            // no different than other usage of ReactCSSTransitionGroup, just make sure to pass `location` to `Route` so it can match the old location as it animate out</div><div class="line">            &lt;Route</div><div class="line">              location=&#123;loaction&#125;</div><div class="line">              key=&#123;location.key&#125;</div><div class="line">              path="/:h/:s/:l"</div><div class="line">              component=&#123;HSL&#125;</div><div class="line">            /&gt;</div><div class="line">          &lt;/ReactCSSTransitionGroup&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )&#125;/&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const NavLink = (props) =&gt; (</div><div class="line">  &lt;li&gt;&lt;Link &#123;...props&#125; style=&#123;&#123;color: 'inherit'&#125;&#125; /&gt;&lt;/li&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const HSL = (&#123; match: &#123; params &#125;&#125;) =&gt; (</div><div class="line">  &lt;div style=&#123;&#123;</div><div class="line">    ...style.fill,</div><div class="line">    ...style.hsl,</div><div class="line">    background: `hsl($&#123;params.h&#125;%, $&#123;params.s&#125;%, $&#123;params.l&#125;%)`</div><div class="line">  &#125;&#125;&gt;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div><div class="line"></div><div class="line">export default AnimationExample</div></pre></td></tr></table></figure>
<h1 id="Route-Config"><a href="#Route-Config" class="headerlink" title="Route Config"></a>Route Config</h1><figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div></pre></td><td class="code"><pre><div class="line">import React from 'react'</div><div class="line">import &#123;</div><div class="line">  BrowserRouter as Router,</div><div class="line">  Route,</div><div class="line">  Link,</div><div class="line">&#125; from 'react-router-dom'</div><div class="line"></div><div class="line">// Some folks find value in a centralized route config. A route config is just data. React is great at mapping data into component, and &lt;Route&gt; is a component.</div><div class="line"></div><div class="line">// first our route component</div><div class="line"></div><div class="line">const Main = () =&gt; &lt;h2&gt;Main&lt;/h2&gt;</div><div class="line"></div><div class="line">const Sandwiches = () =&gt; &lt;h2&gt;Sandwiches&lt;/h2&gt;</div><div class="line"></div><div class="line">const Tacos = (&#123; routes &#125;) =&gt; (</div><div class="line">  &lt;div&gt;</div><div class="line">    &lt;h2&gt;Tacos&lt;/h2&gt;</div><div class="line">    &lt;ul&gt;</div><div class="line">      &lt;li&gt;&lt;Link to='/tacos/bus'&gt;Bus&lt;/Link&gt;&lt;/li&gt;</div><div class="line">      &lt;li&gt;&lt;Link to='/tacos/cart'&gt;Cart&lt;/Link&gt;&lt;/li&gt;</div><div class="line">    &lt;/ul&gt;</div><div class="line"></div><div class="line">    &#123;routes.map((route, index) =&gt; (</div><div class="line">      &lt;RouteWithSubRoutes key=&#123;index&#125; &#123;...route&#125;/&gt;</div><div class="line">    ))&#125;</div><div class="line">  &lt;/div&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const Bus = () =&gt; &lt;div&gt;Bus&lt;/div&gt;</div><div class="line">const Cart = () =&gt; &lt;div&gt;Cart&lt;/div&gt;</div><div class="line"></div><div class="line">// then our route config</div><div class="line"></div><div class="line">const routes = [</div><div class="line">  &#123;</div><div class="line">    path: '/sandwiches',</div><div class="line">    component: sandwiches,</div><div class="line">  &#125;, &#123;</div><div class="line">    path: '/tacos',</div><div class="line">    component: Tacos,</div><div class="line">    routes: [</div><div class="line">      &#123;</div><div class="line">        path: '/tacos/bus',</div><div class="line">        component: Bus,</div><div class="line">      &#125;, &#123;</div><div class="line">        path: '/tacos/cart',</div><div class="line">        component: Cart,</div><div class="line">      &#125;,</div><div class="line">    ],</div><div class="line">  &#125;,</div><div class="line">]</div><div class="line"></div><div class="line">// wrap &lt;Route&gt; and use this everywhere instead, then when sub routes are added to any route it'll work</div><div class="line"></div><div class="line">const RouteWithSubRoutes = (route) =&gt; (</div><div class="line">  &lt;Route path=&#123;route.path&#125; render=&#123;props =&gt; (</div><div class="line">    // pass the sub-routes down to keep nesting</div><div class="line">    &lt;route.component &#123;...props&#125; routes=&#123;route.routes&#125; /&gt;</div><div class="line">  )&#125;/&gt;</div><div class="line">)</div><div class="line"></div><div class="line">const RouteConfigExample = () =&gt; (</div><div class="line">  &lt;Router&gt;</div><div class="line">    &lt;div&gt;</div><div class="line">      &lt;ul&gt;</div><div class="line">        &lt;li&gt;&lt;Link to='/tacos'&gt;Tacos&lt;/Link&gt;&lt;/li&gt;</div><div class="line">        &lt;li&gt;&lt;Link to='/sandwiches'&gt;Sandwiches&lt;/Link&gt;&lt;/li&gt;</div><div class="line">      &lt;/ul&gt;</div><div class="line">      &#123;routes.map((route, index) =&gt; (</div><div class="line">        &lt;RouteWithSubRoutes key=&#123;index&#125; &#123;...route&#125; /&gt;</div><div class="line">      ))&#125;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/Router&gt;</div><div class="line">)</div><div class="line"></div><div class="line">export default RouteConfigExample</div></pre></td></tr></table></figure>
<h1 id="Redux-Integration"><a href="#Redux-Integration" class="headerlink" title="Redux Integration"></a>Redux Integration</h1><p>Generally, React Router and Redux work just fine together. Occasionally though, an app have a component that doesn’t update when the location changes (child route or active nav links don’t update)</p>
<p>This happens if:</p>
<blockquote>
<p>The component is connected to redux via <code>connect()(Comp)</code> The component is <em>not</em> a “route component”, meaning it is not rendered like so: <code>&lt;Route component={SomeConnectedThing}/&gt;</code></p>
</blockquote>
<p>The problem is that Redux implements <code>shouldComponentUpdate</code> and there’s no indication that anything has changed if it isn’t receiving props from the router. This is straightforward to fix. Find where you connect your component and wrap it in <code>withRouter</code></p>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> &#123; withRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span></div><div class="line"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> withRouter(connect(mapStateToProps)(Comp))</div></pre></td></tr></table></figure>
<h1 id="Code-Splitting"><a href="#Code-Splitting" class="headerlink" title="Code Splitting"></a>Code Splitting</h1><p>One great feature of the web is that we don’t have to make our visitors download the entire app before they can use it. You can think of code spliting as incrementally downloading the app. While there are other tools for the job, react-router use <code>webpack</code> and the <code>bundle loader</code>.</p>
<figure class="highlight hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">import loadSomething from 'bundle-loader?lazy!./Something'</div><div class="line"></div><div class="line">&lt;Bundle load=&#123;loadSomething&#125;&gt;</div><div class="line">  &#123;(mod) =&gt; (</div><div class="line">    // do something w/ the module</div><div class="line">  )&#125;</div><div class="line">&lt;/Bundle&gt;</div><div class="line"></div><div class="line">&lt;Bundle load=&#123;loadSomething&#125;&gt;</div><div class="line">  &#123;</div><div class="line">    (Comp) =&gt; Comp</div><div class="line">    ? &lt;Comp/&gt;</div><div class="line">    : &lt;Loading/&gt;</div><div class="line">  &#125;</div><div class="line">&lt;/Bundle&gt;</div><div class="line"></div><div class="line">import React, &#123; Component &#125; from 'react'</div><div class="line"></div><div class="line">class Bundle extends Component &#123;</div><div class="line">  state = &#123;</div><div class="line">    // short for 'module' but that's a keyword in js. so 'mod'</div><div class="line">    mod: null,</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentWillMount () &#123;</div><div class="line">    this.load(this.props)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  componentWillReceiveProps (nextProps) &#123;</div><div class="line">    if (nextProps.load !== this.props.load) &#123;</div><div class="line">      this.load(nextProps)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  load (props) &#123;</div><div class="line">    this.setState(&#123;</div><div class="line">      mod: null,</div><div class="line">    &#125;)</div><div class="line">    props.load((mod) =&gt; &#123;</div><div class="line">      this.setState(&#123;</div><div class="line">        // handle both es imports and cjs</div><div class="line">        mod: mod.default ? mod.default : mod</div><div class="line">      &#125;)</div><div class="line">    &#125;)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render () &#123;</div><div class="line">    return this.props.children(this.state.mod)</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">export default Bundle</div><div class="line"></div><div class="line"></div><div class="line">&lt;Bundle load=&#123;() =&gt; import('./something')&#125;&gt;</div><div class="line">  &#123;(mod) =&gt; ()&#125;</div><div class="line">&lt;/Bundle&gt;</div></pre></td></tr></table></figure>
<figure class="highlight javascript hljs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="hljs-keyword">import</span> loadAbout <span class="hljs-keyword">from</span> <span class="hljs-string">'bundle-load?lazy!./loadAbout'</span></div><div class="line"><span class="hljs-keyword">import</span> loadDashboard <span class="hljs-keyword">from</span> <span class="hljs-string">'bundle-loader?lazy!./loadDashboard'</span></div><div class="line"></div><div class="line"><span class="hljs-comment">// components load their module for initial visit</span></div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> About = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (</div><div class="line">  <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bundle</span> <span class="hljs-attr">load</span>=<span class="hljs-string">&#123;loadAbout&#125;</span>&gt;</span></span></div><div class="line">    &#123;(About) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">About</span> /&gt;</span>&#125;</div><div class="line">  <span class="hljs-tag">&lt;/<span class="hljs-name">Bundle</span>&gt;</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="hljs-keyword">const</span> Dashboard = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (</div><div class="line">  <span class="hljs-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Bundle</span> <span class="hljs-attr">load</span>=<span class="hljs-string">&#123;loadDashboard&#125;</span>&gt;</span></span></div><div class="line">    &#123;(Dashboard) =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Dashboard</span> /&gt;</span>&#125;</div><div class="line">  <span class="hljs-tag">&lt;/<span class="hljs-name">Bundle</span>&gt;</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>&#123;</div><div class="line">  componentDidMount () &#123;</div><div class="line">    <span class="hljs-comment">// preload the rest</span></div><div class="line">    loadAbout( <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;&#125; )</div><div class="line">    loadDashboard( <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> &#123;&#125; )</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render () &#123;</div><div class="line">    <span class="hljs-keyword">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;h1&gt;Welcome&lt;/h1&gt;</div><div class="line">        &lt;Route path='/about' component=&#123;About&#125; /&gt;</div><div class="line">        &lt;Route path='/dashbaord' component=&#123;Dashboard&#125; /&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ReactDOM.render(&lt;App /&gt;, document.preloadTheRestOfTheApp)</div></pre></td></tr></table></figure>

        </div>
        
        <div class="level is-size-7 is-uppercase">
            <div class="level-start">
                <div class="level-item">
                    <span class="is-size-6 has-text-grey has-mr-7">#</span>
                    <a class="has-link-grey -link" href="/tags/React/">React</a>
                </div>
            </div>
        </div>
        
        
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="menu-label has-text-centered">Like this article? Support the author with</h3>
        <div class="buttons is-centered">
            
                <!-- Visit https://www.paypal.com/donate/buttons/ to get your donate button -->

<a class="button is-warning donate" onclick="document.getElementById(&#39;paypal-donate-form&#39;).submit()">
    <span class="icon is-small">
        <i class="fab fa-paypal"></i>
    </span>
    <span>Paypal</span>
</a>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank" id="paypal-donate-form">
    <input type="hidden" name="cmd" value="_donations" />
    <input type="hidden" name="business" value="chen.yu.keith@foxmail.com" />
    <input type="hidden" name="currency_code" value="USD" />
</form>

                
        </div>
    </div>
</div>



<div class="card card-transparent">
    <div class="level post-navigation is-flex-wrap is-mobile">
        
        <div class="level-start">
            <a class="level level-item has-link-grey  article-nav-prev" href="/2017/04/27/webpackDevServer-Proxy/">
                <i class="level-item fas fa-chevron-left"></i>
                <span class="level-item">webpackDevServer Proxy</span>
            </a>
        </div>
        
        
        <div class="level-end">
            <a class="level level-item has-link-grey  article-nav-next" href="/2017/04/25/learning-d3/">
                <span class="level-item">Learning D3</span>
                <i class="level-item fas fa-chevron-right"></i>
            </a>
        </div>
        
    </div>
</div>



<div class="card">
    <div class="card-content">
        <h3 class="title is-5 has-text-weight-normal">Comments</h3>
        
<div id="comment-container"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
	var gitment = new Gitment({
		id: '2017/04/26/notes-in-migrating-from-React-Router-3-to-React-Router-4/',
		owner: 'Keith-CY',
		repo: 'Keith-CY.github.io',
		oauth: {
			client_id: '56319e1ce36ed4313555',
			client_secret: 'ca7f10a8357d52290f5509fb54e5173a8bea0a5d',
		},
	})
	gitment.render('comment-container')
</script>

    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("en");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
});
</script>

    
    

<a id="back-to-top" title="Back to Top" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    
    
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>

</html>
