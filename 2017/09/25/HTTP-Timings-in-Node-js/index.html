<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  <title>HTTP Timings in Node.js | EzCook</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Origin Some Basic Concepts: IP(Internet Protocol): IP is a network-layer protocol, deals with network addressing and routing. IP is responsible for delivering packets from the source host to the desti">
<meta property="og:type" content="article">
<meta property="og:title" content="HTTP Timings in Node.js">
<meta property="og:url" content="http://yoursite.com/2017/09/25/HTTP-Timings-in-Node-js/index.html">
<meta property="og:site_name" content="EzCook">
<meta property="og:description" content="Origin Some Basic Concepts: IP(Internet Protocol): IP is a network-layer protocol, deals with network addressing and routing. IP is responsible for delivering packets from the source host to the desti">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://blog-assets.risingstack.com/2017/09/http-timing-nodejs.png">
<meta property="og:updated_time" content="2017-09-25T03:30:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HTTP Timings in Node.js">
<meta name="twitter:description" content="Origin Some Basic Concepts: IP(Internet Protocol): IP is a network-layer protocol, deals with network addressing and routing. IP is responsible for delivering packets from the source host to the desti">
<meta name="twitter:image" content="https://blog-assets.risingstack.com/2017/09/http-timing-nodejs.png">
  
    <link rel="alternate" href="/atom.xml" title="EzCook" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/typing.css">
</head>

  
    
      <body class="dark">
    
  
      <div id="container" class="container">
        <article id="post-HTTP-Timings-in-Node-js" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav id="main-nav" class="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    
      <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
    
  </nav>
</header>

  <hr/>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      HTTP Timings in Node.js
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <p><a href="https://blog.risingstack.com/measuring-http-timings-node-js/" target="_blank" rel="external">Origin</a></p>
<h3 id="Some-Basic-Concepts"><a href="#Some-Basic-Concepts" class="headerlink" title="Some Basic Concepts:"></a>Some Basic Concepts:</h3><ul>
<li><p>IP(Internet Protocol): IP is a network-layer protocol, deals with network addressing and routing. IP is responsible for delivering packets from the source host to the destination host based on the packet headers across one or more IP network. It also defines packet structures that encapsulate the data to be delivered.</p>
</li>
<li><p>DNS(Domain Name Server): DNS is a hierarchical decentralized naming system used to resolve human-readable hostnames into machine-readable IP address.</p>
</li>
<li><p>TCP(Transmission Control Protocol): The TCP standard defines how to establish and maintain a network conversation between applications to exchange data. TCP provides reliable, ordered, and error-checked deliver of a stream of octects between applications running on hosts communicating over an IP network. An HTTP client initiates a request by establishing a TCP connection.</p>
</li>
<li><p>SSL(Secure Sockets Layer)/TLS(Transport Layer Security): TLS is a cryptographic protocol that provides communications security over a computer network. SSL is a deprecated predecessor to TLS. Both TLS and SSL use certificates to establish a secure connection. SSL certificates are not dependent on cryptographic protocols like TLS, a certificate contains a key pair: a public and a private key.</p>
</li>
</ul>
<p><img src="https://blog-assets.risingstack.com/2017/09/http-timing-nodejs.png" alt=""></p>
<p>Timings Explained:</p>
<ul>
<li><p>DNS Lookup: Time spent performing the DNS Lookup. DNS lookup resolves domain names to IP addresses.</p>
</li>
<li><p>TCP Connection: Time it took to establish TCP Connection between a source host and destination host. Connections must be properly established in a multi-step handshake process.</p>
</li>
<li><p>TLS handshake: Time spent completing a TLS handshake. During the handshake process endpoints exchange authentication and keys to establish or resume secure sessions. There is no TLS handshake with a not HTTPS request.</p>
</li>
<li><p>Time To First Byte(TTFB): Time spent waiting for the initial response. This time captures the latency of a round trip to the server in addition to the time spent waiting for the server to process the request and deliver the response.</p>
</li>
<li><p>Content Transfer: Time spent receiving the response data. The size of the response data and the available network bandwidth determinates its duration.</p>
</li>
</ul>
<h3 id="Measuring-HTTP-timings-in-Node-js"><a href="#Measuring-HTTP-timings-in-Node-js" class="headerlink" title="Measuring HTTP timings in Node.js"></a>Measuring HTTP timings in Node.js</h3><p>To measure HTTP timings in Node.js, we need to subscribe to a specific request, response and socket events. Here is a short code snippet how to do this.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">const timings = &#123;</div><div class="line">  startAt: process.hrtime(),</div><div class="line">  dnsLookupAt: undefined,</div><div class="line">  tcpConnectionAt: undefined,</div><div class="line">  tlsHandshakeAt: undefined,</div><div class="line">  firstByteAt: undefined,</div><div class="line">  endAt: undefined,</div><div class="line">&#125;</div><div class="line"></div><div class="line">const req = http.request(&#123;...&#125;, (res) =&gt; &#123;</div><div class="line">  res.once('readable', () =&gt; &#123;</div><div class="line">    timings.firstByteAt = process.hrtime()</div><div class="line">  &#125;)</div><div class="line">  res.on('data', (chunk) =&gt; &#123;</div><div class="line">    responseBody += chunk</div><div class="line">  &#125;)</div><div class="line">  res.on('end', () =&gt; &#123;</div><div class="line">    timings.endAt = process.hrtime()</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">req.on('socket', (socket) =&gt; &#123;</div><div class="line">  socket.on('lookup', () =&gt; &#123;</div><div class="line">    timings.dnsLookupAt = process.hrtime()</div><div class="line">  &#125;)</div><div class="line">  socket.('connect', () =&gt; &#123;</div><div class="line">    timings.tcpConnectionAt = process.hrtime()</div><div class="line">  &#125;)</div><div class="line">  socket.on('secureConnect, () =&gt; &#123;</div><div class="line">    timings.tlsHandshake = process.hrtime()</div><div class="line">  &#125;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2017/09/25/HTTP-Timings-in-Node-js/" class="article-date">
  <time datetime="2017-09-25T02:49:47.000Z" itemprop="datePublished">2017-09-25</time>
</a>

        </li>
        
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <a href="/2017/09/25/Methods-of-Observable/" id="article-nav-newer" class="article-nav-link-wrap newer">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Methods of Observable
        
      </div>
    </a>
  
  
    <a href="/2017/09/15/graphql-koa-starter/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">graphql-koa-starter</div>
    </a>
  
</nav>


  
</article>




      </div>
      
    <footer id="footer" class="post-footer footer">
      <hr/>
      <div id="footerContent" class="footer-content">
        <p>Write for Archive</p>


      </div>
    </footer>

      

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/typing.js"></script>
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->







    </div>
  </body>
</html>
